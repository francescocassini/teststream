{"0": {"file": "Robotics2_17.07.11.pdf", "date": "17-07-11", "num_ex": 0, "exam": "robo2", "question": "For the RPP cylindrical robot in Fig. 1, using the generalized coordinates de\ufb01ned therein, provide thesymbolic expression of each term of the dynamic model that appears in the control law\u03c4=M(q)\u00a8qd+C(q,\u02d9q)\u02d9qd+g(q) +KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q),KP>0,KD>0, (1)so that global asymptotic tracking of a desired joint trajectory qd(t)\u2208C2is guaranteed. Joint axis 3 hasa DH offset a2\u0338= 0 from joint axis 2. Moreover, the center of mass of links 1 and 3 is placed on the jointaxis having the same index, while the center of mass of link 2 is at a distance r2>0 from joint axis 2.\u43a9!\u43a9!\u43a9!m1 I1 m2 I2 m3 I3 q1 q2 q3Figure 1: A RPP cylindrical robot with its generalized coordinates q= (q1, q2, q3).", "solution": "Following a Lagrangian approach, we compute \ufb01rst the kinetic energy T=T1+T2+T3. We haveT1=12I1\u02d9q21T2=12I2\u02d9q21+12m2(r22\u02d9q21+ \u02d9q22)T3=12I3\u02d9q21+12m3((a22+q23)\u02d9q21+ \u02d9q22+ \u02d9q23+ 2a2\u02d9q1\u02d9q3)\u21d2T=12\u02d9qTM(q)\u02d9q,withM(q) =\uf8eb\uf8ec\uf8edI1+I2+I3+m2r22+m3a22+m3q23 0m3a20 m2+m3 0m3a2 0m3\uf8f6\uf8f7\uf8f8. (3)In order to guarantee global asymptotic trajectory tracking for the control law (1), the factorizationc(q,\u02d9q) =C(q,\u02d9q)\u02d9qof the Coriolis and centrifugal terms should be such that \u02d9M\u22122Cis a skew-symmetricmatrix. This is automatically guaranteed if the components of the Coriolis and centrifugal vector c(q,\u02d9q)are computed using the Christoffel\u2019s symbols, i.e.,ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i = 1,2,3, (4)beingmitheith column of the inertia matrix M. De\ufb01neI0=I1+I2+I3+m2r22+m3a22, so thatm11(q) =I0+m3q23.I0is one of the three dynamic coefficients in the complete robot model, the othertwo beingm3(a2is a kinematic parameter supposed to be known) and ( m2+m3). Using (4), we obtainC1(q) =\uf8eb\uf8ec\uf8ed0 0m3q30 0 0m3q30 0\uf8f6\uf8f7\uf8f8\u21d2c1(q,\u02d9q) = 2m3q3\u02d9q1\u02d9q3,C2(q) =0 \u21d2c2(q,\u02d9q) = 0,C3(q) =\uf8eb\uf8ec\uf8ed\u2212m3q30 00 0 00 0 0\uf8f6\uf8f7\uf8f8\u21d2c3(q,\u02d9q) =\u2212m3q3\u02d9q21.A factorization that satis\ufb01es the skew-symmetric property is then given byC(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u02d9qTC1(q)\u02d9qTC2(q)\u02d9qTC3(q)\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8edm3q3\u02d9q30m3q3\u02d9q10 0 0\u2212m3q3\u02d9q10 0\uf8f6\uf8f7\uf8f8. (5)For the potential energy due to gravity, Ug=U1+U2+U3, we have (up to a constant)U1= 0, U 2=m2g0q2, U 3=m3g0q2,and thusg(q) =(\u2202Ug(q)\u2202q)T=\uf8eb\uf8ec\uf8ed0(m2+m3)g00\uf8f6\uf8f7\uf8f8. (6)Summarizing, the terms from the robot dynamics used in the control law (1) are given by (3), (5), and (6).3", "robot": "RPP", "tags": []},
 "1": {"file": "Robotics2_17.07.11.pdf", "date": "17-07-11", "num_ex": 1, "exam": "robo2", "question": "Consider a Cartesian robot moving in a vertical place and having its end effector constrained to an ideal(rigid, frictionless) linear surface tilted by an acute angle \u03b1 > 0 from thex-axis, as in Fig. 2. For thisrobot in constrained motion, provide the explicit symbolic expressions of\u2022the reduced dynamics , i.e., the differential equation relating the pseudo-acceleration \u02d9 v\u2208Rto thepseudo-velocity v\u2208R, the con\ufb01guration q\u2208R2, and the input forces at the joints u\u2208R2;\u2022the multiplier\u03bb\u2208R, i.e., the scalar reaction force that would act on the robot end effector whenattempting to violate the geometric constraint.Is it possible, by a suitable choice of u, to realize a uniform motion with constant velocity v=Von thesurface, while inducing no reaction force, i.e., with \u03bb= 0? If so, when and how?xq2 y     ! ! g \u43a9!m1 m2\u43a9!q1 !Figure 2: A PP robot with the end effector in constrained motion on a linear surface.1", "solution": "The dynamic model of the PP robot in free motion isM\u00a8q+g=u\u21d0\u21d2(m1+m2)\u00a8q1+ (m1+m2)g0=u1m2\u00a8q2=u2.The linear constraint on the end-effector position is expressed by its implicit form1in terms of the angle\u03b1as (note the exchanged order of joint variables!)r=(rxry)=(q2q1)=f(q), k (r) =rxsin\u03b1\u2212rycos\u03b1+k0= 0\u21d2h(q) =k(f(q)) =\u2212q1cos\u03b1+q2sin\u03b1+k0= 0.Accordingly, the constraint Jacobian Ais a constant, 1\u00d72 matrix (always of full rank)A=\u2202h(q)\u2202q=(\u2212cos\u03b1sin\u03b1)The kinematic constraint isA\u02d9q= 0\u21d2 \u2212 \u02d9q1cos\u03b1+ \u02d9q2sin\u03b1= 0.The dynamic model of the PP robot constrained to the surface becomesM\u00a8q+g=u+AT\u03bbs.t.h(q) = 0\u21d0\u21d2(m1+m2)\u00a8q1+ (m1+m2)g0=u1\u2212\u03bbcos\u03b1m2\u00a8q2=u2+\u03bbsin\u03b1s.t.\u2212q1cos\u03b1+q2sin\u03b1+k0= 0.To proceed with the reduced dynamics approach, we can border Awith a row matrix D, so as to build a(globally) nonsingular matrix:(AD)=(\u2212cos\u03b1sin\u03b1sin\u03b1cos\u03b1)\u21d2(AD)\u22121=(\u2212cos\u03b1sin\u03b1sin\u03b1cos\u03b1)=(E F).The pseudo-velocity vthat automatically satis\ufb01es the differential constraint is given byv=D\u02d9q= \u02d9q1sin\u03b1+ \u02d9q2cos\u03b1,whereas the admissible joint velocities and accelerations are given by\u02d9q=Fv=(sin\u03b1cos\u03b1)v, \u00a8q=F\u02d9v=(sin\u03b1cos\u03b1)\u02d9v.SinceFTMF =(sin\u03b1cos\u03b1)(m1+m200m2)(sin\u03b1cos\u03b1)=m1sin2\u03b1+m2FTg=(sin\u03b1cos\u03b1)((m1+m2)g00)= (m1+m2)g0sin\u03b1the reduced dynamic model is given by(FTMF)\u02d9v+FTg=FTu\u21d0\u21d2 (m1sin2\u03b1+m2) \u02d9v+ (m1+m2)g0sin\u03b1=u1sin\u03b1+u2cos\u03b1,(7)1The geometric expression of a line in a plane ( rx,ry) having an angular coefficient m= tan\u03b1, for\u03b1\u2208(0,\u03c0/2),isry= (tan\u03b1)rx+\u03b2. Multiplying by cos \u03b1\u0338= 0, one easily obtains the expression k(r) = 0, where k0=\u03b2cos\u03b1.4while, beingET=(\u2212cos\u03b1sin\u03b1), the force multiplier is given by\u03bb=ET(MF \u02d9v+g\u2212u)\u21d0\u21d2\u03bb=\u2212m1cos\u03b1sin\u03b1\u02d9v\u2212(m1+m2)g0cos\u03b1+u1cos\u03b1\u2212u2sin\u03b1.(8)Note that for \u03b1=\u03c0/2, equations (7\u20138) collapse to(m1+m2) \u02d9v+ (m1+m2)g0=u1, \u03bb =\u2212u2,showing in particular that each force applied by the second actuator will result in an equal reaction forcein the opposite direction.Finally, it is possible to maintain a uniform motion with constant velocity v=Von the linear surfacewithout having a reaction force \u03bb= 0 at all times, under following (necessary and sufficient) conditions:\u2022the robot is in an initial con\ufb01guration q0satisfyingh(q0) = 0, i.e., the end effector is already on thelinear surface;\u2022the robot has an initial velocity \u02d9q0satisfyingA\u02d9q0= 0 and such that \u2225\u02d9r0\u2225=Vor\u02d9q0=V(sin\u03b1cos\u03b1)\u21d2 \u02d9r0=V(cos\u03b1sin\u03b1)i.e, the end-effector velocity is tangential to the surface and has the right module;\u2022the inputuis computed by solving eqs. (7\u20138) for \u02d9 v= 0 and\u03bb= 0, or(m1+m2)g0(sin\u03b1cos\u03b1)=(sin\u03b1 cos\u03b1cos\u03b1\u2212sin\u03b1)(u1u2)\u21d2u=(u1u2)=((m1+m2)g00);namely, it is sufficient that the \ufb01rst actuator sustains the total gravity load of the robot.", "robot": "unknown", "tags": ["vertical"]},
 "2": {"file": "Robotics2_17.07.11.pdf", "date": "17-07-11", "num_ex": 2, "exam": "robo2", "question": "Consider a planar 3R robot, with equal link lengths \u2113= 0.4 m and equal, uniformly distributed link massesm= 2.5 kg, that moves in a vertical plane. The generalized coordinates q\u2208R3are de\ufb01ned by a standardDenavit-Hartenberg convention. Under the action of the Cartesian control law (with gravity cancelation)\u03c4=JT(q)KP(pd\u2212p(q))\u2212KD\u02d9q+g(q), (2)wherepd=(1.17 0.2)T,KP= 400\u00b7I2\u00d72,KD= 40\u00b7I2\u00d72, andp(q) is the direct kinematics of theend-effector position, the robot has reached the equilibrium condition shown in Fig. 3, in which the \ufb01rstlink is in contact with a rigid obstacle. In this steady state, determine the numerical values of\u2022the control torque \u03c4\u2208R3at the joints;\u2022the joint torque \u03c4c\u2208R3at the joints due to the contact force Fc\u2208R2acting on the \ufb01rst link;\u2022the momentum-based residual r\u2208R3for collision detection/isolation, when KI= 10\u00b7I3\u00d73;\u2022if possible, the components of the contact force Fcacting on the \ufb01rst link (expressed in frame RF0or in frame RF1).x0pd y0p 1.17 0.1 0.2     ! ! gFigure 3: A planar 3R in contact with a rigid obstacle.[210 minutes; open books but no computer or smartphone]2", "solution": "The direct kinematics for the end-effector position of the planar 3R robot with equal link lengths \u2113andstandard DH angles isp=p(q) =\u2113(cosq1+ cos(q1+q2) + cos(q1+q2+q3)sinq1+ sin(q1+q2) + sin(q1+q2+q3))=\u2113(c1+c12+c123s1+s12+s123),where a shorthand notation has been introduced. The associated analytic Jacobian matrix isJ(q) =\u2202p(q)\u2202q=\u2113(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123).The equilibrium con\ufb01guration of the robot in Fig. 2 is easily recognized to be q=(\u03c0/6\u2212\u03c0/6 0)T.Using this con\ufb01guration and the data of the problem, we obtain numerical values for the following termsin the control law (2):p=(1.14640.2),Fe=KP(pd\u2212p) =(9.43590),JT=\uf8eb\uf8ec\uf8ed\u22120.2 1.14640 0.80 0.4\uf8f6\uf8f7\uf8f8.To compute the gravity vector, we start from the potential energy Ug(q) =U1+U2+U3. Having eachlink the same uniformly distributed mass m, we haveU1=mg 0\u211312s1, U 2=mg 0\u2113(s1+12s12), U 3=mg 0\u2113(s1+s12+12s123),5and thusg(q) =(\u2202Ug(q)\u2202q)T=mg 0\u2113\uf8eb\uf8ec\uf8ed2.5c1+ 1.5c12+ 0.5c1231.5c12+ 0.5c1230.5c123\uf8f6\uf8f7\uf8f8\u21d2g=\uf8eb\uf8ec\uf8ed40.859319.62004.9050\uf8f6\uf8f7\uf8f8.Therefore, being \u02d9q=0, the control torque at steady state is\u03c4=JTFe+g=\uf8eb\uf8ec\uf8ed38.972119.62004.9050\uf8f6\uf8f7\uf8f8[Nm].The contact with the obstacle occurs at the midpoint of link 1, withpc=\u21132(c1s1)=(0.17320.1),JTc=\u21132\uf8eb\uf8ec\uf8ed\u2212s1c10 00 0\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed\u22120.1 0.17320 00 0\uf8f6\uf8f7\uf8f8.The unknown contact force Fcgenerates a joint torque \u03c4c=JTcFc, which will have a non-zero compo-nent\u03c4c1only at joint 1, the only joint preceding the contact point. Moreover, because gravity is beingcompensated by control (and thus removed from this analysis) and the robot is in a static equilibrium,from the balance of joint torques it follows that\u03c4c+\u03c4e=0\u21d0\u21d2JTcFc+JTFe=0\u21d2\u03c4c=\u2212JTFe=\uf8eb\uf8ec\uf8ed1.887200\uf8f6\uf8f7\uf8f8[Nm].This is also the value reached by the momentum-based residual at steady state, i.e.,\u02d9r=KI(\u03c4c\u2212r)\u21d2r\u221e= limt\u2192\u221er(t) =\u03c4c=\uf8eb\uf8ec\uf8ed1.887200\uf8f6\uf8f7\uf8f8[Nm].Note that the internal structure of rsupports its isolation property: in fact, the components of rassociatedto joints that are beyond the contacting link are always zero. This is true not only at steady state, butalso in dynamic conditions, when the robot is moving and may hit an obstacle.At this stage, knowing exactly the contact point on link 1, we can recover at least the componentnFcof thecontact force Fcthat is normal to the \ufb01rst link. Instead, the internal force componenttFcthat is alignedwith link 1 produces no torque at joint 1, and thus cannot be reconstructed from \u03c4c1only. Expressing thecontact force in the frame RF1rotated with link 1, we have1Fc=(tFcnFc), \u03c4 c1=nFc\u21132\u21d2nFc=2\u03c4c1\u2113= 9.4359 [N].This partial result can be obtained also from pseudo-inversion of the static relation \u03c4c=JTcFc. Note \ufb01rstthat the contact Jacobian in frame 1 is1Jc(q) =RotT(q1)Jc(q) =(c1s1\u2212s1c1)\u21132(\u2212s10 0c10 0)=(0 0 0\u2113/2 0 0)=(0 0 00.2 0 0).From\u03c4c=JTcFc=(1Jc)T\u00b71Fcwe obtain1Fc=(1JTc)#\u03c4c=(0 0 05 0 0)\uf8eb\uf8ec\uf8ed1.887200\uf8f6\uf8f7\uf8f8=(09.4359)=(tFcnFc).6Since pseudo-inversion yields always a minimum norm solution, the obtained tangential component of thecontact force istFc= 0, i.e., is automatically set to zero. Finally, the contact force expressed in the basereference frame RF0is computed asFc=Rot(q1)1Fc=(\u22124.71808.1718)[N].Indeed,\u2225Fc\u2225=\ued79\ued791Fc\ued79\ued79= 9.4359.", "robot": "3R", "tags": ["planar", "vertical"]},
 "3": {"file": "Robotics2_21.10.19.pdf", "date": "21-10-19", "num_ex": 0, "exam": "robo2", "question": "The DLR Justin robot in Fig. 1 has a torso with three revolute joints, with joint variables qt2R3,on which two 7R identical left and right arms are mounted, with joint variables ql2R7andqr2R7, respectively. The robot has thus a total of 17 dofs, neglecting those of the end e\u21b5ectors(two anthropomorphic hands), with a perfectly symmetric body structure. Assume that the robotis commanded by the joint velocity \u02d9q=(\u02d9ql,\u02d9qr,\u02d9qt)2R17. Consider the following kinematic controlproblems and introduce in a symbolic way all kinematic terms (matrices, vectors, etc.) that youneed for the de\ufb01nition of the control laws.Figure 1: The DLR Justin robot, a torso with bimanual arms.a)Let the Cartesian motion tasks for the left and right end e\u21b5ectors be speci\ufb01ed in an indepen-dent way in terms of a desired position and orientation trajectory rl,d(t)2R6andrr,d(t)2R6,respectively. A minimal representation is used for the orientations. Both trajectories are ex-pressed in the base frame of the torso. De\ufb01ne a control strategy \u02d9q=\u02d9qa(t) for all the robotjoints that is able to execute simultaneously the two tasks, whenever possible, recovering alsofrom any (initial or later) Cartesian error and keeping the joints close to their midrange. Specifyqualitatively the conditions for the feasibility of these tasks.b)Is it possible to execute the complete bimanual task as in a), but shaping the solution so thatthe motion of the torso joints is largely reduced? And blocking completely the motion of thetorso joints? Provide the associated control laws \u02d9q=\u02d9qb(t) and \u02d9q=\u02d9qbb(t), and discuss whichmay be the di\u0000culties possibly encountered.c)Consider the same task rl,d(t)2R6as in a) for the left end e\u21b5ector. The right end e\u21b5ectorshould move now in coordination with the left one, as speci\ufb01ed by a desired relative positionplr,d(t) and orientationlRr,d(t), both expressed with respect to the frame of the left end e\u21b5ector.De\ufb01ne a control strategy \u02d9q=\u02d9qc(t) for all the robot joints that addresses this new compositetask for Justin, recovering also from any error during task execution.d)What if the command is moved to the acceleration level, with \u00a8q=(\u00a8ql,\u00a8qr,\u00a8qt)2R17? Provide anextension \u00a8q=\u00a8qd(t) for the case in a) that prevents also the internal build up of joint velocities.", "solution": "<EMPTY>", "robot": "17R3R7R7R", "tags": []},
 "4": {"file": "Robotics2_21.10.19.pdf", "date": "21-10-19", "num_ex": 1, "exam": "robo2", "question": "Figure 2: Two masses connected by a visco-elastic spring.Figure 2 shows a mechanical system made of two masses Band Mwith a visco-elastic coupling,viscous friction on the motion of the individual masses, and an input force \u2327acting on the \ufb01rstmass. The zero of the two position variables \u2713and qis associated to an undeformed spring. Thespring has sti\u21b5ness K>0 and its elastic potential energy is quadratic in the deformation q\u0000\u2713.This model represents also a visco-elastic joint of a robot, where Band Mare, respectively, themotor and the link inertia, while \u2713andqare their respective (angular) positions.a)Derive the dynamic model of this system, including all non-conservative terms due to the viscousfriction a\u21b5ecting the motion of the two masses (with coe\u0000cients F\u2713>0 and Fq>0) and to theviscous damping on the deformation velocity of the spring (with coe\u0000cient D\u00000).b)Provide the simplest feedback law that is able to asymptotically stabilize the position of thesecond mass to a constant desired value qd. Prove the result using a Lyapunov/LaSalle technique(or any other preferred method).c)Set now D= 0. Solve the inverse dynamics problem for a desired, su\u0000ciently smooth trajectoryqd(t). Provide the explicit expression of \u2327d(t) as a function of qd(t) and its (higher order) timederivatives only.", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "5": {"file": "Robotics2_18.01.11.pdf", "date": "18-01-11", "num_ex": 0, "exam": "robo2", "question": "The RP planar robot in Fig. 1, with coordinates q= (q1,q2) and parameters m2,dc2,I1andI2de\ufb01ned therein, should execute a task de\ufb01ned by a time-varying trajectory yd(t)\u2208Rfor the heightof its end-effector.x I1 y\u43a9!q1 q2 m2,I2dc2!'Fyd(t)Figure 1: A RP planar robot with the relevant parameters and variables.Assuming as input command the joint velocity \u02d9q\u2208R2, determine the explicit expressions of thekinematic control laws that execute the task in nominal conditions, recover exponentially from anytask error, and\u2022minimize12\u2225\u02d9q\u22252: which is the theoretical pitfall of this solution?\u2022minimize the weighted norm12\u02d9qTW\u02d9q, with constant W= diag{w1,w2}>0; what happensfor very large ratios w1/w2(in the limit\u2192\u221e ); and forw2/w1\u2192\u221e ?\u2022minimize the kinetic energy T=12\u02d9qTM(q)\u02d9q, beingM(q)>0 the robot inertia matrix.", "solution": "The problem deals with kinematic redundancy since the RP robot has n= 2 joints and the requiredtask is scalar m= 1. The task output function and its Jacobian arey(q) =q2sinq1,J(q) =\u2202y(q)\u2202q=(q2cosq1sinq1). (1)The 1\u00d72 task Jacobian loses rank (vanishes) iff q1={0,\u03c0}andq2= 0 simultaneously.The minimization of the squared norm of \u02d9qis achieved by the use of the pseudoinverse of thetask Jacobian. Out of singularities, J#=JT(JJT)\u22121and the kinematic control law takes theexpression\u02d9q=J#(q) ( \u02d9yd+k(yd\u2212y(q))) =1s21+q22c21(q2c1s1)( \u02d9yd+k(yd\u2212q2sinq1)), (2)wherek > 0 is a control gain that guarantees exponential recovery from transient errors, i.e.,\u02d9e(t) =\u2212ke(t), withe=yd\u2212q2sinq1\u0338= 0, during task execution. The pitfall of (2) is thatthe norm\u2225\u02d9q\u2225involves mixed angular (the revolute joint velocity \u02d9 q1) and linear (the prismaticjoint velocity \u02d9 q2) quantities, so its straight minimization is ill-de\ufb01ned conceptually. In fact, thedenominator in (2) contains the sum of an non-dimensional term ( s21) and of a term with (squared)length units. Stated differently, changing the representing units (e.g., from 1 m to 100 cm) willchange the \u2018optimal\u2019 solution.The minimization of the weighted norm12\u02d9qTW\u02d9q, leading to weighted pseudoinversion of the taskJacobian, may solve this theoretical issue. In particular, the units of the (positive) elements inthe diagonal of Wcan be used to make terms non-dimensional (e.g., by choosing w1in (squared)length units). Out of singularities, J#W=W\u22121JT(JW\u22121JT)\u22121and the kinematic control lawtakes the expression\u02d9q=J#W(q) ( \u02d9yd+k(yd\u2212y(q))) =1q22c21w1+s21w2\uf8eb\uf8ec\uf8edq2c1w1s1w2\uf8f6\uf8f7\uf8f8( \u02d9yd+k(yd\u2212q2sinq1)), (3)withk>0 as before. Indeed, different values of the weights w1andw2will lead to different jointvelocity solutions. It is easy to verify that is the relative ratio between w1andw2that reallymatters. For very large ratios w1/w2, the cost of moving the (revolute) joint 1 will be dominantand therefore the solution (3) will tend to minimize its motion while performing the task. In thelimit, when w1\u2192\u221e , it follows from (3) that \u02d9 q1\u21920, while \u02d9q2\u221d1/s1: therefore, executing the taskwill become more and more problematic as the second link gets closer to the horizontal. Similarly,forw2/w1\u2192\u221e the second (prismatic) joint will be very expensive to move, while \u02d9 q1\u221d1/q2c1:the control effort will increase dramatically when the second link is close to being vertical ( c1\u22430)and/or fully retracted ( q2\u22430).For the third objective, we need \ufb01rst to derive the inertia matrix of the RP robot. From theexpression of the kinetic energy T=T1+T2, withT1=12I1\u02d9q21, T 2=12m2\ued79\ued79\ued79\ued79ddt((q2\u2212dc2) cosq1(q2\u2212dc2) sinq1)\ued79\ued79\ued79\ued792+12I2\u02d9q21=12(I2+m2(q2\u2212dc2)2)\u02d9q21+12m2\u02d9q22,3we obtain a diagonal inertia matrix asM(q) =(I1+I2+m2(q2\u2212dc2)200 m2)=(m11(q2) 00m22). (4)The minimization of the kinetic energy Tis then a special case of a weighted pseudoinversion ofthe task Jacobian, with one weight being con\ufb01guration dependent. Thus, out of singularities, theinertia-weighted kinematic control law takes the expression\u02d9q=J#M(q) ( \u02d9yd+k(yd\u2212y(q))) =1q22c21m11(q2)+s21m22\uf8eb\uf8ec\uf8edq2c1m11(q2)s1m22\uf8f6\uf8f7\uf8f8( \u02d9yd+k(yd\u2212q2sinq1)).(5)Note that the two addends in the \ufb01rst denominator have both consistent units of [kg\u22121].", "robot": "RP", "tags": ["planar", "horizontal", "vertical"]},
 "6": {"file": "Robotics2_18.01.11.pdf", "date": "18-01-11", "num_ex": 1, "exam": "robo2", "question": "OCTOBER 2016 \u00ab IEEE CONTROL SYSTEMS MAGAZINE 83be positive. All coefficients in (11) are actually positive since they are physical quantities, and thus the system is stable if the third row value of the Routh array is positive, which gives the condition (12). However, since there was no Routh or Hurwitz stability criterion at that time, the next section of this article presents an alternative derivation of Maxwell\u2019s stability criterion.Next, Maxwell considered the dynamic equations of motion for the governors of Sir William Thomson and L\u00e9on Foucault. For the centrifugal pieces of Foucault\u2019s governor, shown in Figure 11, Maxwell expressed the equations of motion using the angular momentum Aio, ,dtdALi=o^h (13)!'#$#%i%&'%('#%)*+,#%-.%$#/-,0(&-*%)1-0(%('#%/#$(&2),%)3&'4%A%&'%('#%5-5#*(%-.%&*#$(&)%-.%)%$#/-,/&*+%)66)$)(0'%.-$%i%5-(&-*4%)*7%L%&'%('#%(-(),%(-$80#%)2(&*+%-*%('#%)3&'9%:#(%B%1#%('#%5-5#*(%-.%&*#$(&)%-.%('#%.,;1),,'%&*%Figure 11%.-$%z%5-(&-*9%<'#*4%('#%'05%-.%('#%=&*#(&2%)*7%6-(#*(&),%#*#$+&#'%-.%>-02)0,(?'%+-/#$*-$%&' ,EABPLd212122izi=++=oo# (14)where P is the potential energy of the apparatus, which is a function of the divergence angle z of the centrifugal piece. Here, A and B are both functions of the angle z.  Differen-tiating (14) with respect to time t and using  (13) gives,ABPABLAA212122izziizziziii++++==+zzzzoooopopooopoc^mh (15)where the subscript z indicates ()/dd:z. If the apparatus is arranged such that .PAV05constant2=+, where V is a/theta.0/phi.0FIGURE 11 The centrifugal pieces (that is, flyballs) of Foucault\u2019s governor. A is the moment of inertia of a revolving apparatus for i motion, and B is the moment of inertia of flyballs for z motion.PRG/psi.0/theta.0Y/psi.0 + WMBmrkr1F(/theta.0\u2013V1)F(/theta.0\u2013V1)/psi.0(a)(b)FIGURE 10 A free-body diagram of Jenkin\u2019s governor. The friction torque ()FV1i-o acting on the friction ring is obtained by lineariza-tion about a constant speed V1.FIGURE 9 Siemens\u2019 liquid governor. The speed of a drive shaft S is controlled according to the depth of immersion of a rotating cup C connected to the shaft by a screw and a spring E. For over-speed, the rotation of the cup C falls behind that of the shaft S. Forced downward by the thread, the cup C is immersed deeper into the liquid, thus pumping at a higher rate and exerting an in-creasing resistance torque on the drive shaft. [Reproduced with permission of W. Bowyer and J. Nichols for Lockyer Davis, printer to the Royal Society from [12] (CCC Licensed 3811700428077 and 3834140751528).]!'#'m m Is L g0 #'Figure 2: The Boulton-Watt governor and a scheme with de\ufb01nition of parameters and variables.Figure 2 shows a picture and a simpli\ufb01ed scheme of the famous Boulton-Watt centrifugal governor,a system invented to regulate the rotational speed of a steam engine by a mechanical leverage(feedback) opening a valve that provides steam under pressure to the engine. We consider hereonly the so-called open-loop dynamic behavior of the system, under the action of an external torque\u03c4\u2208Rapplied to the main rotating shaft.1Assume that:\u2022the main shaft has an inertia Isaround its rotation axis\u2022the two balls have identical mass mthat is concentrated at the end of a link of length L\u2022the links and all other linkages have negligible masses\u2022a viscous friction torque with coefficient fv>0 is acting on the main shaft\u2022all other frictional effects are negligible.Derive the complete dynamic model of this system using a Lagrangian formalism. Assumingknowledge of the geometric parameter L, provide a linear parametrization of the dynamics interms of its dynamic coefficients. Find the value of the constant torque \u03c4\u2126to be applied forsustaining a steady-state rotation at a given angular speed \u2126 >0. Finally, design a nonlinearfeedback for \u03c4so as to achieve partial feedback linearization of the system, i.e., exact linearizationby feedback of only part of the closed-loop dynamics, in this case of one of the two coordinates.", "solution": "Letq= (\u03b8,\u03c6). Following a Lagrangian approach, under the given assumptions, we compute thekinetic energy T=Ts+ 2Tmfor the main shaft and the two equal balls. We haveTs=12Is\u02d9\u03b82, Tm=12mL2(\u02d9\u03c62+\u02d9\u03b82sin2\u03c6),and thus the diagonal inertia matrixM(q) =(Is+ 2mL2sin2\u03c6 00 2 mL2). (6)Using the Christoffel symbols, the Coriolis and centrifugal terms are easily computed from (6) asc(q,\u02d9q) =(4mL2sin\u03c6cos\u03c6\u02d9\u03b8\u02d9\u03c6\u22122mL2sin\u03c6cos\u03c6\u02d9\u03b82)=mL2sin(2\u03c6)(2\u02d9\u03b8\u02d9\u03c6\u2212\u02d9\u03b82)(7)For the potential energy due to gravity, U=Us+ 2Um, we have (up to a constant)Us= 0, Um=\u2212mg0Lcos\u03c6,and thusg(q) =(\u2202U(q)\u2202q)T=(02mg0Lsin\u03c6). (8)Including also viscous friction on the main shaft, the dynamic equations are(Is+ 2mL2sin2\u03c6)\u00a8\u03b8+ 4mL2sin\u03c6cos\u03c6\u02d9\u03b8\u02d9\u03c6+fv\u02d9\u03b8=\u03c42mL2\u00a8\u03c6\u22122mL2sin\u03c6cos\u03c6\u02d9\u03b82+ 2mg0Lsin\u03c6= 0.(9)Assuming knowledge of the geometric parameter L, equation (9) can be expressed in the linearlyparametrized form(\u00a8\u03b8 2L2sin2\u03c6\u00a8\u03b8+ 2L2sin(2\u03c6)\u02d9\u03b8\u02d9\u03c6 \u02d9\u03b80 2L2\u00a8\u03c6\u2212L2sin(2\u03c6)\u02d9\u03b82+ 2g0Lsin\u03c60)\uf8eb\uf8ec\uf8edIsmfv\uf8f6\uf8f7\uf8f8=Y(q,\u02d9q,\u00a8q)\u03c0=(\u03c40), (10)4with the vector \u03c0\u2208R3of dynamic coefficients.In a steady-state equilibrium with constant angular velocity \u02d9\u03b8= \u2126>0, we have \u00a8\u03b8= 0 and\u00a8\u03c6=\u02d9\u03c6= 0. This yields from (9)\u03c4\u2126=fv\u2126, L sin\u03c6cos\u03c6\u21262+g0sin\u03c6= 0\u21d2 cos\u03c6e=g0L\u21262. (11)The input torque \u03c4\u2126has to compensate just for the energy loss due to friction, in order to keep auniform motion via constant angular velocity. Moreover, the equilibrium angle \u03c6eresults from thebalance of the gravity force and the centrifugal force. Its value increases (in the range (0 ,\u03c0/2))together with \u2126.Finally, by applying the nonlinear feedback law\u03c4=(Is+ 2mL2sin2\u03c6)a+ 4mL2sin\u03c6cos\u03c6\u02d9\u03b8\u02d9\u03c6+fv\u02d9\u03b8 (12)wherea\u2208Ris the new control input (an acceleration), system (9) is transformed into\u00a8\u03b8=a\u00a8\u03c6\u2212sin\u03c6cos\u03c6\u02d9\u03b82+g0Lsin\u03c6= 0.(13)The dynamics of \u03b8is now exactly linear (a double integrator), while partial control of the motion of\u03c6can be achieved only through the centrifugal term in the second equation, being \u02d9\u03b82=(\u222badt)2.", "robot": "unknown", "tags": []},
 "7": {"file": "Robotics2_18.01.11.pdf", "date": "18-01-11", "num_ex": 2, "exam": "robo2", "question": "Consider the design of impedance control laws and force control laws for the 1-dof example, shownin Fig. 3, namely a single mass mthat moves on a frictionless horizontal plane under the action ofa commanded force f\u2208Rand of a contact force fc\u2208R.Figure 3: A mass msubject to a commanded force fand a contact force fc.In particular:\u2022The impedance controllers should work with a generic time-varying, smooth position referencexd(t), either with or without the use of a load cell that can measure the contact force fc.Illustrate the properties of the obtained closed-loop systems.\u2022What happens when xd(t) degenerates to a constant? What happens during free motion,whenfc= 0?\u2022Form= 5 [kg], design the control parameters of the impedance law so that the dynamicsof the position error e=xd\u2212xin the closed-loop system is characterized by a pair ofasymptotically stable complex poles with natural frequency \u03c9n= 10 [rad/s] and criticaldamping ratio \u03b6= 0.7071.\u2022On the other hand, the force controllers should be able to regulate the (measured) contactforcefcto a constant value fd, using any combination of desired force feedforward and forceerror feedback. Illustrate the properties of the obtained closed-loop systems.\u2022What happens during free motion, when fc= 0 and a constant contact force fdis desired?[150 minutes; open books]2", "solution": "The dynamic equation of the system in Fig. 3 ism\u00a8x=f+fc. (14)Impedance control. The so-called inverse dynamics control law becomes in this simple casef=ma\u2212fc, (15)and transforms system (14) into the double integrator\u00a8x=a. (16)The auxiliary input ahas to be designed so that the controlled mass m, under the action of thecontact force fc, matches the behavior of an impedance model characterized by a desired (apparent)massmd>0, desired damping kd>0, and desired stiffness kp>0, all acting with respect to asmooth motion reference xd(t), ormd(\u00a8x\u2212\u00a8xd) +kd( \u02d9x\u2212\u02d9xd) +kp(x\u2212xd) =fc. (17)Equating \u00a8xin (16) and in the reference behavior (17), solving for aand substituting in (15) yieldsthe control forcef=mmd(\u00a8xd+kd( \u02d9xd\u2212\u02d9x) +kp(xd\u2212x)) +(mmd\u22121)fc. (18)The feedback law (18) requires in general a measure of the contact force fc.5In the reference model (17), the position error e=xd\u2212xdoes not converge to zero if there isa contact force fc. Otherwise, ewill asymptotically go to zero \u2014indeed exponentially, in view ofthe linearity of the system dynamics. In particular, for k2d<4kpmd, the obtained second-orderlinear system (17) is characterized by a pair of asymptotically stable complex poles with naturalfrequency and damping ratio given by\u03c9n=\u221akpmd, \u03b6 =kd2\u221akpmd. (19)Reducing the desired mass md, for given values of stiffness and damping, will increase both thenatural frequency \u03c9nand the damping ratio \u03b6, and thus improve transients. On the other hand,for a given mass md, an increase of the stiffness kpshould be accompanied by an increase ofthe damping kdin order to prevent more oscillatory transients. If the desired mass equals thenatural (original) mass, i.e., md=m, a measure of the contact force fcis no longer needed in theimpedance controller (18).Wishing to achieve \u03c9n= 10 and\u03b6= 0.7071 = 1/\u221a2, equations (19) providekp= 100md, kd= 10\u221a2md, for anymd>0. (20)Beingm= 5 [kg], if we take in particular md=m= 5, we obtain as gainskp= 500, kd= 50\u221a2 = 70.71, (21)and a measure of fcwill not be needed.In regulation tasks (with xd(t) =xd= constant), by choosing again md=m, the control law 18)collapses to just a PD action on the position error e,f=kp(xd\u2212x)\u2212kd\u02d9x. (22)This scheme is also called compliance control , since the main design parameter left is the desiredstiffnesskp. Also in this case, the system will converge to x=xdif (and only if) there is no contactforce. With fc\u0338= 0 but constant, the position xe\u0338=xdthat satis\ufb01eskp(xd\u2212xe) +fc= 0\u21d2xe=xd+fckp(23)will be an asyptotically (exponentially) stable closed-loop equilibrium, as can be possibly checkedwith the Lyapunov candidate V=12m\u02d9x2+12kp(x\u2212xe)2\u22650 (using in this case LaSalle theoremfor the analysis).Force control. If we desire to regulate explicitly the contact force to a desired constant value fd,it is necessary to build a force error ef=fd\u2212fcinto the control law. After using (15), de\ufb01ne theauxiliary input aasa=1md(kf(fd\u2212fc)\u2212kd\u02d9x), (24)with force error gain kf>0 and velocity damping coefficient kd>0. The associated control forceis thenf=mmd(kf(fd\u2212fc)\u2212kd\u02d9x)\u2212fc. (25)A contact force measure is needed in this case, even if we choose md=m. The closed-loop systembecomesmd\u00a8x+kd\u02d9x=kf(fd\u2212fc). (26)6During free motion, i.e., as long as fc= 0, the mass will eventually move at the constant speed\u02d9xe=kffd/kd. Therefore, the gain kdcan be tuned so as to keep this speed low (say, during anapproaching phase before contacting a hard environment).An analysis of the general behavior of system (26) for fc\u0338= 0 is impossible without assigning amodel that describes the source of the contact force fc. Even if we can measure it, as assumedwhen designing (25), we do not know the evolution of this disturbance nor can impose a desiredbehavior to it. Should the force error efconverge to zero at steady state, it follows from eq. (26)that also the mass velocity \u02d9 xwould go to zero. However, the position xereached at the equilibriumwould depend on the actual history of the external contact force (see an example in Appendix).Assume then that contact forces are generated by a compliant environment with stiffness kc>0,placed beyond the (undeformed) position x=xc>0. Then, the model for the reaction force ofthe environment isfe={\u2212kc(x\u2212xc), forx\u2265xc,0, else.(27)During contact, the force applied to the mass is fc=\u2212fe. Thus, from (26) and (27) it followsmd\u00a8x+kd\u02d9x=kf(fd\u2212kc(x\u2212xc))\u21d2md\u00a8x+kd\u02d9x+kfkcx=kf(fd+kcxc). (28)The steady-state position reached by the second-order asymptotically stable system (28) in responseto the (positive) step input kf(fd+kcxc) and the associated steady-state contact force will bexe=xc+fdkc\u21d2fc=(\u2212fe=kc(xe\u2212xc))=fd. (29)A slight variant of the force control law (25) is obtained by replacing the cancelation of the actualcontact force in (15) by a compensation/feedforward of the desired contact force, i.e., f=ma\u2212fd.Using again (24), we obtainf=mmd(kf(fd\u2212fc)\u2212kd\u02d9x)\u2212fd, (30)and, as a result, the closed-loop systemmd\u00a8x+kd\u02d9x=(kf\u2212mdm)(fd\u2212fc). (31)Using the contact force model (27) leads \ufb01nally tomd\u00a8x+kd\u02d9x+(kf\u2212mdm)kcx=(kf\u2212mdm)(fd+kcxc). (32)It is immediate to see that the analysis of (32) can be completed as for (28), provided that theslightly more restrictive design condition kf>md/m> 0 is satis\ufb01ed. Under this hypothesis, thesteady-state conditions for the asymptotically stable system (32) are the same given in (29).Consider a scheme for the contact force generation modeled by\u02d9fc=\u03b1(fd\u2212fc), with\u03b1>0, (33)and assume, e.g., fc(0) =fc0>fd(the initial contact force is larger than the one desired). Thenfc(t) =fd\u2212(fd\u2212fc0) exp\u2212\u03b1tandef(t) =fd\u2212fc(t) = (fd\u2212fc0) exp\u2212\u03b1t=ef0exp\u2212\u03b1t.(34)Assumingx(0) = \u02d9x(0) = 0 and discarding the special case \u03b1=kd/md, the solution of (26) can befound by Laplace techniques and is given by the following position trajectoryx(t) =kfef0kd\u03b1+kfef0kd\u2212\u03b1md(mdkdexp\u2212kdmdt\u22121\u03b1exp\u2212\u03b1t), (35)and associated velocity\u02d9x(t) =kfef0kd\u2212\u03b1md(exp\u2212\u03b1t\u2212exp\u2212kdmdt). (36)It follows from (35) that, at steady state,xe= limt\u2192\u221ex(t) =kfef0kd\u03b1, (37)which shows an explicit dependence on the parameter \u03b1of the contact force model (33). Figure 4shows two possible evolutions of the applied force error term kf(fd\u2212fc) (in blue) and of theresulting mass position x(in green), for \u03b1= 2 and\u03b1= 3, with the other parameters beingfd= 3 [N],fc0= 2 [N] (and thus, ef=fd\u2212fc0= 1 [N]),kf= 1.4,md= 1 [kg], and kd= 1 [kg/s].0 1 2 3 4 5 600.20.40.60.811.21.4time [s]scaled force error [N] and position [m]response for alfa = 2, fc0 = 2, fd = 3, kf = 1.4, md = 1, kd = 1    ==>    xe =0.70 1 2 3 4 5 600.20.40.60.811.21.4time [s]scaled force error [N] and position [m]response for alfa = 3, fc0 = 2, fd = 3, kf = 1.4, md = 1, kd = 1    ==>    xe =0.46667Figure 4: Simulation results of (26) of a controlled mass mdsubject to the contact force fcin (34),for\u03b1= 2 [left] and \u03b1= 3 [right]. The plots are the position x(shown in green) and the force errortermkf(fd\u2212fc) =kfef(in blue). The reached position xeis the one computed in (37).", "robot": "unknown", "tags": ["horizontal"]},
 "8": {"file": "Robotics2_18.07.11.pdf", "date": "18-07-11", "num_ex": 0, "exam": "robo2", "question": "Consider a 2R planar robot, with the two links of length l1andl2, having the actuating motorsmounted on the axes of the two revolute joints. Each motor delivers its torque to the driven linkthrough an elastic transmission, modeled as a torsional spring of stiffness ki>0, fori= 1,2. Therobot has no motion reduction elements. In the ith motor-link assembly, for i= 1,2, letmmiandImibe, respectively, the balanced mass and the inertia of the rotor of the motor around itsspinning axis, and mi,dci, andIithe link mass, the distance of the center of mass of the linkfrom the preceding joint axis, and the link inertia around its center of mass. Using as generalizedcoordinates the angle \u03b8miof the rotor of motor iw.r.t. the preceding link axis, and the angle \u03b8iof linkiw.r.t. the preceding link axis, for i= 1,2, de\ufb01ne the 4\u00d74 inertia matrix M(q) of therobot, where q= (\u03b8T\u03b8Tm)T. State explicitly any simplifying assumption that you may wish touse. Moreover, \ufb01nd a linear parametrization of the inertial term M(q)\u00a8q=YM(q,\u00a8q)aof the robotdynamic model in terms of a minimal set of psuitable dynamic coefficients ai,i= 1,...,p .", "solution": "We need to compute the kinetic energy of the two motors and the two links, all in planar motion.For the motors, we haveTm1=12Im1\u02d9\u03b82m1, Tm2=12mm2l21\u02d9\u03b821+12Im2(\u02d9\u03b81+\u02d9\u03b8m2)2,since the \ufb01rst motor is balanced and its center of mass does not move, while the center of mass ofthe second motor is placed on the second joint axis at a distance equal to the link length l1.For the links, we haveTl1=12(I1+m1d2c1)\u02d9\u03b821, Tl2=12m2\u2225vc2\u22252+12I2(\u02d9\u03b81+\u02d9\u03b82)2,withpc2=(l1cos\u03b81+dc2cos(\u03b81+\u03b82)l1sin\u03b81+dc2sin(\u03b81+\u03b82)),vc2=\u02d9pc2=(\u2212(l1\u02d9\u03b81sin\u03b81+dc2(\u02d9\u03b81+\u02d9\u03b82) sin(\u03b81+\u03b82))l1\u02d9\u03b81cos\u03b81+dc2(\u02d9\u03b81+\u02d9\u03b82) cos(\u03b81+\u03b82)),and thus\u2225vc2\u22252=l21\u02d9\u03b821+d2c2(\u02d9\u03b81+\u02d9\u03b82)2+ 2l1dc2\u02d9\u03b81(\u02d9\u03b81+\u02d9\u03b82) cos\u03b82.Therefore, having set q=(\u03b8T\u03b8Tm)T=(\u03b81\u03b82\u03b8m1\u03b8m2)T. we can write the total kineticenergy asT=Tm1+Tl1+Tm2+Tl2=12\u02d9qTM(q)\u02d9q,with the 4\u00d74 inertia matrix of the robot given byM(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edI1+m1d2c1+I2+m2d2c2+m2l21+Im2+mm2l21+ 2m2l1dc2cos\u03b82I2+m2d2c2+m2l1dc2cos\u03b820Im2I2+m2d2c2+m2l1dc2cos\u03b82 I2+m2d2c20 00 0 Im10Im2 0 0 Im2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.Note that, if we assume that in the kinetic energy of the second motor the contribution of theangular velocity due to the previous link carrying the motor can be neglected in comparison withthe spinning velocity of the rotor of the motor itself, we would haveTm2=\u00b7\u00b7\u00b7+12Im2(\u02d9\u03b81+\u02d9\u03b8m2)2\u2243\u00b7\u00b7\u00b7 +12Im2\u02d9\u03b82m2, (1)and the off-diagonal terms M14=M41=Im2of the inertia matrix would disappear. As a result,the matrix would become block diagonal, with two 2 \u00d72 blocks (the second being diagonal) thatpertain to the link kinetic energy and, respectively, to the motor kinetic energy. This assumptionis quite realistic when the motors are connected to the driven links via transmissions with largereduction ratios (which is not, however, the present case), independently from the presence or notof elasticity in the transmissions.2The robot inertia matrix can be rewritten compactly using the following p= 5 dynamic coefficientsa1=I1+m1d2c1+I2+m2l21+Im2+mm2l21a2=m2l1dc2a3=I2+m2d2c2a4=Im1a5=Im2,asM(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8eda1+ 2a2cos\u03b82a3+a2cos\u03b820a5a3+a2cos\u03b82a3 0 00 0 a40a5 0 0 a5\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.Thus, the inertial terms in the robot dynamic model can be given a linearly parametrized form asM(q)\u00a8q=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u00a8\u03b81(2\u00a8\u03b81+\u00a8\u03b82) cos\u03b82\u00a8\u03b82 0 \u00a8\u03b8m20 \u00a8\u03b81cos\u03b82\u00a8\u03b81+\u00a8\u03b820 00 0 0 \u00a8\u03b8m1 00 0 0 0 \u00a8\u03b81+\u00a8\u03b8m2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8eda1a2a3a4a5\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=YM(q,\u00a8q)a.We remark that the simplifying assumption (1) would eliminate from YMthe presence of \u00a8\u03b8m2inelementYM,15and of \u00a8\u03b81inYM,45, but not reduce the number of dynamic coefficients: as a matterof fact,p= 5 is the smallest possible number of such coefficients.", "robot": "2R", "tags": ["planar"]},
 "9": {"file": "Robotics2_18.07.11.pdf", "date": "18-07-11", "num_ex": 1, "exam": "robo2", "question": "Consider a 4R planar robot with all links of equal length \u2113= 0.2 [m]. The robot is in the DHcon\ufb01guration q= (0\u03c0/2 0\u03c0/2)T[rad] and at rest ( \u02d9q=0). In this state, we should assign tothe end-effector a desired linear acceleration a= (5 0)T[m/s2]. The joint accelerations are takenas input commands, and are bounded as |\u00a8qi|\u2264Ai,i= 1,..., 4, with the limits A1= 9,A2= 6,A3= 4, andA4= 2 [rad/s2]. Find, if possible, a feasible joint acceleration \u00a8q\u2208R4that executesinstantaneously the desired Cartesian task, while satisfying these hard bounds. A solution with alower norm is preferred, and could be obtained by a straightforward variation of the SNS methodmoved to the acceleration level.", "solution": "The task Jacobian of the planar 4R robot is given byJ(q) =\u2113(\u2212(s1+s12+s123+s1234)\u2212(s12+s123+s1234)\u2212(s123+s1234)\u2212s1234c1+c12+c123+c1234c12+c123+c1234c123+c1234c1234),(2)and is used, together with its time derivative \u02d9J(q), in the \ufb01rst- and second-order differentialmappingsv=J(q)\u02d9q,a=J(q)\u00a8q+\u02d9J(q)\u02d9q,a\u2208R2, \u00a8q\u2208R4.Since a minimum norm solution is being sought at the acceleration level, we solve the second-orderdifferential kinematics in the least squares sense using pseudoinversion as\u00a8q=J#(q)(a\u2212\u02d9J(q)\u02d9q). (3)Whenq=\u00afq= (0\u03c0/2 0\u03c0/2)T[rad] and for \u2113= 0.2 [m], the Jacobian becomesJ:=J(\u00afq) =(\u22120.4\u22120.4\u22120.2 00\u22120.2\u22120.2\u22120.2)HavingJfull rank1, any desired task acceleration ain (3) will be exactly realized in the absenceof bounds, or realized at least in direction (possibly in a scaled form) in case the joint accelerations1This property is particularly strong in this case, since all2\u00d72 minors are nonsingular in this con\ufb01guration.3bounds cannot be satis\ufb01ed. Moreover, since the robot is at rest ( \u02d9q= 0) inq=\u00afq, the relation (3)collapses into\u00a8q=J#a. (4)In this setting, the SNS (Saturation in the Null Space) method presented originally at the velocitylevel can be applied without any modi\ufb01cation, except for the acceleration limits Ai\u2019s replacing thevelocity ones.The pseudoinverse solution in (4) provides the joint acceleration with minimum norm. We have\u00a8qPS=J#a=JT(JJT)\u22121a=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22121.6667 1.6667\u22120.8333\u22120.83330\u22121.66670.8333\u22122.5\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8(50)=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22128.3333\u22124.166704.1667\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s2].(5)The fourth joint acceleration violates the maximum limit, \u00a8 qPS,4= 4.1667>2 =A4, so this is nota feasible solution. Thus, we search for a feasible solution by using the SNS method.In step 1 of the SNS method, we saturate the overdriven joint by setting \u00a8 q4=A3= 2 [rad/s2].Then, the original task is modi\ufb01ed by removing the saturated contribution of the fourth jointacceleration (and discarding the associated column of J). We rewrite this asa1=a\u2212J4A4=(50)\u22122(0\u22120.2)=(50.4)=(\u22120.4\u22120.4\u22120.20\u22120.2\u22120.2)\uf8eb\uf8ec\uf8ed\u00a8q1\u00a8q2\u00a8q3\uf8f6\uf8f7\uf8f8=J\u22124\u00a8q\u22124,whereJ\u2212iis the Jacobian obtained by deleting the ith column and, similarly, \u00a8q\u2212iis the vectorof joint accelerations without the ith component. We recompute next the contribution of theremaining active joints, by pseudoinverting the J\u22124matrix for the modi\ufb01ed task. We obtain\u00a8qPS\u22124=J#\u22124a1=\uf8eb\uf8ec\uf8ed\u22122.2222 3.3333\u22120.5556\u22121.66670.5556\u22123.3333\uf8f6\uf8f7\uf8f8(50.4)=\uf8eb\uf8ec\uf8ed\u22129.7778\u22123.44441.4444\uf8f6\uf8f7\uf8f8[rad/s2],to be completed with the additional choice \u00a8 q4=A4= 2. The \ufb01rst joint acceleration violates nowits limit (on the negative side), \u00a8 qPS\u22124,1=\u22129.7778<\u22129 =\u2212A1. So. this is not yet a feasible solution and we proceed with the SNS method.In step 2, we saturate also the \ufb01rst overdriven joint by setting \u00a8 q1=\u2212A1=\u22129 [rad/s2]. Theoriginal task is modi\ufb01ed by removing both saturated acceleration contributions by the \ufb01rst andfourth joints (discarding the two associated columns of J). We rewrite this asa2=a\u2212J4A4\u2212J1(\u2212A1) =a1+J1A1=(50.4)+ 9(\u22120.40)=(1.40.4)anda2=(1.40.4)=(\u22120.4\u22120.2\u22120.2\u22120.2)(\u00a8q2\u00a8q3)=J\u221214\u00a8q\u221214,with obvious notation. We recompute next the contribution of the remaining active joints, bypseudoinverting the (now square and nonsingular) matrix J\u221223for the modi\ufb01ed task. We obtain\u00a8qPS\u221214=J#\u221214a2=J\u22121\u221214a2=(\u22125 55\u221210)(1.40.4)=(\u221253)[rad/s2],4with \u00a8q1=\u2212A1=\u22129 and \u00a8q4=A4= 2. All bounds are now satis\ufb01ed and the obtained jointacceleration is feasible. Recomposing the complete vector, we have the solution\u00a8qSNS =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22129\u2212532\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s2], withJ\u00a8qSNS =aand\u2225\u00a8qSNS\u2225= 10.9087. (6)This feasible solution is the one having the least possible norm.The solution (6) is not the only feasible one. As a matter of fact, one could have attempted aheuristic procedure to \ufb01nd a (set of) solution(s) in a reasonable but otherwise arbitrary way, e.g.,by \ufb01xing one component of the input acceleration to one of its (upper or lower) limits, and workingout then the rest of the solution. For this, reconsider the original equation to be solved, writtenexplicitly in terms of a linear system in the joint accelerations (scaling the coefficients so as tobecome all integers):J(\u00afq)\u00a8q=a\u21d2(\u22120.4\u22120.4\u22120.2 00\u22120.2\u22120.2\u22120.2)\u00a8q=(50)\u21d0\u21d22\u00a8q1+ 2\u00a8q2+ \u00a8q3=\u221225\u00a8q2+ \u00a8q3+ \u00a8q4= 0.By inspection, we \ufb01nd that choosing \u00a8 q1=\u2212A1=\u22129 will contribute at best to the solution ofthe \ufb01rst scalar equation, being this variable present only in this equation and having the largestcoefficient (and thus the highest sensitivity). In addition, set parametrically \u00a8 q4=\u03b1in the secondscalar equation. We have then(2 11 1)(\u00a8q2\u00a8q3)=(\u221225 + 2A1\u2212\u00a8q4)=(\u22127\u2212\u03b1)\u21d2(\u00a8q2\u00a8q3)=(\u22127 +\u03b17\u22122\u03b1),with the components of the parametric solution that need to satisfy the bounds|\u00a8q2|\u2264A2= 6|\u00a8q3|\u2264A3= 4|\u00a8q4|\u2264A4= 2\u21d0\u21d2\u22126\u2264\u22127 +\u03b1\u22646\u22124\u22647\u22122\u03b1\u22644\u22122\u2264\u03b1\u22642\u21d2\u03b1\u2208[1.5,2].The feasible interval for \u03b1comes from the simultaneous intersection of the set of inequalities.Therefore, we have a parametrized family of feasible solutions in the form\u00a8q(\u03b1) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22129\u22127 +\u03b17\u22122\u03b1\u03b1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s2], with\u2225\u00a8q(\u03b1)\u2225=\u221a6\u03b12\u221242\u03b1+ 179, \u03b1\u2208[1.5,2].(7)We see immediately that \u00a8qSNS =\u00a8q(\u03b1= 2). Moreover, the quadratic polynomial in the norm of\u00a8q(\u03b1) has an unconstrained minimum at \u03b1= 3.5, which is outside the interval [1 .5,2] of feasibilityfor\u03b1. Therefore, the minimum norm is obtained at the upper limit \u03b1= 2 of this closed interval,i.e., with \u00a8qSNS. Any other feasible solution will have a larger norm than \u00a8qSNS.We \ufb01nally remark that, in order to \ufb01nd a feasible joint acceleration, a different (say, more con-ventional) solution would have been to use pseudo-inversion with a scaling of the original taskaccelerationa(in intensity, but without a change in direction). This is done as follows. From (5),we compute the necessary scaling factor s>1 ass= max{|\u00a8qPS,i|Ai,i= 1,..., 4}= max{8.33339,4.16676,04,4.16672}= 2.0833.5This value is imposed by the exceeding acceleration of the fourth joint. We compute thenascaled =as=(2.40)\u21d2 \u00a8qPS,scaled =J#ascaled =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22124\u2212202\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.Indeed, the obtained joint acceleration has lower norm than \u00a8qSNS, but realizes in fact only 2 .4/5 =48% of the desired task acceleration of the original problem.", "robot": "4R", "tags": ["planar"]},
 "10": {"file": "Robotics2_18.07.11.pdf", "date": "18-07-11", "num_ex": 2, "exam": "robo2", "question": "In a visual servoing scheme, npoint features with coordinates ( ui,vi), fori= 1,...,n , can beextracted from the image. De\ufb01ne the 2 \u00d76 interaction matrix \u00afJbetween the 6D vector of linearvelocityV\u2208R3and angular velocity \u2126\u2208R3of the camera and the time derivative of thecoordinates (\u00af u,\u00afv) of the average position of the npoint features in the image plane. State allvariables that matrix \u00afJdepends upon.", "solution": "The interaction matrix of a generic point feature with image coordinates ( ui,vi) is known to beJpi(ui,vi,Zi) =\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u03bbZi0uiZiuiviZi\u2212(\u03bb+u2i\u03bb)vi0\u2212\u03bbZiviZi\u03bb+v2i\u03bb\u2212uiviZi\u2212ui\uf8f6\uf8f7\uf8f7\uf8f8,with (\u02d9ui\u02d9vi)=Jpi(ui,vi,Zi)(V\u2126),where the parameter \u03bb >0 is the constant focal length of the camera and Ziis the depth of theCartesian point Pi\u2208R3in the pre-image of ( ui,vi). The average position of npoint features inthe image plane has coordinates(\u00afu\u00afv)=\uf8eb\uf8ec\uf8ec\uf8ed1n\u2211ni=1ui1n\u2211ni=1vi\uf8f6\uf8f7\uf8f7\uf8f8=1nn\u2211i=1(uivi).Therefore(\u02d9\u00afu\u02d9\u00afv)=1nn\u2211i=1(\u02d9ui\u02d9vi)=(1nn\u2211i=1Jpi(ui,vi,Zi))(V\u2126)=\u00afJ(u,v,Z)(V\u2126)=\uf8eb\uf8ed\u2212\u03bbn\u2211ni=11Zi01n\u2211ni=1uiZi1n\u2211ni=1uiviZi\u2212(\u03bb+1n\u2211ni=1u2i\u03bb)\u00afv0\u2212\u03bbn\u2211ni=11Zi1n\u2211ni=1viZi\u03bb+1n\u2211ni=1v2i\u03bb\u22121n\u2211ni=1uiviZi\u2212\u00afu\uf8f6\uf8f8(V\u2126),with a dependence of the interaction matrix \u00afJon the components of u= (u1...un)T\u2208Rn,v= (v1...vn)T\u2208Rn, andZ= (Z1...Zn)T\u2208Rn.", "robot": "unknown", "tags": []},
 "11": {"file": "Robotics2_18.07.11.pdf", "date": "18-07-11", "num_ex": 3, "exam": "robo2", "question": "For a robot with ndegrees of freedom, partition the generalized coordinates as q= (qa,qb), whereqahasnacomponents, qbhasnbcomponents, and na+nb=n. Provide the explicit expressions ofthena-dimensional reduced robot dynamics and of the constraint-preserving forces \u03bb\u2208Rnb, whenthe geometric constraint h(q) =qb\u2212qb,d=0is imposed at all times, with qb,dbeing constant.[240 minutes; open books, but no computer or smartphone]1", "solution": "Thenb-dimensional geometric constrainth(q) =qb\u2212qb,d=0 (8)has a simple associated JacobianA(q) =\u2202h(q)\u2202q=(O I).6Therefore, considering the decomposition q= (qa,qb), the dynamic model of the constrained robotcan be partitioned as followsM(q)\u00a8q+n(q,\u02d9q) =\u03c4+AT(q)\u03bb\u21d2(Maa(q)Mab(q)MTab(q)Mbb(q))(\u00a8qa\u00a8qb)+(na(q,\u02d9q)nb(q,\u02d9q))=(\u03c4a\u03c4b)+(0\u03bb),wheren(q,\u02d9q) collects all non-inertial terms in the model and \u03bb\u2208Rnbis the vector of Lagrangemultipliers associated to the geometric constraints.To obtain a reduced dynamic model (with only n\u2212nb=naindependent coordinates), we proceedin the general way by bordering A(q) with the rows of a matrix D(q), so as to obtain a squareand nonsingular transformation matrix. The situation is particularly simple since Ais constant,and so can be chosen D. A globally valid choice is then(AD)=(O II O)\u21d2(AD)\u22121=(O II O)=(E F).Thus, the following bidirectional mappings are established between the generalized velocity \u02d9q(andacceleration \u00a8q) and the pseudo-velocity v(and pseudo-acceleration \u02d9v):v=D\u02d9q=(I O)\u02d9q=\u02d9qa, \u02d9v=\u00a8qa\u21d0\u21d2 \u02d9q=Fv=(IO)v, \u00a8q=(IO)\u02d9v.Dropping dependencies, the reduced inertia matrix and the reduced non-inertial dynamic termsare computed asFTMF =(I O)M(IO)=Maa,FT(\u03c4\u2212n) =(I O)(\u03c4a\u2212na\u03c4b\u2212nb)=\u03c4a\u2212na.Therefore, taking into account that qb=qb,dand \u02d9qb=\u00a8qb=0from (8), the reduced dynamicmodel becomesMaa(qa,qb,d)\u00a8qa+na(qa,qb,d,\u02d9qa,0) =\u03c4a,while the Lagrange multipliers (i.e., the forces that will preserve the geometric constraints whenattempting their violation) takes the expression\u03bb=ET(MF \u02d9v+n\u2212\u03c4) =(O I)((\u2217MTab)\u00a8qa+(\u2217nb)\u2212(\u2217\u03c4b)),or, by expliciting the dependencies,\u03bb=MTab(qa,qb,d)\u00a8qa+nb(qa,qb,d,\u02d9qa,0)\u2212\u03c4b.We conclude with two extra comments. The following torque command, expressed as a functionof the constrained robot state and of the arbitrary input torque \u03c4a,\u03c4b=MTab(qa,qb,d)\u00a8qa+nb(qa,qb,d,\u02d9qa,0)=MTab(qa,qb,d)M\u22121aa(qa,qb,d)(\u03c4a\u2212na(qa,qb,d,\u02d9qa,0))+nb(qa,qb,d,\u02d9qa,0),will guarantee \u03bb\u22610at all times, resulting in a feasible motion with minimal internal effort. Onthe other hand, the feedback linearizing control law that achieves (in a decoupled way) a desired7valueafor the acceleration \u00a8qaof the free variables and a desired constraint force \u03bb=\u03bbdis givenby\u03c4=(Maa(qa,qb,d)MTabqa,qb,d))a+(OI)\u03bbd+n(qa,qb,d,\u02d9qa,0),or\u03c4a=Maa(qa,qb,d)a+na(qa,qb,d,\u02d9qa,0),\u03c4b=MTab(qa,qb,d)a+nb(qa,qb,d,\u02d9qa,0) +\u03bbd.", "robot": "unknown", "tags": ["constraints"]},
 "12": {"file": "Robotics2_18.02.05.pdf", "date": "18-02-05", "num_ex": 0, "exam": "robo2", "question": "Consider a robot manipulator with q\u2208Rnjoint variables that is redundant with respect to a taskdescribed by r\u2208Rmvariables, with m<n . Them\u00d7ntask Jacobian matrix J(q) relates task andjoint velocities, i.e., \u02d9r=J(q)\u02d9q. For task regulation problems, kinematic control typically de\ufb01nesa law of the form\u02d9q=J#(q)Ke+(I\u2212J#(q)J(q))\u02d9q0,K>0 (diagonal) ,e=rd\u2212r, (1)whererdis the desired value for the task variables. The \ufb01rst term in (1) leads to \u02d9e=\u2212Ke, so thatexponential convergence of the error eto zero is guaranteed (out of task singularities). The secondterm allows shaping the robot con\ufb01guration during motion without affecting task execution, usinga joint velocity \u02d9q0\u2208Rnprojected in the null space of the task Jacobian. When m=n, thereis no null space to explore (the second term vanishes); when m>n , the pseudoinverse command\u02d9q=J#(q)Keguarantees only that a minimum error (in norm) is achieved, but still with e\u0338=0.With the above in mind, consider a visual servoing problem that uses as task variables Mpointfeatures, namely the coordinates fi= (uivi)T\u2208R2,i= 1,...,M , ofMpoints on the 2D imageplane of an eye-in-hand camera. Let the task vector be r=f\u2208Rm, withm= 2M, while vectors uandv(both in RM) collect the coordinates of the image points. The task Jacobian Jis the productJp(u,v,Z)Jm(q), whereJpis them\u00d76 interaction matrix of the Mpoint features (dependingon the sensed image and on the depths Zi>0 of the 3D points), and Jmis the 6\u00d7ngeometricJacobian of the manipulator carrying the camera. The rank of Jwill be equal to \u03c1\u2264min{m,6,n},no matter how large nis, and the dimension of the null space N{J}will ben\u2212\u03c1.To handle critical issues related to the lack of full row rank for the task Jacobian, it was recentlyproposed to modify the way the regulation task is accomplished. Instead of considering the originaltask as am-dimensional vector, so as to achieve the goal r=rd, ore=0, by driving each andevery component to its desired value, we can de\ufb01ne the task as the norm of the error e\u2208Rm,\u03b7=\u2225e\u2225, (2)and achieve the goal by specifying \u03b7= 0 as the desired task value. This is indeed equivalent toobtaininge=0. Thanks to the modi\ufb01ed de\ufb01nition, the task is one-dimensional and the null spaceof the associated task Jacobian will always be of dimension equal to (at least) n\u22121.Formulate and address the problem of task-based kinematic control for \u03b7\u2208R. In particular:\u2022determine the general form of the 1 \u00d7ntask Jacobian matrix J\u03b7associated to (2);\u2022analyze the singularities and/or the problems of de\ufb01nition of J\u03b7;\u2022write the explicit expression of the pseudoinverse J#\u03b7in the control law (1), assuming thate\u0338= 0 andJ\u03b7is full (row) rank;\u2022specify the main terms needed in this type of task-based kinematic control for the case of avisual servoing task with M= 2 point features.[Turn sheet for next exercises]1", "solution": "We \ufb01rst rewrite more explicitly eq. (2) as\u03b7=\u2225e\u2225=\u221aeTe=\u2225rd\u2212r\u2225. (6)Sincerdis constant, taking the time derivative of (6) yields\u02d9\u03b7=122eT\u02d9e\u221aeTe=\u2212eT\u02d9r\u03b7=\u2212eTJ(q)\u2225e\u2225\u02d9q=J\u03b7(q)\u02d9q, (7)whereJis the Jacobian matrix associated to the original task variables r. Thus, the new 1 \u00d7ntask Jacobian isJ\u03b7(q) =\u2212eTJ(q)\u2225e\u2225. (8)This matrix has rank one whenever e\u0338\u2208N{JT(q)}. On the other hand, the condition e=0(i.e., exactly where the task is accomplished!) is critical because both the numerator and thedenominator go to zero, so that a further analysis is needed (which is out of the scope of thisexercise). Far from these situations, and similarly to (1), we de\ufb01ne the control law as\u02d9q=J#\u03b7(q)k\u03b7+(I\u2212J#\u03b7(q)J\u03b7(q))\u02d9q0, (9)with the pseudoinverse J#\u03b7of the row vector J\u03b7being the column vector computed asJ#\u03b7(q) =JT\u03b7(q)(J\u03b7(q)JT\u03b7(q))\u22121=\u2212\u2225e\u2225eTJ(q)JT(q)eJT(q)e. (10)It is easy to see that (9) will work properly: in fact, plugging this \u02d9qin (7) leads to the exponentiallystable (scalar) error system\u02d9\u03b7=\u2212k\u03b7. (11)Moreover, the projection matrix P=I\u2212J#\u03b7J\u03b7in (9) has rank one, and the null space in whichwe can now accommodate a desired extra motion \u02d9q0is now (n\u22121)-dimensional.For a visual servoing task with M= 2 point features, r=f\u2208R4, we need \ufb01rst to de\ufb01ne the 4 \u00d76interaction matrix Jp, as well as the (generic) 6 \u00d7ngeometric Jacobian Jm, so that\u02d9f=Jp(u,v,Z)(V\u2126),(V\u2126)=Jm(q)\u02d9q\u21d2J=JpJm, (12)beingV\u2208R3and \u2126\u2208R3, respectively the linear and angular velocity of the eye-in-hand camera.The interaction matrix takes the expressionJp(u,v,Z) =(Jp1(u1,v1,Z1)Jp2(u2,v2,Z2))=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u2212\u03bbZ10u1Z1u1v1\u03bb\u2212(\u03bb+u21\u03bb)v10\u2212\u03bbZ1v1Z1\u03bb+v21\u03bb\u2212u1v1\u03bb\u2212u1\u2212\u03bbZ20u2Z2u2v2\u03bb\u2212(\u03bb+u22\u03bb)v20\u2212\u03bbZ2v2Z2\u03bb+v22\u03bb\u2212u2v2\u03bb\u2212u2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,(13)3with the camera focal length \u03bb>0. Moreover, fromf=(u1v1u2v2)T,fd=(u1dv1du2dv2d)T,e=fd\u2212f, (14)the scalar task takes the expression\u03b7=\u2225e\u2225=\u221a(u1d\u2212u1)2+ (v1d\u2212v1)2+ (u2d\u2212u2)2+ (v2d\u2212v2)2. (15)The associated task Jacobian is compactly written asJ\u03b7=\u22121\u03b7eT(Jp1(u1,v1,Z1)Jp2(u2,v2,Z2))Jm(q). (16)Finally, the pseudoinverse (10) takes the formJ#\u03b7=\u2212\u03b7JTm(q)(JTp1(u1,v1,Z1)JTp2(u2,v2,Z2))eeT(Jp1(u1,v1,Z1)Jp2(u2,v2,Z2))Jm(q)JTm(q)(JTp1(u1,v1,Z1)JTp2(u2,v2,Z2))e. (17)", "robot": "unknown", "tags": []},
 "13": {"file": "Robotics2_18.02.05.pdf", "date": "18-02-05", "num_ex": 1, "exam": "robo2", "question": "For a robot of the cylindrical type with a sequence PRP of joints and mounted on a vertical wall,provide the dynamic model in the usual formM(q)\u00a8q+c(q,\u02d9q) +g(q) +F\u02d9q=\u03c4, (3)using the generalized coordinates q\u2208R3and the dynamic coefficients de\ufb01ned in Fig. 1. In (3),F>0 is a diagonal matrix of viscous coefficients. Make reasonable assumptions on the zero valuesof the variables qi,i= 1,2,3, and neglect the small offset between joint axes 2 and 3 (i.e., assumethat these two axes intersect). Moreover, assume that the center of mass of each link is placed onthe joint axis having the same index.Without any a priori knowledge of dynamic parameters, de\ufb01ne all the terms needed in the designof an adaptive control law for this robot so as to achieve global asymptotic tracking of a desiredjoint trajectory qd(t), withqdi(t) =q0i+Ai(1\u2212cos (2\u03c0t/T ))\u03bd(i= 1,2,3) of amplitude AiandperiodT, for an unlimited time t\u22650. Which is the minimum value of the integer \u03bd\u2208Nthatallows asymptotic exact tracking?\u43a9!\u43a9!\u43a9!m1 I1 m2 I2 m3 I3 q1 q2 q3g0Figure 1: A cylindrical PRP-type robot mounted on a vertical wall, with its generalized coordinatesq= (q1,q2,q3) and relevant dynamic parameters.", "solution": "Following a Lagrangian approach, we compute \ufb01rst the kinetic energy T=T1+T2+T3. Since theposition of the center of mass of the third link will be an unknown dynamic parameter, we need tode\ufb01neq3in a purely kinematic way as the radial position of the distal end of the third link withrespect to the joint axis 2. The radial position of the center of mass of link 3 will then be given byq3\u2212d3, beingd3>0 the distance of the center of mass from the link end. With this and underthe other given assumptions, considering the sequence PRP of joint types we haveT1=12m1\u02d9q21, T 2=12m2\u02d9q21+12I2\u02d9q22,T3=12m3(\u02d9q21+ (q3\u2212d3)2\u02d9q22+ \u02d9q23)+12I3\u02d9q22\u21d2T=12\u02d9qTM(q)\u02d9q,withM(q) =\uf8eb\uf8ec\uf8edm1+m2+m3 0 00I2+I3+m3(q3\u2212d3)200 0 m3\uf8f6\uf8f7\uf8f8. (18)For the Coriolis and centrifugal terms, the requested adaptive control law will use the factorizationc(q,\u02d9q) =C(q,\u02d9q)\u02d9qsuch that \u02d9M\u22122Cis a skew-symmetric matrix. This is automatically guaranteedif the components of the Coriolis and centrifugal vector c(q,\u02d9q) are computed using the Christoffel\u2019ssymbols, i.e.,ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i= 1,2,3,(19)beingmitheith column of the inertia matrix M. Using (18) and (19), we obtainC1(q) =0 \u21d2c1(q,\u02d9q) = 0,C2(q) =\uf8eb\uf8ec\uf8ed0 0 00 0 m3(q3\u2212d3)0m3(q3\u2212d3) 0\uf8f6\uf8f7\uf8f8\u21d2c2(q,\u02d9q) = 2m3(q3\u2212d3) \u02d9q2\u02d9q3,C3(q) =\uf8eb\uf8ec\uf8ed0 0 00\u2212m3(q3\u2212d3) 00 0 0\uf8f6\uf8f7\uf8f8\u21d2c3(q,\u02d9q) =\u2212m3(q3\u2212d3) \u02d9q22.4A factorization that satis\ufb01es the skew-symmetric property is then given byC(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u02d9qTC1(q)\u02d9qTC2(q)\u02d9qTC3(q)\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0 00m3(q3\u2212d3) \u02d9q3m3(q3\u2212d3) \u02d9q20\u2212m3(q3\u2212d3) \u02d9q2 0\uf8f6\uf8f7\uf8f8. (20)For the potential energy due to gravity, Ug=U1+U2+U3, we have (up to a constant)U1= 0, U 2= 0, U 3=\u2212m3g0(q3\u2212d3) cosq2,where we assumed that the third link is vertical and points downward for q2= 0. Thusg(q) =(\u2202Ug(q)\u2202q)T=\uf8eb\uf8ec\uf8ed0m3g0(q3\u2212d3) sinq2\u2212m3g0cosq2\uf8f6\uf8f7\uf8f8. (21)The dynamic model of the robot, including the viscous friction term with F= diag{f1,f2,f3},can thus be written in the linear parametrized form,M(q)\u00a8q+C(q,\u02d9q)\u02d9q+g(q) +F\u02d9q=Y(q,\u02d9q,\u00a8q)a=\u03c4, (22)with the 3\u00d77 regressorY(q,\u02d9q,\u00a8q) =\uf8eb\uf8ec\uf8ed\u00a8q10 0 0 \u02d9 q10 00 \u00a8q2q23\u00a8q2+ 2q3\u02d9q2\u02d9q3+g0sinq2\u22122q3\u00a8q2\u22122 \u02d9q2\u02d9q3\u2212g0sinq20 \u02d9q200 0 \u00a8q3\u2212q3\u02d9q22\u2212g0cosq2 \u02d9q22 0 0 \u02d9q3\uf8f6\uf8f7\uf8f8(23)and the vector of dynamic coefficientsa=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8eda1a2a3a4a5a6a7\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edm1+m2+m3I2+I3+m3d23m3m3d3f1f2f3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\u2208R7. (24)De\ufb01ning \u02d9qr=\u02d9qd+\u039be=\u02d9qd+\u039b(qd\u2212q), with a diagonal matrix \u039b>0, two diagonal gainmatricesKD>0 andKP=KD\u039b>0, and a diagonal estimation gain matrix \u0393>0, theadaptive controller will have dimension 7 and the expressionu=\u02c6M(q)\u00a8qr+\u02c6C(q,\u02d9q)\u02d9qr+\u02c6g(q) +KPe+KD\u02d9e=Y(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a+KPe+KD\u02d9e\u02d9\u02c6a=\u0393YT(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q), \u02c6a(0) = arbitrary ,(25)whereY(q,\u02d9q,\u02d9qr,\u00a8qr) =\uf8eb\uf8ec\uf8ed\u00a8qr10 0 0 \u02d9 qr10 00 \u00a8qr2q23\u00a8qr2+q3( \u02d9q2\u02d9qr3+ \u02d9qr2\u02d9q3) +g0sinq2\u22122q3\u00a8qr2\u2212( \u02d9q2\u02d9qr3+ \u02d9qr2\u02d9q3)\u2212g0sinq20 \u02d9qr200 0 \u00a8 qr3\u2212q3\u02d9q2\u02d9qr2\u2212g0cosq2 \u02d9q2\u02d9qr2 0 0 \u02d9qr3\uf8f6\uf8f7\uf8f8(26)5and\u02c6a=(\u02c6a1\u02c6a2\u02c6a3\u02c6a4\u02c6a5\u02c6a6\u02c6a7)T. (27)Finally, the desired trajectory is sufficiently smooth already with \u03bd= 1 and guarantees thuspermanent exact tracking when the error e(t) =qd(t)\u2212q(t) asymptotically vanishes. In particular,we shall need the quantitiesqdi(t) =q0i+Ai(1\u2212cos2\u03c0tT),\u02d9qdi(t) =2\u03c0AiTsin2\u03c0tT,\u00a8qdi(t) =4\u03c02AiT2cos2\u03c0tT(28)fori= 1,2,3.", "robot": "PRP", "tags": ["vertical"]},
 "14": {"file": "Robotics2_18.02.05.pdf", "date": "18-02-05", "num_ex": 2, "exam": "robo2", "question": "Consider an actuated pendulum that moves in the vertical plane under a joint torque u. The singlelink is a uniform thin rod of mass m= 10 kg and length L= 2 m. The downward equilibrium is at\u03b8= 0. Suppose that the link is initially at rest in \u03b80= 0, and that we want to regulate its angularposition to \u03b8d=\u03c0/3 rad using the control schemeu=kp(\u03b8d\u2212\u03b8)\u2212kd\u02d9\u03b8+ui\u22121, i = 1,2,... (4)withkp= 500 andkd= 45. The constant feedforward ui\u22121in (4) is updated at every new reachedequilibrium con\ufb01guration \u03b8i,i= 1,2,..., asui=ui\u22121+kp(\u03b8d\u2212\u03b8i), i= 1,2,..., withu0= 0. (5)Will the error ei=\u03b8d\u2212\u03b8iconverge to zero for i\u2192\u221e with this iterative control scheme? Why, orwhy not? If (or when) it does, can you predict which is the minimum number imin>0 of iterationsguaranteeing that the error will satisfy |ei|<\u03b5= 0.01 rad for all i\u2265imin?[150 minutes; open books]2", "solution": "The dynamic equation of the pendulum is(I0+md2)\u00a8\u03b8+mdg 0sin\u03b8=u, (29)withd=L/2 = 1 m and I0=mL2/12, which is the inertia of a uniform thin rod of mass mandlengthLaround an orthogonal axis passing through its center of mass. However, note that thevalue ofI0(as well as that of the total inertia I0+md2) will be irrelevant in the solution of ourproblem. Same for the gain kd.The gradient of the gravity term can be easily bounded as\ued79\ued79\ued79\ued79\u2202g(\u03b8)\u2202\u03b8\ued79\ued79\ued79\ued79=|mdg 0cos\u03b8|\u2264mdg 0= 98.1 =\u03b1. (30)Beingkp= 500>196.2 = 2\u03b1, (31)the iterative scheme (4\u20135) will certainly converge to e=\u03b8d\u2212\u03b8= 0. Moreover, we can take outfromkpa factor 1/\u03b2in the following waykp=k\u2032p\u03b2= 500\u21d2k\u2032p= 100>98.1 =\u03b1, 0<\u03b2=15\u226412, (32)so that we recognize the sufficient conditions for contraction of the iterative learning control (4\u20135).From the proof of the related theorem and the value of \u03b2in (32), we have\u2225ei\u2225<\u03b21\u2212\u03b2\u2225ei\u22121\u2225 \u21d2 | \u03b8d\u2212\u03b8i|=|ei|<151\u221215|ei\u22121|= 0.25|\u03b8d\u2212\u03b8i\u22121|.(33)As a result, we know in advance that the error will be reduced at least by a factor 4 from oneiteration to the other. Thus, starting with the known initial errore0=\u03b8d\u2212\u03b80=\u03c03= 1.0472, (34)we can iteratively estimate upper bounds \u02c6 eifor the absolute errors |ei|:|e1|=|\u03b8d\u2212\u03b81|<0.25|e0|=\u03c012= 0.2618 = \u02c6e1,|e2|=|\u03b8d\u2212\u03b82|<0.25|e1|=\u03c048= 0.0654 = \u02c6e2,|e3|=|\u03b8d\u2212\u03b83|<0.25|e2|=\u03c0208= 0.0164 = \u02c6e3,|e4|=|\u03b8d\u2212\u03b84|<0.25|e3|=\u03c0832= 0.0041 = \u02c6e4<0.01 =\u03b5.(35)6We can conclude that the absolute error with respect to \u03b8dwill be reduced and kept below therequired tolerance \u03b5starting with the iteration imin= 4. Note that the control scheme toleratesa large uncertainty for the bound \u03b1on the gravity term. In the present case, we could handlea link mass which is up to 250% larger than the nominal value and would still converge, thoughprogressively slower, without modifying the chosen proportional control gain (nor anything else).We can do an exact calculation of the solution sequence of angles \u03b8iand feedforward torques ui, evenwithout performing a dynamic simulation but just knowing in advance the value M=mdg 0= 98.1.In fact, every new equilibrium con\ufb01guration \u03b8=\u03b8iwill have to satisfy the nonlinear equationmg0dsin\u03b8=kp(\u03b8d\u2212\u03b8) +ui\u22121, i = 1,2,... (36)We can solve numerically (36) using, e.g., the matlab function fsolvetheta (i) =fsolve (@(theta )M\u2217sin(theta )\u2212kp\u2217(thetad\u2212theta )\u2212u(i\u22121),theta (i\u22121))providing each time \u03b8i\u22121as initial guess. We update then the feedforward torque uiusing therecursion (5). Table 1 shows the actual convergence of the iterative control process, and alsoa comparison of the actual errors vs. their estimated bounds in (35). Indeed, the actual errorconverges to zero faster than its estimated bound.i\u03b8iei \u02c6eiui0 (init) 0 1.0472 1.0472 01 0.8942 0.1530 0.2618 76.49042 1.0318 0.0154 0.0654 84.19163 1.0458 0.0014 0.0164 84.8884 (stop) 1.0471 0.0001 0.0041 84.9510true 1.0472 0\u2212 84.9571Table 1: Iterative learning process for regulation at \u03b8d=\u03c0/3 = 1.0472 rad with gravity torqueestimation. Iterations are stopped when \u02c6 ei\u2264\u03b5= 0.01. Angles/errors in [rad], torques in [Nm].", "robot": "unknown", "tags": ["vertical"]},
 "15": {"file": "Robotics2_14.09.22.pdf", "date": "14-09-22", "num_ex": 0, "exam": "robo2", "question": "The actuation device shown in Fig. 1 is a servomechanism with a DC motor coupled to a rotatingload through a \ufb02exible transmission.\u4675!\u4676!\u4677!\u4678!\u4679!Figure 1: A 1-dof actuation device with \ufb02exible transmission\u2022Explain the role to each component numbered (from 1 to 5) in the \ufb01gure.\u2022Using an energy (Lagrangian) approach, derive a dynamic model of the system that is ap-propriate for trajectory planning, motion control, and simulation. Assume that the \ufb02exibletransmission can be modeled as a visco-elastic element, i.e., it behaves as a damped spring ofconstant stiffness. In addition, viscous friction is present on the motor and load sides of thetransmission. The DC motor is commanded in current. Write down the complete dynamicequations and draw an associated block diagram for simulation purposes (in Simulink style).\u2022Neglect all dissipative effects in the following. Plan a smooth rest-to-rest trajectory thatrotates the load from an initial angle q0to a \ufb01nal qfin given time T, without residualvibrations.\u2022Determine next the input current pro\ufb01le that should command the motor so that the plannedtrajectory is realized exactly when the system is initially undeformed and at rest.", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "16": {"file": "Robotics2_14.09.22.pdf", "date": "14-09-22", "num_ex": 1, "exam": "robo2", "question": "The Newton-Euler method is used for the dynamic modeling of serial robots. In inverse dynamicsproblems, its most efficient implementation is a numerical algorithm (NE) containing a forwardrecursive (FR) part, which computes from the base to the tip all relevant differential kinematicterms associated to the links, and a backward recursive (BR) part, which computes from thetip to the base the exchanged forces/torques between links. Suppose now that we compute the(linear/angular) acceleration vector \u00a8p\u2208R6of the end-effector by\u00a8p=NEFR (q,\u02d9q,\u00a8q) =J(q)\u00a8q+\u02d9J(q)\u02d9q, (1)where NEFR in eq. (1) denotes compactly the FR part only of the NE algorithm. How could theNEFR algorithm be used to evaluate numerically and separately the Jacobian matrix Jand theproduct term \u02d9J\u02d9q? With the same algorithm, can we also evaluate the matrix \u02d9Jalone?[150 minutes; open books]", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "17": {"file": "Robotics2_11.07.04.pdf", "date": "11-07-04", "num_ex": 0, "exam": "robo2", "question": "ExerciseWith reference to the scheme in Fig. 1, consider a one-dimensional force control problem in whichthe robot is modeled as a mass min contact with a compliant environment having mass mw,stiffness kw, and viscous damping dw. A control force uacts on the robot mass m. Let x1andx2be the position of the robot mass and, respectively, of the environment mass. A force sensorhaving stiffness ksis used to measure the contact force fc. All physical data can be assumed to bepositive.u m ks kw dw mw !'#$%&'%(''#&#')'*&%(+,#'(-%(*&x2 x1Figure 1: A one-dimensional contact with a dynamic environmentWe want to regulate the contact force to a constant positive value fd, by means of the followingcontrol law:u=kp(fd\u2212fc) +kffd\u2212kv\u02d9x1 (1)where kpis a proportional feedback gain on the contact force error, kfis a force feedforward gain,and kvis a gain on the robot mass velocity.1. Derive the dynamic equations describing the robot-environment system when a generic forceinput uis applied to the robot mass.2. Draw a block diagram of the control scheme when using eq. (1) and write the associatedclosed-loop equations.3. Study the equilibrium con\ufb01gurations of the closed-loop system. In particular, choose suitable(interval of) values for kp,kv, and kfsuch that the controlled system is asymptotically stableand has a zero force error at steady state.Optional: in this case, 60 minutes of additional time are available.4. If feasible, perform a simulation with the resulting controller. For the simulation, use the fol-lowing system parameters: m= 1 [kg], mw= 10 [kg], kw= 1000 [N/m], dw= 1000 [N \u00b7s/m],ks= 100 [N/m]. The system is initially at rest and in equilibrium. The desired force has astep variation of fd= 10 [N].[90 minutes; open books]", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "18": {"file": "Robotics2_17.10.27.pdf", "date": "17-10-27", "num_ex": 0, "exam": "robo2", "question": "ExerciseA robot manipulator having generalized coordinates q\u2208Rnand dynamic modelM(q)\u00a8q+c(q,\u02d9q) +g(q) =u, (1)with inertia matrix M, Coriolis and centrifugal terms c, and gravity vector g, should perform a task thatis described in terms of variables x=f(q)\u2208Rm, withm<n , and is speci\ufb01ed by a smooth desired tasktrajectory x=xd(t), fort\u22650.Provide the expressions of the feedback laws that solve the following control problems, in which we considerdifferent objectives and different feasible command inputs for the robot system. In the \ufb01rst three cases,possible errors in the execution of the desired task trajectory should be recovered in an exponential way.For all cases, give also some hints on the physical meaning of the pursued solution.1. Assume the joint velocity \u02d9q\u2208Rnas control input. Execute the desired m-dimensional task trajectoryby minimizing instantaneously the objective functionH1=12\u2225M(q)\u02d9q\u2212p0\u22252,where p0\u2208Rnis a desired vector value for the generalized momentum of the robot.2. Assume again the joint velocity \u02d9q\u2208Rnas control input. Execute the desired m-dimensional tasktrajectory by minimizing instantaneously the objective functionH2=12\u2225\u02d9q+\u03b1\u2207qH(q)\u22252,withH=12\u2225g(q)\u22252,for a scalar \u03b1>0.3. Assume now the joint acceleration \u00a8q\u2208Rnas control input. Execute the desired m-dimensional tasktrajectory by minimizing instantaneously the objective functionH3=12\u2225u\u22252.4. Assume \ufb01nally the joint torque u\u2208Rnas control input. Determine uby minimizing instantaneouslythe objective functionH4=\u03bb2\u2225u\u22252+12\u201a\u201a\u201a\u00a8xd\u2212J(q)\u00a8q\u2212\u02d9J(q)\u02d9q\u201a\u201a\u201a2,for a suitable scalar \u03bb>0 and being J= (\u2202f/\u2202q) them\u00d7ntask Jacobian.Provide next the symbolic expressions of all the terms needed in the control laws for problems 1 and 2when the robot is the RP planar arm ( n= 2) of Fig. 1, the task variable is a scalar ( m= 1) given byx=f(q) =q2cosq1, and the desired task trajectory is xd(t) =L+L(1\u2212cos\u03c9t)/4, for some constantsL>0 and\u03c9>0. The robot starts at rest in a generic con\ufb01guration q1(0) =q10>0,q2(0) =q20>0.x I1 y\u43a9!q1 q2 m2,I2dc2!'Fg0Figure 1: A RP planar robot with the relevant variables and parameters.[180 minutes, open books but no computer or smartphone]", "solution": "<EMPTY>", "robot": "unknown", "tags": ["planar"]},
 "19": {"file": "Robotics2_22.02.03.pdf", "date": "22-02-03", "num_ex": 0, "exam": "robo2", "question": "The RPR robot in Fig. 1 moves in a vertical plane and is controlled by the joint torque \u03c4\u2208R3.a) Provide a linear parametrization of the gravity term g(q) =G(q)aGin the robot dynamicmodel, where the matrix G(q) contains only known kinematic quantities (including the gravityacceleration g0). Introduce kinematic and dynamic parameters as needed.b) Design a control law \u03c4=\u03c4r(q,\u02d9q,ep), driven by the Cartesian error ep=pd\u2212p, that achievesregulation of the end-effector position to a desired constant value pd\u2208R2, up to singularities.Give the explicit expression of all terms in this control law.c) Find a robot con\ufb01guration qsand an associated desired position pd, withep=pd\u2212f(qs)\u0338=0,such that the robot will notmove when at rest in qsunder the action of the previous controllaw\u03c4=\u03c4r(qs,0,ep).x0y0q1q3q2\u2a01\u2a01\u2a01Pg0\ud835\udf0f1\ud835\udf0f3\ud835\udf0f2Figure 1: A planar RPR robot.", "solution": "We compute \ufb01rst the gravity term g(q) needed in the regulation law and provide a linear parametriza-tion for it. The potential energy of each link is computed from the general expression (with vectorsinR2, being the problem planar)Ui=\u2212migT0ri,ci,g0=(0\u2212g0)\u21d2Ui=mig0ri,ciywithg0= 9.81 [m/s2]. Thus,U1=m1g0d1sinq1,U2=m2g0(l1sinq1+ (q2\u2212d2) cosq1),U3=m3g0(l1sinq1+q2cosq1+d3sin(q1+q3)),wherel1is the length of link 1, d1andd3are the positions of the center mass of link 1 and link 3,respectively, computed from their proximal base, and d2is the position of the center mass of link 2as computed from its distal base (i.e., the axis of joint 3). As a result, from U=U1+U2+U3, weobtaing(q) =(\u2202U(q)\u2202q)T=g0\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed(m1d1+ (m2+m3)l1) cosq1\u2212(m2(q2\u2212d2) +m3q2) sinq1+m3d3cos(q1+q3)(m2+m3) cosq1m3d3cos(q1+q3)\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.(2)This can be linearly parametrized by a (3 \u00d74) regressor matrix G(q) and a vector of dynamiccoefficientsaG\u2208R4as follows:g(q) =G(q)aG=\uf8eb\uf8ec\uf8edg0(l1cosq1\u2212q2sinq1)g0cosq1g0sinq1g0cos (q1+q3)g0cosq1 0 0 00 0 0 g0cos (q1+q3)\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ec\uf8edm2+m3m1d1m2d2m3d3\uf8f6\uf8f7\uf8f7\uf8f8.Indeed, also other parametrizations that are still minimal (i.e., of dimension 4) can be found.The required Cartesian regulator is given by1\u03c4r=JT(q)KP(pd\u2212f(q))\u2212KD\u02d9q+g(q), withKP>0,KD>0. (3)Having already given the gravity term in (2), the missing expressions in (3) are the direct kinematicsf(q) =(l1cosq1\u2212q2sinq1+l3cos(q1+q3)l1sinq1+q2cosq1+l3sin(q1+q3))and its associated JacobianJ(q) =\u2202f(q)\u2202q=(\u2212(l1sinq1+q2cosq1+l3sin(q1+q3))\u2212sinq1\u2212l3sin(q1+q3)l1cosq1\u2212q2sinq1+l3cos(q1+q3) cosq1l3cos (q1+q3)).(4)1Alternatively, one can replace the joint damping term \u2212KD\u02d9qby a Cartesian damping \u2212JT(q)KD,cJ(q)\u02d9q,withKD,c>0. However, there is no actual advantage in doing so.3To answer to item c), we need to \ufb01nd the singular con\ufb01gurations qsofJ(q). In fact, the con-troller (3) gets stuck with the robot at rest in an end-effector position ps=f(qs) different fromthe desiredpdif and only if the (gain scaled) error KPep, withep=pd\u2212ps\u0338=0, lies in the nullspace of the transpose of the Jacobian Js=J(qs). And this can happen only when the Jacobianin (4) loses rank. Analyzing the three minors (obtained by deleting one column of Jat a time),we havedetJ\u22121=l3sinq3, detJ\u22122=l3(l1sinq3\u2212q2cosq3), detJ\u22123=\u2212(q2+l3sinq3).These are simultaneously zero if and only if q2= 0 andq3= 0 or\u03c0(with arbitrary q1). Take forexampleqs= (q1,0,0). We haveps= (l1+l3)(cosq1sinq1),Js=(\u2212(l1+l3) sinq1\u2212sinq1\u2212l3sinq1(l1+l3) cosq1 cosq1l3cosq1)and soN{JTs}=\u03b1(cosq1sinq1).Consider a gain KP=kPI2\u00d72,kP>0. By choosingpd= \u2206(cosq1sinq1),\u2206<l1+l3\u21d2KPep=kP(\u2206\u2212(l1+l3))(cosq1sinq1)\u0338=0,with the robot at rest ( \u02d9q=0), the control law (3) becomes simply \u03c4r=\u03c4r(qs,0,ep) =g(qs). Inthe closed-loop system, with the robot dynamics evaluated at the state xs= (qs,0), it isM(qs)\u00a8q+c(qs,0) +g(qs) =g(qs)\u21d2M(qs)\u00a8q=0\u21d4 \u00a8q=0,so that the state xsis an equilibrium and the robot will not move under the action of (3), despiteof the residual Cartesian position error.", "robot": "RPR", "tags": ["planar", "vertical"]},
 "20": {"file": "Robotics2_22.02.03.pdf", "date": "22-02-03", "num_ex": 1, "exam": "robo2", "question": "Consider the planar 4R robot in Fig. 2, having equal links of unitary length. The robot is com-manded by the joint acceleration \u00a8q\u2208R4.a) The end effector of the robot should follow a desired smooth position trajectory pd(t)\u2208R2.Provide the general form of the command \u00a8qathat executes the task in nominal conditions,while minimizing instantaneously the objective functionH=12\u2225\u00a8q+Kd\u02d9q\u22252,Kd>0. (1)Moreover, study the singularities that may be encountered during the execution of this task.b) Consider again the problem in item a), but now with the desired task augmented in order tokeep the end-effector angular speed at some constant value \u03c9z,d\u2208R. Provide the general formof the command \u00a8qbthat executes the extended task.1c) Compute the numerical value of \u00a8qawhen the robot is in the nominal state xd= (qd,\u02d9qd)\u2208R8and for a desired \u00a8pd\u2208R2given byqd=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u03c0/4\u03c0/3\u2212\u03c0/20\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad], \u02d9qd=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22120.810.20\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s], \u00a8pd=(11)[m/s2],having setKd=I4\u00d74in (1).d) Compute the numerical value of \u00a8qbin the same conditions of item c). What are the values ofpd,\u02d9pd, and\u03c9z,din this case?Px0y0q1q4q2\ud835\udc91\u0308#constant\ud835\udf14%,#q3Figure 2: A planar 4R robot, with a sketch of its Cartesian tasks.", "solution": "We compute the direct and the differential kinematics up to the second order of the planar 4Rrobot for the positional task of its end effector. Being all links of unitary length, we havep=f(q) =(c1+c12+c123+c1234s1+s12+s123+s1234),with the shorthand notation for trigonometric quantities (e.g., c123= cos(q1+q2+q3)). Differen-tiating once w.r.t. time, we obtain\u02d9p=\u2202f(q)\u2202q\u02d9q=J(q)\u02d9q,with the (2\u00d74) Jacobian matrixJ(q) =(\u2212(s1+s12+s123+s1234)\u2212(s12+s123+s1234)\u2212(s123+s1234)\u2212s1234c1+c12+c123+c1234c12+c123+c1234c123+c1234c1234).(5)Differentiating a second time, we get\u00a8p=J(q)\u00a8q+n(q,\u02d9q), (6)4with the quadratic term in the joint velocitiesn(q,\u02d9q) =\u02d9J(q)\u02d9q=\u2212(c1\u02d9q21+c12( \u02d9q1+ \u02d9q2)2+c123( \u02d9q1+ \u02d9q2+ \u02d9q3)2+c1234( \u02d9q1+ \u02d9q2+ \u02d9q3+ \u02d9q4)2s1\u02d9q21+s12( \u02d9q1+ \u02d9q2)2+s123( \u02d9q1+ \u02d9q2+ \u02d9q3)2+s1234( \u02d9q1+ \u02d9q2+ \u02d9q3+ \u02d9q4)2).At the current robot state ( q,\u02d9q) and for a given \u00a8p=\u00a8pd, \ufb01nding a solution \u00a8qto (6) that minimizesinstantaneously the objective function (1) is a standard LQ problem with the unique solution\u00a8qa=J#(q) (\u00a8pd\u2212n(q,\u02d9q))\u2212(I\u2212J#(q)J(q))Kd\u02d9q=\u2212Kd\u02d9q+J#(q)(\u00a8pd\u2212n(q,\u02d9q) +J(q)Kd\u02d9q).(7)In fact, the preferred acceleration in the objective function (1), i.e., the one that would minimizeHin the unconstrained case, is \u00a8q0=\u2212Kd\u02d9q. This achieves damping of joint velocities in the nullspace of the task, as apparent from the \ufb01rst expression in (7). The second equivalent expression ishowever more efficient to evaluate.The singularities of J(q) may affect the execution of the task and need to be analyzed in advance.Even if not strictly necessary, it is convenient for this purpose to simplify the Jacobian by thefollowing factorization2J(q) =(\u2212s1\u2212s12\u2212s123\u2212s1234c1c12c123c1234)\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1 0 0 01 1 0 01 1 1 01 1 1 1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=J\u2032(q)T, (8)whereTis a nonsingular matrix (with det T= 1). Thus, the con\ufb01gurations at which J\u2032(q) losesrank coincide with those of J(q). By inspecting the six (2 \u00d72) minors ofJ\u2032, it is easy to see thatthis happens in the singular con\ufb01gurationsqs:{q1is arbitrary , q2= 0 or\u03c0, q 3= 0 or\u03c0, q 4= 0 or\u03c0}.In all these 8 types of singular con\ufb01gurations, the links of the robot are either stretched or foldedalong the single direction speci\ufb01ed by q1.We extend now the task with the angular component, concerning the orientation of the end-effector.We proceed incrementally, using the results obtained so far for the two-dimensional task. We havepe=(f(q)q1+q2+q3+q4),and thus\u02d9pe=Je(q)\u02d9q=(J(q)1 1 1 1)\u02d9qand\u00a8pe=Je(q)\u00a8q+\u02d9Je(q)\u02d9q=Je(q)\u00a8q+ne(q,\u02d9q) =Je(q)\u00a8q+(n(q,\u02d9q)0).2This is a common trick for planar nR robot structures.5The solution of the LQ problem takes exactly the same form as in (7), once the augmented quan-tities are used, including the augmented desired acceleration \u00a8pe,d, which is given by \u00a8pd\u2208R2withan extra third component equal to 0, or\u00a8pe,d=(\u00a8pd\u02d9\u03c9z,d)=(\u00a8pd0).Thus,\u00a8qb=J#e(q)(\u00a8pe,d\u2212ne(q,\u02d9q))\u2212(I\u2212J#e(q)Je(q))Kd\u02d9q=\u2212Kd\u02d9q+J#e(q)(\u00a8pe,d\u2212ne(q,\u02d9q) +Je(q)Kd\u02d9q).(9)The only difference will be in the analysis of the singularities of the (3 \u00d74) Jacobian Je(q).Proceeding as before with the same transformation matrix T, we haveJe(q) =J\u2032e(q)T, withJ\u2032e(q) =\uf8eb\uf8ec\uf8ed\u2212s1\u2212s12\u2212s123\u2212s1234c1c12c123c12340 0 0 1\uf8f6\uf8f7\uf8f8. (10)Accordingly, the singular con\ufb01gurations of Je(q) are namelyqs:{q1is arbitrary , q2= 0 or\u03c0, q 3= 0 or\u03c0, q 4is arbitrary},namely the same as those of the (2 \u00d73) Jacobian of a planar 3R robot in a positional task. Inthese 4 types of singular con\ufb01gurations, the \ufb01rst three links of the robot are either stretched orfolded along the single direction speci\ufb01ed again by q1.Using the values qd,\u02d9qd, and \u00a8pdspeci\ufb01ed in item c) of the text of this Exercise, we evaluate (7)and (9) as\u00a8qa=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22120.3074\u22121.63782.04961.1248\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s2], \u00a8qb=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0.3163\u22122.57353.0503\u22120.7932\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s2].The extended position and orientation task vector and the end-effector linear and angular velocityat the current state xd= (qd,\u02d9qd) arepe=(pd\u03c6d)=\uf8eb\uf8ec\uf8ed2.38012.19070.2618\uf8f6\uf8f7\uf8f8[m, m, rad] , \u02d9pe=(\u02d9pd\u03c9z,d)=\uf8eb\uf8ec\uf8ed0.16540.15530.4\uf8f6\uf8f7\uf8f8[m/s, m/s, rad/s] .", "robot": "4R", "tags": ["planar"]},
 "21": {"file": "Robotics2_22.02.03.pdf", "date": "22-02-03", "num_ex": 2, "exam": "robo2", "question": "Figure 3 shows a 2R robot with unitary link lengths whose end effector is mechanically constrainedto move only along the vertical segment between points A= (0,1) andB= (0,\u221a2), under theaction of the single available motor torque \u03c4at the \ufb01rst joint. The second joint is passive and alldissipative effects can be neglected.a) Derive a (one-dimensional) reduced dynamic model of the constrained robot.b) If the robot is in an equilibrium state with its end effector in A, what is the applied torque \u03c40?c) Suppose that the end effector should execute a rest-to-rest motion from AandBwith asinusoidal acceleration pro\ufb01le at an angular frequency \u03c9= 0.5 [rad/s]. What is the explicitexpression of the needed torque command \u03c4d(t)?A=(0,1)xyq1B=(0,2)q2\u2a01\u2a01\ud835\udf0fg0Figure 3: A 2R robot in constrained motion, with one actuator only at the \ufb01rst joint.[210 minutes (3.5 hours); open books]2", "solution": "Apart from the knowledge of unitary link lengths, no dynamic information is provided about theplanar 2R robot in Fig. 3, Therefore, in its dynamic model,M(q)\u00a8q+c(q,\u02d9q) +g(q) =u+AT(q)\u03bb=(\u03c40)+AT(q)\u03bb, (11)we will use a parametric form for the inertia, Coriolis/centrifugal, and gravity termsM(q) =(a1+ 2a2c2a3+a2c2a3+a2c2a3),c(q,\u02d9q) =(\u2212a2s2( \u02d9q2+ 2 \u02d9q1) \u02d9q2a2s2\u02d9q21),g(q) =(a4c1+a5c12a5c12),6with dynamic coefficients ai,i= 1...,5,and using the shorthand notation for trigonometricquantities. On the right-hand side of (11), we have taken into account that there is no motorat the second joint (the joint is passive) and that the robot is subject to a holonomic constraint,providing a reaction force \u03bb\u2208R. The scalar constraint on the robot end effector is written ask(p) =px= 0\u21d2h(q) =k(f(q)) =c1+c12= 0.The Jacobian of this constraint isA(q) =\u2202h(q)\u2202q=(\u2212(s1+s12)\u2212s12). (12)In the assumed hypothesis on the location of the two points AandB, the matrixA(q) is alwayswell de\ufb01ned and with full rank (= 1).In order to obtain the reduced dynamic model of the constrained 2R robot, the basic step is tode\ufb01ne a 1\u00d72 (row) vector D(q) that is linearly independent from A(q), possibly everywhere inthe region of interest. A useful choice is given by the following matrix (also with rank one in theconstrained space)D(q) =(c1+c12c12)\u21d2(A(q)D(q))=J(q), (13)generating in this way the (2 \u00d72) robot Jacobian. This matrix is always nonsingular in theconstrained region of operation of the 2R robot. Thus,(A(q)D(q))\u22121=J\u22121(q) =adj{J(q)}detJ(q)=1s2(c12 s12\u2212(c1+c12)\u2212(s1+s12))\u2206=(E(q)F(q)).We de\ufb01ne then the pseudo-velocity vy\u2208Ron the Cartesian line and the inverse mapping to \u02d9qasvy=D(q)\u02d9q=c1\u02d9q1+c12( \u02d9q1+ \u02d9q2), \u02d9q=F(q)vy=(s12\u2212(s1+s12))vy. (14)Note that a subscript yhas been added to vsince this is exactly the y-component of the end-effectorvelocity, the only allowed by the constraint. Since the elements of the matrix F(q) are availableanalytically, we can obtain its time derivative in closed form3\u02d9F(q) =1s2(c12( \u02d9q1+ \u02d9q2)\u2212c1\u02d9q1\u2212c12( \u02d9q1+ \u02d9q2))\u2212c2\u02d9q2s22(s12\u2212(s1+s12))Thus, the reduced dynamic model of the constrained 2R robot is given by the single differentialequation(FT(q)M(q)F(q))\u02d9vy=FT(q)(u\u2212c(q,\u02d9q)\u2212g(q)\u2212M(q)\u02d9F(q)vy), (15)with the (always positive) reduced inertia given by the scalarFT(q)M(q)F(q) =1s22(a3s21+ (a1\u2212a3)s212\u22122a2s1c2s12).3This means that we don\u2019t need to replace the term \u02d9F(q)\u02d9qby the longer expression \u2212(\u02d9E(q)\u02d9A(q) +F(q)\u02d9D(q))\u02d9qwithin the derivations of the constrained dynamics. This is re\ufb02ected in the form of the resulting equation (15).7Being only the single torque \u03c4available as input, we haveFT(q)u=1s2(s12\u2212(s1+s12))(\u03c40)=s12s2\u03c4, (16)withs2\u0338= 0 in the domain of interest. For the following developments, the derivation of theexpression of the force multiplier \u03bbis not needed.For item b), we need to \ufb01nd the robot con\ufb01guration associated with point A. The inverse kinematicsolution for this point can be found by geometric inspection: qA= (\u03c0/6,2\u03c0/3). Setting the robotat rest, we have that\u02d9q=0\u21d2c(qA,0) =0, v y=D(qA)\u02d9q= 0,and from (15) it follows(FT(qA)M(qA)F(qA))\u02d9vy=FT(qA)u\u2212FT(qA)g(qA) =s12s2\u23d0\u23d0\u23d0\u23d0q=qA\u03c4\u2212s12a4c1\u2212s1a5c12s2\u23d0\u23d0\u23d0\u23d0q=qA.In order to have \u02d9 vy= 0, i.e., an equilibrium, we need to apply the torque\u03c40=(a4c1\u2212s1s12a5c12)\u23d0\u23d0\u23d0\u23d0q=qA=\u221a32(a4+a5). (17)The value in (17) implicitly takes into account the reaction force (i.e., \u03bb) imposed by the constraintat the end effector, which helps sustaining the robot against gravity in the con\ufb01guration qA, evenin the absence of a motor torque at joint 2. In fact, note that this is notthe \ufb01rst component ofthe gravity torque g(qA), which isg1(qA) = (a4c1+a5c12)|q=qA=\u221a32(a4\u2212a5).For item c), we design \ufb01rst the required motion trajectory for the end-effector. We start from thedesired acceleration pro\ufb01le\u02d9vy,d(t) = \u2206 sin\u03c9t, t\u2208[0,T], T =2\u03c0\u03c9, (18)which is zero at start (for t= 0) and end (for t=T). The amplitude \u2206 >0 needs yet to bede\ufb01ned. Integrating this acceleration pro\ufb01le, and imposing zero speed at the motion start and end,we obtainvy,d(t) =\u2206\u03c9(1\u2212cos\u03c9t), t\u2208[0,T]. (19)The positional trajectory starting from A= (0,1) at timet= 0 is thenpy,d(t) =yA+\u2206\u03c9(t\u22121\u03c9sin\u03c9t).We impose that the motion ends in point B= (0,\u221a2) at timet=T= 2\u03c0/\u03c9, obtaining eventuallythe value of \u2206py,d(T) =yA+\u2206\u03c92\u03c0\u03c9=yB\u21d2 \u2206 =\u03c922\u03c0(yB\u2212yA) =\u03c922\u03c0(\u221a2\u22121)>0.8To compute the torque \u03c4d(t) that realizes the motion, we use (18), (19), and again (15), evaluatedalong the nominal state trajectory xd(t) = (qd(t),\u02d9qd(t)):\u03c4d(t) =s2s12\u23d0\u23d0\u23d0\u23d0q=qd(t)\u00b7FT(qd(t))(M(qd(t))F(qd(t)) \u02d9vy,d(t) +c(qd(t),\u02d9qd(t)) +g(qd(t))+M(qd(t))\u02d9F(qd(t))vy,d(t)).(20)To determine the state trajectory xd(t),t\u2208[0,T], to be used in (20), one starts withqd(0) =qA, \u02d9qd(0) = 0,and integrates forward in time the joint acceleration\u00a8qd=F(qd) \u02d9vy,d+\u02d9F(qd)F(qd)\u02d9qd,as driven by the desired (reduced) acceleration pro\ufb01le \u02d9 vy,d(t) in (18).", "robot": "2R", "tags": ["planar", "vertical"]},
 "22": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 0, "exam": "robo2", "question": "We need to calibrate the link lengths of a planar 2R robot, whose nominal values are \u02c6l1=\u02c6l2= 1 [m].All other kinematic parameters are assumed to be good enough. At four different Denavit-Hartenberg con\ufb01gurations q, the following data (in [m]) for the position p\u2208R2of the robotend-effector are collected by an accurate external measurement system:qa= (0,0)\u21d2pa= (2,0)qb= (\u03c0/2,0)\u21d2pb= (0,2)qc= (\u03c0/4,\u2212\u03c0/4)\u21d2pc= (1.6925,0.7425)qd= (0,\u03c0/4)\u21d2pd= (1.7218,0.6718).Provide the best estimate of the actual lengths l1andl2of the two robot links, using the aboveinformation. Is this calibration problem linear or nonlinear?", "solution": "This calibration task is formulated as a linear least squares problem. In fact, the relevant mea-surement equations for the planar 2R robot can be written as\u2206p=p\u2212\u02c6p=(l1c1+l2c12l1s1+l2s12)\u2212(\u02c6l1c1+\u02c6l2c12\u02c6l1s1+\u02c6l2s12)=(\u2206l1c1+ \u2206l2c12\u2206l1s1+ \u2206l2s12)=(c1c12s1s12)(\u2206l1\u2206l2),or\u2206p=\u03a6(q) \u2206l, with\u03a6(q) =(c1c12s1s12),without the need of any local approximation because the link lengths appear linearly in the directkinematics of the robot. From the nominal model, we compute in the chosen con\ufb01gurations\u02c6pa=(20), \u02c6pb=(02), \u02c6pc=(1.70710.7071), \u02c6pd=(1.70710.7071).Note that the \ufb01rst two nominal positions of the end-effector correspond to the measured ones.Stacking the results of the four experiments, we obtain the overdetermined linear system of equa-tions\u2206\u00afp=\uf8eb\uf8ec\uf8ec\uf8ed\u2206pa\u2206pb\u2206pc\u2206pc\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ed\u03a6(qa)\u03a6(qb)\u03a6(qc)\u03a6(qd)\uf8f6\uf8f7\uf8f7\uf8f8\u2206l=\u00af\u03a6\u2206l,or\u2206\u00afp=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed0000\u22120.01460.03540.0146\u22120.0354\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed1 10 00 01 10.7071 10.7071 01 0.70710 0.7071\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\u2206l=\u00af\u03a6\u2206l.By pseudoinversion of the 8 \u00d72 matrix \u00af\u03a6, we obtain the value that minimizes the estimation errorin a least squares sense,\u2206l=\u00af\u03a6#\u2206\u00afp=(0.05\u22120.05)=(\u2206l1\u2206l2). (1)Therefore, the resulting estimates of the lengths of the two links arel1=\u02c6l1+ \u2206l1= 1.05, l 2=\u02c6l2+ \u2206l2= 0.95 [m].We \ufb01nally note that the second and third regressor equations provide no information (all zeros!),whereas the fourth equation is a repetition of the \ufb01rst one. These phenomena are related to thesingularity of the \u03a6(q) matrix when sin q2= 0 (e.g., in the con\ufb01gurations qaandqb\u2014not thebest choices for calibration!). Therefore, these rows can be safely eliminated from the computationwithout any change in the \ufb01nal result.3", "robot": "2R", "tags": ["planar"]},
 "23": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 1, "exam": "robo2", "question": "A robot is driven by joint acceleration commands \u00a8q\u2208Rnwhich are kept constant for a (sufficientlysmall) sampling time Tc, i.e., \u00a8q(t) =\u00a8qk, fort\u2208[tk,tk+1) = [tk,tk+Tc). Thus, the next velocityat timet=tk+1can be expressed as \u02d9qk+1=\u02d9q(tk+1) =\u02d9qk+Tc\u00a8qk. At timet=tk, the robot is inthe state (qk,\u02d9qk) and has to realize a desired task acceleration \u00a8rd,k\u2208Rm, withm<n , being thetask function r=f(q). What is the expression of the command \u00a8qkthat executes the task whileminimizing the squared norm of the joint velocity at the next sampled instant tk+1?", "solution": "We are in the presence of redundancy ( m < n ). The objective function to be minimized at timet=tkis a complete quadratic function of the joint acceleration \u00a8qk, the input to be chosen. WehaveH(\u00a8qk) =12\ued79\ued79\u02d9qk+1\ued79\ued792=12\u2225\u02d9qk+Tc\u00a8qk\u22252=T2c2\u00a8qTk\u00a8qk+Tc\u02d9qTk\u00a8qk+c,with the constant c=12\u02d9qTk\u02d9qk. The unconstrained minimization of H(\u00a8qk) would yield the preferredacceleration \u00a8qk=\u2212\u02d9qk/Tc, which produces in fact a zero value for the non-negative objectivefunctionH. However, the required robot task is expressed by imposing the equality constraintJ(qk)\u00a8qk=\u00a8rd,k\u2212\u02d9J(qk)\u02d9qk,which is linear in the joint acceleration. Thus, the problem is in the standard form of LQ op-timization and the solution is found by applying the general formula with x=\u00a8qk,W=T2cI,x0=\u2212\u02d9qk/Tc, andy=\u00a8rd,k\u2212\u02d9J(qk)\u02d9qk(see the slides). Assuming a full rank Jacobian, we obtain\u00a8qk=\u2212\u02d9qkTc+1T2cJT(qk)(1T2cJ(qk)JT(qk))\u22121(\u00a8rd,k\u2212\u02d9J(qk)\u02d9qk\u2212J(qk)(\u2212\u02d9qkTc))=\u2212\u02d9qkTc+JT(qk)(J(qk)JT(qk))\u22121(\u00a8rd,k\u2212\u02d9J(qk)\u02d9qk+J(qk)\u02d9qkTc)=J#(qk)(\u00a8rd,k\u2212\u02d9J(qk)\u02d9qk)\u2212(I\u2212J#(qk)J(qk))\u02d9qkTc.(2)", "robot": "unknown", "tags": []},
 "24": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 2, "exam": "robo2", "question": "Consider the spatial 3R robot in Fig. 1. Using the D-H generalized coordinates de\ufb01ned therein,compute the robot inertia matrix M(q). Assume that the links have their center of mass onx1,y2, andx3, respectively, and that the barycentric link inertia matrices are diagonal, i.e.,iIci= diag{Ici,xx,Ici,yy,Ici,zz},i= 1,2,3.x0z0x1z1z2\u2295\u2295x2x3y3\u2295q1q2q3Figure 1: A spatial 3R robot, with D-H frames assigned to each link.1", "solution": "We compute the kinetic energy of the three links. Denote by mithe mass of link i, byliits length(i.e., the parameter dioraiof the D-H convention), and byiIci= diag{Ici,xx,Ici,yy,Ici,zz}itsinertia matrix, for i= 1,2,3. Moreover, let dci>0 be the distance of the center of mass (CoM) oflinkifrom the axis of joint i; because of the assumption on the location of the CoM of each link,only one scalar is needed for each link1.Link 1T1=12(Ic1,zz+m1d2c1)\u02d9q21.Link 2T2=12m2l21\u02d9q21+12Ic2,yy( \u02d9q1+ \u02d9q2)2.Link 3pc3=\uf8eb\uf8ec\uf8edl1c1+dc3c3c12l1s1+dc3c3s12l2+dc3s3\uf8f6\uf8f7\uf8f8\u21d2vc3=\u02d9pc3=\uf8eb\uf8ec\uf8ed\u2212(l1s1\u02d9q1+dc3c3s12( \u02d9q1+ \u02d9q2) +dc3s3c12\u02d9q3)l1c1\u02d9q1+dc3c3c12( \u02d9q1+ \u02d9q2)\u2212dc3s3s12\u02d9q3dc3c3\u02d9q3\uf8f6\uf8f7\uf8f81\u03c91=\uf8eb\uf8ed00\u02d9q1\uf8f6\uf8f8\u21d22\u03c92=\uf8eb\uf8ed0\u02d9q1+ \u02d9q20\uf8f6\uf8f8\u21d23\u03c93=2RT3(q3)\uf8eb\uf8ed2\u03c92+\uf8eb\uf8ed00\u02d9q3\uf8f6\uf8f8\uf8f6\uf8f8=\uf8eb\uf8eds3( \u02d9q1+ \u02d9q2)c3( \u02d9q1+ \u02d9q2)\u02d9q3\uf8f6\uf8f81If using the moving frames algorithm for the computation ofivciin the kinetic energy, it will be convenientto de\ufb01ne the constant vectors of CoM positions in each of the local frame as follows:1rc1= (\u2212l1+dc1,0,0),2rc2= (0,\u2212l2+dc2,0) \u2014although this is not relevant in2vc2, and3rc3= (\u2212l3+dc3,0,0). These symbolic choicesin the recursive algorithm provide the same result as with the direct computations used in the text.4T3=12m3vTc3vc3+123\u03c9T33Ic33\u03c93=12m3(l21\u02d9q21+d3c3c23( \u02d9q1+ \u02d9q2)2+ 2l1dc3(c2c3\u02d9q1( \u02d9q1+ \u02d9q2)\u2212s2s3\u02d9q1\u02d9q3))+12(Ic3,xxs23+Ic3,yyc23)( \u02d9q1+ \u02d9q2)2+12Ic3,zz\u02d9q23.Inertia matrixM(q) =\uf8eb\uf8ec\uf8edm11(q2,q3)m12(q2,q3)m13(q2,q3)m12(q2,q3)m22(q3) 0m13(q2,q3) 0 m33\uf8f6\uf8f7\uf8f8 (3)withm11(q2,q3) =Ic1,zz+m1d2c1+Ic2,yy+ (m2+m3)l21+m3d2c3c23+ 2m3l1dc3c2c3+(Ic3,xxs23+Ic3,yyc23)m12(q2,q3) =Ic2,yy+m3d2c3c23+m3l1dc3c2c3+(Ic3,xxs23+Ic3,yyc23)m13(q2,q3) =\u2212m3l1dc3s2s3m22(q3) =Ic2,yy+m3d2c3c23+(Ic3,xxs23+Ic3,yyc23)m33=Ic3,zz+m3d2c3.Note \ufb01nally that one can remove the presence of s23by replacing it everywhere with (1 \u2212c23). Thisis also what MATLAB does when applying a simplify instruction to the symbolic expressions.The affected elements of M(q) become thenm11(q2,q3) =Ic1,zz+m1d2c1+Ic2,yy+ (m2+m3)l21+Ic3,xx+ 2m3l1dc3c2c3+(Ic3,yy+m3d2c3\u2212Ic3,xx)c23m12(q2,q3) =Ic2,yy+Ic3,xx+m3l1dc3c2c3+(Ic3,yy+m3d2c3c23\u2212Ic3,xx)c23m22(q3) =Ic2,yy+Ic3,xx+(Ic3,yy+m3d2c3\u2212Ic3,xx)c23.", "robot": "3R", "tags": []},
 "25": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 3, "exam": "robo2", "question": "A planar 3R robot with unitary link lengths is commanded by a joint velocity \u02d9q\u2208R3withcomponents bounded as |\u02d9qi|\u22642 [rad/s],i= 1,2,3. The D-H joint variables have limited rangesspeci\ufb01ed byq1\u2208[\u2212\u03c0/2,\u03c0/2], q 2\u2208[0,2\u03c0/3], q 3\u2208[\u2212\u03c0/4,\u03c0/4].At the con\ufb01guration \u02c6q= (2\u03c0/5,\u03c0/2,\u2212\u03c0/4), the robot should move its end-effector horizontallywith a speed vx=\u22123 [m/s], while trying to keep the joints close to their midranges. Computethe value of the instantaneous joint velocity \u02d9qthat performs the Cartesian task while improvingat best the criterion Hrange (q). Check if this joint velocity is feasible and, if not, perform the leastend-effector task scaling to recover feasibility.", "solution": "The planar 3R robot ( n= 3) is redundant for the Cartesian position task ( m= 2). When the jointlimits are not regarded as hard constraints, the solution to the stated problem is\u02d9q=J#(q)\u02d9r\u2212(I\u2212J#(q)J(q))\u2207qHrange (q),where the task velocity isr=(pxpy)\u21d2 \u02d9r=(vxvy)=(\u221230),and the associated Jacobian, evaluated at \u02c6q= (2\u03c0/5,\u03c0/2,\u2212\u03c0/4), is given byJ(q) =(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123)\u21d2J=(\u22122.1511\u22121.2000\u22120.8910\u22121.0960\u22121.4050\u22120.4540).For each joint i, we have a range [ qm,i,qM,i] and a midrange \u00af qi= (qM,i+qm,i)/2. As a result, theobjective function to be minimized isHrange (q) =12nn\u2211i=1(qi\u2212\u00afqi)2(qM,i\u2212qm,i)2=16(q21\u03c02+(q2\u2212(\u03c0/3))2(2\u03c0/3)2+q23(\u03c0/2)2).5Its gradient evaluated at \u02c6q= (2\u03c0/5,\u03c0/2,\u2212\u03c0/4) is\u2207qHrange (q) =13\uf8eb\uf8ec\uf8edq1/\u03c02(q2\u2212\u03c0/3)/(2\u03c0/3)2q3/(\u03c0/2)2\uf8f6\uf8f7\uf8f8\u21d2 \u2207 qHrange =\uf8eb\uf8ec\uf8ed0.04240.0398\u22120.1061\uf8f6\uf8f7\uf8f8.As a result, the two terms of the solution are separately evaluated as\u02d9qr=J#\u02d9r=\uf8eb\uf8ec\uf8ed2.1076\u22121.92610.8730\uf8f6\uf8f7\uf8f8, \u02d9qn=\u2212(I\u2212J#J)\u2207qHrange =\uf8eb\uf8ec\uf8ed\u22120.043700.1056\uf8f6\uf8f7\uf8f8,yielding thus\u02d9q=\u02d9qr+\u02d9qn=\uf8eb\uf8ec\uf8ed2.0638\u22121.92610.9786\uf8f6\uf8f7\uf8f8. (4)The \ufb01rst component of the solution exceeds the (positive) velocity bound. This is true as wellfor the minimum norm solution \u02d9qr; the \ufb01rst component of the null space term \u02d9qn, being negative,mildens the situation but is not sufficient to recover feasibility. Therefore, the largest scaling factork<1 of the task velocity \u02d9rthat allows to obtain a feasible solution w.r.t. the joint velocity bounds(uniformly equal to \u02d9 qmax= 2 [rad/s] for all joints) is computed as follows:\u02d9r\u2192k\u02d9r\u21d2\u02d9q\u2192k\u02d9qr+\u02d9qn\u21d2k\u02d9qr,1+ \u02d9qn,1\u2193= \u02d9qmax\u21d2k\u2217=\u02d9qmax\u2212\u02d9qn,1\u02d9qr,1=2 + 0.04372.1076= 0.9697.Therefore, the scaled task velocity and the scaled joint velocity that recovers feasibility are\u02d9rs=k\u2217\u02d9r=(\u22122.90910)\u21d2 \u02d9qs=k\u2217\u02d9qr+\u02d9qn=\uf8eb\uf8ed2\u22121.86780.9521\uf8f6\uf8f8\u21d2J\u02d9qs=(\u22122.90910).(5)It should be noted that, in this particular case, we could have chosen a larger step \u03b1>1 (ratherthan\u03b1= 1) along the negative gradient direction of Hrange within the term \u02d9qn, thus recoveringfeasibility of the solution without the need of task scaling. On the other hand, a direct applicationof the SNS method to recover feasibility would not be correct, since the solution \u02d9qin (4) containsalso a null-space term that does not scale with the task velocity \u02d9r.", "robot": "3R", "tags": ["planar", "horizontal", "constraints"]},
 "26": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 4, "exam": "robo2", "question": "Figure 2 shows a PR robot and its inertia matrix, already expressed in terms of three dynamiccoefficients a,bandc. The robot moves in a vertical plane. A task trajectory yd(t)\u2208Ris assignedto the coordinate yof the end-effector position. With the robot being at rest in the con\ufb01guration\u00afq=(1\u03c0/2)T, provide the joint force/torque inputs \u03c4A\u2208R2and\u03c4B\u2208R2executing the desiredtask that instantaneously minimize, respectively,HA=12\u2225\u03c4\u22252orHB=12\u2225\u03c4\u22252M\u22122(\u00afq).Which of the two solutions \u03c4Aand\u03c4Bhas the largest \ufb01rst component in absolute value?q1q2yx\u2295m2m1\u2295dc2l2g0M(q) =(a b cosq2bcosq2c)>0Figure 2: A planar PR robot and its inertia matrix.", "solution": "The planar PR robot ( n= 2) is redundant with respect to a task of dimension m= 1. For thespeci\ufb01ed (scalar) task, we haver=y=q1+l2s2\u21d2 \u02d9r= \u02d9y=(1\u2212l2c2)(\u02d9q1\u02d9q2)=J(q)\u02d9q,with the Jacobian being always full rank. The closed-form solutions to the two problems of dynamicredundancy optimization are obtained from the general LQ formulation as\u03c4A=(J(q)M\u22121(q))#(\u00a8r\u2212\u02d9J(q)\u02d9q+J(q)M\u22121(q) (c(q,\u02d9q) +g(q)))and\u03c4B=M(q)J#(q)(\u00a8r\u2212\u02d9J(q)\u02d9q+J(q)M\u22121(q) (c(q,\u02d9q) +g(q))).6Since the robot is at rest, the velocity terms cand \u02d9J\u02d9qare zero. Evaluating the inertia matrix andthe task Jacobian in the con\ufb01guration \u00afq=(1\u03c0/2)T,M(\u00afq) =(a00c),J(\u00afq) =(1 0),we compute\u03c4A=((1 0)(1/a 00 1/c))#(\u00a8yd+(1 0)(1/a 00 1/c)g(q))=(1/a0)#(\u00a8yd+(1/a0)g(q))=(a0)(\u00a8yd+ (1/a)g1(\u00afq)) =(a\u00a8yd+g1(\u00afq)0).(6)Similarly,\u03c4B=(a00c)(1 0)#(\u00a8yd+(1 0)(1/a 00 1/c)g(q))=(a0)(\u00a8yd+ (1/a)g1(\u00afq)) =(a\u00a8yd+g1(\u00afq)0)=\u03c4A.(7)As a result, the two solutions (6) and (7) are identical in this very particular case (in fact, it ishere(JM\u22121)#=MJ#, an identity which is not true in general). Note that there is no need toderive the expression of the model term g(q) for this comparison.A \ufb01nal remark is in order. The torque commands \u03c4Aand\u03c4B, which have been obtained abovefrom the general solution of the associated constrained minimization problems, could have beenfound in this speci\ufb01c case by inspection. In the con\ufb01guration \u00afq, the PR robot is fully stretchedalong the vertical y-axis. In addition, being the robot at rest, any torque applied at the secondjoint would give nocontribution to the desired task acceleration \u00a8 yd. Since we pursue in both casesa (weighted) minimum torque norm solution, the second joint torque \u03c42should simply be zero; theentire task (task acceleration \u00a8 ydin the vertical direction plus gravity compensation) is executed ina unique way by the \ufb01rst joint only.", "robot": "PR", "tags": ["planar", "vertical"]},
 "27": {"file": "Robotics2_Midterm_Test_2021-22_22.04.13.pdf", "date": "22-04-13", "num_ex": 5, "exam": "robo2", "question": "For the same PR robot in Fig. 2, determine the gravity term g(q) in the dynamic model and de\ufb01nea tight upper bound \u03b1>0 on the norm of the square matrix \u2202g(q)/\u2202q, for any value of q.[180 minutes (3 hours); open books]2", "solution": "The gravity term of the PR robot in Fig. 2 is obtained as the gradient of the sum of the potentialenergies of each linkUi(q) =\u2212migTr0,ci=\u2212mi(0\u2212g00)r0,ci=mig0r0,ciy, i= 1,2.Thus (neglecting an arbitrary constant), we haveU(q) =U1(q1) +U2(q1,q2) =m1g0q1+m2g0(q1+dc2s2)that givesg(q) =(\u2202U(q)\u2202q)T=((m1+m2)g0m2g0dc2c2).The gradient of g(q) w.r.t.qis the symmetric (here, negative semi-de\ufb01nite) Hessian matrix\u2202g(q)\u2202q=\u22022U(q)\u2202q2=(0 00\u2212m2g0dc2s2).7Its norm (associated to the standard Euclidean norm of vectors) is given by\ued79\ued79\ued79\ued79\u2202g(q)\u2202q\ued79\ued79\ued79\ued79=\ued6a\ued6b\ued6b\u221a\u03bbmax{\u2202g(q)\u2202q(\u2202g(q)\u2202q)T}=\u221a\u03bbmax{(0 00m22g20d2c2s22)}=m2g0dc2|s2|.Thus, an upper bound for this norm is\ued79\ued79\ued79\ued79\u2202g(q)\u2202q\ued79\ued79\ued79\ued79\u2264\u03b1=m2g0dc2,\u2200q. (8)This upper bound is tight, being attained at q2=\u00b1\u03c0/2.", "robot": "PR", "tags": []},
 "28": {"file": "Robotics2_12.07.05.pdf", "date": "12-07-05", "num_ex": 0, "exam": "robo2", "question": "Huge portal robots are used in the aeronautical industry for moving and reorienting large surfaceplates of aircraft bodies. Figure 1 shows a subassembly of one such robots, having three actuatedjoints and three passive joints (shown in different colors).Z!0!X!0!q2!q!1!q3!D!d!d!H!H!= passive prismatic joint = passive revolute joint = actuated prismatic joint = actuated revolute joint g0!m1!m2!m3!Figure 1: A portal robot used in the aeronautic industryTwo vertical bars of height Hare placed at a distance D. Along the vertical bars, two actuatedprismatic joints (with variables q1\u2208[0,H] andq2\u2208[0,H]) are used to modify the position andthe orientation of a connecting bar in the vertical plane ( x0,z0). The two passive revolute joints,placed at a distance d << D from the vertical bars, transform the linear motion of q1andq2in a linear and/or angular motion of the connecting bar. The passive prismatic joint along theconnecting bar accommodates itself so that the bar changes length consistently with the positionsq1andq2. Furthermore, the connecting bar can be rotated by an actuated revolute joint (withangleq3) along its main geometric axis. The available actuating force/torque u= (F1,F2,\u03c43)performs work on the generalized coordinates q= (q1,q2,q3). From an operational point of view,curved plates of the aircraft body are placed and \ufb01xed on the connecting bar. Then, the motion ofthe portal robot can change the orientation of the normals to the plate surface to be worked (e.g.,for riveting).Figure 1 shows also the location of the center of masses of the three main moving bodies (ofmassesm1,m2, andm3) of the portal robot. The following assumptions are made.\u2022The mechanism associated to the passive prismatic joint is such that the center of mass ofthe connecting bar is always kept on the vertical line passing through the center of the portal(i.e., atx0=D/2), despite the extension or retraction of the connecting bar itself.\u2022The connecting bar has a diagonal inertia matrixbIb= diag{Ix,Iy,Iz}, withIy=Iz1when expressed in a frame ( xb,yb,zb) attached to the bar, with origin at its center of massand principal axes along its geometric axes of symmetry.\u2022The values of the scalar inertias IxandIy=Izchange with the length of the connecting bar.Since the distance Dis much larger than the actual excursion of q1andq2, this effect can beneglected if needed. In this case, for dynamic modeling purposes the bar will be consideredof constant length D\u22122d(as when it is horizontal or close to this situation).With the above description in mind, and considering the previous assumptions:1. Derive the dynamic model of this portal robot using the generalized coordinates qin aLagrangian approach.2. De\ufb01ne the simplest control law for uthat is able to regulate the robot to a desired con-stant equilibrium state ( q,\u02d9q) = (qd,0), de\ufb01ning conditions on the control parameters thatguarantee global asymptotic stability.3.Bonus, or in alternative to 2. Show that q= (q1,q2,q3) is in fact a set of generalizedcoordinates for this robot, which has the structure of a closed kinematic chain (closed throughthe \ufb02oor). In particular, show that the values of the angular position of the two passiverevolute joints and the extension of the connecting bar thanks to the presence of the passiveprismatic joint can be uniquely obtained from the values of q1,q2, andq3.[240 minutes; open books]2", "solution": "Following the Lagrangian approach, we compute the kinetic energy and the potential energy dueto gravity for the robot bodies based on the generalized coordinates q= (q1,q2,q3).The kinetic energy for the \ufb01rst two bodies (moving only up and down) is simplyT1=12m1\u02d9q21, T 2=12m2\u02d9q22.For the third body (the connecting bar), it is useful to introduce the variable\u03b1= arctan(q1\u2212q2D\u22122d)\u2208(\u2212\u03c02,\u03c02)(1)that represents the angle of the bar w.r.t. to the horizontal (positive counterclockwise around theaxisy0). For evaluating the linear contribution to the kinetic energy of this barT3,l=12m3vTc3vc3,we compute the position of its center of mass and then differentiate w.r.t. time:pc3=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edD20q1+q22\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u21d2 vc3=\u02d9pc3=\uf8eb\uf8ec\uf8ec\uf8ed00\u02d9q1+ \u02d9q22\uf8f6\uf8f7\uf8f7\uf8f8.Therefore,T3,l=12m3(\u02d9q1+ \u02d9q22)2.For evaluating the angular contribution to the kinetic energyT3,a=12\u03c9T3Ib\u03c93=12b\u03c9T3bIbb\u03c93it will be convenient to work in the frame ( xb,yb,zb) attached to the center of mass and havingthexbalong the principal direction of the bar (rotated thus w.r.t. x0by the angle \u03b1around y0),in which the inertia matrix is diagonal. Note that this frame has ybaligned with y0whenq3= 0.Its absolute orientation is expressed by the rotation matrix0Rb=0Rd(\u03b1)dRb(q3) =\uf8eb\uf8edcos\u03b10 sin\u03b10 1 0\u2212sin\u03b10 cos\u03b1\uf8f6\uf8f8\uf8eb\uf8ed1 0 00 cosq3\u2212sinq30 sinq3cosq3\uf8f6\uf8f8=\uf8eb\uf8edc\u03b1s\u03b1s3s\u03b1c30c3\u2212s3\u2212s\u03b1c\u03b1s3c\u03b1c3\uf8f6\uf8f8.We will \ufb01rst compute the angular velocity0\u03c93, expressed in the base frame, by superposition ofthe contributions of \u02d9 q1, \u02d9q2, and \u02d9q3(just as in the derivation of the geometric Jacobian). Considerthe single contribution of \u02d9 q1, while \u02d9q2= \u02d9q3= 0. When the coordinate q1moves (say, upward,3i.e., with \u02d9q1>0), the same linear velocity is applied to the left end of the connecting bar. Thiscan be decomposed in a velocity component along the bar, which will slightly extend it, and avelocity component along the normal to the bar, which is responsible for its rotation (clockwisewhen looking at the structure from the front side, and thus counterclockwise when seen from y0).When the bar is tilted by \u03b1, the resulting angular velocity contribution due to \u02d9 q1will be0\u03c93|\u02d9q1=\uf8eb\uf8ec\uf8ec\uf8ed0cos\u03b1\u03b40\uf8f6\uf8f7\uf8f7\uf8f8\u02d9q1, with\u03b4=\u221a(q1\u2212q2)2+ (D\u22122d)2, (2)being\u03b4the actual length of the connecting bar. Indeed, as mentioned in the text, we could neglectthe (small) contribution by ( q1\u2212q2)2and have simply \u03b4=D\u22122d>0. Proceeding in the generalcase, the following relation holds from trigonometry:(q1\u2212q2D\u22122d)=\u03b4(sin\u03b1cos\u03b1). (3)Therefore, we can rewrite the contribution of \u02d9 q1to0\u03c93as0\u03c93|\u02d9q1=\uf8eb\uf8ec\uf8ec\uf8ed0\u03b4cos\u03b1\u03b420\uf8f6\uf8f7\uf8f7\uf8f8\u02d9q1=\uf8eb\uf8ec\uf8ec\uf8ed0D\u22122d(q1\u2212q2)2+ (D\u22122d)20\uf8f6\uf8f7\uf8f7\uf8f8\u02d9q1.The same argument can be used for the contribution of \u02d9 q2, except that an opposite sign will result.Adding also the contribution of \u02d9 q3to0\u03c93, we obtain \ufb01nally0\u03c93=\uf8eb\uf8ec\uf8ec\uf8ed0D\u22122d(q1\u2212q2)2+ (D\u22122d)20\uf8f6\uf8f7\uf8f7\uf8f8\u02d9q1\u2212\uf8eb\uf8ec\uf8ec\uf8ed0D\u22122d(q1\u2212q2)2+ (D\u22122d)20\uf8f6\uf8f7\uf8f7\uf8f8\u02d9q2+0Rb\uf8eb\uf8ec\uf8ed100\uf8f6\uf8f7\uf8f8\u02d9q3.Therefore, in the frame attached to the bar, it isb\u03c93=0RTb0\u03c93=0RTb\uf8eb\uf8ec\uf8ec\uf8ed0D\u22122d(q1\u2212q2)2+ (D\u22122d)20\uf8f6\uf8f7\uf8f7\uf8f8( \u02d9q1\u2212\u02d9q2) +\uf8eb\uf8ec\uf8ed\u02d9q300\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u02d9q3(D\u22122d)( \u02d9q1\u2212\u02d9q2)(q1\u2212q2)2+ (D\u22122d)2cosq3\u2212(D\u22122d)( \u02d9q1\u2212\u02d9q2)(q1\u2212q2)2+ (D\u22122d)2sinq3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.(4)By neglecting instead the presence of ( q1\u2212q2)2, we have the reduced expressionb\u03c93,r=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u02d9q3\u02d9q1\u2212\u02d9q2D\u22122dcosq3\u2212\u02d9q1\u2212\u02d9q2D\u22122dsinq3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8. (5)4When using eq. (4), the angular kinetic energy T3,aof the bar will beT3,a=12b\u03c9T3bIbb\u03c93=12(Ix\u02d9q23+((D\u22122d)( \u02d9q1\u2212\u02d9q2)(q1\u2212q2)2+ (D\u22122d)2)2(Iycos2q3+Izsin2q3))=12(Ix\u02d9q23+Iy(D\u22122d(q1\u2212q2)2+ (D\u22122d)2)2( \u02d9q1\u2212\u02d9q2)2),where the last expression has been simpli\ufb01ed using the assumption Iy=Iz(indeed, a very relevantinertial property!). If eq. (5) is used instead, the (reduced) angular kinetic energy T3,a|rof the barwill beT3,a|r=12b\u03c9T3,rbIbb\u03c93,r=12(Ix\u02d9q23+Iy(D\u22122d)2( \u02d9q1\u2212\u02d9q2)2).At this stage, the total kinetic energy of the robot takes the usual formT=T1+T2+ (T3,l+T3,a) =12\u02d9qTB(q)\u02d9qwith the robot inertia matrix given byB(q) =B\u2032+B\u2032\u2032(q1,q2) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm1+m34m320m32m2+m3400 0 Ix\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ec\uf8edIyb(q1,q2)\u2212Iyb(q1,q2) 0\u2212Iyb(q1,q2)Iyb(q1,q2) 00 0 0\uf8f6\uf8f7\uf8f7\uf8f8,(6)with the notationb(q1,q2) =(D\u22122d(q1\u2212q2)2+ (D\u22122d)2)2.We note that only the (symmetric) matrix term B\u2032\u2032of the positive de\ufb01nite robot inertia matrix iscon\ufb01guration dependent (and depends only on the difference q1\u2212q2).The associated Coriolis and centrifugal termc(q,\u02d9q) =\uf8eb\uf8edc1(q,\u02d9q)c2(q,\u02d9q)c3(q,\u02d9q)\uf8f6\uf8f8is computed as usual through the Christoffel symbolsci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q=12\u02d9qT[(\u2202bi(q)\u2202q)+(\u2202bi(q)\u2202q)T\u2212(\u2202B(q)\u2202qi)]\u02d9q, i = 1,2,3,being bi(q) theith column of matrix B(q). ThusC1(q) =12\uf8eb\uf8ec\uf8ec\uf8ec\uf8edIyc(q1,q2)\u2212Iyc(q1,q2) 0\u2212Iyc(q1,q2)Iyc(q1,q2) 00 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8,5withc(q1,q2) =\u2202b(q1,q2)\u2202q1=\u22124(D\u22122d)2(q1\u2212q2)((q1\u2212q2)2+ (D\u22122d)2)3and where we used the specular dependence of bonq1andq2. Similarly, it is easy to see thatC2(q) =\u2212C1(q). Moreover, C3=O. As a result, we obtainc(q,\u02d9q) =12\uf8eb\uf8ec\uf8edIyc(q1,q2) ( \u02d9q1\u2212\u02d9q2)2\u2212Iyc(q1,q2) ( \u02d9q1\u2212\u02d9q2)20\uf8f6\uf8f7\uf8f8. (7)If we had used instead the reduced expression for the kinetic energy of the bar, thenT=T1+T2+ (T3,l+T3,a|r) =12\u02d9qTB\u02d9q, (8)and the robot inertia matrix would be constantB=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8edm1+m34+Iy(D\u22122d)2m32\u2212Iy(D\u22122d)20m32\u2212Iy(D\u22122d)2m2+m34+Iy(D\u22122d)200 0 Ix\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8. (9)Accordingly, c=0would follow (no Coriolis and centrifugal terms).We turn now to the computation of the potential energy due to gravity, U(q) =U1+U2+U3.For this, since0g=(0 0\u2212g0)Twithg0= 9.81 [m/s2], we just need to evaluate the height ofthe centers of masses. ThusU1=m1g0q1, U 2=m2g0q2,while, in view of the assumption on the position of the center of mass of the connecting bar,U3=m3g0q1+q22.Therefore,g=(\u2202U(q)\u2202q)T=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed(m1+m32)g0(m2+m32)g00\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8edg1g20\uf8f6\uf8f7\uf8f7\uf8f8. (10)The gravity term is constant, and so \u2202g/\u2202q=0.Summarizing, in the general case the robot dynamic model takes the formB(q)\u00a8q+c(q,\u02d9q) +g=u, (11)with inertia matrix, Coriolis and centrifugal term, and gravity term given respectively by eqs. (6),(7), and (10). In the reduced case, the dynamic model simpli\ufb01es toB\u00a8q+g=u, (12)6with constant inertia matrix given by (9) and gravity term as in (10). The dynamic equations (12)are fully linear.In order to solve the regulation problem for a desired equilibrium state ( q,\u02d9q) = (qd,0) asrequested, we can use a decentralized PD control law with constant compensation of gravity (whichis anyway constant for all con\ufb01gurations!). Therefore, we haveu=Kp(qd\u2212q)\u2212Kd\u02d9q+g=\uf8eb\uf8ec\uf8edkp1(qd,1\u2212q1)\u2212kd1\u02d9q1+g1kp2(qd,2\u2212q2)\u2212kd2\u02d9q2+g2kp3(qd,3\u2212q3)\u2212kd3\u02d9q3\uf8f6\uf8f7\uf8f8. (13)Since the Hessian of the gravitational potential energy is identically zero, there will be no strictlypositive lower bound for the (diagonal) elements of Kpin this control law: in order to guaranteeglobal asymptotic stability, the sufficient conditions for the control gains are only Kp>0 andKd>0. Note that this applies to both dynamic models (11) and (12). The only difference is thatfor (12), global exponential stability will be further obtained since the system dynamics is linear.In this case, the following simple modi\ufb01cation of (13)u=B(Kp(qd\u2212q)\u2212Kd\u02d9q) +g,i.e., with non-diagonal but still constant PD gains BKpandBKd, will also provide a fullydecoupled dynamics of the joint errors in the closed-loop system.For the bonus (or alternative to the above) question, consider the sketch in Fig. 2 where, besidethe variables q1,q2andq3related to the actuated joints, we have assigned also variables \u03b2and\u03b3tothe two passive revolute joints1, and\u03b4to the passive prismatic joint. The purpose of our analysis isto show that the set of variables ( \u03b2,\u03b3,\u03b4 ) can always be expressed as a function of ( q1,q2) \u2014this issimilar to what we have already shown in eq. (1) for the angle \u03b1. Therefore, the robot con\ufb01gurationcan be fully described by the minimal set ( q1,q2,q3), which is indeed the chosen set of con\ufb01gurationvariables used for the Lagrangian dynamics. Because the closed kinematic chain lies always in theplane ( x0,z0), the variable q3plays no role in the analysis, and will then no longer be considered.Z!0!X!0!q2!D!d!d!q!1!! ' # $ q3!! 00' # $ % & 'Figure 2: The portal robot as a closed kinematic chain in the plane ( x0,z0). The passive jointsare equipped with the additional variables \u03b2,\u03b3, and\u03b41Note that all angles are conveniently shown in Fig. 2 with an arrow indicating their positive rotation.7The presence of a \u2018loop closure\u2019 (through the \ufb02oor) in this robotic structure imposes the fol-lowing kinematic constraints (refer to the vectors shown in black in Fig. 2):(0q1)+(d0)+\u03b4(sin\u03b2cos\u03b2)+(d0)+(0\u2212q2)+(\u2212D0)=(00). (14)Moreover, the following relations hold among angles:\u03b2+\u03b3=\u03c0, \u03b1 +\u03b2=\u03c02. (15)From these, both \u03b2and\u03b3can be expressed as a function of \u03b1and then, via eq. (1), as a functionofq1\u2212q2. Equation (14) can be rearranged as(D\u22122dq1\u2212q2)=\u03b4(sin\u03b2cos\u03b2)=\u03b4(cos\u03b1sin\u03b1), (16)where the last equality follows from the second relation in (15). This is exactly the trigonometricrelation (3). Moreover, squaring and adding the two equations in (16) yields\u03b4=\u221a(q1\u2212q2)2+ (D\u22122d)2>0,which is the variable already de\ufb01ned in (2). Finally, dividing the second equation in (16) by the\ufb01rst one, we obtaintan\u03b1=q1\u2212q2D\u22122d,recovering thus the original expression for \u03b1introduced in (1).", "robot": "RPP", "tags": ["horizontal", "vertical", "constraints"]},
 "29": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 0, "exam": "robo2", "question": "A 3R planar robot is subject to hard joint velocity limits |\u02d9qi|\u2264Vi, fori= 1,2,3, withV1= 1,V2= 1.5, andV2= 2 [rad/s]. At the current con\ufb01guration, its task Jacobian is given byJ=(\u22121\u22121\u22120.5\u22120.366\u22120.866\u22120.866)and the task requires a Cartesian velocity v=(2 1)T[m/s]. Apply the SNS algorithm to \ufb01nd afeasible solution \u02d9q\u2208R3with the least possible norm, including task scaling if needed.", "solution": "The SNS algorithm at the velocity level starts with checking whether the minimum norm solutionis feasible with respect to the joint velocity bounds. Using the pseudoinverse of the Jacobian Jand the Cartesian velocity v, we compute\u02d9q0=\u02d9qPS=J#v=\uf8eb\uf8ec\uf8ed\u22121.1333 0.9309\u22120.2124\u22120.31360.6914\u22121.2345\uf8f6\uf8f7\uf8f8(21)=\uf8eb\uf8ec\uf8ed\u22121.3358\u22120.73830.1482\uf8f6\uf8f7\uf8f8\u21d0<\u2212V1=\u22121 !!\u2208[\u2212V2,V2] = [\u22121.5,1.5]\u2208[\u2212V3,V3] = [\u22122,2]Therefore, we saturate the \ufb01rst joint velocity at its overdriven limit, \u02d9 q1=\u2212V1=\u22121 [rad/s], andrecompute the task velocity v1that needs to be executed with the remaining two joints,v1=v\u2212J1\u02d9q0,1=v\u2212J1(\u2212V1) =(21)\u2212(\u22121\u22120.366)(\u22121) =(10.634),where byJi,i= 1,2,3, we denote the columns of the Jacobian J. We rewrite then the reducedproblem asJ(\u22121):=(J2J3)=(\u22121\u22120.5\u22120.8660\u22120.8660),\u02d9q(\u22121):=(\u02d9q2\u02d9q3)\u21d2J(\u22121)\u02d9q(\u22121)=v1,At this stage, the reduced solution is uniquely determined as\u02d9q1=(\u02d9q1,1\u02d9q1,2)=J\u22121(\u22121)v1=(\u22122 1.15472\u22122.3094)(10.634)=(\u22121.26790.5359)\u21d0both feasible!Recombining the joint velocity vector, we have the (minimum norm) feasible solution\u02d9q\u2217=\uf8eb\uf8ec\uf8ed\u02d9q0,1\u02d9q1,1\u02d9q1,2\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed\u22121\u22121.26790.5359\uf8f6\uf8f7\uf8f8[rad/s],and we can check that is satis\ufb01es indeed J\u02d9q\u2217=v. Thus, task scaling is not needed here.", "robot": "3R", "tags": ["planar"]},
 "30": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 1, "exam": "robo2", "question": "Determine all the conditions on the constant parameters a,b,candd, under which the following(linear) equations can be considered the dynamic model of an actual 2-dof robot:M\u00a8q+g=u, withq\u2208R2,u\u2208R2,whereM=(a bb c),g=(0d).Any guess about which type of robot this could be? Suppose now that only one generalizedcoordinate is actuated by a command ua\u2208R, while the other is passive. Which component of ushould be actuated in order to guarantee the existence of an equilibrium? If we choose a valueua>0, what would be the instantaneous acceleration of the other (passive) coordinate?", "solution": "In order to be the dynamic model of an actual 2-dof robot, the only condition is on the parametersaandc, which need to guarantee the positive de\ufb01niteness of the inertia matrix M. ThusM=(a bb c)>0\u21d0\u21d2a>0,detM=ac\u2212b2>0\u21d2c>0.Being the inertia constant, there are no Coriolis and centrifugal effects. Also, friction is neglected.The 2-dof robot could be a planar arm with two prismatic joints (2P), whose axes are twisted byan angle\u03b11\u0338= 0. Moreover, in order to include a constant gravity term only on the second joint,the plane of motion is vertical and the \ufb01rst prismatic joint horizontal. We would have then for thekinetic and potential energyT=T1+T2=12m1\u02d9q21+12m2( \u02d9q21+ \u02d9q22+ 2 cos\u03b11\u02d9q1\u02d9q2), U =U2=m2g0q2sin\u03b11,4wherem1>0 andm2>0 are the masses of the two links, so that the inertia matrix and thegravity vector for this 2P robot areM=(a bb c)=(m1+m2m2cos\u03b11m2cos\u03b11m2),g=(0d)=(0m2g0sin\u03b11),with detM=m1m2+m22(1\u2212cos\u03b11)>0. Note that the coefficient b=m2cos\u03b11could bepositive or negative (depending on the twist angle |\u03b11|< \u03c0/ 2 or, respectively, > \u03c0/ 2). Same ford=m2g0sin\u03b11(depending on the sign of \u03b11).Looking now at the equilibrium condition (i.e., \u00a8q=0) in the underactuated case, it is evident thatthe second joint has to be the actuated one,g=u\u21d2(0d)=(0ua).The equilibrium force at the second joint is ua=d(=m2g0sin\u03b11), the same for all equilibriumcon\ufb01gurations qe\u2208R2. When choosing a value ua>0, the instantaneous acceleration \u00a8 q1of the\ufb01rst (passive) joint is obtained from\u00a8q=(\u00a8q1\u00a8q2)=M\u22121(u\u2212g) =1detM(c\u2212b\u2212b a)(0ua\u2212d)=1ac\u2212b2(\u2212ba)(ua\u2212d),and thus \u00a8q1=b(d\u2212ua)/(ac\u2212b2). Being the determinant of Mpositive, the sign of \u00a8 q1will dependon the sign of the product b(d\u2212ua). For instance, when b > 0 and for a large ua>|d|, theacceleration of the \ufb01rst (passive) joint will be negative. On the other hand, the acceleration of thesecond (actuated) joint will always be positive, as soon as the control force overcomes the gravityterm (ua>|d|).", "robot": "2R", "tags": ["planar", "horizontal", "vertical"]},
 "31": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 2, "exam": "robo2", "question": "Consider the RP robot in Fig. 1, moving in a vertical plane. The prismatic joint has a limitedranged\u2264q2\u2264L. Derive the gravity term g(q) in the dynamic model and \ufb01nd the expression (insymbolic form) of a constant \u03b1>0 that bounds\u2225\u2202g(q)/\u2202q\u2225for allqwithin the robot workspace.q2x0q1y0\u2295\u2295m1m2dg0Figure 1: A RP robot, with associated coordinates qand relevant dynamic data.1", "solution": "From Fig. 1, we have for the potential energy due to gravityU(q) =U1(q1) +U2(q) =\u2212m1g0dcosq1\u2212m2g0q2cosq1.Therefore, using the compact notation for trigonometric quantities, we haveg(q) =\u2202U(q)\u2202q=((m1d+m2q2)g0s1\u2212m2g0c1),and then the symmetric matrix (representing the Hessian of U(q))A(q) =\u2202g(q)\u2202q=((m1d+m2q2)g0c1m2g0s1m2g0s1 0).This matrix is not de\ufb01nite in sign. Therefore, in order to evaluate its norm, we have to use thegeneral form\u2225A(q)\u2225=\u221a\u03bbmax(AT(q)A(q)),and compute the real eigenvalues of the positive semi-de\ufb01nite, symmetric matrix1AT(q)A(q) =(((m1d+m2q2)g0c1)2+ (m2g0s1)2m2(m1d+m2q2)g20s1c1m2(m1d+m2q2)g20s1c1 (m2g0s1)2)=(a1a2a2a3).1We havea1>0,a3\u22650, and thus a1+a3>0. Also,a1a3\u2212a22\u22650.5Fromdet(\u03bbI\u2212AT(q)A(q))= det(\u03bb\u2212a1\u2212a2\u2212a2\u03bb\u2212a3)=\u03bb2\u2212(a1+a3)\u03bb+ (a1a3\u2212a22),we obtain the maximum (real and positive) eigenvalue as\u03bbmax(AT(q)A(q))=a1+a32+\u221a(a1+a3)2\u22124(a1a3\u2212a22)2=a1+a3+\u221a(a1\u2212a3)2+ 4a222>0.Substituting the expressions of the ai\u2019s, we get\u03bbmax(AT(q)A(q))=12(((m1d+m2q2)g0c1)2+ 2 (m2g0s1)2+\u221a((m1d+m2q2)g0c1)2+ 4 (m2(m1d+m2q2)g20s1c1)2)=12(((m1d+m2q2)g0c1)2+ 2 (m2g0s1)2+ (m1d+m2q2)g0\u221ac21+ 4 (m2g0s1c1)2).This expression can be upper bounded in different ways, using also the upper limit for the prismaticjointq2\u2264L. Replacing for instance c1\u21921,s1\u21921, andq2=L, we \ufb01nally obtain the upperbound\u2225A(q)\u2225=\u221a\u03bbmax(AT(q)A(q))\u2264\u03b1with2\u03b1=1\u221a2\u221a((m1d+m2L)g0)2+ 2 (m2g0)2+ (m1d+m2L)g0\u221a1 + 4m22g20>0.This constant is used, e.g., in the proof of the global asymptotic stability of a PD control law withgravity compensation g(qd), in which the minimum (positive) value KP,mof the diagonal matrixof proportional gains KPshould satisfy KP,m>\u03b1.", "robot": "RP", "tags": ["vertical"]},
 "32": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 3, "exam": "robo2", "question": "The Cartesian robot in Fig. 2 has the two links respectively of mass m1andm2, and carries apayloadmp. It moves under gravity and has relevant viscous friction at both joints. In the absenceof a priori information on the dynamic parameters, design an adaptive control law yielding globalasymptotic stabilization of the tracking error for a desired trajectory qd(t).q1xwq2yw\u2295m1mpm2g0\u2295Figure 2: A Cartesian robot moving under gravity.", "solution": "The dynamic model of the Cartesian robot in Fig. 2 is very simple (in fact, this robot has a linearand decoupled dynamics). We haveT=T1+T2+Tp=12m1\u02d9q21+12(m2+mp)(\u02d9q21+ \u02d9q22), U =U2+Up= (m2+mp)g0q2,and thus, from the Euler-Lagrange equations, considering also the presence of viscous frictionM\u00a8q+g+Fv\u02d9q=u, (1)withM=(m1+m2+mp 00m2+mp),g=(0(m2+mp)g0),Fv=(fv100fv2).2One may notice that there is a unit inconsistency of the terms in the expression of \u03b1. In fact, we are taking thenorm of a matrix A(q) that has elements expressed in different units. This happens because the robot has jointsof different nature (revolute and prismatic): the gravity vector g(q) has the \ufb01rst component expressed in [Nm] (atorque) and the second one in [N] (a force).6The dynamic model (1) can be linearly re-parametrized asY(\u02d9q,\u00a8q)a=u (2)withY(\u02d9q,\u00a8q) =(\u00a8q1 0 \u02d9q100 \u00a8q2+g00 \u02d9q2),a=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm1+m2+mpm2+mpfv1fv2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The adaptive control law for tracking a desired trajectory qd(t) (at least twice differentiable w.r.t.time) isu=Y(\u02d9qr,\u00a8qr)\u02c6a+KPe+KD\u02d9e,KP,KD>0,\u02d9\u02c6a=\u0393YT(\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q),\u0393>0,(3)withe=qd\u2212q,\u02d9e=\u02d9qd\u2212\u02d9q,\u02d9qr=\u02d9qd+\u039be, and \u00a8qr=\u00a8qd+\u039b\u02d9e(\u039b=KPK\u22121D>0), and whereY(\u02d9qr,\u00a8qr) =(\u00a8qr1 0 \u02d9qr100 \u00a8qr2+g00 \u02d9qr2).The gain matrices KP,KD, and \u0393are taken diagonal. We additionally remark the following.\u2022The problem is fully decoupled into parallel subproblems for each of the two prismatic joints.Consider for instance the \ufb01rst joint. From eqs. (1), (2), and (3), we have for the closed-loopsystem(m1+m2+mp)\u00a8q1+fv1\u02d9q1=u1,u1= \u02c6a1\u00a8qr1+ \u02c6a3\u02d9qr1+kp1e1+kd1\u02d9e1,\u02d9\u02c6a1=\u03b31\u00a8qr1( \u02d9qr1\u2212\u02d9q1),\u02d9\u02c6a3=\u03b33\u02d9qr1( \u02d9qr1\u2212\u02d9q1),withe1=qd1\u2212q1, \u02d9e1= \u02d9qd1\u2212\u02d9q1, \u02d9qr1= \u02d9qd1+kP1kD1e1, and \u00a8qr1= \u00a8qd1+kP1kD1\u02d9e1.\u2022Despite the linear dynamics of the considered robot, the closed-loop system is indeed stillnonlinear because of the interplay between the robot state x= (q,\u02d9q)\u2208R4and the state\u02c6a\u2208R4of the adaptive controller.", "robot": "unknown", "tags": []},
 "33": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 4, "exam": "robo2", "question": "A robot should close a door by \ufb01rmly grasping its handle, pushing the door to the \ufb01nal position,and then turning the handle to prepare the door locking. This interaction task is sketched inFig. 3. Write down the natural and arti\ufb01cial constraints, de\ufb01ning a suitable task frame. Proposea time behavior for the hybrid references so as to cover the pushing phase and the \ufb01nal locking ofthe door. As usual in planning of hybrid force-velocity tasks, neglect any friction or environmentcompliance.x0y0z0xhzhFigure 3: The task of closing a door [left], with handle motion for the \ufb01nal door locking [right].2", "solution": "With reference to Fig. 5, where a possible task frame is de\ufb01ned, the xtandztaxes of the taskframe have been chosen to coincide with the homologous ones at the door handle. The naturalconstraints are the following:vx= 0, v z= 0, \u03c9 x= 0, \u03c9 z= 0, f y= 0, \u00b5 y= 0.In these constraints, we neglect any friction effect and mass/inertia or compliance of the environ-ment (which is thus assumed to be purely geometric). The complementary arti\ufb01cial constraintsare chosen then as:fx= 0, f z= 0, \u00b5 x= 0, \u00b5 z= 0, v y=vd,y(t), \u03c9 y=\u03c9d,y(t).The \ufb01rst four (zero) values for forces and moments that are assigned as references to the hybridtask controller re\ufb02ect the desire to limit the mechanical stress on the door handle grasped by the7robot end-effector. The last two time-varying references are used instead to specify the way feasiblemotions are handled during the task of closing a door. While moving the door, we set \u03c9d,y= 0 (nomotion around the rotation axis yh=ytof the door handle). On the other hand, the time lawvd,y(t) will de\ufb01ne the way the door closing should be performed, e.g., with a trapezoidal pro\ufb01le fora rest-to-rest motion from the initial position (door open) to the desired approach position (doornearly closed), using a fast or slow cruise speed. When the approach position is reached, the linearmotion is ended ( vd,y= 0) and\u03c9d,y(t) is used to turn the handle, preparing it for the \ufb01nal phaseof door locking. Note \ufb01nally that when the door touches the door frame on the wall, the contactsituation changes and, accordingly, also the de\ufb01nition of natural and arti\ufb01cial constraints.x0y0z0xhzhztxtytztxtwd,y(t)vd,y(t)Figure 5: Two views of the task frame assignment for closing a door, with associated time-varyingspeci\ufb01cation of two arti\ufb01cial constraints.", "robot": "unknown", "tags": ["constraints"]},
 "34": {"file": "Robotics2_20.06.05.pdf", "date": "20-06-05", "num_ex": 5, "exam": "robo2", "question": "With reference to Fig. 4, a planar 2R robot with links of unitary length (in [m]) is in the con\ufb01gu-rationq=(\u03c0/2\u2212\u03c0/2)T[rad] and with a velocity \u02d9q=(0\u03c0/4)T[rad/s] when a collision occurs.Detail and comment the detection and isolation properties of the energy-based and momentum-based methods for the three cases of collision with the shown impact forces: i)Fc1=(\u22121 0)T[N]at the end-effector; ii)Fc2=(0\u22121)T[N] at the elbow; iii)Fc3=(0 1)T[N] at the midpointof the second link.x0q1= p/2y0Fc1= (-1  0)Tq2= -p/2Fc2= (0  -1)TFc3= (0  1)T\ud835\udc5e\u03072= p/4Figure 4: Three cases of collision for a 2R planar robot.[180 minutes (3 hours); open books]3", "solution": "The energy-based method fails to detect a collision when \u02d9q=0or, more in general, when thecolliding force Fcis orthogonal to the velocity vcof the contact point. In fact, in this case wehavevTcFc= (Jc(q)\u02d9q)TFc=\u02d9qT(JTc(q)Fc)=\u02d9qT\u03c4c= 0, thus not exciting the scalar residual \u03c3.In the given con\ufb01guration q=(\u03c0/2\u2212\u03c0/2)Tof the planar 2R robot, we verify this condition forthe three considered cases:vc1=Jc1\u02d9q=(\u22121 01 1)(0\u03c0/4)=(0\u03c0/4)[m/s]\u21d2vTc1Fc1=(0\u03c0/4)(\u221210)= 0;vc2=Jc2\u02d9q=(\u22121 00 0)(0\u03c0/4)=0\u21d2vTc2Fc2=(0 0)(0\u22121)= 0;vc3=Jc3\u02d9q=(\u22121 00.5 0.5)(0\u03c0/4)=(0\u03c0/8)[m/s]\u21d2vTc3Fc3=(0\u03c0/8)(01)=\u03c0/8 [Nm].Therefore, only in the third case we are able to detect the occurrence of a collision with theenergy-based method.8As for the momentum-based method, a collision is detected (and possibly isolated) provided Fcisnot in the null space of the transpose of the contact Jacobian Jc. In fact, ifFc\u2208N{JTc(q)}thecontact force is balanced by the reaction of the rigid robot structure, yielding \u03c4c=JTc(q)Fc=0and thus not exciting the residual vector r. We verify next if the detection condition holds for thethree considered cases, drawing also conclusions on the isolation property. For the tip contact onlink 2:N{JTc1}=N{(\u22121 10 1)}=\u2205 \u21d2Fc1=(\u221210)\u0338\u2208N{JTc1},\u03c4c1=JTc1Fc1=(10)[Nm].Therefore, this collision will be detected with the momentum-based method (contrary to whathappens with the energy-based method). However, the second component r2of the residual vectorwill be unaffected (being \u03c4c1,2= 0), leading to the wrong conclusion that the contact occurred onlink 1. Indeed, this is a singular situation for the isolation property (the contact force vector Fc1passes through the axis of joint 2). For the contact at the robot elbow:N{JTc2}=N{(\u22121 00 0)}=\u03b1(01)\u21d2Fc2=(0\u22121)\u2208N{JTc2},\u03c4c2=JTc2Fc2=0.Therefore, also the momentum-based method is not able to detect this collision. In fact, the contactforce vectorFc2passes through both joint axes and is balanced entirely by the internal reactionforce of the robot structure. Finally, for the contact at the midpoint of link 2:N{JTc3}=N{(\u22121 0.50 0.5)}=\u2205 \u21d2Fc3=(01)\u0338\u2208N{JTc3},\u03c4c3=JTc3Fc3=(0.50.5)[Nm].Therefore, the momentum-based method detects the collision and also correctly isolates the contactas occurring on the second link.", "robot": "2R", "tags": ["planar"]},
 "35": {"file": "Robotics2_20.02.12.pdf", "date": "20-02-12", "num_ex": 0, "exam": "robo2", "question": "Consider the 3-dof planar robot in Fig. 1, with one prismatic and two revolute joints, moving in thevertical plane. The coordinates qto be used are de\ufb01ned in the \ufb01gure. Each link of the robot has uniformlydistributed mass mi>0,i= 1,2,3, with center of mass on its physical link axis, and a purely diagonalbarycentric link inertia matrix. The prismatic joint range is limited as q2\u2208[q2,min,q2,max], with 0<q2,min<q 2,max. The robot is commanded by a generalized vector of joint forces/torques \u03c4\u2208R3.a) Derive the robot inertia matrix M(q)>0.b) Derive the gravity term g(q) and \ufb01nd all free equilibrium con\ufb01gurations of the robot.c) Provide a linear parametrization of g(q) =Yg(q)ag, in terms of a vector ag\u2208Rpof unknowndynamic coefficients and a 3 \u00d7pregressor matrix Yg(q). Assume that the gravity acceleration isknown,g0= 9.81 [m/s2]. Discuss the minimality of p.d) Determine which of the 9 non-zero inertia parameters of the three links are irrelevant for the describingthe motion of the robot.e) Provide an upper bound \u03b1>0 for the norm of the gradient of the gravity vector, \u2225\u2202g(q)/\u2202q\u2225<\u03b1forallfeasibleq, expressed in terms of the dynamic parameters of the robot.q1y0x0Pq2q3L3g0L2Figure 1: A planar RPR robot, with the de\ufb01nition of the coordinates to be used q= (q1q2q3)T.", "solution": "<EMPTY>", "robot": "RPR", "tags": ["planar", "vertical"]},
 "36": {"file": "Robotics2_20.02.12.pdf", "date": "20-02-12", "num_ex": 1, "exam": "robo2", "question": "Consider the same planar RPR robot as in Exercise 1. Assume that the robot can be commanded directlyby the generalized vector of joint velocities \u02d9q\u2208R3de\ufb01ned in Fig. 1, thanks to a low-level control actionthat guarantees their accurate reproduction. For a desired smooth motion of the end-effector positionp=pd(t) of its end-effector point P, provide the explicit expression of the instantaneous joint velocitycommand that executes the Cartesian motion while minimizing12\u2225\u02d9q\u22252. Modify this scheme in order to keeppossibly the prismatic joint close to the center of its limited range [ q2,min,q2,max], by using two alternativemethods: weighted pseudoinversion and projected gradient in the null space.1", "solution": "<EMPTY>", "robot": "RPR", "tags": ["planar"]},
 "37": {"file": "Robotics2_20.02.12.pdf", "date": "20-02-12", "num_ex": 2, "exam": "robo2", "question": "With reference to Fig. 2, we consider a control problem for a mechanical system made by a \ufb01rst massmr>0, representing the robot moved by a force F, and a second mass me>0, anchored to a rigid wall bya spring of stiffness ke>0, representing as a whole a compliant dynamic environment. When in contact,the two masses are connected by another spring of stiffness ks>0, representing a force sensor. Thepositional coordinates xrandxeof the two masses have their respective zero reference when the systemhas no stored elastic energy, i.e., when there is no compression (nor extension) of the two springs. As aresult, the force measured by the sensor is Fs=ks(xr\u2212xe)\u22650, whenxr\u2265xe(the robot is in contact),orFs= 0, whenxr<xe(no contact).We would like to regulate the contact force to a constant value Fd>0 by means of four alternativefeedback/feedforward schemes F=Fi,i= 1,..., 4, de\ufb01ned as follows:F1=k1(Fd\u2212Fs), P control, (1)F2=Fd+k2(Fd\u2212Fs), P +ffwcontrol, (2)F3=k3\u222b(Fd\u2212Fs)dt, I control, (3)F4=Fd+k4\u222b(Fd\u2212Fs)dt, I +ffwcontrol, (4)for suitable choices of ki>0,i= 1,..., 4.a) Determine the dynamic model of the open-loop system in the two situations xr(t)\u2265xe(t) (contact)andxr(t)<xe(t) (no contact).b) For each of the control laws (1) to (4), provide the equilibrium conditions of the closed-loop system interms of positions and contact forces. Which schemes satisfy zero force error at the equilibrium? Arethe equilibria unique in each case?c) Is there any case in which a steady-state condition is not reached? Using any preferred analysistechnique (e.g., Lyapunov-based, or Routh criterion in the Laplace domain, or even qualitatively),study the asymptotic stability of the closed-loop equilibria for at least two of the control laws.d) Determine the initial motion of mass mrunder the action of the different control laws, when startingwithxr(0)< xe(0) and with the system at rest. What problem would be encountered during thenon-contact phase and how could this be milden/resolved by the addition, when needed, of a dampingterm\u2212dv\u02d9xr,dv>0, in the control law?FmrkskemexexrFsFigure 2: The model of a mechanical system used for the design of force control laws.[210 minutes, open books]2", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "38": {"file": "Robotics2_10.07.07.pdf", "date": "10-07-07", "num_ex": 0, "exam": "robo2", "question": "ExerciseConsider the one-dimensional mass/spring/damper scheme of a robot in contact with a compliantworkpiece and with a force sensing cell in between, as shown in Fig. 1. The robot and the workpieceare represented by the mass mr>0, with position xr, and by the mass mw>0, with position xw,respectively. The rest positions of the springs modeling the stiffness ks>0 of the force sensor andthe stiffness kw>0 of the workpiece are xr=xw= 0. Viscous damping is included between therobot mass mrand the ground, between the workpiece mass mwand the ground, and between thetwo masses, with positive coefficients br,bw, andbs, respectively. An input force Fis applied onthe robot mass.Figure 1: Robot contact model, with two masses, springs and dampers1. Determine the differential equations of motion for this system.2. For a contact force control problem, let the input Fbe speci\ufb01ed by a proportional controllaw of the form F=kf(Fd\u2212Fc), with gain kfand desired contact force Fd, and whereFc=ks(xr\u2212xw) is the force measured across the sensor. Determine the unique closed-loopequilibrium position xr,eandxw,eof the two masses mrandmwand show that a contactforce error with respect to the desired value Fdis present at the equilibrium.3. Which control actions should be considered in order to reduce or eliminate the presence of asteady-state contact force error?4.Optional. Prove that the closed-loop equilibrium state xr=xr,e,xw=xw,e, \u02d9xr= \u02d9xw= 0is exponentially stable for any positive value of the gain kf(Hint: Use a root locus analysisand/or the Routh criterion in the Laplace domain) .[120 minutes (150 minutes including the optional item); open books]1", "solution": "ExerciseThe differential equations of motion for the system are:mr\u00a8xr+br\u02d9xr+bs( \u02d9xr\u2212\u02d9xw) +ks(xr\u2212xw) =Fmw\u00a8xw+bw\u02d9xw+bs( \u02d9xw\u2212\u02d9xr) +ks(xw\u2212xr) +kwxw= 0.(1)SettingF=kf(Fd\u2212Fc) =kf(Fd\u2212ks(xr\u2212xw)) and evaluating the system at an equilibrium (i.e.,setting \u02d9xr= \u02d9xw= \u00a8xr= \u00a8xw= 0), givesks(xr\u2212xw) =kf(Fd\u2212ks(xr\u2212xw))ks(xw\u2212xr) +kwxw= 0.It is easy to see that the unique solution isxr.e=ks+kwkskwkf1 +kfFdxw.e=1kwkf1 +kfFd,that provides also the contact force at the equilibriumFc,e=ks(xr,e\u2212xw,e) =kf1 +kfFd.Therefore, there will be an error on the desired force given byeF=Fd\u2212Fc,e=11 +kfFd.This error can be reduced by amplifying the gain kf, but cannot be eliminated when using a simpleproportional controller. This situation typically asks for the introduction of an integral action ofthe typeF=kf(Fd\u2212Fc) +ki\u222bt0(Fd\u2212Fc)d\u03c4=kf(Fd\u2212ks(xr\u2212xw)) +ki\u222bt0(Fd\u2212ks(xr\u2212xw))d\u03c4.At steady-state ( t\u2192\u221e ), the argument of the integral term should vanish. Therefore,limt\u2192\u221e\u222bt0(Fd\u2212ks(xr\u2212xw))d\u03c4=constant\u21d2 limt\u2192\u221eks(xr\u2212xw) =Fd.The modi\ufb01ed equilibrium (denoted with a prime) will bex\u2032r.e=ks+kwkskwFdx\u2032w.e=1kwFd,and the associated contact force will be desired one,F\u2032c,e=ks(x\u2032r,e\u2212x\u2032w,e) =Fd,as expected. The same result is obtained if we combine the feedback control action with a constantfeedforward term Fd, i.e.F=Fd+kf(Fd\u2212Fc).2The equilibrium con\ufb01guration should satisfy thenks(xr\u2212xw) =Fd+kf(Fd\u2212ks(xr\u2212xw))ks(xw\u2212xr) +kwxw= 0,leading again to F\u2032c,e=Fdand the same previous positions x\u2032r.eandx\u2032w,e.Indeed, no matter if we keep the proportional control law or add also the integral action or thefeedforward term, we need to show that the associated equilibrium is asymptotically stable for theclosed-loop system (otherwise it would never be reached from a generic initial state). Since thesystem is linear, asymptotic stability is equivalent to exponential stability. Moreover, whenever itholds, this result is global.Considering again the case of a proportional force controller, the easiest way to prove asymptoticstability of the closed-loop state xr=xr,e,xw=xw,e, \u02d9xr= \u02d9xw= 0 is to use Laplace transformand the root locus method, thanks to the linearity of the system. From eq. (1) we have(mrs2+ (br+bs)s+ks)Xr(s) =F(s) + (bss+ks)Xw(s)(mws2+ (bw+bs)s+ (kw+ks))Xw(s) = (bss+ks)Xr(s),whereXr(s),Xw(s), andF(s) are the Laplace transforms of xr(t),xw(t), andF(t). De\ufb01ning forcompactnessNs(s) =bss+ksDr(s) =(mrs2+ (br+bs)s+ks)Dw(s) =(mws2+ (bw+bs)s+ (kw+ks)),we can solve forXr(s)F(s)=Dw(s)Dr(s)Dw(s)\u2212N2s(s)Xw(s)F(s)=Ns(s)Dr(s)Dw(s)\u2212N2s(s)Xw(s)Xr(s)=Ns(s)Dw(s).Being the output de\ufb01ned as the contact force Fc(s) =ks(Xr(s)\u2212Xw(s)), the transfer function ofthe (open-loop) system isP(s) =Fc(s)F(s)=ksDw(s)\u2212Ns(s)Dr(s)Dw(s)\u2212N2s(s).Closing the feedback loop with F(s) =kf(Fd(s)\u2212Fc(s)), whereFd(s) is the Laplace transform ofthe step reference input Fd(t) =Fd\u00b7\u03b4\u22121(t), we obtain the transfer functionW(s) =Fc(s)Fd(s)=kfP(s)1 +kfP(s)=kfks(Dw(s)\u2212Ns(s))(Dr(s)Dw(s)\u2212N2s(s)) +kf(ks(Dw(s)\u2212Ns(s))).Asymptotic stability of the closed-loop system depends on the location on the complex plane softhe poles of W(s), i.e., of the roots of the polynomial equation(Dr(s)Dw(s)\u2212N2s(s))+kf(ks(Dw(s)\u2212Ns(s))) =A(s) +kfB(s) = 0. (2)By varying kfin (2), we can explore the root locus. For kf= 0, the (four) poles coincide withthe poles of the open-loop system P(s), i.e., with the roots ofA(s) =Dr(s)Dw(s)\u2212N2s(s)=mrmws4+ ((bw+bs)mr+ (br+bs)mw)s3+ ((ks+kw)mr+ksmw+brbs+bsbw+brbw)s2+ ((br+bw)ks+ (br+bs)kw)s+kskw= 0.3Applying the Routh criterion to the fourth-order polynomial A(s) and using the positivity of allphysical coefficients in (1), it is straightforward to check that the four poles of P(s) have all negativereal parts (the process itself is asymptotically stable). Moreover, by the standard rules of the rootlocus, when kfis increased toward + \u221e, two of the closed-loop poles converge to the open-loopzeros, i.e., to the roots ofB(s) =ks(Dw(s)\u2212Ns(s)) =ks(mws2+bws+kw)= 0,which are in the left-hand side of the complex plane. The two other poles will approach theasymptotes of the positive root locus, which are vertical (since the pole-zero excess of P(s) isn\u2212m= 2) and are located in the left-hand side of the complex plane s. As a result, the closed-loop system is asymptotically stable for any value of kf\u22650.Figure 2 shows the complete positive root locus obtained with Matlab, for some arbitrary(positive) values of the model parameters, con\ufb01rming the above analysis.\u221215 \u221210 \u22125 0 5\u221280\u221260\u221240\u221220020406080Root LocusReal AxisImaginary AxisFigure 2: A typical root locus of eq. (2), when varying kf\u2208[0,+\u221e)Indeed, the same asymptotic stability result could have been proven by applying the Routhcriterion to check the locations of roots of the whole polynomial on the left-hand side of (2) (butthis would have been more tedious).", "robot": "unknown", "tags": ["vertical"]},
 "39": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 0, "exam": "robo2", "question": "Determine which of the following four 2 \u00d72 matrices can be, under the stated conditions, the inertiamatrix associated to a real 2-dof robot with coordinates q1andq2, and which not (and why):MA=(a1+a2q21a2a2a2), a 1>a2>0;MB=(a1a3cos(q2\u2212q1)a3cos(q2\u2212q1)a2), a 1>0, a 1a2>a23>0;MC=(a1+ 2a2cosq2a1+a2cosq2a1+a2cosq2a1), a 1>2a2>0;MD=(m1+m2\u22120.5m2\u22120.5m2m2), m 1>0, m 2>0.For each case that is feasible, sketch the possible structure of the associated robot.", "solution": "A) Matrix MAis not a robot inertia matrix because it is a function of the \ufb01rst coordinate q1atthe robot base. This can never be the case: the de\ufb01nition of q1is in fact arbitrary, as is thechoice of a base frame for the robot. The inertia matrix is instead an intrinsic property of themanipulator structure.B)MBis the inertia matrix of a 2-dof robot with a parallelogram structure (see left of Fig. 3,which is taken from the lecture slides), in which we have a1=Ic1,zz+m1l2c1+Ic3,zz+m3l2c3+m4l21,a2=Ic2,zz+m2l2c2+Ic4,zz+m4l2c3+m3l22, anda3=m3l2lc3\u2212m4l1lc2. Absolutecoordinates have been used therein. The dependence of MBonly on the difference q2\u2212q1con\ufb01rms that a robot inertia matrix can only be a function of the internal con\ufb01guration(thus, it does not depend on the choice of the base reference frame). This can be seen alsoanalytically, by applying the linear change of coordinatesp=(p1p2)=(1 0\u22121 1)(q1q2)=Jq.In the new coordinates p\u2208R2, the transformed inertia matrix becomes\u02dcMB=J\u2212TMBJ\u22121=(a1+ 2a3cosp2a2+a3cosp2a2+a3cosp2a3),which is a function of the second coordinate p2only.C) Matrix MCresembles the inertia matrix of the usual 2R planar robot, but is not. A dynamiccoefficienta3>0 is missing in M(1,1), and this destroys the positive de\ufb01niteness for every q,as it should be instead for an inertia matrix. In fact, the determinantdetMC=\u2212a22cos2q2is never positive.D)MDis the inertia matrix of a 2P robot, with the second prismatic joint having a twist angleof\u03b1=\u00b1120\u25e6w.r.t. the \ufb01rst prismatic joint. The \ufb01rst link has mass m1and the second linkhas massm2. A sketch of this robot is shown on the right of Fig. 3.q2xq1y\u2295m2m1\u2295a  = 120oFigure 3: [left] 2-dof parallelogram robot; [right] PP robot with second axis twisted by \u03b1= 120\u25e6.4", "robot": "unknown", "tags": ["planar"]},
 "40": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 1, "exam": "robo2", "question": "Consider the 3-dof robot in Fig. 1, moving on a horizontal plane.\u2022Using the generalized coordinates q\u2208R3and the dynamic parameters de\ufb01ned in Fig. 1,determine the dynamic model of this robot using a Lagrangian formulation.\u2022Assume that the kinematic parameters are known. Provide a linear parameterization of thedynamic model in the formY(q,\u02d9q,\u00a8q)a=u,being u\u2208R3the generalized force provided by the motors at the joints, such that the vectorof dynamic coefficients a\u2208Rphas the minimum possible dimension p.q3xq2q1dc2y\u2295m3,I3m1,I1m2,I2\u2295\u2295l2Figure 1: A 3-dof planar PRP robot, with its associated coordinates qand dynamic data.1", "solution": "Following a Lagrangian approach, we derive the kinetic energy of the robot, T(q,\u02d9q) =T1+T2+T3.Using K\u00a8 onig theorem1,Ti=12mi\u2225vci\u22252+12\u03c9TiIi\u03c9i,and performing computations for each link, one hasT1=12m1\u02d9q21,pc2=(dc2cosq2q1+k1+dc2sinq2)\u21d2 vc2=\u02d9pc2=(\u2212dc2sinq2\u02d9q2\u02d9q1+dc2cosq2\u02d9q2),T2=12m2(\u02d9q21+d2c2\u02d9q22+ 2dc2cosq2\u02d9q1\u02d9q2)+12I2\u02d9q22,wherek1is the distance from the center of mass of link 1 to the axis of joint 2 (an irrelevantconstant), andpc3=(l2cosq2\u2212q3sinq2q1+k1+l2sinq2+q3cosq2)\u21d2vc3=\u02d9pc3=(\u2212(l2sinq2+q3cosq2) \u02d9q2\u2212sinq2\u02d9q3\u02d9q1+ (l2cosq2\u2212q3sinq2) \u02d9q2+ cosq2\u02d9q3),T3=12m3(\u02d9q21+(l22+q23)\u02d9q22+ \u02d9q23+ 2 (l2cosq2\u2212q3sinq2) \u02d9q1\u02d9q2+ 2 cosq2\u02d9q1\u02d9q3+ 2l2\u02d9q2\u02d9q3)+12I3\u02d9q22.ThusT=12\u02d9qTM(q)\u02d9q=12\u02d9qT\uf8eb\uf8ec\uf8edm1+m2+m3m3(l2cosq2\u2212q3sinq2) +m2dc2cosq2m3cosq2I2+m2d2c2+I3+m3(l22+q23)m3l2symm m3\uf8f6\uf8f7\uf8f8\u02d9q.Introduce now a (minimal) parametrization of the robot inertia matrix, collecting the 4 dynamiccoefficients that appear in M(q) and de\ufb01ned as follows2:a=\uf8eb\uf8ec\uf8ec\uf8ec\uf8eda1a2a3a4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm1+m2+m3I2+m2d2c2+I3m3m2dc2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8. (5)As a result, the inertia matrix M(q) takes the linearly parametrized formM(q) =\uf8eb\uf8ec\uf8eda1 a3(l2cosq2\u2212q3sinq2) +a4cosq2a3cosq2a3(l2cosq2\u2212q3sinq2) +a4cosq2 a2+a3(l22+q23)a3l2a3cosq2 a3l2 a3\uf8f6\uf8f7\uf8f8.(6)The components of the Coriolis and centrifugal vector are computed from (6) using the Christoffel\u2019ssymbolsci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202Mi(q)\u2202q+(\u2202Mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi),1Being the motion planar, we restrict all linear vectors (e.g., pc2orvc2) to be two-dimensional (living in theplane ( x,y)), while angular velocities are just scalars (the component of \u03c9ialong the z-axis normal to the plane).2As indicated in the text, we consider the kinematic parameter l2to be known.5being Mitheith column of the inertia matrix M(q). We haveC1(q) =12\uf8eb\uf8ec\uf8ed\uf8eb\uf8ec\uf8ed0 0 00\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2\u2212a3sinq20\u2212a3sinq2 0\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed0 0 00\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2\u2212a3sinq20\u2212a3sinq2 0\uf8f6\uf8f7\uf8f8\u22120\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0 00\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2\u2212a3sinq20\u2212a3sinq2 0\uf8f6\uf8f7\uf8f8\u21d2c1(q,\u02d9q) =\u2212(a3(l2sinq3+q3cosq2) +a4sinq2) \u02d9q22\u22122a3sinq2\u02d9q2\u02d9q3.Similarly,C2(q) =12\uf8eb\uf8ec\uf8ed\uf8eb\uf8ec\uf8ed0\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2\u2212a3sinq20 0 2 a3q30 0 0\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed0 0 0\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2 0 0\u2212a3sinq2 2a3q30\uf8f6\uf8f7\uf8f8\u2212\uf8eb\uf8ec\uf8ed0 \u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2\u2212a3sinq2\u2212a3(l2sinq2+q3cosq2)\u2212a4sinq2 0 0\u2212a3sinq2 0 0\uf8f6\uf8f7\uf8f8\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0 00 0a3q30a3q3 0\uf8f6\uf8f7\uf8f8\u21d2c2(q,\u02d9q) = 2a3q3\u02d9q2\u02d9q3andC3(q) =12\uf8eb\uf8ec\uf8ed\uf8eb\uf8ec\uf8ed0\u2212a3sinq200 0 00 0 0\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed0 0 0\u2212a3sinq20 00 0 0\uf8f6\uf8f7\uf8f8\u2212\uf8eb\uf8ec\uf8ed0\u2212a3sinq20\u2212a3sinq2 2a3q3 00 0 0\uf8f6\uf8f7\uf8f8\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0 00\u2212a3q300 0 0\uf8f6\uf8f7\uf8f8\u21d2c3(q,\u02d9q) =\u2212a3q3\u02d9q22.Summarizing, we have the \ufb01nal expression:c(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u2212(a3(l2sinq2+q3cosq2) +a4sinq2) \u02d9q22\u22122a3sinq2\u02d9q2\u02d9q32a3q3\u02d9q2\u02d9q3\u2212a3q3\u02d9q22\uf8f6\uf8f7\uf8f8. (7)6Using the inertia matrix in (6) and the quadratic velocity vector in (7), the complete robot dynamicmodel can be expressed in the linearly parametrized formM(q)\u00a8q+c(q,\u02d9q) =Y(q,\u02d9q.\u00a8q)a=u,where a\u2208R4is de\ufb01ned in (5) and the 3 \u00d74 matrix Yis given byY=\uf8eb\uf8ec\uf8ed\u00a8q1000\u00a8q20Y3cosq2\u00a8q2\u2212sinq2\u02d9q22cosq2\u00a8q10\uf8f6\uf8f7\uf8f8, (8)being the third columnY3=\uf8eb\uf8ec\uf8ed(l2cosq2\u2212q3sinq2) \u00a8q2+ cosq2\u00a8q3\u2212(l2sinq2+q3cosq2) \u02d9q22\u22122 sinq2\u02d9q2\u02d9q3(l2cosq2\u2212q3sinq2) \u00a8q1+(l22+q23)\u00a8q2+l2\u00a8q3+ 2q3\u02d9q2\u02d9q3cosq2\u00a8q1+l2\u00a8q2+ \u00a8q3\u2212q3\u02d9q22\uf8f6\uf8f7\uf8f8.", "robot": "PRP", "tags": ["planar", "horizontal"]},
 "41": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 2, "exam": "robo2", "question": "ThenR planar robot in Fig. 2 moves in the vertical plane under gravity. Each link has length li>0and has its center of mass on the kinematic axis at a distance dci\u22db0 from the driving joint. Usingthe absolute coordinates qshown in Fig. 2, determine: i)the generic expressions of the componentsof the gravity vector g(q) in the robot dynamic model; ii)all equilibrium con\ufb01gurations of therobot (i.e., all qe\u2208Rnsuch that g(qe) =0); and, iii)the generic conditions on the center of massof each link such that the gravity vector vanishes identically (i.e., g(q)\u22610,\u2200q).qn-1xq2q1dcnymn-1\u2295\u2295\u2295\u2295qnmndc,n-1dc1dc2m2m1\ud835\udc88\ud835\udfceFigure 2: A nR planar robot, with its associated absolute coordinates q", "solution": "The use of absolute coordinates makes it simpler to derive the solution for the gravity term in thegeneral case of a planar (serial) robot arm with nrevolute joints. Sinceg0=\uf8eb\uf8edg000\uf8f6\uf8f8, g 0= 9.81 [m/s2],the potential energy due to gravity of link jof the robot, for j= 1,...,n , isUj(q) =\u2212mjgT0r0,cj=\u2212mjg0(j\u22121\u2211k=1lkcosqk+dcjcosqj). (9)The total potential energy due to gravity is thenU(q) =n\u2211j=1Uj(q) =\u2212g0n\u2211j=1mj(j\u22121\u2211k=1lkcosqk+dcjcosqj)=\u2212g0n\u2211i=1\uf8eb\uf8ed\uf8eb\uf8edn\u2211j=i+1mj\uf8f6\uf8f8li+midci\uf8f6\uf8f8cosqi.(10)For instance, setting n= 5, we have from eq. (9)U1=\u2212m1g0dc1cosq1U2=\u2212m2g0(l1cosq1+dc2cosq2)U3=\u2212m3g0(l1cosq1+l2cosq2+dc3cosq3)U4=\u2212m4g0(l1cosq1+l2cosq2+l3cosq3+dc4cosq4)U5=\u2212m5g0(l1cosq1+l2cosq2+l3cosq3+l4cosq4+dc5cosq5)U(q) =5\u2211j=1Uj,7where the structure of the last expression of U(q) in eq. (10) can be easily recognized.According to (10), the components gi(q) of the gravity vector g(q)\u2208Rnaregi(q) =\u2202U(q)\u2202qi=g0\uf8eb\uf8ed\uf8eb\uf8edn\u2211j=i+1mj\uf8f6\uf8f8li+midci\uf8f6\uf8f8sinqi, i = 1,...,n. (11)The unforced equilibrium con\ufb01gurations of the robot (independently of the values of kinematic anddynamic parameters) are then characterized byqi=qe,i={0,\u03c0},\u2200i\u2208{1,...,n} \u21d2 g(qe) =0.All these con\ufb01gurations correspond to the robot links being stretched or folded along the verticalaxisx. The total number of such equilibria is Ne= 2n.In order to have a robot always balanced with respect to gravity, i.e., g(q)\u22610, the followingconditions should hold from (11):\uf8eb\uf8edn\u2211j=i+1mj\uf8f6\uf8f8li+midci= 0\u21d0\u21d2dci=\u2212\uf8eb\uf8edn\u2211j=i+1mj\uf8f6\uf8f8limi<0, i = 1,...,n\u22121,anddcn= 0.In words, the mass and location of the center of mass of each link should balance (at the associatedjoint axis) the total mass of the following links in the chain, as if it were concentrated at the endof the link. Any con\ufb01guration q\u2208Rnwould then be an equilibrium.", "robot": "nR", "tags": ["planar", "vertical"]},
 "42": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 3, "exam": "robo2", "question": "a) A 2-dof robot has the following inertia matrix:M(q) =(a1a2sinq2a2sinq2a3). (1)Find two matrices S1andS2that factorize the centrifugal/Coriolis terms in c(q,\u02d9q) (i.e., withSi(q,\u02d9q)\u02d9q=c(q,\u02d9q), fori= 1,2), such that \u02d9M\u22122S1is skew-symmetric and \u02d9M\u22122S2is not.b) Consider a robot with n= 3 joints, inertia matrix M(q)>0, and centrifugal/Coriolis termsc(q,\u02d9q) =S(q,\u02d9q)\u02d9q, where the 3\u00d73 factorizing matrix Sis obtained through the Christoffelsymbols. Show that one can always \ufb01nd another factorizing matrix S\u2032\u0338=Sthat satis\ufb01esS\u2032(q,\u02d9q)\u02d9q=c(q,\u02d9q) and leads to a skew-symmetric matrix \u02d9M\u22122S\u2032.2", "solution": "a) From the inertia matrix (1) of this robot, which is a PR planar arm already treated in thelecture slides, the matrices of Christoffel symbols and the velocity vector (containing only acentrifugal term in the present case) are computed asC1(q) =(0 00a2cosq2),C2(q) =0\u21d2 c(q,\u02d9q) =(a2cosq2\u02d9q220)(12)witha2=\u2212m2dc2. The time derivative of the inertia matrix (1) is\u02d9M=(0a2cosq2\u02d9q2a2cosq2\u02d9q2 0).A factorization S1\u02d9qof vector cin (12) leading to the skew symmetry of \u02d9M\u22122S1is found byusing the matrices of Christoffel symbols (or just by trivial inspection). It is easy to check thatthe matrixS1(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q))=(0a2cosq2\u02d9q20 0)(13)provides\u02d9M\u22122S1=(0\u2212a2cosq2\u02d9q2a2cosq2\u02d9q2 0),8which satis\ufb01es the desired skew-symmetric property. On the other hand, a different feasiblefactorization that uses the matrixS2(q,\u02d9q) =(\u02d9q2a2cosq2\u02d9q2\u2212\u02d9q10 0)=S1(q,\u02d9q) +(\u02d9q2\u2212\u02d9q10 0)=S1(q,\u02d9q) +S0(\u02d9q),withS0(\u02d9q)\u02d9q=0,(14)satis\ufb01es S2\u02d9q=cand provides\u02d9M\u22122S2=(\u22122 \u02d9q2\u2212a2sinq2\u02d9q2+ 2 \u02d9q1a2sinq2\u02d9q2 0),which is clearly not a skew-symmetric matrix.b) We use here the simple fact that, when \u02d9q\u2208R3, one has\u02d9q\u00d7\u02d9q=S0(\u02d9q)\u02d9q=\uf8eb\uf8ec\uf8ed0\u2212\u02d9q3\u02d9q2\u02d9q3 0\u2212\u02d9q1\u2212\u02d9q2\u02d9q1 0\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed\u02d9q1\u02d9q2\u02d9q3\uf8f6\uf8f7\uf8f8=0,where S0is by construction a skew-symmetric matrix. If a factorization c(q,\u02d9q) =S(q,\u02d9q)\u02d9qleading to a skew symmetric matrix \u02d9M\u22122Sis available, then matrix S\u2032=S+S0\u0338=Swillbe another feasible factorization, sinceS\u2032(q,\u02d9q)\u02d9q= (S(q,\u02d9q) +S0(\u02d9q))\u02d9q=S(q,\u02d9q)\u02d9q=c(q,\u02d9q).Moreover, the matrix\u02d9M\u22122S\u2032=(\u02d9M\u22122S)+ (\u22122S0)is also skew symmetric, being the sum of two skew-symmetric matrices. Indeed, matrix S\u2032isnot obtained using the Christoffel symbols only, and it is also clear that an in\ufb01nite number ofsuch feasible factorizations exists, all leading to the skew-symmetric property.This construction can be easily generalized to the case of arbitrary n\u22653, by considering forinstance a velocity vector \u02d9q0\u2208Rnwith all zero components but three consecutive ones, andan associated n\u00d7nskew-symmetric matrix S0(\u02d9q0) with a single non-zero 3 \u00d73 block at theproper place on the diagonal, constructed as in the three-dimensional case.", "robot": "unknown", "tags": ["planar"]},
 "43": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 4, "exam": "robo2", "question": "For a 2R planar robot with links of length l1andl2and inertia matrixM(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3), (2)the task requires the end-effector to be moved so as to change its distance \u03c1=\u03c1(q) from the baseaccording to a desired smooth timing law \u03c1d(t). De\ufb01ne the instantaneous joint velocity \u02d9qthatrealizes the task while minimizing the robot kinetic energy, and provide the symbolic expressionof all the terms needed for its evaluation. Compute then the numerical value of \u02d9qwith the data:q1= 0, q 2=\u03c02, l 1=l2= 1 [m], a 1= 10, a 2= 2.5, a 3=53, \u02d9\u03c1d= 0.5 [m/s].(3)", "solution": "The direct kinematics of the 2R planar robot isp=(l1cosq1+l2cos(q1+q2)l1sinq1+l2sin(q1+q2)).Therefore, the distance of the robot end effector from the base is\u03c1(q) =\u2225p\u2225=\u221al21+l22+ 2l1l2cosq2.The task Jacobian is then a 1 \u00d72 matrixJ(q) =\u2202\u03c1(q)\u2202q=(0\u2212l1l2sinq2\u2225p\u2225), (15)9which, forl1\u0338=l2, is full rank except when q2={0,\u03c0}. Forl1=l2, the rank of Jdrops only atq2= 0, whereas the element J12(q2) has a discontinuity at q2=\u00b1\u03c0(the two limits for q2\u2192+\u03c0andq2\u2192\u2212\u03c0are non-zero and different).A joint velocity \u02d9qthat realizes the task while minimizing the robot kinetic energy uses the inertia-weighted pseudoinverse of the task Jacobian,\u02d9q=\u02d9qWPs =J#M(q) \u02d9\u03c1d=M\u22121(q)JT(q)(J(q)M\u22121(q)JT(q))\u22121\u02d9\u03c1d, (16)where the last equality holds provided that Jis full rank. In this case, using in (16) the symbolicexpressions (2) and (15), we obtain\u02d9qWPs =\u2212l1l2sinq2\u2225p\u2225\u00b7detM(q)(\u2212(a3+a2cosq2)a1+ 2a2cosq2)\u00b7((l1l2sinq2)2(a1+ 2a2cosq2)\u2225p\u22252\u00b7detM(q))\u22121\u02d9\u03c1d,where det M(q) =a3(a1\u2212a3)\u2212a22cos2q2>0. Simplifying, this yields\u02d9qWPs =\u2225p\u2225l1l2sinq2\uf8eb\uf8ec\uf8eda3+a2cosq2a1+ 2a2cosq2\u22121\uf8f6\uf8f7\uf8f8\u02d9\u03c1d. (17)Substituting in (17) the numerical data of the problem, we obtain \ufb01nally\u02d9qWPs =(0.1179\u22120.7071). (18)An alternative (and simpler) solution would have been to seek for the minimum norm joint velocity,i.e., using the pseudoinverse of J,\u02d9qPs=J#(q) \u02d9\u03c1d=\uf8eb\uf8ed0\u2212\u2225p\u2225l1l2sinq2\uf8f6\uf8f8\u02d9\u03c1d,leading to the numerical value\u02d9qPs=(0\u22120.7071). (19)Indeed, a different target is reached by the two solutions \u02d9qWPs in (18) and \u02d9qPsin (19) in terms ofthe objective function that is being minimized. We have in fact12\u02d9qTWPsM\u02d9qWPs = min\u02d9q:J\u02d9q= \u02d9\u03c1d12\u02d9qTM\u02d9q= 0.3472<0.4167 =12\u02d9qTPsM\u02d9qPsand, viceversa,12\u02d9qTPs\u02d9qPs= min\u02d9q:J\u02d9q= \u02d9\u03c1d12\u02d9qT\u02d9q= 0.25<0.2569 =12\u02d9qTWPs \u02d9qWPs.", "robot": "2R", "tags": ["planar"]},
 "44": {"file": "Robotics2_Midterm_Test_2018-19_19.04.29.pdf", "date": "19-04-29", "num_ex": 5, "exam": "robo2", "question": "A 3R planar robot with links of unitary length is at rest in the Denavit-Hartenberg con\ufb01g-uration q=(\u03c0/6\u03c0/6\u03c0/6)[rad] and should instantaneously accelerate its end effector at\u00a8p=(4 2)[m/s2]. Find, if possible, a joint acceleration \u00a8q\u2208R3with the least possible normthat perfectly realizes the task under the bounds|\u00a8q1|\u22642.8 [rad/s2],|\u00a8q2|\u22643.6 [rad/s2],|\u00a8q3|\u22644 [rad/s2]. (4)[210 minutes (3.5 hours); open books, computer, but no internet and no smartphone]3", "solution": "Using Denavit-Hartenberg coordinates, the Jacobian of a 3R planar robot with unitary links isJ(q) =(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123),10with the usual compact notation. At the con\ufb01guration q=(\u03c0/6\u03c0/6\u03c0/6)T[rad], it becomesJ=(\u22122.3660\u22121.8660\u221211.3660 0 .5 0)=(J1J2J3). (20)Note that rank J= 2. Moreover, its three 2 \u00d72 minors are all different from zero in this case.Since the robot is at rest ( \u02d9q=0), the second-order differential mapping to be inverted is simply\u00a8p=J\u00a8q, for \u00a8p=(42)[m/s2].In order to get a solution that is feasible with respect to the hard bounds (4) and has the leastpossible norm, we can apply the SNS (Saturation in the Null Space) method on joint accelerations3.To start with, we look for a solution with minimum acceleration norm,\u00a8qPS=J#\u00a8p=\uf8eb\uf8ec\uf8ed0.1715 0.9832\u22120.4686\u22120.6861\u22120.5314\u22121.0460\uf8f6\uf8f7\uf8f8(42)=\uf8eb\uf8ec\uf8ed2.6524\u22123.2466\u22124.2175\uf8f6\uf8f7\uf8f8. (21)The third joint acceleration violates its maximum bound, \u00a8 qPS,3=\u22124.2175<\u22124 =\u2212A3, so thissolution is not feasible. Next, we search for a feasible solution by saturating the (single) overdrivenjoint, i.e., setting \u00a8 q3=\u2212A3=\u22124 [rad/s2] (this is step 1 of the SNS algorithm). The original taskis modi\ufb01ed by removing the contribution of the saturated acceleration of the third joint (and bydiscarding the associated column of J). We rewrite this as\u00a8p1=\u00a8p\u2212J3(\u2212A3) =(42)\u2212(\u221210)\u00b7(\u22124) =(02)=(\u22122.3660\u22121.86601.3660 0 .5)(\u00a8q1\u00a8q2)=J\u22123\u00a8q\u22123,where J\u2212iis the matrix obtained by deleting the ith column from the Jacobian in (20) and,accordingly, \u00a8q\u2212iis the vector of joint accelerations without the ith component. For the modi\ufb01edtask, we compute the contribution of the two active joints by inverting matrix J\u22123, which is nowsquare and nonsingular. Thus, we obtain the unique solution\u00a8q\u22123= (J\u22123)\u22121\u00a8p1=(0.3660 1.3660\u22121\u22121.7321)(02)=(2.7321\u22123.4641)[rad/s2].All bounds are now satis\ufb01ed and the resulting joint acceleration, with the third component \ufb01xedat \u00a8q3=\u22124 =\u2212A3, is feasible. Thus, there is no need to scale down the original task acceleration\u00a8p. Recomposing the complete joint acceleration vector, we have the solution\u00a8q\u2217=\uf8eb\uf8ed2.7321\u22123.4641\u22124\uf8f6\uf8f8[rad/s2], withJ\u00a8q\u2217=\u00a8pand\u2225\u00a8q\u2217\u2225= 5.9552. (22)This solution is not unique, but the underlying SNS method which has been followed guaranteesthat a feasible solution of minimum norm has been obtained.For instance, another feasible solution can be obtained by setting the acceleration of the secondjoint to its lower bound (\u00a8 q2=\u2212A2=\u22123.6 [rad/s2]), which is the saturation level that is closer3The solution is quite intuitive in this case and could also be obtained without any knowledge of the SNS method.11to the value of this component in the unconstrained minimum norm solution (21), and adjustingaccordingly the other two joint accelerations. Since\u00a8q\u22122= (J\u22122)\u22121(\u00a8p\u2212J2\u00b7(\u2212A2)) =(0 0.7321\u22121\u22121.7321)(\u22122.71773.8)=(2.7818\u22123.8641)[rad/s2],the complete solution \u00a8q\u22c4is feasible but has slightly larger norm than the SNS solution \u00a8q\u2217in (22):\u00a8q\u22c4=\uf8eb\uf8ed2.7818\u22123.6\u22123.8641\uf8f6\uf8f8[rad/s], withJ\u00a8q\u22c4=\u00a8pand\u2225\u02d9q\u22c4\u2225= 5.9691.Finally, it is easy to see that a solution having the acceleration of the \ufb01rst joint saturated at itsupper bound, \u00a8q=(2.8\u22123.6497\u22123.8144)T, would instead be unfeasible (the second componentis out of bounds).", "robot": "3R", "tags": ["planar"]},
 "45": {"file": "Robotics2_20.09.11.pdf", "date": "20-09-11", "num_ex": 0, "exam": "robo2", "question": "Consider the planar 3R robot with links of equal length Lin Fig. 1, driven by joint velocitycommands \u02d9q\u2208R3. The end effector should trace the nominal linear path from AtoBwith aconstant speed v >0, while the entire robot avoids any collision with a single static obstacle O.The obstacle is of known circular shape but uncertain radius R\u2264L/4, and is placed at least ata distance \u03c1min=Lfrom the robot base and not farther than \u03c1max= 3L. Its actual locationis unknown a priori, but the obstacle can be detected by an omnidirectional proximity sensormounted on the robot end effector and having a sensing range \u03c3= 1.5L.De\ufb01ne a sensor-based control scheme that makes the robot perform at best the assigned task, anddescribe qualitatively its expected performance.\ud835\udc5e\u03072A = (2.3L, L)y0LLLrmin= Lx0B= (2.3L, \u2212L)Ormax= 3L\ud835\udc5e\u03071\ud835\udc5e\u03073range of possibleplacement of the single obstacle OR \u2264L/4sensing ranges = 1.5LpFigure 1: The 3R robot with the nominal Cartesian path ABto be traced and the static circularobstacleOto be avoided (several possible alternative locations of the single obstacle are shown).", "solution": "This is an open-ended exercise and many possible schemes could be devised. Here, we present onewhere the 3R robot uses its redundancy with respect to the two-dimensional motion task assignedto its end effector as a mean to avoid the single obstacle detected online. The end-effector motiontask has a higher priority than the collision avoidance task, as long as the minimum distancebetween the robot and the obstacle Ostays above some threshold \u03b5>0. Otherwise, the controllerswitches the priority order and moves the robot primarily to avoid collision with the obstacle,trying to keep also the tracking error as small as possible. Indeed, when the obstacle is placed onthe end-effector path, this switching will certainly happen. To implement such a control strategy,we use the following items.\u2022A clearance function de\ufb01ned byH(q) = mina(q)\u2208robotb\u2208obstacle\u2225a(q)\u2212b\u2225. (1)In this expression, the detection of points bbelonging to the circular obstacle Ois made bythe proximity sensor mounted on the end-effector. The sensor is able to reconstruct the entirevisible surface of the obstacle and thus determine the closest point to the robot. The range ofthe proximity sensor covers the entire area of interest. The location of every point a(q) on therobot body is known from the encoder measures of qand via the direct kinematics of the robot.The clearance function in (1) can also be approximated by choosing a number of control pointson the robot body for robot-obstacle distance computation, rather than the entire robot skeleton.For instance, one can use the three points Pj2= location of joint 2, Pj3= location of joint 3,andPee= end-effector location. Then, (1) would be replaced by the clearance functionH(q) = minb\u2208obstacle{\u2225Pj2(q1)\u2212b\u2225,\u2225Pj3(q1,q2)\u2212b\u2225,\u2225Pee(q1,q2,q3)\u2212b\u2225}. (2)In both cases, we can use the gradient \u2207qH(q) = (\u2202H(q)/\u2202q)Tin the control scheme, togetherwith a stepsize factor \u03b1>0. While both clearance functions (1) and (2) are continuous (in spaceand time), their gradient may have discontinuities.\u2022The primary task Jacobian associated to the end-effector position p, as given byJ(q) =\u2202p(q)\u2202q=(\u2212(l1s1+l2s12+l3s123)\u2212(l2s12+l3s123)\u2212l3s123l1c1+l2c12+l3c123l2c12+l3c123l3c123),with the usual shorthand notation for trigonometric quantities (e.g., s123= sin(q1+q2+q3)).We will use the pseudoinverse J#(q) of this matrix. Moreover, the desired task velocity will be\u02d9pd=v(B\u2212A)/\u2225B\u2212A\u2225.\u2022A switching control law de\ufb01ned as\u02d9q=\uf8f1\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f3J#(q) (\u02d9pd+KP(pd\u2212p(q))) +(I\u2212J#(q)J(q))\u03b1\u2207qH(q)=\u03b1\u2207qH(q) +J#(q)(\u02d9pd+KP(pd\u2212p(q))\u2212\u03b1J(q)\u2207qH(q)), ifH(q)>\u03f5,\u03b1\u2207qH(q), ifH(q)\u2264\u03f5.(3)4When the obstacle is sufficiently far, with the control law (3) the robot executes exactly thedesired end-effector trajectory pd(t), while the gradient of the clearance function is projected inthe one-dimension null space of the primary task. Instead, when the robot is getting too closeto the obstacle, the control law will move away the nearest point of the robot. In the given formof the gradient of H(q) in the con\ufb01guration space, obstacle repulsion is a three-dimensional taskwhich leaves no space for a secondary consideration of the original tracking task. Therefore,during this phase, the end-effector path is typically abandoned1. When the minimum clearance\u03b5is recovered, the control will switch back to the previous law, trying to recover the accumulatederror with respect to the desired Cartesian trajectory. In order to do so, a position error feedbackterm with (diagonal) matrix gain KP>0 has been added in (3).We note \ufb01nally that the proposed control scheme is purely reactive (there is no planning for obstacleavoidance) and only local in scope (we cannot exclude that the robot gets stuck before reachingthe pointB). Further, there is no motion stop explicitly involved with a control switch. As aconsequence, switches are typically associated with discontinuities of the joint velocity commands.", "robot": "3R", "tags": ["planar"]},
 "46": {"file": "Robotics2_20.09.11.pdf", "date": "20-09-11", "num_ex": 1, "exam": "robo2", "question": "In an image-based visual servoing control scheme, the camera mounted on the robot end effector(eye-in-hand) looks for three speci\ufb01c points in the scene, characterized by their point features in theimage plane with coordinates ( ui,vi), fori= 1,2,3. Derive the expression of the 2 \u00d76interactionmatrix Jbassociated to the geometric barycenter b\u2208R2of the triangle in the image having thesepoint features as the three vertices, namely\u02d9b=Jb(V\u2126),where V\u2208R3and\u2126\u2208R3are respectively the linear and angular velocity of the camera.Provide then an instantaneous motion of the camera such that \u02d9b=0.1", "solution": "Associated to a point Pi= (Xi,Yi,Zi) in the Cartesian space, with its coordinates expressed inthe camera frame, there is a point feature fpi= (ui,vi) in the image plane whose interactionmatrix Jpitakes the form (see the lecture slides)Jpi(ui,vi,Zi) =\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u03bbZi0uiZiuivi\u03bb\u2212u2i\u03bb\u2212\u03bb v i0\u2212\u03bbZiviZiv2i\u03bb+\u03bb\u2212uivi\u03bb\u2212ui\uf8f6\uf8f7\uf8f7\uf8f8,where\u03bb > 0 is the focal length of the camera and the depth Zi>0 is limited (by the visualrange of the camera). The geometric barycenter b\u2208R2of a triangle in the image plane is simplyobtained from its three vertices, namely the coordinates of the point features fpi,i= 1,2,3, asb=(bubv)=13(u1+u2+u3v1+v2+v3).Therefore, the interaction matrix Jbtakes the formJb=13(Jp1(u1,v1,Z1) +Jp2(u2,v2,Z2) +Jp3(u3,v3,Z3))=13\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u2212\u03bb3\u2211i=11Zi03\u2211i=1uiZi1\u03bb3\u2211i=1uivi\u22121\u03bb3\u2211i=1u2i\u22123\u03bb3\u2211i=1vi0\u2212\u03bb3\u2211i=11Zi3\u2211i=1viZi1\u03bb3\u2211i=1v2i+ 3\u03bb\u22121\u03bb3\u2211i=1uivi\u22123\u2211i=1ui\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=Jb(u,v,Z),1Other collision avoidance schemes can be de\ufb01ned, still using an arti\ufb01cial potential to keep the robot away fromthe obstacle. Obstacle avoidance can be formulated as a two-dimensional task, when the repulsive action is de\ufb01nedalong the gradient of the Cartesian clearance, or even as a one-dimensional task, when only the projection of therepulsive Cartesian alction along the clearance direction is speci\ufb01ed. In both cases, it is possible to accommodatethe tracking task in the null space of the avoidance task.5withu= (u1,u2,u3),v= (v1,v2,v3), and depths Z= (Z1,Z2,Z3). Note that the obtainedinteraction matrix Jbis in general different from the interaction matrix associated to the singlepoint feature of the Cartesian barycenter Pb=13(P1+P2+P3) of the three points in 3D space.Possible camera motions that belong to the null space of JbareV=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed3\u2211i=1uiZi\u22123\u2211i=1viZi\u03bb3\u2211i=11Zi\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,\u2126=0 (a pure linear motion),orV=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed3\u2211i=1vi3\u2211i=1ui0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,\u2126=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed00\u03bb3\u2211i=11Zi\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8(linear motion parallel to the image plane,with angular motion around the optical axis).More independent camera motions with \u02d9b=0exist, since the dimension of N{Jb}is at least 4.", "robot": "unknown", "tags": []},
 "47": {"file": "Robotics2_20.09.11.pdf", "date": "20-09-11", "num_ex": 2, "exam": "robo2", "question": "With reference to the planar RP robot in Fig. 2, using the symbolic parameters speci\ufb01ed therein,determine the complete expression of the Cartesian inertia matrix Mp(q) of the robot at the tipp\u2208R2as a function of the con\ufb01guration q.Provide then the numerical value of Mp(q\u2217) atq\u2217=(0 3)T[rad, m], using the parameters:l1= 1, d 1= 0.5, m 1= 3, I 1= 0.25;d2= 0.5, m 2= 0.5, I 2= 0.875.Assuming that this robot is at rest in q\u2217on a horizontal plane, check that the tip acceleration\u00a8p\u2208R2has the same direction of any force F\u2208R2in the plane applied to the tip of the robot.q1q2y0x0\u2295d1m2,I2m1,I1\u2295pd2l1Figure 2: A 2-dof RP robot with its relevant kinematic and dynamic parameters.", "solution": "We compute \ufb01rst the kinetic energy of the RP robot. For the two links, we haveT1=12(I1+m1d21)\u02d9q21, T 2=12I2\u02d9q21+12m2vTc2vc2,withvc2=\u02d9pc2=ddt(l1cosq1+q2sinq1l1sinq1\u2212q2cosq1)=((q2cosq1\u2212l1sinq1) \u02d9q1+ sinq1\u02d9q2(l1cosq1+q2sinq1) \u02d9q1\u2212cosq1\u02d9q2).Therefore, from T=T1+T2=12\u02d9qTM(q)\u02d9q, we obtain the inertia matrixM(q) =(I1+m1d21+I2+m2l21+m2q22\u2212m2l1\u2212m2l1 m2).The Jacobian associated to the linear velocity v=\u02d9p\u2208R2of the robot tip is computed as\u02d9p=ddt(l1cosq1+ (q2+d2) sinq1l1sinq1\u2212(q2+d2) cosq1)=\u2202p(q)\u2202q\u02d9q=J(q)\u02d9q\u21d2J(q) =((q2+d2) cosq1\u2212l1sinq1sinq1l1cosq1+ (q2+d2) sinq1\u2212cosq1).6A singularity occurs when det J(q) =\u2212(q2+d2) = 0. Out of this singularity, and using also ashorthand notation for the trigonometric terms, the Cartesian inertia matrix at the robot tip isMp(q) =J\u2212T(q)M(q)J\u22121(q)=1(q2+d2)2(\u2212c1\u2212l1c1\u2212(q2+d2)s1\u2212s1(q2+d2)c1\u2212l1s1)(I1+m1d21+I2+m2l21+m2q22\u2212m2l1\u2212m2l1 m2)\u00b7(\u2212c1 \u2212s1\u2212l1c1\u2212(q2+d2)s1(q2+d2)c1\u2212l1s1),with elementsMp,11=1(q2+d2)2(I1+I2+m1d21+m2q22+(2m2d2q2+m2d22\u2212I1\u2212I2\u2212m1d21)s21),Mp,12=Mp,21=1(q2+d2)2(I1+I2+m1d21\u2212m2d22\u22122m2d2q2)s1c1,Mp,22=1(q2+d2)2(m2(q2+d2)2+(I1+I2+m1d21\u2212m2d22\u22122m2d2q2)s21).The Cartesian inertia matrix is not diagonal in general. However, when evaluating Mp(q\u2217) forq\u2217=(0 3)T[rad, m] and using the numerical parameters given in the text, we obtainMp(q\u2217) =J\u2212T(q\u2217)M(q\u2217)J\u22121(q\u2217)=(0.2857 0.28570\u22121)(6.625\u22120.5\u22120.5 0.5)(0.2857 00.2857\u22121)=(0.5 00 0.5)= 0.5\u00b7I2\u00d72As a result, we can immediately verify that the Cartesian acceleration \u00a8p\u2208R2of the robot endeffector in response to an arbitrary force F\u2208R2applied at the tip when the robot is at rest in q\u2217and in the absence of gravity is\u00a8p=M\u22121p(q\u2217)F= 2F,namely, \u00a8phas the same direction of the applied force F.", "robot": "RP", "tags": ["planar", "horizontal"]},
 "48": {"file": "Robotics2_20.09.11.pdf", "date": "20-09-11", "num_ex": 3, "exam": "robo2", "question": "A 3R robot moves on a horizontal plane in the presence of geometric constraints in the Cartesianspace, as illustrated in Fig. 3. Assume that the distance ksatis\ufb01es the inequalities l1<k<l 1+l2.\u2022Determine the dimension Mof the constraints and their possible expression h(q) =0, with theassociated Jacobian matrix A(q) =\u2202h(q)/\u2202q.\u2022De\ufb01ne the (3\u2212M)\u00d73 matrix D(q) to complete A(q) in a nonsingular way, as well as the blocksE(q) and F(q) of the inverse that appear in the reduced dynamics of this constrained robot.The reduced model should hold for any qsuch that the contact situation remains as in Fig. 3.\u2022Letmijbe the elements of the (symmetric) inertia matrix M(q) of this robot in free space.Give the full expression of the (3 \u2212M)\u00d7(3\u2212M)reduced inertia matrix in the constrained case.q3q1q2y0x0kl1l2l3Figure 3: A 3R robot with geometric constraints in the Cartesian space limiting its motion.2", "solution": "The 3R robot (having N= 3 degrees of freedom) is geometrically constrained in its Cartesianmotion in two ways:\u2022it cannot change the absolute orientation of the last link, which remains always parallel to y0;\u2022it cannot move the tip of the second link away from the axis x=k.Therefore, this situation can be modeled by M= 2 scalar constraints, written in the joint space ash(q) =\uf8eb\uf8edq1+q2+q3\u2212\u03c02l1cosq1+l2cos(q1+q2)\u2212k\uf8f6\uf8f8=0.The Jacobian of these constraints isA(q) =\u2202h(q)\u2202q=(1 1 1\u2212(l1sinq1+l2sin(q1+q2))\u2212l2sin(q1+q2) 0).7The rank of matrix A(q) is 2, except when sin( q1+q2) = sinq1= 0, which occur if and only ifq1={0,\u03c0}andq2={0,\u03c0}, i.e., when the \ufb01rst two links are stretched or folded along the x0-axis.However, these singular con\ufb01gurations are not allowed by the geometric constraints (thanks to thetwo inequalities imposed on the parameter k, otherwise arbitrary).The \ufb01rst step for deriving the reduced dynamics of this constrained robot is to \ufb01nd a matrix D(q)of size (N\u2212M)\u00d7M= 1\u00d73 such that it completes A(q), building a nonsingular square matrixin the operating region. A suitable choice that satis\ufb01es this requirement isD(q) =(l1cosq1+l2cos(q1+q2)l2cos(q1+q2) 0),which leads to(A(q)D(q))=\uf8eb\uf8ec\uf8ed1 1 1\u2212(l1sinq1+l2sin(q1+q2))\u2212l2sin(q1+q2) 0l1cosq1+l2cos(q1+q2)l2cos(q1+q2) 0\uf8f6\uf8f7\uf8f8,det(A(q)D(q))=l1l2sinq2.(4)The determinant is never zero for all qsuch that the contact situation remains the same as in Fig. 3.As a matter of fact, this choice of D(q) reconstructs the 2 \u00d72 Jacobian of the 2R substructuremade by the \ufb01rst two links of the 3R robot. The constrained robot has only one degree of freedomleft, which is described by the scalar termv=D(q)\u02d9q= (l1cosq1+l2cos(q1+q2)) \u02d9q1+l2cos(q1+q2) \u02d9q2.This pseudovelocity represents the motion of the tip of the second link along the direction y0.The second step of the procedure is to invert the matrix in (4) so as to de\ufb01ne the blocks E(q) andF(q) in the inverse. We obtain(A(q)D(q))\u22121=1l1l2sinq2\uf8eb\uf8ec\uf8ed0 l2cos(q1+q2) l2sin(q1+q2)0\u2212(l1cosq1+l2cos(q1+q2))\u2212(l1sinq1+l2sin(q1+q2))l1l2sinq2 l1cosq1 l1sinq1\uf8f6\uf8f7\uf8f8.Thus, we have the partition into the \ufb01rst M= 2 columnsE(q) =1l1l2sinq2\uf8eb\uf8ec\uf8ed0 l2cos(q1+q2)0\u2212(l1cosq1+l2cos(q1+q2))l1l2sinq2 l1cosq1\uf8f6\uf8f7\uf8f8and the last N\u2212M= 1 columnF(q) =1l1l2sinq2\uf8eb\uf8ec\uf8edl2sin(q1+q2)\u2212(l1sinq1+l2sin(q1+q2))l1sinq1\uf8f6\uf8f7\uf8f8.Finally, introducing in symbolic form the elements of the robot inertia of the 3R robot in free spaceM(q) =\uf8eb\uf8ec\uf8edm11m12m13m12m22m23m13m23m33\uf8f6\uf8f7\uf8f8>0,8we have that the reduced inertia matrix is a scalar given by2FT(q)M(q)F(q) =FT(q)\u00b71l1l2sinq2\uf8eb\uf8ec\uf8ed(m11\u2212m12)l2sin(q1+q2) + (m13\u2212m12)l1sinq1(m12\u2212m22)l2sin(q1+q2) + (m23\u2212m22)l1sinq1(m13\u2212m23)l2sin(q1+q2) + (m33\u2212m23)l1sinq1\uf8f6\uf8f7\uf8f8.=1(l1l2sinq2)2((m11+m22\u22122m12)l22sin2(q1+q2)+ (m22+m33\u22122m23)l21sin2q1+ 2 (m22\u2212m12+m13\u2212m23)l1l2sinq1sin(q1+q2)).", "robot": "3R", "tags": ["horizontal", "constraints"]},
 "49": {"file": "Robotics2_20.09.11.pdf", "date": "20-09-11", "num_ex": 4, "exam": "robo2", "question": "Consider a 2R robot arm of human-like size and weight moving in a vertical plane with negligiblefriction. Two model-based controllers are being compared in a trajectory tracking problem in thejoint space. The \ufb01rst is based on feedback linearization, yielding a control torque uFBL(t), thesecond is a Lyapunov-based control law with global asymptotic convergence property, yielding atorque uGLB(t).Assuming that the PD gain matrices are the same in both control laws, provide the explicitexpression of the torque difference \u2206u(t) =uFBL(t)\u2212uGLB(t).Next, when the desired joint trajectory and the PD gains are respectivelyqd(t) =\uf8eb\uf8ed\u03c02+ 3 sin\u03c0t21\u2212cos 2\u03c0t\uf8f6\uf8f8,KP= 100\u00b7I2\u00d72,KD= 20\u00b7I2\u00d72,assume that at time t= 2 s, the current robot con\ufb01guration is q(2) =(\u03c0/2\u2212\u03c0/2)T[rad] andthe velocity tracking error is zero. For each robot joint, determine which is the controller that usesthe larger instantaneous torque in absolute value.[240 minutes (4 hours); open books]3", "solution": "The trajectory tracking control law based on feedback linearization isuFBL =M(q)(\u00a8qd+KD(\u02d9qd\u2212\u02d9q) +KP(qd\u2212q))+c(q,\u02d9q) +g(q). (5)The Lyapunov-based control law with global asymptotic convergence property isuGLB =M(q)\u00a8qd+S(q,\u02d9q)\u02d9qd+g(q) +KD(\u02d9qd\u2212\u02d9q) +KP(qd\u2212q), (6)where \u02d9M\u22122Sis a skew symmetric matrix and the PD gains are by hypothesis the same as in (5).Since the Coriolis and centrifugal terms in (5) can always be rewritten as c(q,\u02d9q) =S(q,\u02d9q)\u02d9qusingthe same factorization used in (6), the difference between the two control torques can be writtenin general as\u2206u=uFBL\u2212uGLB = (M(q)\u2212I) (KD(\u02d9qd\u2212\u02d9q) +KP(qd\u2212q)) +S(q,\u02d9q) (\u02d9q\u2212\u02d9qd).(7)From the desired joint trajectory, we obtain\u02d9qd(t) =\uf8eb\uf8ed3\u03c02cos\u03c0t22\u03c0sin 2\u03c0t\uf8f6\uf8f8, \u00a8qd(t) =\uf8eb\uf8ed\u22123\u03c024sin\u03c0t24\u03c02cos 2\u03c0t\uf8f6\uf8f8.At timet= 2 s, we have thusqd(2) =\uf8eb\uf8ed\u03c020\uf8f6\uf8f8, \u02d9qd(2) =\uf8eb\uf8ed\u22123\u03c020\uf8f6\uf8f8, \u02d9qd(2) =(04\u03c02),while the robot state and the position and velocity errors areq(2) =\uf8eb\uf8ec\uf8ed\u03c02\u2212\u03c02\uf8f6\uf8f7\uf8f8\u21d2e(2) =\uf8eb\uf8ed0\u03c02\uf8f6\uf8f8, \u02d9q(2) = \u02d9qd(2)\u21d2 \u02d9e(2) = 0.In this case, the only information needed in eq. (7) is the inertia matrix of the 2R robot. From thelecture slides, this matrix has the formM(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3),2Performing computations by hand in the given sequence is surprisingly faster than setting up a similarly efficientcode using symbolic programming!9with dynamic coefficients ai>0,i= 1,2,3. Using the PD gains given in the text, we \ufb01nally obtain\u2206u(2) = ( M(q(2))\u2212I)\u00b7KPe(2) =(a1\u22121a3a3a3\u22121)\u00b7100\uf8eb\uf8ed0\u03c02\uf8f6\uf8f8= 50\u03c0\u00b7(a3a3\u22121).It is quite reasonably to assume that a3=I2+m2d2c2>1, being the robot arm of human-likesize and weight. Thus, both components of \u2206u(2) are positive. However, to determine whichcontroller is using the larger torques in absolute value at t= 2 s, we need to assess also thesigns of the components of at least one of the two torque commands3. We evaluate then theLyapunov-based tracking controller under the assumed conditions, obtaininguGLB(2) =M(q(2))\u00a8qd(2) +S(q(2),\u02d9qd(2))\u02d9qd(2) +g(q(2)) + KPe(2).For each term in the expression of uGLB(2), the following can be easily observed:M(q(2))\u00a8qd(2) =(a1a3a3a3)(04\u03c02)= 4\u03c02a3(11)>0,S(q(2),\u02d9qd(2))\u02d9qd(2) =c(q(2),\u02d9qd(2)) =(\u2212a2sinq2(2)(\u02d9q2d2(2)\u22122 \u02d9qd1(2) \u02d9qd2(2))a2sinq2(2) \u02d9q2d1(2))=\u22129\u03c024a2(01)\u22640,g(q(2)) =(a4cosq1(2) +a5cos(q1(2) +q2(2))a5cos(q1(2) +q2(2)))=a5(11)>0,KPe(2) = 50(0\u03c0)\u22650.Despite of the negative addend in the second component of the velocity term, it can be safelyconcluded that this single term is compensated by the multiple other positive ones, so thatuGLB(2)>0holds componentwise. Thus, it is also uFBL(2) = uGLB(2) + \u2206u(2)>0com-ponentwise. For both two components, the feedback linearization law requires at t= 2 s a largertorque (in absolute value, but in fact positive) than the Lyapunov-based control law.b <0, we could have both |b|>|a|or viceversa in absolute value, and thus also the sign of ashould be checked.10", "robot": "2R", "tags": ["vertical"]},
 "50": {"file": "Robotics2_Midterm_Test_2015-16_16.04.13.pdf", "date": "16-04-13", "num_ex": 0, "exam": "robo2", "question": "For the PRR planar robot in Fig. 1, determine the symbolic expression of the inertia matrix B(q) andof the Coriolis and centrifugal vector c(q,\u02d9q). Use the generalized coordinates and the scalar parametersshown in the \ufb01gure.Figure 1: A planar PRR robot", "solution": "Since the motion is planar, we will use two-dimensional position and velocity vectors (in the ( x0,y0)plane) and just the z-component of angular velocities. Also, the usual shorthand notation is adopted fortrigonometric quantities, e.g., s2= sinq2,c23= cos(q2+q3).Kinetic energyFor link 1, we have (the position of the center of mass on link 1, i.e., d1, is irrelevant)T1=12m1\u02d9q21.For link 2, we compute \ufb01rst the position of the center of mass and its velocity,pc2=q1+d2c2d2s2!\u2192vc2=\u02d9q1\u2212d2s2\u02d9q2d2c2\u02d9q2!,and then\u2225vc2\u22252= \u02d9q21+d22\u02d9q22\u22122d2s2\u02d9q1\u02d9q2.Since\u03c92z= \u02d9q2, we obtainT2=12m2`\u02d9q21+d22\u02d9q22\u22122d2s2\u02d9q1\u02d9q2\u00b4+12I2\u02d9q22.Similarly, for link 3pc3=q1+\u21132c2+d3c23\u21132s2+d3s23!\u2192vc3=\u02d9q1\u2212\u21132s2\u02d9q2\u2212d3s23( \u02d9q2+ \u02d9q3)\u21132c2\u02d9q2+d3c23( \u02d9q2+ \u02d9q3)!,and then\u2225vc3\u22252= \u02d9q21+\u211322\u02d9q22+d3( \u02d9q2+ \u02d9q3)2\u22122\u21132s2\u02d9q1\u02d9q2\u22122d3s23\u02d9q1( \u02d9q2+ \u02d9q3) + 2\u21132d3(s2s23+c2c23) \u02d9q2( \u02d9q2+ \u02d9q3).Being\u03c93z= \u02d9q2+ \u02d9q3, we obtain (after trigonometric simpli\ufb01cation)T3=12m3`\u02d9q21+\u211322\u02d9q22+d3( \u02d9q2+ \u02d9q3)2\u22122\u21132s2\u02d9q1\u02d9q2\u22122d3s23\u02d9q1( \u02d9q2+ \u02d9q3) + 2\u21132d3c3\u02d9q2( \u02d9q2+ \u02d9q3)\u00b4+12I3( \u02d9q2+ \u02d9q3)2.Robot inertia matrixFromT=3Xi=1Ti=12\u02d9qTB(q)\u02d9q,we obtain the (symmetric) elements bij=bjiof the inertia matrix B(q) asb11=m1+m2+m3=:a1b22=I2+m2d22+I3+m3d23+m3\u211322+ 2m3\u21132d3c3=:a2+ 2a3c3b33=I3+m3d23=:a4b12=\u2212(m2d2+m3\u21132)s2\u2212m3d3s23=:\u2212a5s2\u2212a6s23b13=\u2212m3d3s23=\u2212a6s23b23=I3+m3d23+m3\u21132d3c3=a4+a3c3.3where we have introduced the dynamic coefficients ai(i= 1,..., 6) for the constant factors, in order to havemore compact expressions. Thus, the positive de\ufb01nite, symmetric robot inertia matrix can be rewritten asB(q) =0B@a1\u2212(a5s2+a6s23)\u2212a6s23\u2212(a5s2+a6s23)a2+ 2a3c3a4+a3c3\u2212a6s23 a4+a3c3a41CA=b1(q)b2(q)b3(q)!. (1)Coriolis and centrifugal vectorFrom (1) andc(q,\u02d9q) =0@c1(q,\u02d9q)c2(q,\u02d9q)c3(q,\u02d9q)1A, c i(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202bi(q)\u2202q+\u201e\u2202bi(q)\u2202q\u00abT\u2212\u2202B(q)\u2202qi)(i= 1,2,3),we computeC1(q) =128><>:0B@0 0 00\u2212(a5c2+a6c23)\u2212a6c230\u2212a6c23\u2212a6c231CA+0B@0 0 00\u2212(a5c2+a6c23)\u2212a6c230\u2212a6c23\u2212a6c231CAT\u221209>=>;=0B@0 0 00\u2212(a5c2+a6c23)\u2212a6c230\u2212a6c23\u2212a6c231CAC2(q) =128><>:0B@0\u2212(a5c2+a6c23)\u2212a6c230 0 \u22122a3s30 0 \u2212a3s31CA+0B@0 0 0\u2212(a5c2+a6c23) 0 0\u2212a6c23\u22122a3s3\u2212a3s31CA\u22120B@0\u2212(a5c2+a6c23)\u2212a6c23\u2212(a5c2+a6c23) 0 0\u2212a6c23 0 01CA9>=>;=0B@0 0 00 0\u2212a3s30\u2212a3s3\u2212a3s31CAC3(q) =128><>:0B@0\u2212a6c23\u2212a6c230 0\u2212a3s30 0 01CA+0B@0 0 0\u2212a6c23 0 0\u2212a6c23\u2212a3s301CA\u22120B@0\u2212a6c23\u2212a6c23\u2212a6c23\u22122a3s3\u2212a3s3\u2212a6c23\u2212a3s3 01CA9>=>;=0B@0 0 00a3s300 0 01CA,and thusc(q,\u02d9q) =0B@\u2212a5c2\u02d9q22\u2212a6c23( \u02d9q2+ \u02d9q3)2\u2212a3s3(2 \u02d9q2+ \u02d9q3) \u02d9q3a3s3\u02d9q221CA=0B@\u2212(m2d2+m3\u21132)c2\u02d9q22\u2212m3d3c23( \u02d9q2+ \u02d9q3)2\u2212m3\u21132d3s3(2 \u02d9q2+ \u02d9q3) \u02d9q3m3\u21132d3s3\u02d9q221CA.(2)", "robot": "PRR", "tags": ["planar"]},
 "51": {"file": "Robotics2_Midterm_Test_2015-16_16.04.13.pdf", "date": "16-04-13", "num_ex": 1, "exam": "robo2", "question": "The 4R planar robot in Fig. 2 moves under gravity. For each link, the center of mass lies on its longitudinalaxis of symmetry, at a generic distance from the driving joint. Determine: i)the expression of the gravityvector g(q) in the robot dynamic model; ii)all equilibrium con\ufb01gurations of the robot (i.e., all qesuch thatg(qe) =0;iii)a linear parametrization of the gravity vector in the form g(q) =YG(q)aG; the particularlocation of the center of masses of the links such that the gravity vector vanishes (i.e., g(q) =0, for all q).Figure 2: A 4R planar robot under gravity1", "solution": "Again, the robot motion occurs in a (vertical) plane and we will use for simplicity two-dimensional positionvectors in the plane ( x0,y0). The total potential energy isU=4Xi=1Ui, U i=\u2212migTr0,ci, i= 1,..., 4.4SincegT=`0\u2212g00\u00b4, g 0= 9.81 [m/s2],we need to compute only the y-component of the position vector r0,ciof the center of mass of the link i,fori= 1,..., 4. We haver0,c1,y=d1s1r0,c2,y=\u21131s1+d2s12r0,c3,y=\u21131s1+\u21132s12+d3s123r0,c4,y=\u21131s1+\u21132s12+\u21133s123+d4s1234,wherediis the (signed) distance of the center of mass of link ifrom the axis of joint i(i= 1,..., 4). ThusU=g0m1d1s1+g0m2(\u21131s1+d2s12) +g0m3(\u21131s1+\u21132s12+d3s123) +g0m4(\u21131s1+\u21132s12+\u21133s123+d4s1234)=g0n[m1d1+ (m2+m3+m4)\u21131]s1+ [m2d2+ (m3+m4)\u21132]s12+ [m3d3+m4\u21133]s123+m4d4s1234o=:aG1s1+aG2s12+aG3s123+aG4s1234,where we have introduced the dynamic coefficients aGi(i= 1,..., 4) for the constant factors related togravity.The gravity vector of this robot is theng(q) =\u201e\u2202U(q)\u2202q\u00abT=0BBB@aG1c1+aG2c12+aG3c123+aG4c1234aG2c12+aG3c123+aG4c1234aG3c123+aG4c1234aG4c12341CCCA, (3)and its linear parametrization isg(q) =0BBB@c1c12c123c12340c12c123c12340 0c123c12340 0 0 c12341CCCA0BBB@aG1aG2aG3aG41CCCA=YG(q)aG. (4)All equilibrium con\ufb01gurations qeare found by analyzing recursively the vector equation g(qe) =0fromthe last component backwards:g4(qe) = 0\u2192c1234= 0g3(qe) = 0\u2192being already c1234= 0\u2192c123= 0g2(qe) = 0\u2192being already c1234= 0,c123= 0\u2192c12= 0g1(qe) = 0\u2192being already c1234= 0,c123= 0,c12= 0\u2192c1= 0.Thus, the unforced equilibria of the robot (assuming a generic mass distribution) are characterized byqe1=\u00b1\u03c02\u2229qe2={0,\u03c0} \u2229qe3={0,\u03c0} \u2229qe4={0,\u03c0},namely with the robot being stretched or folded along the vertical direction only.Finally, perfect balancing in all con\ufb01gurations (i.e., g(q) =0) is obtained for when the mass distributionzeroes the vector of dynamic coefficients, namely aG=0. Starting again from the last component andproceeding backwards, we obtainaG4= 0\u2192d4= 0aG3= 0\u2192m3d3+m4\u21133= 0\u2192d3=\u2212m4m3\u21133aG2= 0\u2192m2d2+ (m3+m4)\u21132= 0\u2192d2=\u2212m3+m4m2\u21132aG1= 0\u2192m1d1+ (m2+m3+m4)\u21131= 0\u2192d1=\u2212m2+m3+m4m1\u21131.5", "robot": "4R", "tags": ["planar", "vertical"]},
 "52": {"file": "Robotics2_Midterm_Test_2015-16_16.04.13.pdf", "date": "16-04-13", "num_ex": 2, "exam": "robo2", "question": "The 4R planar robot with all links of equal length \u2113in Fig. 3 needs to realize a motion task de\ufb01ned bya desired linear velocity vdfor its end-effector position peand by a desired angular velocity \u02d9\u03c6dfor theorientation \u03c6of its end-effector frame. Characterize \ufb01rst all the singular con\ufb01gurations of the robot forthis speci\ufb01c task.Assume then \u2113= 0.5 [m], q= (0 0\u03c0/2 0),vd= (1 0) [m/s], and \u02d9\u03c6d= 0.5 [rad/s]. Moreover, the joints havelimited motion range, i.e., qi\u2208[\u22122,2] [rad], for i= 1,..., 4. Determine the joint velocity \u02d9qthat realizesthe desired task while decreasing instantaneously the objective function that measures the distance fromthe midpoint of the joint ranges, i.e., in the formHrange (q) =12NNXi=1\u201eqi\u2212\u00afqiqM,i\u2212qm,i\u00ab2.Figure 3: The kinematic skeleton of a planar 4R robot[150 minutes; open books]2", "solution": "The task vector for this 4R planar robot is de\ufb01ned asr=pe\u03c6!=0B@pxpy\u03c61CA=0B@\u2113(c1+c12+c123+c1234)\u2113(s1+s12+s123+s1234)q1+q2+q3+q41CA=f(q).Differentiating rw.r.t. to time yields\u02d9r=v\u02d9\u03c6!=\u2202f(q)\u2202q\u02d9q=J(q)\u02d9q,with the task Jacobian given byJ(q) =0B@\u2212\u2113(s1+s12+s123+s1234)\u2212\u2113(s12+s123+s1234)\u2212\u2113(s123+s1234)\u2212\u2113s1234\u2113(c1+c12+c123+c1234)\u2113(c12+c123+c1234)\u2113(c123+c1234)\u2113c12341 1 1 11CA.(5)For the purpose of singularity analysis, the matrix J(q) can be rewritten asJ(q) =0B@\u2212\u2113s1\u2212\u2113s12\u2212\u2113s123\u2212\u2113s1234\u2113c1\u2113c12\u2113c123\u2113c12340 0 0 11CA0BBB@1 0 0 01 1 0 01 1 1 01 1 1 11CCCA=Ja(q)T,where the square matrix Tis clearly nonsingular. Thus, JandJahave always the same rank. In particular,the Jacobian Jwill be full (row) rank if and only if the 2 \u00d73 upper left block of matrix Jawill have rankequal to 2. This matrix block corresponds to the well-known Jacobian of a planar 3R robot (with equallinks of length \u2113) performing a positional task with its end-effector. The singularities of the 4R arm forthe given task occur then if and only ifq2={0,\u03c0} \u2229q3={0,\u03c0},namely when its \ufb01rst three links are stretched or folded along a single direction.Plugging the link length \u2113= 0.5 [m] and the given con\ufb01guration q= (0 0\u03c0/2 0) in (5) providesJ=0B@\u22121\u22121\u22121\u22120.51 0.5 0 01 1 1 11CA.whose pseudoinverse is computed (by hand or using Matlab) asJ#=JT\u201cJJT\u201d\u22121=0BBB@\u22121 1 1\u22121 0.5 1\u22121 0 1\u22120.5 0 11CCCA0B@3.25\u22121.5\u22123.5\u22121.5 1.25 1.5\u22123.5 1.5 41CA\u22121=0BBB@1/3 1 1 /6\u22122/3 0\u22121/3\u22125/3\u22121\u22125/62 0 21CCCA.The desired velocity task is speci\ufb01ed by\u02d9rd=vd\u03c6d!=0@100.51A.6In view of the separability of the objective function Hrange (q) =PNi=1Hrange,i (qi) that measures thedistance from the midpoint of the joint ranges, its gradient takes the form\u2207qHrange (q) =\u201e\u2202Hrange (q)\u2202q\u00abT, with\u2202Hrange (q)\u2202qi=\u2202Hrange,i (qi)\u2202qi=1Nqi\u2212\u00afqi(qM,i\u2212qm,i)2.With the data N= 4,qM,i=\u2212qm,i= 2, and thus \u00af qi= 0, fori= 1,..., 4, the gradient at the givencon\ufb01guration q= (0 0\u03c0/2 0) is\u2207qHrange =1640BBB@00\u03c0/201CCCAThe joint velocity solution that realizes the desired task while decreasing instantaneously the objectivefunctionHrange is evaluated then as\u02d9q=J#\u02d9rd\u2212\u201cI\u2212J#J\u201d\u2207qHrange =\u2212\u2207 qHrange +J#(\u02d9rd+J\u2207qHrange ) =0BBB@0.4126\u22120.8252\u22122.087431CCCA[rad/s].", "robot": "4R", "tags": ["planar"]},
 "53": {"file": "Robotics2_12.06.11.pdf", "date": "12-06-11", "num_ex": 0, "exam": "robo2", "question": "In an image-based visual servoing scheme, a pin-hole camera with constant focal length \u03bb >0 ismounted on the end-effector of a robot manipulator. A \ufb01xed Cartesian point P= (X Y Z )T,whose coordinates are expressed in the camera frame and having Z > 0, is associated to a pointfeaturef= (u v)Tin the image plane. The 2 \u00d76 interaction matrix Jpin\u02d9f=Jp(u,v,Z )(v\u03c9)provides the velocity of the point feature fwhen the robot imposes to the camera a linear velocityv\u2208R3and an angular velocity \u03c9\u2208R3, both expressed in the camera frame. Determine a basisfor all possible motions of the camera that do not move the point feature in the image plane, i.e.,yielding \u02d9f=0. How many independent pure translation motions (i.e., with \u03c9=0) of this kindexist for the camera? And how many independent pure rotation motions (i.e., with v=0)?", "solution": "The interaction matrix Jpfor a point feature takes the form (see lecture slides)Jp=\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u03bbZ0uZuv\u03bb\u2212u2\u03bb\u2212\u03bb v0\u03bbZvZv2\u03bb+\u03bb\u2212uv\u03bb\u2212u\uf8f6\uf8f7\uf8f7\uf8f8=(JvJ\u03c9). (1)Since\u03bb > 0 andZis limited (by the range of the camera), the interaction matrix as well as itstwo (2\u00d73) blocksJvandJ\u03c9will all have rank 2, independently from the values of uandv.The problem requires to de\ufb01ne a basis for the null space of Jpin the six-dimensional space oflinear and angular camera velocity ( v,\u03c9). From the analysis of the structure of Jpin (1), we havethatdimN{Jp}= 4, dimN{Jv}= 1, dimN{J\u03c9}= 1.This means that there will be four independent velocity vector of the camera that will not movethe feature ( u,v) in the image plane, and that one such vector can be given the form of a puretranslation (v,0) and another one of a pure rotation ( 0,\u03c9). The other two vectors will be associatedto roto-translations. With this in mind, we can solve the problem by inspection or by resorting tothe following symbolic Matlab code.% null space of point feature interaction matrixclear allclcsyms lam u v Z realJ =[ -lam/Z, 0, u/Z, (u*v)/lam, - u2/lam - lam, v][ 0, -lam/Z, v/Z, v2/lam + lam, -(u*v)/lam, -u];N=null(J)% check special case for u=v=0 (point at the center of the image plane)Norigin=subs(N,[u,v],[0,0])% check alternative solution (a pure rotation) that Matlab does not provide as suchnrot=simplify(u*N(:,2)+v*N(:,3)+lam*N(:,4))verifynrot=simplify(J*nrot)% OUTPUTN =[ u/lam, (Z*u*v)/lam2, -(Z*(lam2+ u2))/lam2, (Z*v)/lam][ v/lam, (Z*(lam2+ v2))/lam2, -(Z*u*v)/lam2, -(Z*u)/lam][ 1, 0, 0, 0][ 0, 1, 0, 0][ 0, 0, 1, 0][ 0, 0, 0, 1]2Norigin =[ 0, 0, -Z, 0][ 0, Z, 0, 0][ 1, 0, 0, 0][ 0, 1, 0, 0][ 0, 0, 1, 0][ 0, 0, 0, 1]nrot =000uvlamverifyrot =00The columns of matrix Nprovide the solution. It is apparent that the \ufb01rst vector (convenientlyscaled by\u03bb) is a pure translation\u03bbN(:,1) =\uf8eb\uf8ec\uf8ec\uf8eduv\u03bb0\uf8f6\uf8f7\uf8f7\uf8f8=(v0).This represents a linear motion of the camera along the ray connecting the point ( u,v) on theimage plane to the Cartesian point ( X,Y.Z ). On the other hand, the remaining three basis vectorsfor the null space of Jpfound by Matlab have all the form of roto-translations. However, it is easyto see that their linear combinationuN(:,2) +vN(:,3) +\u03bbN(:,4) =\uf8eb\uf8ec\uf8ec\uf8ed0uv\u03bb\uf8f6\uf8f7\uf8f7\uf8f8=(0\u03c9)is a pure rotation along the previously de\ufb01ned ray. Indeed, if not properly guided, Matlab will\ufb01nd the null space of a matrix by suitable orthogonalizations and normalizations (see the resulting(4\u00d74) identity matrix in the lower part of N), without providing automatically a solution with adesired physical meaning.Finally, the two remaining null space vectors can be given the form of roto-translations, eitherboth with linear and angular components in the image plane\u03bb2N(:,2) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8eduvZ(v2+\u03bb2)Z0\u03bb200\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8, \u03bb2N(:,3) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u2212(u2+\u03bb2)Z\u2212uvZ00\u03bb20\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,3or one still of this type and the other with linear component in the image plane and angularcomponent along the camera main axis\u03bb2(N(:,2) +N(:,3)) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u2212(u2+\u03bb2\u2212uv)Z(v2+\u03bb2\u2212uv)Z0\u03bb2\u03bb20\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8, \u03bb N(:,4) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edvZ\u2212uZ000\u03bb\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.", "robot": "unknown", "tags": []},
 "54": {"file": "Robotics2_12.06.11.pdf", "date": "12-06-11", "num_ex": 1, "exam": "robo2", "question": "A planar 3R robot with equal uniform thin rod links of unitary length moves in the vertical plane,actuated by the joint torques \u03c4\u2208R3and subject to a constant contact force Fcapplied to themidpoint of the second link and pointing always upward (see Fig. 1).Y!0!X!0!!2!!1!!3!g0!Fc!Figure 1: A planar 3R robot with a contact force\u2022De\ufb01ne a control law for \u03c4that regulates the robot to a desired generic equilibrium state(q,\u02d9q) = (qd,0) and give the explicit expression of the kinematic and dynamic terms neededfor its implementation. The contact force and its location are assumed to be known, andthus there is no need of a force sensor. Provide a Lyapunov candidate that allows to provethe global asymptotic stability of the closed-loop system using Lyapunov/LaSalle arguments.\u2022Suppose that the robot is in its desired steady state ( qd,0) under the action of the previouslyde\ufb01ned control law. The contact force is then suddenly doubled in intensity, but the controllaw is left unchanged. Does the third joint accelerate instantaneously? Assuming that thesystem remains stable, \ufb01nd a characterization of the new \ufb01nal con\ufb01guration reached at theend of the transient in terms of the parameters of the controller.\u2022If the contact force could be measured, would it be possible to preserve the global asymptoticstability of the original state ( qd,0) by suitably modifying the control law? If so, how?[180 minutes; open books]1", "solution": "The robot dynamics, under the action of the contact force Fcand the motor control torque \u03c4, isdescribed byB(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4+JTc(q)Fc,where the Jacobian Jc(q) is associated to the linear velocity (in the plane) of the mid point of thesecond robot link, where the contact force is applied in the upward direction. For a regulation taskin the presence of the constant and known forceFc, we can use the control law\u03c4=g(q)\u2212JTc(q)Fc+KP(qd\u2212q)\u2212KD\u02d9q. (2)In fact, by canceling gravity and the effect of the contact force at the joint level, the task becomesin this way one of free regulation in the absence of gravity. This is solvable by a PD joint erroraction withKP>0 andKD>0, yielding global asymptotic stability of the desired equilibriumstate (qd,0). The proof uses the Lyapunov candidateV=12\u02d9qTB(q)\u02d9q+12(qd\u2212q)TKP(qd\u2212q)and LaSalle analysis.To implement the control law (2), we need to measure only ( q,\u02d9q) (no force sensing is needed)and compute g(q) andJ(q). From the gravitational potential energyU=U1+U2+U3=g0(m1\u211312s1+m2(\u21131s1+\u211322s12)+m3(\u21131s1+\u21132s12+\u211332s123)),setting\u21131=\u21132=\u21133= 1, we obtaing(q) =(\u2202U(q)\u2202q)T=g02\uf8eb\uf8ec\uf8edm1c1+m2(2c1+c12) +m3(2c1+ 2c12+c123)m2c12+m3(2c12+c123)m3c123\uf8f6\uf8f7\uf8f8.From the positional kinematics of the mid point of the second linkpc=fc(q) =(\u21131c1+ 0.5\u21132c12\u21131s1+ 0.5\u21132s12),setting\u21131=\u21132= 1, we obtainJc(q) =\u2202f(q)\u2202q=12(\u2212(2s1+s12)\u2212s1202c1+c12c12 0).4ThereforeJTc(q)Fc=JTc(q)(0Fc,y)=Fc,y2\uf8eb\uf8ec\uf8ed2c1+c12c120\uf8f6\uf8f7\uf8f8.Note that no additional control torque is present at the third joint since the contact force is appliedat the second link. However, this contact force, if not compensated, will in general accelerate alsothe third joint because of the inertial coupling.With the robot at the desired equilibrium state ( qd,0) under the action of the control law (2),suppose that the contact force is doubled from Fcto 2Fc. The dynamic equations become in thisstateB(qd)\u00a8q=\u2212JTc(qd)Fc+ 2JTc(qd)Fc=JTc(qd)Fcand thus the instantaneous acceleration is\u00a8q=B\u22121(qd)JTc(qd)Fc.Being in general the inertia matrix a full matrix (and so its inverse), all joints will have a non-zeroacceleration \u00a8 qi, including \u00a8 q3.Suppose now that a new steady state is reached, with q=\u00afqand\u02d9q=\u00a8q=0. In this equilibriumstate, it is necessarilyKP(qd\u2212\u00afq) +JTc(\u00afq)Fc=0. (3)We can determine the equilibrium con\ufb01guration \u00afqonly by solving numerically the nonlinear equa-tion (3). However, assuming that KPis chosen diagonal as usual, since the last component ofJTc(q)Fcis always zero, the third equation in (3) becomesKP,3(qd,3\u2212\u00afq3) = 0\u21d2 \u00afq3=qd,3while \u00afqi\u0338=qd,ifori= 1,2. This means that the third joint will resume its desired value after theperturbation due to the doubling of the contact force acting on the second link.Finally, if the contact force is measured (in some way) and used in feedback control, then thesame law (2) \u2014now with any value for the measured quantity JTc(q)Fc\u2014 will guarantee that(qd,0) will always remain the unique globally asymptotically stable equilibrium for the robotsystem.", "robot": "3R", "tags": ["planar", "vertical"]},
 "55": {"file": "Robotics2_23.01.25.pdf", "date": "23-01-25", "num_ex": 0, "exam": "robo2", "question": "The 2R planar robot in Fig. 1 moves in a vertical plane. The second link has its center of mass onthe axis of the second joint. Viscous friction is present at both joints.a. Derive the dynamic model of this robot in Lagrangian form. Find then a linear parametrizationof the model asY(q,\u02d9q,\u00a8q)a=\u03c4,where the vector of dynamic coefficients a\u2208Rphas the least dimension p(the gravity acceler-ationg0and the link lengths are assumed to be known).b. Consider the control law \u03c4=KP(qd\u2212q)\u2212KD\u02d9q+g(qd), with diagonal gain matrices KP>0andKD\u22650 and with constant gravity compensation at qd. Which are the minimum values ofthe four control gains KP1,KP2,KD1andKD2that guarantee global asymptotic stabilizationofanygeneric desired equilibrium state ( q,\u02d9q) = (qd,0)?c. With the robot dynamic parameters being unknown (except for the position of the center ofmass of the second link), design an adaptive control law that is able to obtain global asymptotictracking of a desired smooth trajectory qd(t).d. Suppose now that: i)the robot moves on a horizontal plane, ii)friction at the joints is negligible,andiii)the motor torques are bounded as |\u03c4i(t)|\u2264\u03c4max,i ,i= 1,2. Consider the rest-to-resttask of moving in minimum time the \ufb01rst joint by \u2206 >0, while keeping the second jointconstantly at its initial value q2(0). Determine the optimal solution and the minimum time Tin analytic form. Sketch the time-optimal pro\ufb01les of \u02d9 q1(t), \u00a8q1(t),\u03c41(t) and\u03c42(t), fort\u2208[0,T].", "solution": "a. Dynamic modelKinetic energyT=T1+T2=12(I1+m1d2c1)\u02d9q21+12m2\u2225vc2\u22252+12I2( \u02d9q1+ \u02d9q2)2wherevc2=\u02d9pc2=ddt(l1c1l1s1)=(\u2212l1s1\u02d9q1l1c1\u02d9q1)\u21d2 \u2225vc2\u22252=l21\u02d9q21.Inertia matrixT=12\u02d9qTM\u02d9q\u21d2M=(ItotI2I2I2)>0 (constant),withItot=I1+m1d2c1+m2l21+I2=I0+I2>I 2. Coriolis and centrifugal terms are zero.Potential energy and gravity termsU=U1+U2=\u2212m1g0dc1c1\u2212m2g0l1c1,and sog(q) =(\u2202U\u2202q)T=((m1dc1+m2l1)g0s10).Robot equationsM\u00a8q+g(q) +Fv\u02d9q=\u03c4\u21d3Itot\u00a8q1+I2\u00a8q2+ (m1dc1+m2l1)g0s1+Fv1\u02d9q1=\u03c41I2\u00a8q1+I2\u00a8q2+Fv2\u02d9q2=\u03c42.(1)Linear parametrizationY(q,\u02d9q,\u00a8q)a=(\u00a8q1 \u00a8q2g0s1\u02d9q100 \u00a8q1+ \u00a8q2 0 0 \u02d9q2)\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8edItotI2m1dc1+m2l1Fv1Fv2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,withp= 5 dynamic coefficients ai,i= 1,..., 5. This is obviously a factorization with the leastpossible number of dynamic coefficients, although not the only one with 5 coefficients; we may,e.g., replace ItotbyI0ina, obtaining a new regressor matrix YhavingY12= \u00a8q1+ \u00a8q2as the onlychanged element.2b. Regulation control lawUnder the given assumptions, for the PD plus constant gravity compensation law\u03c4=KP(qd\u2212q)\u2212KD\u02d9q+g(qd) (2)the following minimal values for the four control gains are sufficient for the global asymptoticstability of the closed-loop system:KP1>\u03b1=a3g0= (m1dc1+m2l1)g0>0, KP2>0, KD1=KD2= 0, (3)where\u03b1\u2265\u2225\u2202g/\u2202q\u2225, for allq. In fact, the closed-loop system (1),(2) can be rewritten asM\u00a8q+ (Fv+KD)\u02d9q+ (g(q)\u2212g(qd)) =KP(qd\u2212q).Thus, beingFv>0, the presence of viscous friction allows to set to zero the derivative gains KDin the control law, without prejudice for the asymptotic stability. Moreover, at any equilibrium(\u02d9q=\u00a8q=0), we have(g(q)\u2212g(qd)) =KP(qd\u2212q)\u21d4a3g0(sinq1\u2212sinqd1) =KP1(qd1\u2212q1)0 =KP2(qd2\u2212q2).It is clear that these two equilibrium conditions are decoupled each to other. In the \ufb01rst equation,it is sufficient to have KP1> a 3in order to have a unique equilibrium solution at q1=qd1.Instead, in the second equation KP2>0 is already sufficient to guarantee that q2=qd2is theunique equilibrium.It is easy to see that the original Lyapunov proof showing global asymptotic stability of thedesired state ( qd,0) with the PD+ control (2) works as well in the present case under the gainassumptions (3). As a result, the standard sufficient conditionKPm= min{KP1,KP2}\u2265\u03b1\u21d2KP1\u2265\u03b1, KP2\u2265\u03b1>0is relaxed: it is sufficient to have just a positive proportional gain KP2>0 at joint 2, without anystrictly positive lower bound. Moreover, the conditions (3) on the positional gains become alsonecessary for global asymptotic stabilization if we consider that the same control law (2) shouldwork for anychosenqd. In particular, the necessity of KP1> \u03b1 =a3g0follows from the localanalysis of the behavior of the closed-loop system linearized around qd1=\u03c0.c. Adaptive control law for trajectory trackingBased on the previous results, an adaptive control law for tracking a desired smooth trajectoryqd(t), with global asympotic stability of the tracking error e=qd\u2212q, takes the following expression:\u03c4=\u02c6M\u00a8qr+\u02c6g(q) +\u02c6Fv\u02d9qr+KPe+KD\u02d9e\u02d9\u02c6a=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u02d9\u02c6Itot\u02d9\u02c6I2\u02d9\u02c6m1dc1+m2l1\u02d9\u02c6Fv1\u02d9\u02c6Fv2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\u0393YT(q,\u02d9qr,\u00a8qr)s=\u0393\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u00a8qr1 0\u00a8qr2\u00a8qr1+ \u00a8qr2g0s1 0\u02d9qr1 00 \u02d9qr2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8(\u02d9qr\u2212\u02d9q),with (diagonal) KP>0,KD>0 and \u0393>0, a modi\ufb01ed reference velocity \u02d9qr=\u02d9qd+\u039be, and thechoice \u039b=K\u22121DKP.3d. Rest-to-rest motion in minimum timeOn the horizontal plane and without dissipative terms, the dynamic model (1) reduces toM\u00a8q=\u03c4\u21d2Itot\u00a8q1+I2\u00a8q2=\u03c41I2\u00a8q1+I2\u00a8q2=\u03c42.(4)The speci\ufb01ed motion task requires the second joint to remain at rest in the same initial con\ufb01gu-ration1, thus imposing \u02d9 q2= \u00a8q2= 0. The two equations (4) are then rewritten in a direct/inversedynamic form as\u00a8q1=1Itot\u03c41, \u03c4 2=I2\u00a8q1=I2Itot\u03c41=I2I2+I0\u03c41<\u03c41. (5)The rest-to-rest motion in minimum time for the \ufb01rst joint will be a bang-bang pro\ufb01le in acceler-ation (and torque). Similarly, because of the coupling between the two commands in (5), also thesecond torque that keeps joint 2 at rest will have a bang-bang pro\ufb01le. However, only one betweenthe two commanded torques is allowed to reach its bound, depending on the relative values of\u03c4max, 1and\u03c4max, 2and on the robot inertias. In fact, introducing a scalar parameter \u03b1to possiblyscale the maximum torque at joint 1, we have\u03c41=\u03b1\u03c4max, 1, \u03b1\u2208(0,1]\u21d2\u03c42=I2I2+I0\u03b1\u03c4max, 1\u2264\u03c4max, 2\u21d2\u03b1\u2264I2+I0I2\u03c4max, 2\u03c4max, 1.(6)Therefore, the maximum torque that can be applied at joint 1 (complying with both bounds) is\u00af\u03c41= min{1,I2+I0I2\u03c4max, 2\u03c4max, 1}\u03c4max, 1= min{\u03c4max, 1,I2+I0I2\u03c4max, 2}. (7)Accordingly, the torque needed at joint 2 to keep it at rest will be\u00af\u03c42=I2I2+I0\u00af\u03c41= min{I2I2+I0\u03c4max, 1,\u03c4max, 2}. (8)In order to perform in minimum time the desired rest-to-rest displacement \u2206 >0 of the \ufb01rst jointwithout moving the second, we apply the torques (symmetric in time, so Ts=T/2)\u03c41(t) ={\u00af\u03c41, t\u2208[0,T/2]\u2212\u00af\u03c41, t\u2208[T/2,T],\u03c42(t) ={\u00af\u03c42, t\u2208[0,T/2]\u2212\u00af\u03c42, t\u2208[T/2,T],whereTis the minimum motion time, yet to be determined. The acceleration and the velocity ofjoint 1 will have, respectively, a bang-bang and a triangular time pro\ufb01le:\u00a8q1(t) =\uf8f1\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f3\u00af\u03c41Itot, t\u2208[0,T/2]\u2212\u00af\u03c41Itot, t\u2208[T/2,T],\u02d9q1(t) =\uf8f1\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f3\u00af\u03c41Itott, t\u2208[0,T/2]\u00af\u03c41ItotT\u2212\u00af\u03c41Itott, t\u2208[T/2,T].Finally, the minimum time Tis obtained by equating the area below the (positive) velocity pro\ufb01leto the displacement \u2206 >0. We obtain\u00af\u03c41ItotT2\u00b7T2= \u2206\u21d2T=\u221a4\u2206Itot\u00af\u03c41.1The actual value of q2(0) is irrelevant for what follows.4\ud835\udc5e\u0308#\ud835\udc61\ud835\udc47\ud835\udc47/2\ud835\udf0f\u0305#\ud835\udc3c+,+\u2044\u2212\ud835\udf0f\u0305#\ud835\udc3c+,+\u2044\ud835\udc5e\u0307#\ud835\udc61\ud835\udc47\ud835\udf0f\u0305#\ud835\udc472\ud835\udc3c+,+\u2044\ud835\udc47/2\ud835\udf0f#\ud835\udc61\ud835\udc47\ud835\udc47/2\ud835\udf0f\u0305#\u2212\ud835\udf0f\u0305#\ud835\udf0f0\ud835\udc61\ud835\udc47\ud835\udc47/2\ud835\udf0f123,0\u2212\ud835\udf0f123,0Figure 3: Minimum-time pro\ufb01les for a displacement \u2206 >0 ofq1, when\u03c42(t) =\u00b1\u03c4max, 2: \u00a8q1(t) and \u02d9q1(t)[top];\u03c41(t) and\u03c42(t) [bottom].Figure 3 shows the minimum-time pro\ufb01les of \u00a8 q1(t) and \u02d9q1(t), and of the torques \u03c41(t) and\u03c42(t),assuming that the torque at joint 2 is the one that saturates its bound in (7) and (8), i.e., \u03b1<1in (6). Thus, \u00af \u03c41= (I2+I0)\u03c4max, 2/I2<\u03c4max, 1.", "robot": "2R", "tags": ["planar", "horizontal", "vertical"]},
 "56": {"file": "Robotics2_23.01.25.pdf", "date": "23-01-25", "num_ex": 1, "exam": "robo2", "question": "A 2P Cartesian robot on a horizontal plane is equipped with a F/T sensor at the end-effector.The robot should keep contact with a linear surface, which makes an angle \u03b1\u2208(0,\u03c0) with thex-axis, while moving at a constant tangential speed vd>0 and applying a constant normal forcefd>0 (see Fig. 2). The environment is compliant with stiffness Knand frictionless, so that itcan provide only normal reaction forces. Design an hybrid force-velocity control law that realizesexponential stabilization of the velocity and force errors in a decoupled way along the two taskdirections. Hint: Because of the surface compliance, one can consider in the analysis also a smalldeformation \u03b4n(t)at the contact in the normal task direction, and relate fn(t)andvn(t)to it.\u2295\u2295xyq2q1g0\ud835\udf0f2\ud835\udf0f1m1,I1m2,I2Figure 1: A 2R planar robot with a balancedsecond link.\u2295xyq2q1m1m2\u2295compliant environmentwith stiffness Kn>  0\ud835\udefcnt\ud835\udf0f2\ud835\udf0f1F/T sensorFigure 2: A hybrid force-velocity task to be ex-ecuted by a 2P Cartesian robot.[180 minutes; open books]1", "solution": "The dynamic model of the Cartesian robot in contact with the environment isM\u00a8q=\u03c4+\u03c4f\u21d2(m1+m200m2)(\u00a8q1\u00a8q2)=(\u03c41+\u03c4f1\u03c42+\u03c4f2), (9)where\u03c4fare the joint torques resulting from the forces exerted by the environment on the robot(and performing work on q).The orientation of the task frame shown in Fig. 2 is given by a 2 \u00d72 constant rotation matrix Rin the plane. Accordingly, the following relationships between task velocities vand forcesfandjoint velocities \u02d9qand torques\u03c4fhold, all vectors being in R2:R=(c\u03b1\u2212s\u03b1s\u03b1c\u03b1),v=R\u02d9q,v=(vtvn),\u03c4f=RTf,f=(0fn).Since the environment is frictionless, we have set ft= 0: applied contact forces can be balancedby reaction forces fnonly along the normal to the environment. On the other hand, being theenvironment compliant, a non-zero (though small) normal velocity vnmay also be present at thecontact. Let \u03b4nbe the deformation at the contact point along the environment normal. Thenvn=\u02d9\u03b4n, fn=Kn\u03b4n. (10)With the above notations, we rewrite the dynamic model (9) in the task space asRMRT\u02d9v=R\u03c4+R\u03c4f\u21d2 \u00afM\u02d9v=\u00af\u03c4+f, (11)5with\u00afM=(m1c2\u03b1+m2m1c\u03b1s\u03b1m1c\u03b1s\u03b1m1s2\u03b1+m2), \u00af\u03c4=(c\u03b1\u03c41\u2212s\u03b1\u03c42s\u03b1\u03c41+x\u03b1\u03c42),f=(0fn).The dynamics (11) in the task space is still linear but coupled between the tandnaxes. Weproceed then with the following decoupling control law:\u00af\u03c4=\u00afM(Kv(vd\u2212vt)Kf((fd\u2212fn)\u2212Kdvn))\u2212(0fn), Kv>0, Kf>0, Kd>0. (12)The closed-loop system (11),(12) becomes\u02d9vt=Kv(vd\u2212vt)\u02d9vn=Kf((fd\u2212fn)\u2212Kdvn).(13)Along the tangential direction of the task space, the control action is proportional to the velocityerrorev=vd\u2212vt. Sincevdis constant, \u02d9 ev=\u2212\u02d9vtand the \ufb01rst equation in (13) is rewritten as\u02d9ev=\u2212Kvev\u21d2ev(t) =ev(0) exp (\u2212Kvt),which shows exponential stabilization to zero of the tangential velocity error.Along the normal direction of the task space, the control law cancels any (measured) contactforcefn, adds a proportional action on the force error ef=fd\u2212fn, and includes a velocitydamping\u2212Kdvn. For analysis, using the relationships (10) of the compliant environment, thesecond equation in (13) can be expressed in terms of the deformation \u03b4nasMf\u00a8\u03b4n+Kd\u02d9\u03b4n+Kn\u03b4n=fd, withMf=1Kf>0. (14)Thus, an impedance-like behavior has been obtained, where the apparent mass Mfand dampingKdcan be chosen freely, while the stiffness Knis the one of the environment. Moreover, theforcing term on the right-hand side is the desired contact force fd, rather than the actual onefnas in a standard impedance design. This setting is indeed appropriate. In fact, the second-order dynamics (14) is stable and converges exponentially2, ast\u2192\u221e , to the constant equilibriumdeformation \u00af\u03b4n=fd/Kn. In turn, this implies that the normal force at steady state is the desiredone:limt\u2192\u221efn(t) =Kn\u00af\u03b4n=fd.Finally, the control torque in the joint space is obtained from (12) as\u03c4=RT\u00af\u03c4=MRT(Kv(vd\u2212vt)Kf((fd\u2212fn)\u2212Kdvn))\u2212\u03c4f(being\u03c4f=(s\u03b1c\u03b1)fn).in the Laplace domain the system response to a step input fd. It isW(s) =\u03b4n(s)fd(s)=1Mfs2+Fds+Kn\u21d2 \u00af\u03b4n= limt\u2192\u221e\u03b4n(t) = lims\u21920s\u03b4n(s) = lims\u21920sW(s)\u00b7fds=W(0)fd=fdKn.6", "robot": "2P", "tags": ["planar", "horizontal"]},
 "57": {"file": "Robotics2_21.07.12.pdf", "date": "21-07-12", "num_ex": 0, "exam": "robo2", "question": "Consider the planar 3R robot in Fig. 1. The three links have all equal length L. The robotis controlled by a joint acceleration command u=\u00a8q\u2208R3. The input commands are boundedcomponentwise as |ui|\u2264Umax,i , fori= 1,2,3. Moreover, let p=f(q)\u2208R2be the end-effectorposition. At a given instant t=t0, the robot is in a generic state ( q(t0),\u02d9q(t0)) = (q0,\u02d9q0)\u2208R6.Assume in the following that it is always \u02d9q0\u0338=0. For this robot, provide (if it exists) a feasiblesolutionu0=u(t0) to each of the following problems. If there are multiple feasible solutions,provide the one having minimum norm .x0q1q2q3y0PLLLFigure 1: A planar 3R robot.a)Is it possible to de\ufb01ne u0so that the end-effector acceleration instantaneously vanishes, i.e.,\u00a8p0=\u00a8p(t0) =0? If so, under which conditions on the current robot state ( q0,\u02d9q0)? Provide aspeci\ufb01c example (or counterexample) illustrating the situation, giving the numerical values ofq0,\u02d9q0, andu0(and of the resulting \u00a8p0, if different from zero).b)Which command u0should be applied to stop as fast as possible the motion of the robot joints?Provide an example with numerical values of q0,\u02d9q0,u0, and of the obtained \u00a8p0.", "solution": "The second-order differential kinematics of a robot with njoints performing a m-dimensional task(withm\u2264n) is\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=J(q)u+h(q,\u02d9q), (3)with vectorh\u2208Rmbeing quadratic in \u02d9q. The joint acceleration \u00a8q\u2208Rnis taken here as inputcommandu. For the planar 3R robot of Fig. 1, we have n= 3,m= 2, and the terms in (3) arethe 2\u00d73 task JacobianJ(q) =\u2202f(q)\u2202q=L(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123),its time derivative\u02d9J(q) =\u2212L\u00b7(c1\u02d9q1+c12( \u02d9q1+ \u02d9q2) +c123( \u02d9q1+ \u02d9q2+ \u02d9q3)c12( \u02d9q1+ \u02d9q2) +c123( \u02d9q1+ \u02d9q2+ \u02d9q3)c123( \u02d9q1+ \u02d9q2+ \u02d9q3)s1\u02d9q1+s12( \u02d9q1+ \u02d9q2) +s123( \u02d9q1+ \u02d9q2+ \u02d9q3)s12( \u02d9q1+ \u02d9q2) +s123( \u02d9q1+ \u02d9q2+ \u02d9q3)s123( \u02d9q1+ \u02d9q2+ \u02d9q3)),and the product of matrix \u02d9Jby the joint velocity \u02d9qh(q,\u02d9q)=\u2212L((c1+c12+c123) \u02d9q21+ 2 (c12+c123) \u02d9q1\u02d9q2+ 2c123\u02d9q1\u02d9q3+ (c12+c123) \u02d9q22+ 2c123\u02d9q2\u02d9q3+c123\u02d9q23(s1+s12+s123) \u02d9q21+ 2 (s12+s123) \u02d9q1\u02d9q2+ 2s123\u02d9q1\u02d9q3+ (s12+s123) \u02d9q22+ 2s123\u02d9q2\u02d9q3+s123\u02d9q23),having used the shorthand notation for trigonometric functions (e.g., c123= cos(q1+q2+q3)).Problem #1aThe minimum norm solution of (3) for \u00a8p=0at a generic state ( q0,\u02d9q0) isu0=\u2212J#(q0)h(q0,\u02d9q0). (4)In the absence of bounds on the command u0, this acceleration would return \u00a8p0=0if and onlyifh(q0,\u02d9q0)\u2208R{J(q0)}. In particular, when rank {J(q0)}= 2 (regular case), this condition isalways satis\ufb01ed and we only need to check whether u0is feasible, i.e., if |u0,i|\u2264Umax,i , for alli= 1,2,3. If so, then we stop. The same would happen in the singular case (rank {J(q0)}<2).If instead the acceleration command (4) is unfeasible, we should attempt the use of the generalsolution to (3) for \u00a8p=0, namelyu0=\u2212J#(q0)h(q0,\u02d9q0) +(I\u2212J#(q0)J(q0))\u00a8q0, (5)with an extra joint acceleration \u00a8q0projected in the null space of J. This term may possibly help inrecovering feasibility when the preferred minimum norm solution (4) is unfeasible. The de\ufb01nitionof the actual command (5) is obtained by a simple variant of the SNS (Saturation in the NullSpace) method for redundant robots.Consider for simplicity only the regular case for the Jacobian, rank {J(q0)}= 2. Taking intoaccount that there is only n\u2212m= 1 degree of redundancy in the problem, if two (or all) of the scalarcomponents of (4) are out of bounds, then no feasible solution will exist in any case. Otherwise,Algorithm 1 (written in pseudo-code) will provide a feasible solution, if one exists. The bounds onthe commands are organized in vector form as Umax=(Umax, 1Umax, 2Umax, 3)T\u2208R3. We setalsoJ0=J(q0),\u02d9J0=\u02d9J(q0), andh0=h(q0,\u02d9q0) =\u02d9J0\u02d9q0.3Algorithm 1 SNS method for \ufb01nding a feasible solution, if it exists (case n= 3,m= 2)1:ifthe command u0in (4) satis\ufb01es|u0|\u2264Umax(componentwise) then2: STOP % the minimum norm solution (4) is feasible and returns already \u00a8p0=03:else4:j\u2217= arg max i=1,2,3\u23d0\u23d0(J#0h0)i\u23d0\u23d0%it is then|u0,j\u2217|>Umax,j\u2217; by assumption,5: %u0,j\u2217will be the only command out of bounds6: setu0,j\u2217= sign(\u2212J#0h0)j\u2217Umax,j\u2217%the overdriven command is now saturated7: de\ufb01ne the 2\u00d72 matrix \u00afJ{\u2212j\u2217}by deleting the j\u2217-th columnJj\u2217fromJ0,8:u{\u2212j\u2217}\u2208R2by deleting uj\u2217fromu, andUmax,{\u2212j\u2217}\u2208R2deletingUmax,j\u2217fromUmax9: seta=Jj\u2217u0,j\u2217+h0%. . . one needs to solve \u00afJ{\u2212j\u2217}u{\u2212j\u2217}+a=010: computeu0,{\u2212j\u2217}=\u2212\u00afJ#{\u2212j\u2217}a %. . . a unique solution if rank{\u00afJ{\u2212j\u2217}}= 2 !!11: if\u23d0\u23d0u0,{\u2212j\u2217}\u23d0\u23d0\u2264Umax,{\u2212j\u2217}(componentwise) then12: recomposeu0,SNSfromu0,j\u2217andu0,{\u2212j\u2217}13: STOP % a new feasible solution u0,SNShas been found, returning \u00a8p0=014: else15: EXIT % there is no feasible solution providing \u00a8p0=016: end if17:end ifWe provide next several numerical examples illustrating different situations1. In all cases, we havesetL= 1 [m] for the link lengths and chosenUmax=\uf8eb\uf8ec\uf8ed15\u03c010\u03c010\u03c0\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed47.123931.415931.4159\uf8f6\uf8f7\uf8f8[rad/s2]as bounds for the acceleration commands. The same data will be used also for Problem #1b ofthis Exercise. Computations are performed in MATLAB.1. Regular con\ufb01guration q0= (0,\u03c0/2,\u03c0/2) [rad], joint velocity \u02d9q0= (\u03c0,\u03c0, 0) [rad/s]We evaluate the terms in (3)J0=(\u22121\u22121 00\u22121\u22121),\u02d9J0=(\u03c0 2\u03c02\u03c0\u22122\u03c0\u22122\u03c00),h0=(3\u03c02\u22124\u03c02)=(29.6088\u221239.4784),and compute the pseudoinverse asJ#0=JT0(J0JT0)\u22121=\uf8eb\uf8ec\uf8ed\u22122/3 1/3\u22121/3\u22121/31/3\u22122/3\uf8f6\uf8f7\uf8f8.Note that the end-effector velocity \u02d9p0=J0\u02d9q0=(\u22122\u03c0\u2212\u03c0)T[m/s] is different from zero.Applying the minimum norm solution (4), we obtain the feasible commandu0=\u2212J#0h0=\uf8eb\uf8ec\uf8ed10\u03c02/3\u2212\u03c02/3\u221211\u03c02/3\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed32.8987\u22123.2899\u221236.1885\uf8f6\uf8f7\uf8f8[rad/s2],which returns \u00a8p0=0.1Indeed, only one example was requested in the text.42. Same regular con\ufb01guration q0= (0,\u03c0/2,\u03c0/2) [rad], new velocity \u02d9q0= (\u03c0,\u03c0,\u2212\u03c0/4) [rad/s]The Jacobian J0and its pseudoinverse J#0are the same as before. The different terms to becomputed are\u02d9J0=(3\u03c0/4 7\u03c0/4 7\u03c0/4\u22122\u03c0\u22122\u03c0 0)=(2.3562 5.4978 5.4978\u22126.2832\u22126.2832 0)andh0=(33\u03c02/16\u22124\u03c02)=(20.3561\u221239.4784).The end-effector velocity is \u02d9p0=(\u22122\u03c0\u22123\u03c0/4)T\u0338=0. The minimum norm solution (4) is nowu0=\u2212J#0h0=\uf8eb\uf8ec\uf8ed65\u03c02/24\u221231\u03c02/48\u2212161\u03c02/48\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed26.7302\u22126.3741\u221233.1043\uf8f6\uf8f7\uf8f8[rad/s2],which is unfeasible, being the third joint acceleration u0,3=\u221233.1043 larger (in module) thanits boundUmax, 3= 31.4159. The other two acceleration commands remain instead within theirbounds, so that we can apply Algorithm 1 to check if a feasible solution can be found by theSNS method. Being j\u2217= 3, we set u0,3=\u2212Umax, 3=\u221210\u03c0=\u221231.4159 (saturation to theclosest limit, the negative one) and compute\u00afJ{\u22123}=(\u22121\u221210\u22121),a=\u2212J3Umax, 3+h0=\u2212(0\u22121)10\u03c0+(33\u03c02/16\u22124\u03c02)=(20.3561\u22128.0625).Thusu0,{\u22123}=\u2212\u00afJ#{\u22123}a=\u2212\u00afJ\u22121{\u22123}a=(28.4186\u22128.0625)\u21d2u0,SNS=\uf8eb\uf8ec\uf8ed28.4186\u22128.0625\u221231.4159\uf8f6\uf8f7\uf8f8.The SNS result u0,SNSis now a feasible solution and returns again \u00a8p0=0.3. Singular con\ufb01guration q0= (0,0,\u03c0) [rad], joint velocity \u02d9q0= (\u03c0/2,\u2212\u03c0,\u03c0/ 2) [rad/s]The robot has the second link stretched and the third folded. This is a singular con\ufb01gurationsinceJ0=(0 0 01 0\u22121)\u21d2 rank{J0}= 1,R{J0}={(01)}.The end-effector is placed at p0=f(q0) = (1,0). Note also that the end-effector velocity isnow\u02d9p0=J0\u02d9q0=0\u21d0\u21d2 \u02d9q0=\uf8eb\uf8ec\uf8ed\u03c0/2\u2212\u03c0\u03c0/2\uf8f6\uf8f7\uf8f8\u2208N{J0}.We evaluate the other terms in (3):\u02d9J0=(0\u03c0/2 00 0 0),h0=(\u2212\u03c02/20)=(\u22124.93480)\u21d2h0\u0338\u2208R{J0}.5Computing the pseudoinverse of the singular task Jacobian,J#0=\uf8eb\uf8ec\uf8ed0 0.50 00\u22120.5\uf8f6\uf8f7\uf8f8,we obtain that the minimum norm solution (4) is simply u0=\u2212J#0h0=0. Therefore, theend-effector acceleration cannot be modi\ufb01ed in any case, remaining equal to\u00a8p0=h0=(\u22124.93480)\u0338=0.4. Another singular case q0= (0,\u03c0,\u2212\u03c0) [rad], same joint velocity \u02d9q0= (\u03c0/2,\u2212\u03c0,\u03c0/ 2) [rad/s]In this last example, the robot has the second and third links both folded. We are again in asingularity, beingJ0=(0 0 01 0 1)\u21d2 rank{J0}= 1,R{J0}={(01)}.The end-effector position p0is the same as in the previous example. On the other hand, theend-effector velocity is now\u02d9p0=J0\u02d9q0=(0\u03c0)\u0338=0\u21d0\u21d2 \u02d9p0\u2208R{J0}.Moreover, being\u02d9J0=(\u2212\u03c0\u2212\u03c0/2 00 0 0),h0=\u02d9J0\u02d9q0=0(!!),the minimum norm solution (4) will be u0=\u2212J#0h0=0as in the previous example. However,the (feasible) solution u0will produce now \u00a8p0=h0=0, keeping thus the end-effector at thesame instantaneous velocity \u02d9p0.Problem #1bThere is a unique command u0that should be applied to stop as fast as possible the motion of therobot joints. This is given componentwise byu0,i=\u2212Umax,i sign ( \u02d9q0,i), i = 1,2,3, (6)where the sign function takes the value 0 when its argument is 0. The logic is that each positive(negative) component of the initial velocity \u02d9q0is counterbalanced by the maximum negative (pos-itive) value of its associated acceleration. Keeping the same strategy (6) also after t=t0will letthe robot eventually stop in the minimum (and \ufb01nite!) possible time.Taking as example the same initial state as in case 3 of Problem #1a, with \u02d9q0= (\u03c0/2,\u2212\u03c0,\u03c0/ 2) [rad/s],we haveu0=\uf8eb\uf8ec\uf8ed\u2212Umax, 1Umax, 2\u2212Umax, 3\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed\u221215\u03c010\u03c0\u221210\u03c0\uf8f6\uf8f7\uf8f8\u21d2\u00a8p0=J0u0+h0=(0 0 01 0\u22121)u0+(\u2212\u03c02/20)=(\u2212\u03c02/2\u22125\u03c0).Note that it is \u02d9p0=0in this case. Thus, in order to stop the overall joint motion of the robot asfast as possible, the end-effector should be brought in motion at time t=t0by such \u00a8p0\u0338=0.6", "robot": "3R", "tags": ["planar"]},
 "58": {"file": "Robotics2_21.07.12.pdf", "date": "21-07-12", "num_ex": 1, "exam": "robo2", "question": "The dynamics of a robot arm with njoints that may be subject to actuator faults can be writtenin a standard form asM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4\u2212\u03c4f, (1)where\u03c4f\u2208Rnis an additional torque that models a generic actuator fault when present. Con-sider now as fault an incipient block of the joint/motor i, withi\u2208{1,...,n}. This situationis represented by an acceleration of the faulted joint that behaves as \u00a8 qi=\u2212\u03bbi\u02d9qi, with\u03bbi\u226b1,until the joint eventually stops. Show that this fault can be described as in (1), by providing themodel-based expression of the fault \u03c4f,i(with\u03c4f,j\u22610, forj\u0338=i). Find also the expression of theaccelerations of the other joints, j\u0338=i, at the instant when this type of fault occurs.1", "solution": "Denote the inverse of the (symmetric) robot inertia matrix asH(q) =M\u22121(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8edhT1(q)hT2(q)...hTn(q)\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,withhi(q) being the i-th column of H(q), fori= 1,2,...,n . Also, denote by hii(q) thei-thelement on the diagonal of H(q), fori= 1,2,...,n .With reference to the dynamic model (1), the incipient blocking fault of the motor at the joint iis modeled by a vector \u03c4f\u2208Rnwith the single nonzero i-th component having the expression\u03c4f,i=1hii(q)(hTi(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q)) +\u03bbi\u02d9qi), \u03bb i\u226b1, (7)whereas\u03c4f,j= 0, for all j\u0338=i.In fact, since the acceleration vector \u00a8q\u2208Rnis given by\u00a8q=H(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q)\u2212\u03c4f),using (7), the scalar component of the acceleration at joint iwill be\u00a8qi=hTi(q)\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u03c4\u2212c(q,\u02d9q)\u2212g(q)\u2212\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed0...1...0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\u03c4f,i\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=hTi(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q))\u2212hii(q)\u00b71hii(q)(hTi(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q)) +\u03bbi\u02d9qi)=\u2212\u03bbi\u02d9qi,as requested. Moreover, the acceleration at any other joint j\u0338=iis\u00a8qj=hTj(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q))\u2212hji(q)\u03c4f,i,showing that the fault of motor iwill affect also the acceleration of the other joints, because of theinertial couplings of the inverse of the robot inertia matrix (the off-diagonal terms hji(q),j\u0338=i).", "robot": "unknown", "tags": []},
 "59": {"file": "Robotics2_21.07.12.pdf", "date": "21-07-12", "num_ex": 2, "exam": "robo2", "question": "The 3-dof RPR robot in Fig. 2 moves on a horizontal plane. The robot should asymptoticallytrack a smooth joint trajectory qd(t) in the presence of a partly unknown dynamic model. In fact,only the dynamic parameters m3,dc3, andI3are assumed to be known. Derive \ufb01rst the dynamicmodel of this robot, neglecting any dissipative frictional effect.q3dc3dc2dc1q2q1xwywm1,I1m2,I2m3,I3\u2295\u2295\u2295Figure 2: A planar RPR robot with its generalized coordinates and dynamic parameters.Consider next the following adaptive trajectory tracking control law that takes advantage of thepartly known dynamics\u03c4=YU(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6aU+YK(q,\u02d9q,\u02d9qr,\u00a8qr)aK+KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q)\u02d9\u02c6aU=\u0393YTU(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q),(2)where \u02d9qr=\u02d9qd+\u039b(qd\u2212q) =\u02d9qd+K\u22121DKP(qd\u2212q),KP>0,KD>0, and \u0393>0 are diagonalgain matrices, aU\u2208RpuandaK\u2208Rpkare vectors containing, respectively, the unknown and theknown dynamic coefficients of the robot model. The 3 \u00d7pumatrixYUand 3\u00d7pkmatrixYKarethe associated regressors in the linear parametrization of the dynamic model. Provide the explicitexpressions of all terms in the adaptive control law (2). If time remains, sketch a proof of theasymptotic stability of the trajectory tracking error with this modi\ufb01ed adaptive law.[180 minutes (3 hours); open books]2", "solution": "The robot in Fig. 2 has n= 3 joints and moves on the horizontal plane. Neglecting friction effects,its dynamic model isM(q)\u00a8q+c(q,\u02d9q) =\u03c4.In computing the kinetic energy Tof the robot, we take into account that the motion is planar;thus, linear velocities will be 2D vectors in the plane ( xw,yw), while angular velocities will be justscalars (in the zw-direction). For the \ufb01rst link, it isT1=12(I1+m1d2c1)\u02d9q21.7For the second link, sincepc2= (q2\u2212dc2)(cosq1sinq1)\u21d2vc2=\u02d9pc2= \u02d9q2(cosq1sinq1)+ (q2\u2212dc2) \u02d9q1(\u2212sinq1cosq1)=(cosq1\u2212sinq1sinq1cosq1)(\u02d9q2(q2\u2212dc2) \u02d9q1)=R(q1)(\u2212sinq1cosq1),it followsT2=12I2\u03c922+12m2vTc2vc2=12(I2\u02d9q21+m2((q2\u2212dc2)2\u02d9q21+ \u02d9q22)).For the third link, frompc3=(q2cosq1+dc3cos(q1+q3)q2sinq1+dc3sin(q1+q3))\u21d2vc3=(cosq1\u02d9q2\u2212q2sinq1\u02d9q1\u2212dc3sin(q1+q3)( \u02d9q1+ \u02d9q3)sinq1\u02d9q2+q2cosq1\u02d9q1+dc3cos(q1+q3)( \u02d9q1+ \u02d9q3)),we obtainT3=12I3\u03c923+12m3vTc3vc3=12I3( \u02d9q1+ \u02d9q3)2+12m3(q22\u02d9q21+ \u02d9q22+d2c3( \u02d9q1+ \u02d9q3)2+ 2dc3(q2cosq3\u02d9q1\u2212sinq3\u02d9q2) ( \u02d9q1+ \u02d9q3)).Thus, beingT=3\u2211i=1Ti=12\u02d9qTM(q)\u02d9q, withM(q) =\uf8eb\uf8ec\uf8edm11m12m13m12m22m23m13m23m33\uf8f6\uf8f7\uf8f8,we can write the single elements of the symmetric inertia matrix M(q) as follows:m11=I1+m1d2c1+I2+m2d2c2+I3+m3d2c3\u22122m2dc2q2+ (m2+m3)q22+ 2m3dc3q2cosq3m12=\u2212m3dc3sinq3m13=I3+m3d2c3+m3dc3q2cosq3m22=m2+m3m23=\u2212m3dc3sinq3m33=I3+m3d2c3.(8)The inertial term in the dynamic model can be rewritten in terms of p= 5 coefficients that collectthe dynamic parameters of the robot,M(q)\u00a8q=\uf8eb\uf8ec\uf8eda1+ 2a2q2+a3q22+ 2a4q2cosq3\u2212a4sinq3a5+a4q2cosq3\u2212a4sinq3 a3\u2212a4sinq3a5+a4q2cosq3\u2212a4sinq3a5\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed\u00a8q1\u00a8q2\u00a8q3\uf8f6\uf8f7\uf8f8=YM(q,\u00a8q)a,8with the vector of dynamic coefficients a\u2208R5de\ufb01ned bya1=I1+m1d2c1+I2+m2d2c2+I3+m3d2c3a2=\u2212m2dc2a3=m2+m3a4=m3dc3a5=I3+m3d2c3.(9)Similarly, the entire dynamic model (because of the absence of gravity) is linearly parametrizedin terms of the same dynamic coefficients a, with a suitable n\u00d7p= 3\u00d75 regressor matrixY(q,\u02d9q,\u00a8q). However, the parametrization (9) does not separate the unknown from the knowndynamic coefficients in the inertia matrix (and thus in the dynamic model). On the other hand,the proposed adaptive law (2) does not need updating coefficients that involve only known dynamicparameters, i.e., m3,dc3, andI3.Therefore, looking at the expressions of the elements mijin (8) and at the de\ufb01nitions of thecoefficients aiin (9), we can organize and separate terms in the inertia matrix asm11=(I1+m1d2c1+I2+m2d2c2)+I3+m3d2c3\u22122m2dc2q2+ (m2+m3)q22+ 2m3dc3q2cosq3=aU1+aK1+ 2aU2q2+ (aU3+aK2)q22+ 2aK3q2cosq3m12=\u2212m3dc3sinq3=\u2212aK3sinq3m13=I3+m3d2c3+m3dc3q2cosq3=aK1+aK3q2cosq3m22=m2+m3=aU3+aK2m23=\u2212m3dc3sinq3=\u2212aK3sinq3m33=I3+m3d2c3=aK1,withpu= 3unknown dynamic coefficientsaU1=I1+m1d2c1+I2+m2d2c2aU2=\u2212m2dc2aU3=m2,(10)organized as components of a vector aU\u2208R3, and, respectively, pk= 3known dynamic coefficientsaK1=I3+m3d2c3aK2=m3aK3=m3dc3,(11)organized as components of a vector aK\u2208R3. Despite the total number of dynamic coefficients isnow higher than before ( pu+pk= 6>5 =p), the number of those to be updated in the adaptivelaw is actually lower ( pu= 3).To complete the dynamic modeling, we have to derive also the Coriolis and centrifugal terms. Thiswill be done by referring directly to the double parametrization by aUandaK, in view of their9\ufb01nal use in the adaptive control law (2). Rewrite the robot inertia matrix asM(q) =(m1(q)m2(q)m3(q))=\uf8eb\uf8ec\uf8edaU1+aK1+ 2aU2q2+ (aU3+aK2)q22+ 2aK3q2cosq3\u2212aK3sinq3aK1+aK3q2cosq3\u2212aK3sinq3 aU3+aK2\u2212aK3sinq3aK1+aK3q2cosq3 \u2212aK3sinq3aK1\uf8f6\uf8f7\uf8f8.(12)Using the Christoffel\u2019s symbols for computing the components ci(q,\u02d9q) of the Coriolis and centrifu-gal vectorc(q,\u02d9q),Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), c i(q,\u02d9q) =\u02d9qTCi(q)\u02d9q, i = 1,2,3,we obtainC1(q) =12\uf8eb\uf8ec\uf8ed\uf8eb\uf8ec\uf8ed0 2aU2+ 2 (aU3+aK2)q2+ 2aK3cosq3\u22122aK3q2sinq30 0 \u2212aK3cosq30 aK3cosq3 \u2212aK3q2sinq3\uf8f6\uf8f7\uf8f8+(. . .)T\u2212O\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ed0 aU2+ (aU3+aK2)q2+aK3cosq3\u2212aK3q2sinq3aU2+ (aU3+aK2)q2+aK3cosq3 0 0\u2212aK3q2sinq3 0 \u2212aK3q2sinq3\uf8f6\uf8f8\u21d2c1(q,\u02d9q) = 2 (aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q1\u02d9q2\u2212aK3q2sinq3(2 \u02d9q1+ \u02d9q3) \u02d9q3,C2(q) =12\uf8eb\uf8ed\uf8eb\uf8ed0 0 \u2212aK3cosq30 0 00 0 \u2212aK3cosq3\uf8f6\uf8f8+(...)T\u2212\uf8eb\uf8ed2aU2+ 2 (aU3+aK2)q2+ 2aK3cosq30aK3cosq30 0 0aK3cosq3 0 0\uf8f6\uf8f8\uf8f6\uf8f8=\uf8eb\uf8ed\u2212(aU2+ (aU3+aK2)q2+aK3cosq3) 0 \u2212aK3cosq30 0 0\u2212aK3cosq3 0\u2212aK3cosq3\uf8f6\uf8f8\u21d2c2(q,\u02d9q) =\u2212(aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q21\u2212aK3cosq3(2 \u02d9q1+ \u02d9q3) \u02d9q3,C3(q) =12\uf8eb\uf8ed\uf8eb\uf8ed0aK3cosq3\u2212aK3q2sinq30 0 \u2212aK3cosq30 0 0\uf8f6\uf8f8+(...)T\u2212\uf8eb\uf8ed\u22122aK3q2sinq3\u2212aK3cosq3\u2212aK3q2sinq3\u2212aK3cosq3 0 \u2212aK3cosq3\u2212aK3q2sinq3\u2212aK3cosq3 0\uf8f6\uf8f8\uf8f6\uf8f8=\uf8eb\uf8edaK3q2sinq3aK3cosq30aK3cosq3 0 00 0 0\uf8f6\uf8f8\u21d2c3(q,\u02d9q) =aK3q2sinq3\u02d9q21+ 2aK3cosq3\u02d9q1\u02d9q2,10yieldingc(q,\u02d9q) =\uf8eb\uf8ec\uf8ec\uf8ed2 (aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q1\u02d9q2\u2212aK3q2sinq3(2 \u02d9q1+ \u02d9q3) \u02d9q3\u2212(aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q21\u2212aK3cosq3(2 \u02d9q1+ \u02d9q3) \u02d9q3aK3q2sinq3\u02d9q21+ 2aK3cosq3\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f7\uf8f8=S(q,\u02d9q)\u02d9q,with the factorizing matrixS(q,\u02d9q) = col{\u02d9qTCi(q,\u02d9q)}= (13)\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed(aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q2\u2212aK3q2sinq3\u02d9q3(aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q1\u2212aK3q2sinq3( \u02d9q1+ \u02d9q3)\u2212(aU2+ (aU3+aK2)q2+aK3cosq3) \u02d9q1\u2212aK3cosq3\u02d9q30 \u2212aK3cosq3( \u02d9q1+ \u02d9q3)aK3q2sinq3\u02d9q1+aK3cosq3\u02d9q2 aK3cosq3\u02d9q1 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8being such that \u02d9M\u22122Sis skew-symmetric (check this!).As a result, the complete dynamic model can be linearly parametrized asM(q)\u00a8q+S(q,\u02d9q)\u02d9q=YU(q,\u02d9q,\u00a8q)aU+YK(q,\u02d9q,\u00a8q)aK (14)with then\u00d7pu= 3\u00d73 regressor matrix YUfor the unknown coefficients (conveniently separatingthe contributions by the inertial and by the velocity terms)YU(q,\u02d9q,\u00a8q) =YU,M(q,\u00a8q) +YU,c(q,\u02d9q)=\uf8eb\uf8ec\uf8ed\u00a8q12q2\u00a8q1q22\u00a8q10 0 \u00a8 q20 0 0\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed0 2 \u02d9q1\u02d9q2q2\u02d9q1\u02d9q20\u2212\u02d9q21\u2212q2\u02d9q210 0 0\uf8f6\uf8f7\uf8f8(15)and, similarly, with the n\u00d7pk= 3\u00d73 regressor matrix YKfor the known coefficientsYK(q,\u02d9q,\u00a8q) =YK,M(q,\u00a8q) +YK,c(q,\u02d9q)=\uf8eb\uf8ec\uf8ed\u00a8q1+ \u00a8q3q22\u00a8q1q2cosq3(2 \u00a8q1+ \u00a8q3)\u2212sinq3\u00a8q20 \u00a8q2\u2212sinq3(\u00a8q1+ \u00a8q3)\u00a8q1+ \u00a8q3 0q2cosq3\u00a8q1\u2212sinq3\u00a8q2\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed0 2q2\u02d9q1\u02d9q22 cosq3\u02d9q1\u02d9q2\u2212q2sinq3(2 \u02d9q1+ \u02d9q3) \u02d9q30\u2212q2\u02d9q21\u2212cosq3( \u02d9q1+ \u02d9q3)20 0 q2sinq3\u02d9q21+ 2 cosq3\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f8.(16)To complete the design of the (partly) adaptive control law (2), we need to evaluate the two aboveregressors using suitable arguments. In particular, for the regressor YUwe haveYU(q,\u02d9q,\u02d9qr,\u00a8qr) =YU,M(q,\u00a8qr) +YU,c(q,\u02d9q,\u02d9qr). (17)Inside the second (velocity-dependent) addend, we have to split the quadratic velocity terms byexploiting the factorization given by matrix Sin (13). For this, letM(q) =MU(q) +MK(q)11be a decomposition of the inertia matrix in elements that depends (linearly) only on aUand,respectively, only on aK. Accordingly, one can decompose alsoS(q,\u02d9q) =SU(q,\u02d9q) +SK(q,\u02d9q).It can be easily shown that the three matrices\u02d9M\u22122S, \u02d9MU\u22122SU, \u02d9MK\u22122SK,satisfy all the skew-symmetry property (as requested by the adaptive control law \u2014see below). Inparticular, for this robot we haveMU(q) =\uf8eb\uf8ec\uf8edaU1+ 2aU2q2+aU3q220 00 aU300 0 0\uf8f6\uf8f7\uf8f8andSU(q,\u02d9q) =\uf8eb\uf8ec\uf8ed(aU2+aU3q2) \u02d9q2(aU2+aU3q2) \u02d9q10\u2212(aU2+aU3q2) \u02d9q1 0 00 0 0\uf8f6\uf8f7\uf8f8.It is easy to verify the skew-symmetry of \u02d9MU\u22122SU. As a result, the second term YU,cin (17) isobtained by using the identitySU(q,\u02d9q)\u02d9qr=YU,c(q,\u02d9q,\u02d9qr)aU=\uf8eb\uf8ec\uf8ed0 \u02d9q1\u02d9q2r+ \u02d9q2\u02d9q1rq2( \u02d9q1\u02d9q2r+ \u02d9q2\u02d9q1r)0\u2212\u02d9q1\u02d9q1r\u2212q2\u02d9q1\u02d9q1r0 0 0\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8edaU1aU2aU3\uf8f6\uf8f7\uf8f8.(18)Summarizing, the regressor matrix YUneeded in control (2), together with its transpose for theadaptation law, is computed by (17) using YU,M(q,\u00a8qr) from (15) and YU,c(q,\u02d9q,\u02d9qr) from (18):YU(q,\u02d9q,\u02d9qr,\u00a8qr) =\uf8eb\uf8ec\uf8ed\u00a8q1r2q2\u00a8q1r+ \u02d9q1\u02d9q2r+ \u02d9q2\u02d9q1rq22\u00a8q2r+q2( \u02d9q1\u02d9q2r+ \u02d9q2\u02d9q1r)0\u2212\u02d9q1\u02d9q1r \u00a8q2r\u2212q2\u02d9q1\u02d9q1r0 0 0\uf8f6\uf8f7\uf8f8.The same considerations can be repeated for MK,SK, andYK,c, leading toYK(q,\u02d9q,\u02d9qr,\u00a8qr)(these computations are left to the reader).The modi\ufb01ed adaptive control law (2) provides (global) asymptotic stability of the trajectorytracking error. The proof follows the same argument as in the complete adaptive case (simpler inthe absence of friction terms), once the above partitioned notation for unknown and known termshas been introduced. Consider in fact the same positive de\ufb01nite Lyapunov candidateV=12sTM(q)s+eTKPe+12\u02dcaTU\u0393\u22121\u02dcaU\u22650, (19)wheree=qd\u2212q,s=\u02d9qr\u2212\u02d9q=\u02d9e+\u039be,\u039b=K\u22121DKP>0,\u02dcaU=aU\u2212\u02c6aU, and the gain matricesKP>0,KD>0 and \u0393>0 have been chosen as diagonal. Note that only the unknown dynamiccoefficients, those that need to be updated online, and their estimates appear in the Lyapunovcandidate. The time derivative of (19) is\u02d9V=12sT\u02d9M(q)s+sTM(q)\u02d9s+ 2eTKP\u02d9e\u2212\u02dcaTU\u0393\u22121\u02d9\u02c6aU (20)12The closed-loop dynamics, i.e., eq. (14) with the control (2), isM(q)\u00a8q+S(q,\u02d9q)\u02d9q=YU(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6aU+YK(q,\u02d9q,\u02d9qr,\u00a8qr)aK+KPe+KD\u02d9e=\u02c6MU(q)\u00a8qr+\u02c6SU(q,\u02d9q)\u02d9qr+MK(q)\u00a8qr+SK(q,\u02d9q)\u02d9qr+KPe+KD\u02d9e.(21)Subtracting both sides of eq. (21) from the identityM(q)\u00a8qr+S(q,\u02d9q)\u02d9qr=YU(q,\u02d9q,\u02d9qr,\u00a8qr)aU+YK(q,\u02d9q,\u02d9qr,\u00a8qr)aKyieldsM(q)\u02d9s+S(q,\u02d9q)s=YU(q,\u02d9q,\u02d9qr,\u00a8qr) (aU\u2212\u02c6aU)\u2212KPe\u2212KD\u02d9e=YU(q,\u02d9q,\u02d9qr,\u00a8qr)\u02dcaU\u2212(KPe+KD\u02d9e)(22)where the known term YKaKhas been cancelled. Substituting M(q)\u02d9sfrom (22) into (20) andusing the update law \u02d9\u02c6aU=\u0393YTU(q,\u02d9q,\u02d9qr,\u00a8qr)sgives\u02d9V=12sT(\u02d9M(q)\u22122S(q,\u02d9q))s+sTYU(q,\u02d9q,\u02d9qr,\u00a8qr)\u02dcaU\u2212sT(KPe+KD\u02d9e)+ 2eTKP\u02d9e\u2212\u02dcaTU\u0393\u22121\u00b7\u0393YTU(q,\u02d9q,\u02d9qr,\u00a8qr)s=\u2212(\u02d9e+K\u22121DKPe)T(KPe+KD\u02d9e) + 2eTKP\u02d9e=\u2212\u02d9eTKD\u02d9e\u2212eTKPK\u22121DKPe\u22640,where we used the skew-symmetry of \u02d9M\u22122Sand the diagonality of the gain matrices. The proofis completed by Barbalat lemma and LaSalle theorem.", "robot": "RPR", "tags": ["planar", "horizontal"]},
 "60": {"file": "Robotics2_19.07.11.pdf", "date": "19-07-11", "num_ex": 0, "exam": "robo2", "question": "The 3R planar robot in Fig. 1 is commanded at the joint velocity level. The robot has to perform twotasks simultaneously, if possible. The \ufb01rst task is to keep the second link vertical and upwards at any time.The second task is to follow a desired cyclic Cartesian trajectory pd(t)\u2208R2,t\u2208[0,T], for the end-effectorposition. Provide the actual expressions of all terms in a task priority control law, with the given orderof tasks. Determine the robot con\ufb01gurations for which both tasks can be perfectly executed together, andde\ufb01ne accordingly the region of the plane where this can happen. Which would be the control law in thiscase? With link lengths L1=L2=L3= 0.5 [m], compute the numerical value of \u02d9q\u2208R3using the taskpriority law at q0=(0\u03c0/2\u2212\u03c0/2)T[rad] for \u02d9pd=(0.1\u22120.5)T[m/s]. Finally, when errors are presentduring the execution of these tasks, how should the control law be modi\ufb01ed in order to reduce them?y0x0L1L3L2q1q3q2g0Figure 1: A 3R planar robot with its joint variables and generic link lengths.", "solution": "We will use throughout the DH coordinates indicated in Fig. 2. The \ufb01rst task, i.e., keeping the second linkvertical and upwards, is one-dimensional ( m1= 1) and is speci\ufb01ed byf1(q) =q1+q2=rd1=\u03c02\u21d2J1=\u2202f1(q)\u2202q=(1 1 0)T,\u02d9rd1= 0.The second task, i.e., following a desired cyclic Cartesian trajectory pd(t) with the robot tip, is two-dimensional ( m2= 2) and is speci\ufb01ed byf2(q) =(L1c1+L2c12+L3c123L1s1+L2s12+L3s123)=rd2=pd(t)\u21d2J2(q) =\u2202f2(q)\u2202q=(\u2212(L1s1+L2s12+L3s123)\u2212(L2s12+L3s123)\u2212L3s123L1c1+L2c12+L3c123L2c12+L3c123L3c123),\u02d9rd2=\u02d9pd.with the usual compact notation for the trigonometric functions (e.g., c12= cos(q1+q2)).The basic Task Priority (TP) method for two ordered tasks provides\u02d9q=J#1\u02d9rd1+(I\u2212J#1J1)v1, withv1=(J2(q)(I\u2212J#1J1))#(\u02d9rd2\u2212J2(q)J#1\u02d9rd1), (1)whereP1=I\u2212J#1J1is the (here, constant) projection matrix in the null space of the \ufb01rst task and noextra term has been used in the null space of the second task ( v2=0). Since \u02d9rd1= 0 in this case, andbeingP(JP)#= (JP)#for any projection matrix P, equation (1) simpli\ufb01es to\u02d9q= (J2(q)P1)#\u02d9pd. (2)FromJ#1=\uf8eb\uf8ec\uf8ed0.50.50\uf8f6\uf8f7\uf8f8,P1=\uf8eb\uf8ec\uf8ed0.5\u22120.5 0\u22120.5 0.5 00 0 1\uf8f6\uf8f7\uf8f8,we haveJ2(q)P1=(\u22120.5L1s10.5L1s1\u2212L3s1230.5L1c1\u22120.5L1c1L3c123). (3)While the \ufb01rst two columns of the matrix in (3) are always dependent, it is easy to see that its rank isfull unless sin( q2+q3) = 0. With the joint velocity command (2), the \ufb01rst task will always be satis\ufb01ed ifthe constraint f1(q) =\u03c0/2 holds at the start, whereas the second task will be satis\ufb01ed either exactly orin a least squares sense, depending on the current robot con\ufb01guration and on the direction of the desiredvelocity \u02d9pd.In order to verify when both tasks can be achieved simultaneously, we impose q1(t) +q2(t)\u2261\u03c0/2 at alltimes. From the direct kinematics of the robot tip p=f2(q), one obtains then the reduced formpred=f2(q)|q1+q2=\u03c0/2=(L1c1\u2212L3s3L1s1+L2+L3c3)=pred(q1,q3).In order to keep the constraint on the \ufb01rst task satis\ufb01ed, we need to have \u02d9 q2=\u2212\u02d9q1for the second jointcommand. The two remaining joints qred=(q1q3)Twill produce a tip velocity\u02d9pred=Jred(qred)\u02d9qred, withJred(qred) =\u2202pred(qred)\u2202qred=(\u2212L1s1\u2212L3c3L1c1\u2212L3s3),\u02d9qred=(\u02d9q1\u02d9q3).2As a result, the robot will be able to generate also any desired \u02d9pred=\u02d9pd\u2208R2, provided thatdetJred=L1L3cos(q3\u2212q1)\u0338= 0\u21d0\u21d2q3\u0338=q1\u00b1\u03c02. (4)The actual region of the plane where the two tasks can be performed simultaneously is illustrated in Fig. 3for some speci\ufb01c but arbitrary values of the link lengths. The second link is always kept vertical andupwards. The circular annulus has outer radius Rout, inner radius Rin, and center CWSon the axisy0,computed by simple geometric reasoning asRout=(L1+L2+L3)\u2212(\u2212L1+L2\u2212L3)2=L1+L3, R in=Rout\u22122L3=|L1\u2212L3|,andCWS=(L1+L2+L3) + (\u2212L1+L2\u2212L3)2=L2.ForL1=L2=L3=L, this is a full circle ( Rin= 0) of radius Rout= 2L, centered at CWS=Lon axisy0.L1 = 0.6L2 = 0.5L3 = 0.17Rin= 0.43Rout= 0.77CWS = 0.5RinCWSRouty0x0Figure 3: The Cartesian region of compatibility for both tasks (drawn for a speci\ufb01c set of link lengths).As mentioned, when q1+q2=\u03c0/2 and (4) hold, then the TP method (2) will generate the exact (andunique) solution for both tasks. In these conditions, the same solution is obtained with \u02d9qred=J\u22121red(qred)\u02d9pdand \u02d9q2=\u2212\u02d9qred,1. Equivalently, because of the assumed consistency of the two tasks, the problem can besolved also by the Extended Jacobian method (since n=m1+m2= 3):\u02d9r=(\u02d9p1\u02d9p2)=(J1J2(q))\u02d9q=JE(q)\u02d9q\u21d2 \u02d9q=J\u22121E(q)\u02d9rd=J\u22121E(q)(0\u02d9pd). (5)We have in fact det JE(q) =\u2212L1L3sin(q2+q3). So, when the second link is kept vertical and upwards(q1+q2=\u03c0/2), the two singularities of the Extended Jacobian matrix ( q2+q3={0,\u03c0}) correspondexactly to having q3=q1\u00b1\u03c0/2, i.e., the violation of condition (4).With the link lengths L1=L2=L3= 0.5 [m] and for the given desired tip velocity \u02d9pd=(0.1\u22120.5)T[m/s],when the robot is, e.g., in the con\ufb01guration qb=(0\u03c0/2\u03c0/3)T(condition (4) holds), thenJE(qb) =(J1J2(qb))=\uf8eb\uf8ec\uf8ed1 1 0\u22120.75\u22120.75\u22120.250.067\u22120.433\u22120.433\uf8f6\uf8f7\uf8f8,(J2(qb)P1)#=\uf8eb\uf8ec\uf8ed\u22123.4641 23.4641\u22122\u22124 0\uf8f6\uf8f7\uf8f8,3and the joint velocity provided by (2) or by (5) is\u02d9qb= (J2(qb)P1)#\u02d9pd=J\u22121E(qb)(0\u02d9pd)=\uf8eb\uf8ec\uf8ed\u22121.34641.3464\u22120.4\uf8f6\uf8f7\uf8f8[rad/s]\u21d2\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3J1\u02d9qb= 0 = \u02d9rd1J2(qb)\u02d9qb=(0.1\u22120.5)=\u02d9rd2.On the other hand, when the robot is in the requested con\ufb01guration q0=(0\u03c0/2\u2212\u03c0/2)T[rad], the twotasks are inconsistent (condition (4) is violated). In this situation, the robot end effector is on the outerboundary of the Cartesian region of compatibility, and the desired tip velocity points outside. The taskpriority law (2) provides in this case\u02d9q0= (J2(q0)P1)#\u02d9pd=\uf8eb\uf8ec\uf8ed0 2/30\u22122/30 4/3\uf8f6\uf8f7\uf8f8(0.1\u22120.5)=\uf8eb\uf8ec\uf8ed\u22121/31/3\u22122/3\uf8f6\uf8f7\uf8f8[rad/s]\u21d2\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3J1\u02d9q0= 0 = \u02d9pd1J2(q0)\u02d9q0=(0\u22120.5)=\u02d9p0\u0338=\u02d9pd.Note that the computed solution \u02d9q0will realize only part of the desired tip velocity \u02d9pdrequested assecondary task, namely the component of \u02d9pd\u2208R{J2(q0)}(see Fig. 4).y0x0q2= 90\u00b0q3= -90\u00b0q1= 0\ud835\udc5d\u0307#\ud835\udc5d\u0307$Figure 4: The speci\ufb01ed secondary task velocity \u02d9pdfor the actual 3R planar robot in the con\ufb01guration q0and the realized one \u02d9p0.Finally, suppose that errors e1=rd1\u2212f1(q) =\u03c0/2\u2212(q1+q2)\u0338= 0 and/ore2=rd2\u2212f2(q) =pd\u2212f2(q)\u0338=0are present during the simultaneous execution of the tasks. The task priority scheme (1) will be modi\ufb01edby introducing an error feedback term in both tasks as\u02d9qc=J#1( \u02d9rd1+k1e1) +P1(J2(q)P1)#(\u02d9rd2+K2e2\u2212J2(q)J#1( \u02d9rd1+k1e1))=J#1k1e1+ (J2(q)P1)#(\u02d9pd+K2e2\u2212J2(q)J#1k1e1),(6)with a scalar gain k1>0 and a (typically, diagonal) matrix gain K2>0. SinceJ1\u02d9qc=k1e1, we alwayshave \u02d9e1=\u2212k1e1and the error on the \ufb01rst task will exponentially converge to zero. On the other hand,the control law (6) will generate the largest possible reduction (or, in the worst case, the smallest increase)of the error on the second task, without ever affecting the \ufb01rst task.", "robot": "3R", "tags": ["planar", "vertical"]},
 "61": {"file": "Robotics2_19.07.11.pdf", "date": "19-07-11", "num_ex": 1, "exam": "robo2", "question": "The RP planar robot shown in Fig. 2 lives in a vertical plane and may collide with some (human) obstaclewhen in motion. Its controller is therefore equipped with a momentum-based collision detection algorithmthat generates a residual vector r\u2208R2as monitoring signal. Provide the explicit symbolic expressionsof the two scalar components of r(introduce the needed kinematic and/or dynamic quantities). Supposethat, at time t=tc, a collision occurs on the robot tip with an impact force Fcthat is purely normal tothe second link. What will be the instantaneous value of the time derivative of the residual vector \u02d9r(tc)?q1q2y0x0g0Figure 2: A RP robot moving in a vertical plane.", "solution": "Based on the dynamic model of the RP planar robotM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4, withc(q,\u02d9q) =S(q,\u02d9q)\u02d9q, (7)4we need to derive the dynamic elements that appear in the expression of the residual vectorr(t) =KI[p(t)\u2212\u222bt0(\u03c4+ST(q,\u02d9q)\u02d9q\u2212g(q) +r)ds\u2212p(0)], (8)wherep=M(q)\u02d9qis the generalized momentum and matrix KI>0 is diagonal. Without loss of generality,we can assume that the robot is at rest at the beginning of the experiment, i.e, p(0) = 0.y0x0g0m2,Ic2Ic1dc2FcFigure 5: De\ufb01nition of the relevant dynamic parameters for the RP robot of Fig. 2. Also shown is acollision force Fcacting at the tip along the normal direction to the second link.With reference to the dynamic parameters de\ufb01ned in Fig. 5, for the kinetic energyT=T1+T2=12\u02d9qTM(q)\u02d9q,sincepc2= (q2\u2212dc2)(cosq1sinq1)Tandvc2=\u02d9pc2, we haveT1=12Ic1\u02d9q21, T 2=12Ic2\u02d9q21+12m2\u2225vc2\u22252=12(Ic2+m2(q2\u2212dc2)2)\u02d9q21+12m2\u02d9q22.The robot inertia matrix is thenM(q) =(Ic1+Ic2+m2(q2\u2212dc2)200 m2). (9)From this, we compute the Coriolis/centrifugal terms using the matrices of Christoffel symbolsCi(q) =12[(\u2202mi(q)\u2202q)+(\u2202mi(q)\u2202q)T\u2212(\u2202M(q)\u2202qi)], i = 1,2.We obtainC1(q) =(0m2(q2\u2212dc2)m2(q2\u2212dc2) 0),C2(q) =(\u2212m2(q2\u2212dc2) 00 0),and thusc(q,\u02d9q) =(\u02d9qTC1(q)\u02d9q\u02d9qTC2(q)\u02d9q)=(2m2(q2\u2212dc2) \u02d9q1\u02d9q2\u2212m2(q2\u2212dc2) \u02d9q21). (10)A factorization c(q.\u02d9q) =S(q,\u02d9q)\u02d9qin (7) such that \u02d9M\u22122Sis skew-symmetric is given byS(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q))=(m2(q2\u2212dc2) \u02d9q2m2(q2\u2212dc2) \u02d9q1\u2212m2(q2\u2212dc2) \u02d9q1 0). (11)For the potential energyU=U1+U2=U(q),we haveU1= constant, U 2=m2g0(q2\u2212dc2) sinq1,5and sog(q) =(\u2202U(q)\u2202q)T=(m2g0(q2\u2212dc2) cosq1m2g0sinq1). (12)From the expressions (9) and (11\u201312), we \ufb01nally obtainr1(t) =kI1[(Ic1+Ic2+m2(q2\u2212dc2)2)\u02d9q1\u2212\u222bt0(\u03c41\u2212m2g0(q2\u2212dc2) cosq1+r1)ds],andr2(t) =kI2[m2\u02d9q2\u2212\u222bt0(\u03c42+m2(q2\u2212dc2) \u02d9q21\u2212m2g0sinq1+r2)ds].Suppose now that, at time t=tc, a collision force Fcacts at the robot tip in the orthogonal directionto the second link and with an intensity F\u0338= 0 (see again Fig. 5). The Jacobian Jc(q) associated to thecontact point and the contact force are thenJc(q) =(\u2212q2sinq1cosq1q2cosq1sinq1),Fc=F(\u2212sinq1cosq1),while the resulting torque at the joint is computed as\u03c4c=JTc(q)Fc=(Fq20).From the nominal behavior of the residual vector r, beingr(t) =0for allt\u2208[0,tc], it follows that\u02d9r(tc) =KI(\u03c4c(tc)\u2212r(tc))\u21d2{\u02d9r1(tc) =kI1F(tc)q2(tc)\u02d9r2(tc) = 0.Although the collision occurs on the second link, the second component of the residual will not be affectedimmediately; in fact, Fcis not producing work on q2, due to the speci\ufb01c direction assumed for the impactforce.", "robot": "RP", "tags": ["planar", "vertical"]},
 "62": {"file": "Robotics2_19.07.11.pdf", "date": "19-07-11", "num_ex": 2, "exam": "robo2", "question": "An actuated pendulum under gravity should perform a rest-to-rest swing-up maneuver from the downwardposition\u03b8(0) = 0 to the upward position \u03b8(T) =\u03c0in a total time T, using a bang-coast-bang accelerationpro\ufb01le with symmetric acceleration and deceleration phases, each of duration Ts=T/4. The link ofthe pendulum is a thin rod of length l= 2 [m], with uniformly distributed mass m= 10 [kg] andbaricentral inertia Ic=ml2/12 [kg\u00b7m2]. The motor at the link base can deliver a maximum absolutetorque\u03c4max= 200 [Nm]. Determine the minimum time Tminin the chosen class of trajectories such thatthe motion is feasible. Sketch the resulting angular position, velocity, acceleration, and torque pro\ufb01les.[open books, 210 minutes]", "solution": "The acceleration pro\ufb01le for the rest-to-rest motion trajectory \u03b8(t) isassigned to be of the bang-coast-bangtype, having symmetric initial and \ufb01nal acceleration/deceleration phases, each of duration Ts=T/4 andwith \u00a8\u03b8=\u00b1A, and a cruising phase that lasts for half of the motion time, i.e., T/2, with constant velocity\u02d9\u03b8=V. From this motion structure, it is easy to compute the following quantities:V=\u02d9\u03b8(T4)=AT4, \u2206\u03b8s=\u03b8(T4)=12A(T4)2=AT232, \u2206\u03b8=\u03b8(T) = 2\u2206\u03b8s+VT2=3AT216.Thus, for a desired total displacement \u2206 \u03b8>0 and a given motion time T, we have for the acceleration Aand cruise velocity VA=16\u2206\u03b83T2>0\u21d2V=4\u2206\u03b83T>0. (13)The swing-up maneuver from \u03b8(0) = 0 to \u2206 \u03b8=\u03b8(T) =\u03c0in timeTneeds then an acceleration/decelerationA=\u00b116\u03c0/(3T2) in the \ufb01rst and third motion phases. Note that, when the acceleration phase endsat timet=Ts=T/4, the performed motion will be \u2206 \u03b8s= \u2206\u03b8/6 =\u03c0/6. By symmetry, when thedeceleration phase begins at time t=T\u2212Ts= 3T/4, the performed motion completed so far will be\u2206\u03b8\u2212\u2206\u03b8s= 5\u2206\u03b8/6 = 5\u03c0/6.With the above in mind, consider the dynamics of the actuated pendulumI\u00a8\u03b8+mg0dsin\u03b8=\u03c4, (14)6where\u03b8= 0 corresponds to the downward equilibrium and the dynamic parameters are given byd=l2= 1 [m], mg 0d= 98.1 [kg\u00b7m2], I=Ic+md2=ml212+m(l2)2=ml23=403= 13.33 [kg\u00b7m2].By inverse dynamics on (14), the torque needed to perform the desired motion during the three phases is:\u03c4(t) =\uf8f1\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f3IA+mg0dsin\u03b8(t), \u03b8\u2208[0,\u03c0/6), phase I:t\u2208[0,T/4),mg0dsin\u03b8(t), \u03b8\u2208[\u03c0/6,5\u03c0/6), phase II:t\u2208[T/4,3T/4),\u2212IA+mg0dsin\u03b8(t), \u03b8\u2208[\u03c0/6,\u03c0], phase III:t\u2208[3T/4,T].(15)The gravity contribution to the inverse dynamics torque is maximum at the midpoint of motion, i.e., at\u03b8=\u03c0/2, is independent of the total motion time, and is equal to \u03c4g=mg0d < \u03c4max. Note that if itwere\u03c4g>\u03c4max, then actuation would be too weak to perform the intended task (even when moving thependulum very slowly, with an arbitrarily long motion time T).Further, from (13) and (15) it is easy to see that, when speeding up motion by uniformly reducing T, theinertial torque component in the \ufb01rst phase will increase quadratically and the maximum required torquewill be attained at the end of the \ufb01rst phase, where the gravity contribution is the largest (and has thesame sign of the acceleration). Thus, for feasibility we require thatIA+mg0dsin \u2206\u03b8s=16\u03c0I3T2+mg0dsin\u03c06\u2264\u03c4max,and the optimal motion time will be de\ufb01ned as the lower bound for all feasible motion times,T\u2265\u221a16\u03c0I3 (\u03c4max\u2212mg0dsin(\u03c0/6))=Tmin.00.20.40.60.811.21.4time [s]00.511.522.533.5[rad]angular position00.20.40.60.811.21.4time [s]-0.500.511.522.533.5[rad/s]angular velocity00.20.40.60.811.21.4time [s]-15-10-5051015[rad/s2]angular acceleration00.20.40.60.811.21.4time [s]-200-150-100-50050100150200[Nm]torqueFigure 6: Kinematic (position, velocity, and acceleration) and dynamic (torque) pro\ufb01les of the minimumtime rest-to-rest swing-up maneuver.Plugging in the numerical data, we \ufb01nd the optimal time Tmin= 1.2165 [s]. The maximum torque duringmotion is indeed \u03c4max= 200 [Nm], reached at the single instant t=Tmin/4 = 0.3041 [s]. Accordingly, weobtain from (13) A= 11.3212 [rad/s2] andV= 3.4432 [rad/s]. Figure 6 shows the resulting time pro\ufb01lesof the angular position, velocity and acceleration, and of the commanded torque \u03c4(t).", "robot": "unknown", "tags": []},
 "63": {"file": "Robotics2_14.10.27.pdf", "date": "14-10-27", "num_ex": 0, "exam": "robo2", "question": "The collision detection and isolation method based on the use of residuals that monitor the robotgeneralized momentum has been presented only for open chain manipulators with revolute joints.Consider the planar PRR robot in Fig. 1, moving on a horizontal plane. Assuming that the robotat rest at time t= 0, provide the explicit expressions of the contributions to the residual vectorr\u2208R3in terms of the robot dynamic model components1. Comment on analogies or differencesthat may result due to the presence of prismatic joints in the chain, only one in the present case,or one or more in the general case.q1 q2 q3RF0 FK FK FKFigure 1: A planar PRR robot that may undergo collisions at any point along its structure (onlynon-simultaneous collision forces FKin the plane of motion are considered)", "solution": "When considering the Lagrangian dynamics of a robot with q\u2208Rnthat is possibly subject tocollision forces, we haveM(q)\u00a8q+C(q,\u02d9q)\u02d9q+g(q) =\u03c4+\u03c4K,\u03c4K=JTK(q)FK,where the left-hand side of the dynamic equation contains the usual inertia terms, Coriolis andcentrifugal terms (with a factorization such that \u02d9M\u22122Cis a skew-symmetric matrix), and gravityterms, while the non-conservative terms on the right-hand side are the motor torque \u03c4and thejoint torque\u03c4K\u2208Rnresulting from a collision/contact on the robot structure (i.e., on one of thelinks). Moreover, FK\u2208Rmis the generalized force at the contact and JTK(q) is the transpose ofthe Jacobian of the contact point. Both these quantities are unknown.To detect the presence of a joint torque \u03c4Kdue to a collision, we use a residual vector basedon the robot generalized momentum p=M(q)\u02d9q. With the robot starting at rest at time t= 0,the residualr\u2208Rnis de\ufb01ned asr=KI[p\u2212\u222bt0(\u03c4+CT(q,\u02d9q)\u02d9q\u2212g(q) +r)ds],r(0) = 0,withKI>0 and diagonal. Therefore, for its computation we need the inertia matrix M(q),the factorization matrix C(q,\u02d9q) of the Coriolis and centrifugal terms (obtained using Christoffel\u2019scoefficients), and the gravity vector g(q) of the speci\ufb01c robot.q1 q2 q3y0 x0m1dc2 dc3 m2 , I2 m3 , I3dc1Figure 2: The de\ufb01nition of generalized coordinates and dynamic parameters for the planar PRRrobot (the link length are l2andl3)We de\ufb01ne the reference frame axes and the generalized coordinates q\u2208R3for the planar PRRrobot as in Fig. 2 \u2014note that these do not follow the DH convention. Since the robot is movingon a horizontal plane, g(q)\u22610.The kinetic energy of the robotT=3\u2211i=1Ti=3\u2211i=112[mi\u2225vci\u22252+\u03c9TiIi\u03c9i]=12\u02d9qTM(q)\u02d9q2is computed as follows2:T1=12m1\u02d9q21pc2=(q1+dc1+dc2c2dc2s2)\u21d2vc2=(\u02d9q1\u2212dc2s2\u02d9q2dc2c2\u02d9q2)\u21d2T2=12m2(\u02d9q21+d2c2\u02d9q22\u22122dc2s2\u02d9q1\u02d9q2)+12I2\u02d9q22pc3=(q1+dc1+l2c2+dc3c23l2s2+dc3s23)\u21d2vc3=(\u02d9q1\u2212l2s2\u02d9q2\u2212dc3s23( \u02d9q2+ \u02d9q3)l2c2\u02d9q2+dc3c23( \u02d9q2+ \u02d9q3))\u21d2T3=12m3(\u02d9q21+l22\u02d9q22+d2c3( \u02d9q2+ \u02d9q3)2\u22122l2s2\u02d9q1\u02d9q2\u22122dc3s23\u02d9q1( \u02d9q2+ \u02d9q3) + 2l2dc3c23\u02d9q2( \u02d9q2+ \u02d9q3))+12I3( \u02d9q2+ \u02d9q3)2.As a result, the inertia matrix isM(q) =\uf8eb\uf8ec\uf8edm1+m2+m3\u2212(m2dc2+m3l2)s2\u2212m3dc3s23 \u2212m3dc3s23symm I2+m2d2c2+I3+m3d2c3+m3l22+ 2l2m3dc3c3I3+m3d2c3+l2m3dc3c3symm symm I3+m3d2c3\uf8f6\uf8f7\uf8f8.Using the following parametrization3a1=m1+m2+m3a2=m2dc2+m3l2a3=m3dc3a4=I2+m2d2c2+I3+m3d2c3+m3l22a5=I3+m3d2c3,the inertia matrix can be more compactly rewritten asM(q) =\uf8eb\uf8ec\uf8eda1\u2212a2s2\u2212a3s23\u2212a3s23\u2212a2s2\u2212a3s23a4+ 2l2a3c3a5+l2a3c3\u2212a3s23a5+l2a3c3a5\uf8f6\uf8f7\uf8f8=(m1(q)m2(q)m3(q)).For the term CT(q,\u02d9q)\u02d9q, we use the formulaC(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u02d9qTC1(q)\u02d9qTC2(q)\u02d9qTC3(q)\uf8f6\uf8f7\uf8f8\u21d2CT(q,\u02d9q)\u02d9q=(CT1(q)\u02d9q CT2(q)\u02d9q CT3(q)\u02d9q)\uf8eb\uf8ec\uf8ed\u02d9q1\u02d9q2\u02d9q3\uf8f6\uf8f7\uf8f8,with matrices Ci(q) de\ufb01ned asCi(q) =12[(\u2202mi(q)\u2202q)+(\u2202mi(q)\u2202q)T\u2212(\u2202M(q)\u2202qi)], fori= 1,2,3.2Taking into account the planar nature of the problem, we work with two-dimensional vectors for linear quantities(in the plane ( x0,y0)) and with scalars for angular quantities (components along z0).3Here, the kinematic parameter l2is assumed to be known. This allows writing the product m3l2dc3asa3l2,without the need of introducing a sixth dynamic coefficient.3Performing computations yields \ufb01nallyC1(q) =\uf8eb\uf8ec\uf8ed0 0 00\u2212(a2c2+a3c23)\u2212a3c230\u2212a3c23\u2212a3c23\uf8f6\uf8f7\uf8f8,C2(q) =\uf8eb\uf8ec\uf8ed0 0 00 0\u2212l2a3s30\u2212l2a3s3\u2212l2a3s3\uf8f6\uf8f7\uf8f8,C3(q) =\uf8eb\uf8ec\uf8ed0 0 00\u2212l2a3s300 0 0\uf8f6\uf8f7\uf8f8.The presence of prismatic joints in the robot does not change the overall residual approachto collision detection. Indeed, there are slight changes in the detectability of contact forces. Forinstance, a force FKapplied to the \ufb01rst link of the PRR robot along a direction that is normal tothe \ufb01rst joint axis will notbe detected. For a robot with a \ufb01rst revolute joint, a force applied tothe \ufb01rst link along a line crossing the \ufb01rst joint axis would notbe detected. In both cases, notethat such forces produce no motion anyway. When a prismatic joint is placed along the structure,as in a planar RPR robot, the same reasoning applies, although detectability becomes in any eventeasier, thanks to the role of the multiple joints preceding the link being hit.In general, contact forces FK\u2208N{JTK(q)}will never be recorded by the residual r. In adual fashion, the residual method will fully detect contact forces that are completely orthogonalto the null space of the contact Jacobian, no matter which is the prismatic or revolute nature ofthe robot joints.", "robot": "PRR", "tags": ["planar", "horizontal"]},
 "64": {"file": "Robotics2_14.10.27.pdf", "date": "14-10-27", "num_ex": 1, "exam": "robo2", "question": "For the same robot of the previous exercise, assume that second and third links have unitarylengths. Moreover, the force (for joint 1) and torques (for joints 2 and 3) that can be delivered bythe actuators at the joints are bounded as follows:|\u03c41|\u22645 [N],|\u03c42|\u22641 [Nm],|\u03c43|\u22642 [Nm].The robot should be able to sustain in static conditions contact forces Fthat are applied to itsend-effector in various planar directions. Determine the maximum norm of a contact force thatcan be applied in anyplanar direction and sustained by the robot when kept always in a \ufb01xedcon\ufb01guration. Provide at least one non-singular con\ufb01guration in which the robot achieves thisoptimal result.[180 minutes; open books]1For dynamic analysis, you may use whatever generalized coordinates you \ufb01nd most convenient.1", "solution": "We use the same coordinates as in Exercise 1. From the direct kinematicsp=f(q) =(q1+l2c2+l3c23l2s2+l3s23),the end-effector Jacobian of interest isJ(q) =\u2202f(q)\u2202q=(1\u2212(l2s2+l3s23)\u2212l3s230l2c2+l3c23l3c23).Note that the Jacobian is singular (loses rank) when c23=c2= 0, namely when the secondand third links lie both (folded or stretched) along a line orthogonal to the \ufb01rst (prismatic) jointaxis. In singular con\ufb01gurations, there are Cartesian directions along which arbitrary forces canbe applied without the need of motor torques to keep the structure in static balance. While suchcon\ufb01gurations are indeed good candidates for the solution of the problem at hand, we shouldalso take into account that even in singular con\ufb01gurations contact forces could be applied alongarbitrary planar directions, and thus too large forces in norm may not be sustainable in view ofthe given actuator limits.4A generic contact force can be parametrized asF=(FxFy)=\u2225F\u2225(cos\u03b1sin\u03b1), \u03b1\u2208(\u2212\u03c0.\u03c0], (1)where\u03b1is the angle of the force w.r.t. the x0axis. For a given robot con\ufb01guration qand a givenvalue of\u2225F\u2225, we should check if the actuator limits are still satis\ufb01ed or not in correspondence tothe \u2018worst case\u2019 angle \u03b1.Setting then l2=l3= 1 [m], and using the given actuator bounds, the following inequalitiesneed to be satis\ufb01ed\uf8eb\uf8ec\uf8ed\u22125\u22121\u22122\uf8f6\uf8f7\uf8f8\u2264JT(q)F=\uf8eb\uf8ec\uf8edFx\u2212(s2+s23)Fx+ (c2+c23)Fy\u2212s23Fx+c23Fy\uf8f6\uf8f7\uf8f8\u2264\uf8eb\uf8ec\uf8ed512\uf8f6\uf8f7\uf8f8.Or, using also eq. (1),\uf8eb\uf8ec\uf8ed|Fx|\u2225F\u2225\u00b7|s2\u2212\u03b1+s23\u2212\u03b1|\u2225F\u2225\u00b7|s23\u2212\u03b1|\uf8f6\uf8f7\uf8f8\u2264\uf8eb\uf8ec\uf8ed512\uf8f6\uf8f7\uf8f8. (2)This form is more convenient for analysis. From the \ufb01rst inequality in (2), the norm of Fshouldcertainly not exceed 5 N. From the last inequality, no matter which value takes the sum q2+q3,we can always select a direction (i.e., a suitable value of \u03b1) such that|s23\u2212\u03b1|= 1, yielding thenthe worst case. Thus, the norm of Fcannot exceed 2 N (which dominates the former condition).Finally, consider the second inequality. If we had a limit on the second torque larger than orequal to 4 Nm, since |s2\u2212\u03b1+s23\u2212\u03b1|\u22642 holds for any combination of q2,q3and\u03b1, then thisbound would anyway be dominated by the stricter condition on the third torque. Instead, with amaximum value of 1 Nm, we still need to carry the analysis a bit further.It is easy to see that c3=\u22121 (namely, q3=\u00b1\u03c0) impliess2\u2212\u03b1+s23\u2212\u03b1\u22610, and so anyforce can be sustained by the actuator at joint 2 when folding the third link over the second, andindependently of the value of q2. This should not come unexpected, as the application line of anyforce applied to the end-effector would then always cross the axis of joint 2, producing thus notorque. Note that things would be quite different in the case l2\u0338=l3.Summarizing, the maximum sustainable contact force applied at the robot end-effector hasnorm\u2225F\u2225= 2 N. A non-singular con\ufb01guration where such a force can be sustained (with at leastone torque in saturation) is given by q\u2217= (any,3\u03c0/4,\u2212\u03c0) \u2014q1is irrelevant. When applying aforce of 2 N in the direction normal to link 3 ( \u03b1=\u03c0/4), we would have as balancing joint torque\u03c4\u2217=\u2212JT(q\u2217)F=\u2212\uf8eb\uf8ec\uf8ed1 00 0\u221a2/2\u221a2/2\uf8f6\uf8f7\uf8f8(\u221a2\u221a2)=\uf8eb\uf8ec\uf8ed\u2212\u221a20\u22122\uf8f6\uf8f7\uf8f8.Note that the Jacobian matrix at q\u2217has full rank, so this is nota singular con\ufb01guration.", "robot": "unknown", "tags": ["planar"]},
 "65": {"file": "Robotics2_16.09.12.pdf", "date": "16-09-12", "num_ex": 0, "exam": "robo2", "question": "x y q1 q3 ! = '/2 (constant) #\u1f591 \u1f593 q2 \u43a9 \u43a9 \u43a9 g0Figure 1: A RPR planar robot moving in a vertical plane.Derive the inertia matrix B(q) and the gravity vector g(q) in the dynamic model of the planar RPRrobot in Fig. 1, using the Lagrangian coordinates q=(q1q2q3)Tde\ufb01ned therein. Determine allequilibrium con\ufb01gurations q0under no external or dissipative forces/torques nor actuation inputs.", "solution": "For linki,i= 1,2,3, letmibe its mass and Iiits inertia around an axis normal to the plane ofmotion and passing through the center of mass. Moreover, for i= 1 andi= 3,diis the distanceof the center of mass of link ifrom the axis of joint i, while for the second link, d2will denote the(constant) distance of its center of mass from the axis of joint 3 \u2014see Fig. 3.x y q1 q3 q2 \u43a9 \u43a9 \u43a9 g0 d2 d3 d1Figure 3: Parameters dide\ufb01ning the location of the center mass of the links of the RPR robot.To derive the robot dynamic model terms, we follow a Lagrangian approach. For obtaining theinertia matrix B(q), we compute the kinetic energy T=T1+T2+T3of the three robot links. Forthe \ufb01rst link, it isT1=12(I1+m1d21) \u02d9q21.For the second link, the position of the center of mass is1pc2=(\u21131cosq1\u2212(q2\u2212d2) sinq1\u21131sinq1+ (q2\u2212d2) cosq1), (1)where\u21131is the length of link 1. Thus, the velocity of this center of mass isvc2=\u02d9pc2=(\u2212(\u21131sinq1+ (q2\u2212d2) cosq1) \u02d9q1\u2212sinq1\u02d9q2(\u21131cosq1\u2212(q2\u2212d2) sinq1) \u02d9q1+ cosq1\u02d9q2)and its squared norm is\u2225vc2\u22252=vTc2vc2=(\u211321+ (q2\u2212d2)2)\u02d9q21+ \u02d9q22+ 2\u21131\u02d9q1\u02d9q2.The (scalar) angular velocity of link 2 is simply \u02d9 q1. As a result,T2=12[(I2+m2(\u211321+ (q2\u2212d2)2))\u02d9q21+m2\u02d9q22+ 2m2\u21131\u02d9q1\u02d9q2].1We take into account the following identities (for \u03b2=\u03c0/2): cos(q1+\u03c0/2) =\u2212sinq1, sin(q1+\u03c0/2) = cosq1.2Similarly, the position of the center of mass of the third link ispc3=(\u21131cosq1\u2212q2sinq1\u2212d3sin(q1+q3)\u21131sinq1+q2cosq1+d3cos(q1+q3)). (2)Its velocity isvc3=\u02d9pc3=(\u2212(\u21131sinq1+q2cosq1) \u02d9q1\u2212sinq1\u02d9q2\u2212d3cos(q1+q3)( \u02d9q1+ \u02d9q3)(\u21131cosq1\u2212q2sinq1) \u02d9q1+ cosq1\u02d9q2\u2212d3sin(q1+q3)( \u02d9q1+ \u02d9q3))and the squared norm becomes\u2225vc3\u22252=(\u211321+q22)\u02d9q21+ \u02d9q22+d23( \u02d9q1+ \u02d9q3)2+2\u21131\u02d9q1\u02d9q2\u22122d3sinq3( \u02d9q1+ \u02d9q3)(\u21131\u02d9q1+ \u02d9q2)+2d3q2cosq3( \u02d9q1+ \u02d9q3) \u02d9q1.The (scalar) angular velocity of link 3 is simply ( \u02d9 q1+ \u02d9q3). As a result,T3=12[(I3+m3d23)( \u02d9q1+ \u02d9q3)2+m3(\u211321+q22)\u02d9q21+m3\u02d9q22+ 2m3\u21131\u02d9q1\u02d9q2+ 2m3d3( \u02d9q1+ \u02d9q3) (q2cosq3\u02d9q1\u2212sinq3(\u21131\u02d9q1+ \u02d9q2))].Therefore,T=12\u02d9qT\uf8eb\uf8ec\uf8edb11(q2,q3)b12(q3)b13(q2,q3)b22b23(q3)symm b33\uf8f6\uf8f7\uf8f8\u02d9q=12\u02d9qTB(q)\u02d9q,from which the elements bijof the 3\u00d73, symmetric, positive de\ufb01nite inertia matrix B(q) can beextracted:b11(q2,q3) =I1+m1d21+I2+m2d22+I3+m3d23+ (m2+m3)\u211321\u22122m2d2q2+ (m2+m3)q22+ 2m3d3(q2cosq3\u2212\u21131sinq3)=\u03c01+\u03c02q2+\u03c03q22+ 2\u03c04(q2cosq3\u2212\u21131sinq3)b12(q3) = (m2+m3)\u21131\u2212m3d3sinq3=\u03c03\u21131\u2212\u03c04sinq3b13(q2,q3) =I3+m3d23+m3d3(q2cosq3\u2212\u21131sinq3) =\u03c05+\u03c04(q2cosq3\u2212\u21131sinq3)b22=m2+m3=\u03c03b23(q3) =\u2212m3d3sinq3=\u2212\u03c04sinq3b33=I3+m3d23=\u03c05.(3)In the expressions (3) of the elements of B(q), we have assumed that the kinematic parameter\u21131is known and found thus a linear parameterization in terms of \ufb01ve dynamic coefficients \u03c0i,i= 1,..., 5.For obtaining the vector g(q), we compute the potential energy U=U1+U2+U3due to gravityfor the three robot links. Using the expressions of the y-component of the vectors pci,i= 1,2,3(see also eqs. (1) and (2)), we haveU1(q1) =m1g0pc1,y=m1g0d1sinq1U2(q1,q2) =m2g0pc2,y=m2g0(\u21131sinq1+ (q2\u2212d2) cosq1)U3(q1,q2,q3) =m3g0pc3,y=m3g0(\u21131sinq1+q2cosq1+d3cos(q1+q3)).3Therefore,g(q) =(\u2202U(q)\u2202q)T=\uf8eb\uf8ec\uf8ed(m1d1+ (m2+m3)\u21131)g0cosq1\u2212(m2(q2\u2212d2) +m3q2)g0sinq1\u2212m3d3g0sin(q1+q3)(m2+m3)g0cosq1\u2212m3d3g0sin(q1+q3)\uf8f6\uf8f7\uf8f8.(4)Solving for g(q0) =0provides all equilibrium con\ufb01gurations q0. From the second componentin (4), it follows that q0,1=\u00b1\u03c0/2, which con\ufb01rms also the intuition that the prismatic jointaxis should be horizontal at the equilibrium. Plugging this into the third equation leads againtoq0,3=\u00b1\u03c0/2. Imposing these two conditions in the \ufb01rst equation, g1(q0) = 0 provided theadditional condition q2=m2d2/(m2+m3). Thus, all unforced equilibrium con\ufb01gurations for thisRPR robot are of the formq0=(\u00b1\u03c02m2d2m2+m3\u00b1\u03c02)T.", "robot": "RPR", "tags": ["planar", "horizontal", "vertical"]},
 "66": {"file": "Robotics2_16.09.12.pdf", "date": "16-09-12", "num_ex": 1, "exam": "robo2", "question": "bmu ! g0 q nonlinear springFigure 2: A two-mass system connected by a nonlinear spring, under the action of gravity.In the mechanical system shown in Fig. 2, the \ufb01rst body (of mass b>0 and position \u03b8) is actuatedby a force uand is connected to the second body (of mass m > 0 and position q) through anonlinear spring having potential energyUe=12k(q\u2212\u03b8)2+14kn(q\u2212\u03b8)4, k,k n>0.\u2022Derive the dynamic model of this system by following a Lagrangian approach and using asgeneralized coordinates ( \u03b8,q).\u2022Determine the (unique!) equilibrium position \u00af\u03b8for the \ufb01rst mass and the required constantinput force \u00af uto be applied in order to keep the second mass at a desired position (height) \u00af q.\u2022Verify your result by computing the values of \u00af\u03b8and \u00afufor the following numerical data:\u00afq= 0.1 [m], b =m= 3 [kg], k = 1000 [N/m] , k n= 10000 [N/m3], g 0= 9.81 [m/s2].[150 minutes; open books]1", "solution": "The kinetic and potential energies of the mechanical system in Fig. 2 are given byT=12b\u02d9\u03b82+12m\u02d9q2, U =Ue+Ug=12k(q\u2212\u03b8)2+14kn(q\u2212\u03b8)4\u2212mg0q.Thus, applying the Euler-Lagrange equations to L=T\u2212Uyields the two second-order differentialequationsb\u00a8\u03b8+k(\u03b8\u2212q) +kn(\u03b8\u2212q)3=u (5)m\u00a8q\u2212mg0+k(q\u2212\u03b8) +kn(q\u2212\u03b8)3= 0, (6)which are nonlinear due to the cubic terms in the deformation \u03b4=q\u2212\u03b8of the spring.For the equilibrium conditions, we set \u00a8\u03b8= \u00a8q= 0 in eqs. (5)\u2013(6). From the second one, we obtainthe following algebraic equation:kn(q\u2212\u03b8)3+k(q\u2212\u03b8)\u2212mg0= 0.This is a cubic equation of the form\u03b43+p\u03b4+r= 0, withp=kkn, r =\u2212mg0kn, (7)which is known to have the single real solution2\u03b4=3\u221a\u2212r2+\u221ar24+p327+3\u221a\u2212r2\u2212\u221ar24+p327. (8)2The (depressed) cubic equation in (7) was studied already in the XVI century. The formula (8) is attributed tothe mathematician Gerolamo Cardano, but in fact is due to Scipione del Ferro and Niccol` o Fontana (also known asTartaglia).4Therefore, for a given desired position q= \u00afqof the mass m, we compute from (8) the springdeformation \u00af\u03b4at steady state and set\u00af\u03b8= \u00afq\u2212\u00af\u03b4. (9)Moreover, from eq. (5) at steady state we obtain the required input force\u00afu=k(\u00af\u03b8\u2212\u00afq) +kn(\u00af\u03b8\u2212\u00afq)3=k\u00af\u03b4+kn\u00af\u03b43=\u2212mg0. (10)The input force balances the weight of the mass m, as re\ufb02ected through the elastic force \u03c4eof thedeformed spring. Note that that the mass bplays no role in this analysis.Using now the given numerical data, and in particular \u00af q= 0.1,k= 1000,kn= 10000 and m= 3,we compute\u03b4= 0.0292, \u00af\u03b8= 0.0708, \u00afu=\u221229.4300. (11)As a result, the static deformation of the nonlinear spring at the equilibrium is equal to slightlyless than 3 cm. The deformation-force characteristics \u03c4e=k\u03b4+kn\u03b43of the chosen spring is shownin Fig. 4, where we have indicated also the actual deformation \u00af\u03b4at equilibrium. In correspondenceto this value, we can easily check that the elastic force is \u03c4e=\u2212\u00afu.\u22120.2 \u22120.15 \u22120.1 \u22120.05 0 0.05 0.1 0.15 0.2\u2212300\u2212200\u22121000100200300nonlinear spring characteristicdeformation [m]Figure 4: The nonlinear deformation-force characteristics of the spring for k= 103[N/m] andkn= 104[N/m3]. The equilibrium condition for the given problem data is reported in red.", "robot": "unknown", "tags": []},
 "67": {"file": "Robotics2_Midterm_Test_2016-17_17.03.29.pdf", "date": "17-03-29", "num_ex": 0, "exam": "robo2", "question": "For the 3R spatial robot in Fig. 1, determine the symbolic expression of the elements of the inertia matrixB(q) using the recursive algorithm with moving frames for the computation of the kinetic energy of thelinks. The coordinates q\u2208R3to be used are those of the Denavit-Hartenberg (DH) convention.z0 z1 z2 z3 y0 y1 y2 y3 x0 x1 x2 x3i\u03b1idiai\u03b8i1\u03c0/2L10q12 0 0L2q23 0 0L3q3Figure 1: An elbow-type 3R robot, with associated DH frames and table of parameters.Besides the masses mi,i= 1,2,3, of the links, the other constant dynamic parameters are speci\ufb01ed as1r1,c1=\uf8eb\uf8edA\u2212F0\uf8f6\uf8f8,2r2,c2=\uf8eb\uf8ed\u2212C00\uf8f6\uf8f8,3r3,c3=\uf8eb\uf8ed\u2212D0E\uf8f6\uf8f8, (1)whereA,C,D,EandFtake positive values, andiIci=\uf8eb\uf8edIxx,i 0 00Iyy,i 00 0 Izz,i\uf8f6\uf8f8, i = 1,2,3. (2)OnceB(q) has been obtained, de\ufb01ne a set of dynamic coefficients that linearly parametrize the inertiamatrix and is of the smallest possible cardinality.", "solution": "From the table of DH parameters given in Fig. 1, we compute the needed rotation matrices0R1(q1) =\uf8eb\uf8edc10s1s10\u2212c10 1 0\uf8f6\uf8f8,1R2(q2) =\uf8eb\uf8edc2\u2212s20s2c200 0 1\uf8f6\uf8f8,2R3(q3) =\uf8eb\uf8edc3\u2212s30s3c300 0 1\uf8f6\uf8f8,with the usual shorthand notation for trigonometric quantities, e.g., s2= sinq2,c23= cos(q2+q3).Similarly, the following kinematic quantities will be used:1r0,1=\uf8eb\uf8ed0L10\uf8f6\uf8f8,2r1,2=\uf8eb\uf8edL200\uf8f6\uf8f8,3r2,3=\uf8eb\uf8edL300\uf8f6\uf8f8.The moving frames algorithm is initialized with0\u03c90=0and0v0=0. Also,izi=z0=(0 0 1)Tfori= 0,1,2 (joint axis 1, 2, and 3, respectively).Linki= 11\u03c91=0RT1(q1)0\u03c91=0RT1(q1)(0\u03c90+ \u02d9q10z0)=0RT1(q1)\uf8eb\uf8ed00\u02d9q1\uf8f6\uf8f8=\uf8eb\uf8ed0\u02d9q10\uf8f6\uf8f81v1=0RT1(q1)0v1=0RT1(q1)(0v0+0\u03c91\u00d70r0,1)=0RT1(q1)0\u03c91\u00d70RT1(q1)0r0,1=1\u03c91\u00d71r0,1=\uf8eb\uf8ed0\u02d9q10\uf8f6\uf8f8\u00d7\uf8eb\uf8ed0L10\uf8f6\uf8f8=01vc1=1v1+1\u03c91\u00d71r1,c1=\uf8eb\uf8ed0\u02d9q10\uf8f6\uf8f8\u00d7\uf8eb\uf8edA\u2212F0\uf8f6\uf8f8=\uf8eb\uf8ed00\u2212A\u02d9q1\uf8f6\uf8f8\u21d2T1=12m1\ued79\ued791vc1\ued79\ued792+121\u03c9T11Ic11\u03c91=12(Iyy,1+m1A2)\u02d9q21.Linki= 22\u03c92=1RT2(q2)1\u03c92=1RT2(q2)(1\u03c91+ \u02d9q21z1)=1RT2(q2)\uf8eb\uf8ed0\u02d9q1\u02d9q2\uf8f6\uf8f8=\uf8eb\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2\uf8f6\uf8f82v2=1RT2(q2)1v2=1RT2(q2)(1v1+1\u03c92\u00d71r1,2)=1RT2(q2)1\u03c92\u00d71RT2(q2)1r1,2=2\u03c92\u00d72r1,2=\uf8eb\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2\uf8f6\uf8f8\u00d7\uf8eb\uf8edL200\uf8f6\uf8f8=\uf8eb\uf8ed0L2\u02d9q2\u2212L2c2\u02d9q1\uf8f6\uf8f82vc2=2v2+2\u03c92\u00d72r2,c2=\uf8eb\uf8ed0L2\u02d9q2\u2212L2c2\u02d9q1\uf8f6\uf8f8+\uf8eb\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2\uf8f6\uf8f8\u00d7\uf8eb\uf8ed\u2212C00\uf8f6\uf8f8=\uf8eb\uf8ed0(L2\u2212C) \u02d9q2\u2212(L2\u2212C)c2\u02d9q1\uf8f6\uf8f8\u21d2T2=12m2\ued79\ued792vc2\ued79\ued792+122\u03c9T22Ic22\u03c92=12(Ixx,2s22+Iyy,2c22+m2(L2\u2212C)2c22)\u02d9q21+12(Izz,2+m2(L2\u2212C)2)\u02d9q22.3Linki= 33\u03c93=2RT3(q3)2\u03c93=2RT3(q3)(2\u03c92+ \u02d9q32z2)=2RT3(q3)\uf8eb\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2+ \u02d9q3\uf8f6\uf8f8=\uf8eb\uf8eds23\u02d9q1c23\u02d9q1\u02d9q2+ \u02d9q3\uf8f6\uf8f83v3=2RT3(q3)2v3=2RT3(q3)(2v2+2\u03c93\u00d72r2,3)=2RT3(q3)2v2+2RT3(q3)2\u03c93\u00d72RT3(q3)2r2,3=2RT3(q3)2v2+3\u03c93\u00d73r2,3=\uf8eb\uf8edL2s3\u02d9q2L2c3\u02d9q2\u2212L2c2\u02d9q1\uf8f6\uf8f8+\uf8eb\uf8eds23\u02d9q1c23\u02d9q1\u02d9q2+ \u02d9q3\uf8f6\uf8f8\u00d7\uf8eb\uf8edL300\uf8f6\uf8f8=\uf8eb\uf8edL2s3\u02d9q2L2c3\u02d9q2+L3( \u02d9q2+ \u02d9q3)\u2212(L2c2+L3c23) \u02d9q1\uf8f6\uf8f83vc3=3v3+3\u03c93\u00d73r3,c3=\uf8eb\uf8edL2s3\u02d9q2L2c3\u02d9q2+L3( \u02d9q2+ \u02d9q3)\u2212(L2c2+L3c23) \u02d9q1\uf8f6\uf8f8+\uf8eb\uf8eds23\u02d9q1c23\u02d9q1\u02d9q2+ \u02d9q3\uf8f6\uf8f8\u00d7\uf8eb\uf8ed\u2212D0E\uf8f6\uf8f8=\uf8eb\uf8edL2s3\u02d9q2+Ec23\u02d9q1L2c3\u02d9q2+ (L3\u2212D) ( \u02d9q2+ \u02d9q3)\u2212Es23\u02d9q1\u2212(L2c2+ (L3\u2212D)c23) \u02d9q1\uf8f6\uf8f8\u21d2T3=12m3\ued79\ued793vc3\ued79\ued792+123\u03c9T33Ic33\u03c93=12m3(E2\u02d9q21+ (L2c2+ (L3\u2212D)c23)2\u02d9q21+L22\u02d9q22+ (L3\u2212D)2( \u02d9q2+ \u02d9q3)2+ 2 (L3\u2212D) (L2c3\u02d9q2\u2212Es23\u02d9q1) ( \u02d9q2+ \u02d9q3)\u22122EL 2s2\u02d9q1\u02d9q2)+12(Ixx,3s223+Iyy,3c223)\u02d9q21+12Izz,3( \u02d9q2+ \u02d9q3)2.Robot inertia matrixFromT=3\u2211i=1Ti=12\u02d9qTB(q)\u02d9q=123\u2211i=13\u2211j=1bij(q) \u02d9qi\u02d9qj,we obtain the elements bijof the symmetric inertia matrix B(q) asb11=Iyy,1+m1A2+Ixx,2s22+(Iyy,2+m2(L2\u2212C)2)c22+m3E2+Ixx,3s223+Iyy,3c223+m3(L2c2+ (L3\u2212D)c23)2b12=\u2212m3E(L2s2+ (L3\u2212D)s23)b13=\u2212m3E(L3\u2212D)s23b21=b12b22=Izz,2+m2(L2\u2212C)2+Izz,3+m3(L3\u2212D)2+m3L22+ 2m3L2(L3\u2212D)c3b23=Izz,3+m3(L3\u2212D)2+m3L2(L3\u2212D)c3b31=b13b32=b23b33=Izz,3+m3(L3\u2212D)2.Minimal parametrizationReorganizing the squares of trigonometric functions, the element b11can be also rewritten asb11=Iyy,1+m1A2+Iyy,2+m2(L2\u2212C)2+Iyy,3+m3(L3\u2212D)2+m3(L22+E2)+(Ixx,2\u2212Iyy,2\u2212m2(L2\u2212C)2\u2212m3L22)s22+(Ixx,3\u2212Iyy,3\u2212m3(L3\u2212D)2)s223+ 2m3L2(L3\u2212D)c2c23.(9)4Using the expression (9) for b11, and introducing constant dynamic coefficients ai(i= 1,..., 8), the inertiamatrixB(q) takes the more compact, linearly parametrized formB(q) =\uf8eb\uf8ec\uf8eda1+a2s22+a3s223+ 2a4c2c23\u2212a7s2\u2212a8s23\u2212a8s23\u2212a7s2\u2212a8s23 a5+ 2a4c3a6+a4c3\u2212a8s23 a6+a4c3a6\uf8f6\uf8f7\uf8f8. (10)Note that the most notable simpli\ufb01cation occurs when E= 0. In this case, it follows that a7=a8= 0 andthe inertia matrix becomes block diagonal.", "robot": "3R", "tags": []},
 "68": {"file": "Robotics2_Midterm_Test_2016-17_17.03.29.pdf", "date": "17-03-29", "num_ex": 1, "exam": "robo2", "question": "When the Jacobian J(q) is am\u00d7nmatrix with full row rank m, its weighted pseudoinverse J#W(q) takesthe explicit formJ#W(q) =W\u22121JT(q)(J(q)W\u22121JT(q))\u22121, (3)whereWis an\u00d7n, symmetric, and positive de\ufb01nite matrix. The matrix J#Win (3) satis\ufb01es three ofthe four identities that uniquely de\ufb01ne a pseudoinverse. Prove that the weighted pseudoinverse takes thefollowing more general form, which holds true even when the Jacobian J(q) loses rank:J#W(q) =W\u22121/2(J(q)W\u22121/2)#. (4)1", "solution": "One needs to verify that the expression in (4) satis\ufb01es the three identities (dropping dependency on q):(i)JJ#WJ=J, (ii)J#WJJ#W=J#W, (iii)(JJ#W)T=JJ#W.For (i), using the similar property ( i) of the pseudoinverse of JW\u22121/2,JJ#WJ=J(W\u22121/2(JW\u22121/2)#)J=J(W\u22121/2(JW\u22121/2)#)J\u00b7(W\u22121/2W1/2)=(JW\u22121/2(JW\u22121/2)#JW\u22121/2)W1/2=(JW\u22121/2)W1/2=J.For (ii), using the property ( ii) in the de\ufb01nition of the pseudoinverse of JW\u22121/2,J#WJJ#W=(W\u22121/2(JW\u22121/2)#)J(W\u22121/2(JW\u22121/2)#)=W\u22121/2((JW\u22121/2)#JW\u22121/2(JW\u22121/2)#)=W\u22121/2(JW\u22121/2)#=J#W.Finally for ( iii), the symmetry of the matrixJJ#W=J(W\u22121/2(JW\u22121/2)#)=(JW\u22121/2)(JW\u22121/2)#follows from the same property of symmetry holding for the pseudoinverse of JW\u22121/2.", "robot": "unknown", "tags": []},
 "69": {"file": "Robotics2_Midterm_Test_2016-17_17.03.29.pdf", "date": "17-03-29", "num_ex": 2, "exam": "robo2", "question": "Consider a 4R planar robot with all links of equal length \u2113= 0.5 [m]. The robot is stretched along the x0axis, in the DH con\ufb01guration q=0. The end-effector of the robot should execute an instantaneous linearvelocityv= (0 10 )T[m/s]. The joint velocities are bounded as |\u02d9qi|\u2264Vi,i= 1,..., 4, withV1= 4,V2= 2, andV3=V4= 1 [rad/s]. Find a feasible joint velocity \u02d9q\u2208R4that executes the given Cartesiantask, either as such or in a scaled way, while satisfying the hard bounds on joint velocity. Scale the taskvelocityvonly if strictly needed. A solution with a lower norm is preferred.Hint: The following useful expressions hold for the pseudoinverse of a block matrix A(with a submatrixOof zeros) and of a vector u\u0338=0:A=(B O)\u21d2A#=(B#OT),A=(BO)\u21d2A#=(B#OT), (5)u\u2208Rn\u21d2u#=(uTu)\u22121uT=uT\u2225u\u22252,(uT)#=u\u2225u\u22252. (6)", "solution": "The task Jacobian of the planar 4R robot is given byJ(q) =(\u2212\u2113(s1+s12+s123+s1234)\u2212\u2113(s12+s123+s1234)\u2212\u2113(s123+s1234)\u2212\u2113s1234\u2113(c1+c12+c123+c1234)\u2113(c12+c123+c1234)\u2113(c123+c1234)\u2113c1234)(11)withv=J(q)\u02d9q,v\u2208R2, \u02d9q\u2208R4.Whenq=0and for\u2113= 0.5 [m], the Jacobian becomesJ:=J(0) =(0 0 0 02 1.5 1 0.5)and is clearly not full rank. However, the desired task velocity lies in the range of J,v=(010)\u2208R{J}=\u03b1(01),5so that it will be realizable at least in direction, possibly in a scaled form in case the joint velocity boundscannot be satis\ufb01ed.Looking for a minimum norm joint velocity, to start with, we derive \ufb01rst the pseudoinverse solution. Usingthe hints in the text, it is easy to compute the pseudoinverse of Jwithout resorting to a SVD. We have\u02d9qPS=J#v=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed027.501.57.5017.500.57.5\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8(010)=\uf8eb\uf8ec\uf8ec\uf8ed2.66672.00001.33330.6667\uf8f6\uf8f7\uf8f7\uf8f8[rad/s].The third joint velocity violates the maximum bound, \u02d9 qPS,3= 1.3333>1 =V3, so this is not a feasiblesolution. Thus, we search for an equivalent but feasible solution by using the SNS (Saturation in the NullSpace) method, which is particularly simple to apply here.In step 1 of the SNS method, we saturate the (single) overdriven joint by setting \u02d9 q3=V3= 1 [rad/s]. Then,the original task is modi\ufb01ed by removing the saturated contribution of the third joint velocity (discardingthe associated column of J). We rewrite this asv1=v\u2212J3V3=(010)\u2212(01)=(09)=(0 0 02 1.5 0.5)\uf8eb\uf8ed\u02d9q1\u02d9q2\u02d9q4\uf8f6\uf8f8=J\u22123\u02d9q\u22123,whereJ\u2212iis the Jacobian obtained by deleting the ith column and, similarly, \u02d9q\u2212iis the vector of jointvelocity without the ith component. We recompute next the contribution of the remaining active joints,by pseudoinverting the J\u22123matrix for the modi\ufb01ed task. We obtain\u02d9qPS\u22123=J#\u22123v1=\uf8eb\uf8ec\uf8ed026.501.56.500.56.5\uf8f6\uf8f7\uf8f8(09)=\uf8eb\uf8ed2.76922.07690.6923\uf8f6\uf8f8[rad/s], (with the additional \u02d9 q3= 1 =V3).The second joint velocity violates the maximum bound, \u02d9 qPS\u22123,2= 2.0769>2 =V2, so this is not yet afeasible solution and we proceed with the SNS method.In step 2, we saturate also the second overdriven joint by setting \u02d9 q2=V2= 2 [rad/s]. The original task ismodi\ufb01ed by removing both saturated contributions of the second and third joint velocities (discarding thetwo associated columns of J). We rewrite this asv2=v\u2212J2V2\u2212J3V3=(010)\u2212(03)\u2212(01)=(06)=(0 02 0.5)(\u02d9q1\u02d9q4)=J\u221223\u02d9q\u221223,with obvious notation. We recompute next the contribution of the remaining active joints, by pseudoin-verting the (now square, but still singular) J\u221223matrix for the modi\ufb01ed task. We obtain\u02d9qPS\u221223=J#\u221223v2=(024.2500.54.25)(06)=(2.82350.7059)[rad/s],(with \u02d9q2= 2 =V2, \u02d9q3= 1 =V3).All bounds are now satis\ufb01ed and the obtained joint velocity is feasible. Recomposing the complete jointvelocity vector, we have the solution\u02d9q\u2217=\uf8eb\uf8ec\uf8ec\uf8ed2.82352.00001.00000.7059\uf8f6\uf8f7\uf8f7\uf8f8[rad/s], withJ\u02d9q\u2217=vand\u2225\u02d9q\u2217\u2225= 3.6702.Therefore, there was no need to scale the original task velocity vin order to \ufb01nd a feasible joint velocitysolution. Note that the solution \u02d9q\u2217can be rewritten in the general form\u02d9q\u2217= (JW)#v+(I\u2212(JW)#J)\u02d9qN,6withW= diag{1,0,0,1}(the selected active joints) ,\u02d9qN=\uf8eb\uf8ec\uf8ec\uf8ed0V2V30\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ed0210\uf8f6\uf8f7\uf8f7\uf8f8(the saturated joint velocities) ,which explains also the name given to the method. Indeed, this solution is not unique. However, theSNS method (actually a variant of it, Opt-SNS, which is not needed in this simple case) guarantees alsothat a feasible minimum norm solution is obtained. For example, another feasible solution is obtained bysaturating the \ufb01rst joint velocity to its maximum value ( \u02d9 q1=V1= 4 [rad/s]) and adjusting the other threejoint velocities accordingly. We have\u02d9qPS\u22121=J#\u22121(v\u2212J1V1) =\uf8eb\uf8ec\uf8ed01.53.5013.500.53.5\uf8f6\uf8f7\uf8f8(02)=\uf8eb\uf8ed0.85710.57140.2857\uf8f6\uf8f8[rad/s], (with \u02d9q1= 4 =V1).The complete solution \u02d9q\u22c4is feasible, but has a larger norm than the SNS solution \u02d9q\u2217:\u02d9q\u22c4=\uf8eb\uf8ec\uf8ec\uf8ed4.00000.85710.57140.2857\uf8f6\uf8f7\uf8f7\uf8f8[rad/s], withJ\u02d9q\u22c4=vand\u2225\u02d9q\u22c4\u2225= 4.1404.", "robot": "4R", "tags": ["planar"]},
 "70": {"file": "Robotics2_Midterm_Test_2016-17_17.03.29.pdf", "date": "17-03-29", "num_ex": 3, "exam": "robo2", "question": "Consider a 3R planar robot with links of equal length \u2113= 1 [m]. The primary task for this robot isto execute an instantaneous Cartesian velocity v\u2208R2with its end-effector. Denote the associated taskJacobian asJ(q).\u2022When the robot is in the con\ufb01guration q0=(\u03c0/2\u03c0/3\u22122\u03c0/3)T, use the Reduced Gradient(RG) method to determine the joint velocity \u02d9q\u2208R3that realizes a desired Cartesian velocityv=(1\u2212\u221a3)T[m/s] while maximizing the objective functionH(q) = sin2q2+ sin2q3. (7)\u2022As an auxiliary task, the robot should move so as to always keep the position p2= (x2,y2) of theendpoint of its second link on the circle de\ufb01ned byx22+ (y2\u22121.5)2= 0.75. (8)Determine the Jacobian Ja(q) associated to this auxiliary task. When the robot is in the con\ufb01gu-rationq0de\ufb01ned above, is the robot in an algorithmic singularity? Can the two requested primaryand auxiliary tasks be executed at the same time?", "solution": "Reduced GradientThe Jacobian of the primary task is similar to that of the previous exercise, see (11)J(q) =(\u2212\u2113(s1+s12+s123)\u2212\u2113(s12+s123)\u2212\u2113s123\u2113(c1+c12+c123)\u2113(c12+c123)\u2113c123). (12)When evaluated at q=q0=(\u03c0/2\u03c0/3\u22122\u03c0/3)Tand for\u2113= 1 [m], the Jacobian (12) becomesJ:=J(q0) =(\u22122\u22121\u22120.50 0\u221a3/2)and is clearly full row rank. However, for the purpose of designing a RG solution, we need to extractfromJa non-singular 2\u00d72 submatrixJa, and not every selection will work. In fact, the three possiblealternatives (i.e., deleting respectively column 1, 2, or 3) yielddetJ\u22121=\u2212.8660, detJ\u22122=\u22121.7321, detJ\u22123= 0 (singular!) .We will choose as Jathe minor with the largest determinant (presumably, the best conditioned solution).Thus,qa= (q1,q3),qb=q2. Accordingly, after a reordering of variables obtained by the unitary matrixT(withT\u22121=TT)T=\uf8eb\uf8ec\uf8ed1 0 00 0 10 1 0\uf8f6\uf8f7\uf8f8,q\u2192T\u02d9q=\uf8eb\uf8ed\u02d9q1\u02d9q3\u02d9q2\uf8f6\uf8f8=(\u02d9qa\u02d9qb),J\u2192JT=(J1J3J2)=(JaJb),we haveJa=(\u22122\u22120.50\u221a3/2)\u21d2J\u22121a=(\u22120.5\u22120.28870 1.1547),Jb=(\u221210).7The gradient of the objective function Hin (7) evaluated at q=q0is\u2207qH(q) =\uf8eb\uf8ed02 sinq2cosq22 sinq3cosq3\uf8f6\uf8f8\u21d2 \u2207qH:=\u2207qH(q0) =\uf8eb\uf8ed00.86600.8660\uf8f6\uf8f8.The reduced gradient is thus\u2207qbH\u2032:=\u2207qbH\u2032(q0) =(\u2212(J\u22121aJb)T1)T\u2207qH=(\u22120.5 0 1)\uf8eb\uf8ed00.86600.8660\uf8f6\uf8f8= 0.8660.The solution to the \ufb01rst item is thus\u02d9qRG=TT(\u02d9qa\u02d9qb)=TT(J\u22121a(v\u2212Jb\u2207qbH\u2032)\u2207qbH\u2032)=\uf8eb\uf8ed\u22120.43300.8660\u22122.0000\uf8f6\uf8f8[rad/s].Task augmentationWe consider next the auxiliary task of keeping the endpoint of the second robot link on the circle (8). Theendpoint position isp2=(x2y2)=(\u2113(c1+c12)\u2113(s1+s12))and its associated Jacobian isJ2(q) =\u2202p2(q)\u2202q=(\u2212\u2113(s1+s12)\u2212\u2113s120\u2113(c1+c12)\u2113c12 0). (13)We \ufb01rst note that when the robot is in the con\ufb01guration q0=(\u03c0/2\u03c0/3\u22122\u03c0/3)T, the position p2satis\ufb01es already the constraint (8), see Fig. 2. Thus, the auxiliary task should constrain the joint velocitiesso thatp2(when moving or not) will remain on the assigned circle.y0 v = (1, \u02b5\u02fd3) q1 = !/2 q2 = !/3 q3 = \u02b52!/3 R = \u02fd0.75 x0 p2 = (\u02b5\u02fd0.75,1.5) (xc, yc)  = (0, 1.5)Figure 2: The primary task (in red) and the auxiliary task (in green) for the 3R planar robot.Differentiating (8) with respect to time yields2x2\u02d9x2+ 2(y2\u22121.5) \u02d9y2= 0.8Rearranging this equation so as to isolate the velocity \u02d9p2and using (13) leads to(2x22(y2\u22121.5))(\u02d9x2\u02d9y2)=(2x22(y2\u22121.5))J2(q)\u02d9q= 0.The auxiliary task Jacobian is then the 1 \u00d73 row vectorJa(q) =(2x22(y2\u22121.5))J2(q) =(2\u2113(c1+c12) 2(\u2113(s1+s12)\u22121.5))(\u2212\u2113(s1+s12)\u2212\u2113s120\u2113(c1+c12)\u2113c12 0)=(\u22123\u2113(c1+c12)\u22122\u21132s2\u22123\u2113c120).(14)Augmenting the primary task Jacobian (12) with the auxiliary task Jacobian (14) leads to a square, 3 \u00d73extended JacobianJe(q) and to an extended task vector ve\u2208R3:Je(q) =(J(q)Ja(q))=\uf8eb\uf8ec\uf8ed\u2212\u2113(s1+s12+s123)\u2212\u2113(s12+s123)\u2212\u2113s123\u2113(c1+c12+c123)\u2113(c12+c123)\u2113c123\u22123\u2113(c1+c12)\u22122\u21132s2\u22123\u2113c12 0\uf8f6\uf8f7\uf8f8,ve=(v0),Je(q)\u02d9q=ve.At the con\ufb01guration q0, using also \u2113= 1, we haveJe:=Je(q0) =\uf8eb\uf8ec\uf8ed\u22122\u22121\u22120.50 0 0 .86602.5981 0.8660 0\uf8f6\uf8f7\uf8f8. (15)It is easy to see that q0is not a singularity for the extended task, and thus in particular not an algorithmicsingularity. In fact,rank(J) = 2, rank(Ja) = 1, and rank(Je) = 3 = 2 + 1 .Therefore, in this con\ufb01guration the robot can realize any generic extended task velocity ve\u2208R3(inparticular, with an arbitrary top part v\u2208R2). Therefore, the joint velocity\u02d9q\u2020=J\u22121eve=J\u22121e\uf8eb\uf8ec\uf8ed1\u2212\u221a30\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed00\u22122\uf8f6\uf8f7\uf8f8[rad/s]will instantaneously realize both tasks at the same time. For the particular numerical value assigned asv, the simple rotation of the third link around its joint axis will realize the primary task. In this case,the endpoint of the second link will remain at rest, thus satisfying in a trivial way the auxiliary task. Ingeneral, with a different desired value of v, all robot joints will move so as to realize the extended task,instantaneously keeping the endpoint of the second link on the circle (i.e., its velocity will be tangential tothe circle in the current position). For instance,\u02d9q\u2020\u2032=J\u22121ev\u2032e=J\u22121e\uf8eb\uf8ec\uf8ed110\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed1.5774\u22124.73211.1547\uf8f6\uf8f7\uf8f8[rad/s].", "robot": "3R", "tags": ["planar"]},
 "71": {"file": "Robotics2_Midterm_Test_2016-17_17.03.29.pdf", "date": "17-03-29", "num_ex": 4, "exam": "robo2", "question": "Consider a 2R planar robot with the nominal kinematics expressed by the DH parameters in Tab. 1.i\u03b1idiai\u03b8i1 0 0L1q12 0 0L2q2Table 1: Nominal kinematic parameters of a 2R planar robot.In order to improve the robot accuracy, we would like to perform a large number of calibration experimentsin which the robot end-effector position p\u2208R2(in the plane of motion) is measured by an external lasersystem. To recover the residual errors of the nominal direct kinematics with respect to the externalmeasurements, it is assumed that we require only the \ufb01ne tuning of the parameters a\u2208R2and of theencoder measurements \u03b8\u2208R2, whose adjustments will be performed simultaneously. What will be theexpression of the 2 \u00d74 regressor matrix \u03a6for a single calibration experiment?[270 minutes (4.5 hours); open books, but no computer or smartphone]2", "solution": "For the direct kinematics, using the homogeneous transformations de\ufb01ned through Tab. 1, we obtain0p0,2=0A1(q1)1p1,2=0A1(q1)(1A2(q2)2p2,2)=0A1(q1)\uf8eb\uf8ec\uf8ec\uf8edc2\u2212s20a2c2s2c20a2s20 0 1 00 0 0 1\uf8f6\uf8f7\uf8f7\uf8f8\uf8eb\uf8ec\uf8ec\uf8ed0001\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8edc1\u2212s10a1c1s1c10a1s10 0 1 00 0 0 1\uf8f6\uf8f7\uf8f7\uf8f8\uf8eb\uf8ec\uf8ec\uf8eda2c2a2s201\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8eda1c1+a2c12a1s1+a2s1201\uf8f6\uf8f7\uf8f7\uf8f8.9The planar position p\u2208R2is given by the ( x,y) components extracted from the position vector0p0,2.Thus, fromp=(a1c1+a2c12a1s1+a2s12)=f(a,\u03b8)we obtainJa=\u2202f\u2202a=(c1c12s1s12),J\u03b8=\u2202f\u2202\u03b8=(\u2212a1s1\u2212a2s12\u2212a2s12a1c1+a2c12a2c12).The regressor equation is then\u2206p=Ja\u2206a+J\u03b8\u2206\u03b8=\u03a6\u2206\u03c6, \u2206p=pm\u2212p=pm\u2212f(an,\u03b8n),with\u2206\u03c6=(\u2206a\u2206\u03b8)\u2208R4, \u03a6=(Ja(\u03b8)J\u03b8(a,\u03b8))a=an,\u03b8=\u03b8n,an=(L1L2),\u03b8n=(q1q2).", "robot": "2R", "tags": ["planar"]},
 "72": {"file": "Robotics2_21.09.10.pdf", "date": "21-09-10", "num_ex": 0, "exam": "robo2", "question": "Consider the planar 3R robot in Fig. 1. The three links have all equal length L. The robotis controlled by a joint acceleration command u=\u00a8q\u2208R3. The input commands are boundedcomponentwise as |ui|\u2264Umax,i , fori= 1,2,3. Moreover, let p=f(q)\u2208R2be the end-effectorposition. At a given instant t=t0, the robot is in a generic state ( q(t0),\u02d9q(t0)) = (q0,\u02d9q0)\u2208R6, with\u02d9q0\u0338\u2208N{J(q0)}. Which feasible command u0=u(t0) would you apply to stop as fast as possiblethe Cartesian motion of the end-effector, while keeping its velocity aligned with the direction of\u02d9p0=\u02d9p(t0)\u0338=0? If there are multiple feasible solutions, provide the one having minimum norm.Illustrate your \ufb01ndings with a numerical example, providing the values of q0,\u02d9q0,u0, and of theresulting acceleration \u00a8p0=\u00a8p(t0).x0q1q2q3y0PLLLFigure 1: A planar 3R robot.", "solution": "The second-order differential kinematics of a robot with njoints performing a m-dimensional task(withm\u2264n) is\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=J(q)u+h(q,\u02d9q), (1)with vectorh\u2208Rmbeing quadratic in \u02d9q. The joint acceleration \u00a8q\u2208Rnis taken as the inputcommandu.At timet=t0, the task velocity is \u02d9p0=\u02d9p(t0) =J(q(t0))\u02d9q(t0) =J0\u02d9q0, which is necessarilydifferent from zero since one should choose a \u02d9q0\u0338\u2208N{J0}. We impose to the end-effector anacceleration \u00a8p0(actually, a deceleration) that is aligned with \u02d9p0and whose components are oppositein sign to the associated velocity components. Therefore, we set\u00a8p0=\u2212\u03bb\u02d9p0=\u2212\u03bbJ0\u02d9q0, with\u03bb\u22650,and choose the largest possible (non-negative) value for the scalar \u03bbsuch that the minimum normjoint acceleration solution u0to (1) is feasible. It is thenu0=J#0(\u00a8p0\u2212h0) =\u2212\u03bbJ#0J0\u02d9q0\u2212J#0\u02d9J0\u02d9q0. (2)De\ufb01ne now the two n-dimensional vectors1a=\u2212J#0J0\u02d9q0,b=\u2212J#0\u02d9J0\u02d9q0, (3)and organize the bounds on the commands in vector form asUmax=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edUmax, 1Umax, 2...Umax,n\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The problem is formulated as a simple linear program (LP) as follows:max\u03bb s.t.\u2212Umax\u2264a\u03bb+b\u2264Umax, \u03bb\u22650, (4)where vector inequalities are to be considered component-wise. Note \ufb01rst that a\u0338=0(althoughsome of its components may possibly vanish). In fact, \u02d9p0=J0\u02d9q0\u0338=0is a realizable velocity, asgenerated by \u02d9q0\u0338=0; thus, the pseudoinverse of such task velocity cannot produce a zero jointvelocity. The feasible set may be empty, in which case no instantaneous acceleration solutionexists. Moreover, if the optimal value of problem (4) is \u03bb= 0, the end-effector will not be able toinstantaneously decelerate; the problem has again no actual solution at t=t0. Nonetheless, it isconvenient to keep the value \u03bb= 0 in the feasible set, so as to guarantee the existence of a solutionto problem (4) whenever its (closed) feasible set is non-empty.1One can also de\ufb01ne the two vectors aandbwith a positive sign in front. Being the bounds on the commandusymmetric, the linear inequalities in (4) would remain the same.2The optimal solution \u03bb\u2217to (4) is easily found. For i= 1,...,n , let\u03bbi=\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3\u2212\u221e ifbi<\u2212Umax,i andai\u22640,Umax,i\u2212biaiifbi<\u2212Umax,i andai>0,max{\u2212Umax,i +biai,Umax,i\u2212biai}ifUmax,i\u2264bi\u2264Umax,i andai\u0338= 0,+\u221e ifUmax,i\u2264bi\u2264Umax,i andai= 0,\u2212Umax,i +biaiifbi>Umax,i andai<0,\u2212\u221e ifbi>Umax,i andai\u22650.(5)We compute then\u03bb\u2217= mini=1,...,n\u03bbi, (6)with the following conclusions:\u03bb\u2217>0\u21d2\u03bb\u2217is the optimal solution, with a feasible acceleration u\u22170=a\u03bb\u2217+b;\u03bb\u2217= 0\u21d2the resulting joint acceleration is u0=\u2212J#0\u02d9J0\u02d9q0, yielding \u00a8p0=0;\u03bb\u2217=\u2212\u221e \u21d2 there is no solution to the problem (the feasible set is empty).In the optimal solution u\u22170, at least one joint acceleration will saturate one of its bounds. When\u03bb\u2217= 0, the end-effector will keep instantaneously the same velocity \u02d9p0, with no deceleration. Whenthere is no solution to the problem, the end-effector will no longer be able to move exactly alongthe direction of \u02d9p0(in either way). Some of the various possible situations for a generic singlecomponent \u03bbiare illustrated in Fig. 2. Figure 3 shows geometrically some resulting cases for u\u22170withn= 2 components (thus, when m= 1).Umax,i\u2013Umax,i0biuiai>0ai< 0\ud835\udf06'=$%&',)*+),)>0ai=0 \u21d2\ud835\udf06'=+\u221e\ud835\udf06'=\u2212$%&',)3+),)>0Umax,i\u2013Umax,i0bi=uiai<0ai> 0\ud835\udf06'=\u2212$%&',)3+),)>0ai=0 \u21d2\ud835\udf06'=+\u221e\ud835\udf06'=0Umax,i\u2013Umax,i0biuiai>0ai\u22640\ud835\udf06'=$%&',)*+),)>0\ud835\udf06'=\u2212\u221eFigure 2: Examples of evaluation of \u03bbifor a generic single component.3Umax,2\u2013Umax,2Umax,1\u2013Umax,10u1u2bababa(with a1= 0, a2<0)u0*u0*no solution!bau0*Figure 3: Examples of existence or not of a solution u\u22170and its geometrical evaluation when n= 2.For the planar 3R robot of Fig. 1, we have n= 3,m= 2, and the terms in (1) are the 2 \u00d73 taskJacobianJ(q) =\u2202f(q)\u2202q=L(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123), (7)its time derivative\u02d9J(q) =\u2212L\u00b7(c1\u02d9q1+c12( \u02d9q1+ \u02d9q2) +c123( \u02d9q1+ \u02d9q2+ \u02d9q3)c12( \u02d9q1+ \u02d9q2) +c123( \u02d9q1+ \u02d9q2+ \u02d9q3)c123( \u02d9q1+ \u02d9q2+ \u02d9q3)s1\u02d9q1+s12( \u02d9q1+ \u02d9q2) +s123( \u02d9q1+ \u02d9q2+ \u02d9q3)s12( \u02d9q1+ \u02d9q2) +s123( \u02d9q1+ \u02d9q2+ \u02d9q3)s123( \u02d9q1+ \u02d9q2+ \u02d9q3)),and the product of matrix \u02d9Jby the joint velocity \u02d9qh(q,\u02d9q)=\u2212L((c1+c12+c123) \u02d9q21+ 2 ( c12+c123) \u02d9q1\u02d9q2+ 2c123\u02d9q1\u02d9q3+ (c12+c123) \u02d9q22+ 2c123\u02d9q2\u02d9q3+c123\u02d9q23(s1+s12+s123) \u02d9q21+ 2 ( s12+s123) \u02d9q1\u02d9q2+ 2s123\u02d9q1\u02d9q3+ (s12+s123) \u02d9q22+ 2s123\u02d9q2\u02d9q3+s123\u02d9q23),having used the shorthand notation for trigonometric functions (e.g., c123= cos(q1+q2+q3)).As a \ufb01rst numerical example, set L= 1 [m] for the link lengths and chooseUmax=\uf8eb\uf8ec\uf8ed15\u03c010\u03c010\u03c0\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed47.123931.415931.4159\uf8f6\uf8f7\uf8f8[rad/s2]as values for the (symmetric) bounds for the acceleration commands2. At timet=t0, considerthe robot stateq0=\uf8eb\uf8ec\uf8ed0\u03c0/2\u03c0/2\uf8f6\uf8f7\uf8f8[rad], \u02d9q0=\uf8eb\uf8ec\uf8ed\u03c0/2\u03c0/20\uf8f6\uf8f7\uf8f8[rad/s].2These bounds are the same used in Exercise 1 of the exam of July 12, 2021.4We compute then from the previous formulasJ0=(\u22121\u22121 00\u22121\u22121), \u02d9p0=J0\u02d9q0=(\u2212\u03c0\u2212\u03c0/2)[m/s]and\u02d9J0=(\u03c0/2\u03c0 \u03c0\u2212\u03c0\u2212\u03c00),h0=\u02d9J0\u02d9q0=(3\u03c02/4\u2212\u03c02)=(7.4022\u22129.8696)[m/s2].The pseudoinverse of the task Jacobian isJ#0=JT0(J0JT0)\u22121=\uf8eb\uf8ec\uf8ed\u22122/3 1/3\u22121/3\u22121/31/3\u22122/3\uf8f6\uf8f7\uf8f8.Therefore, from (3) we obtaina=\u2212J#0\u02d9p0=\u2212\uf8eb\uf8ec\uf8ed\u03c0/2\u03c0/20\uf8f6\uf8f7\uf8f8,b=\u2212J#0h0=\uf8eb\uf8ec\uf8ed5\u03c02/6\u2212\u03c02/12\u221211\u03c02/12\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed8.2247\u22120.8225\u22129.0471\uf8f6\uf8f7\uf8f8.None of the components of vector b(related to the Cartesian drift acceleration h0) is outside theacceleration bounds speci\ufb01ed by Umax. As a result, according to the law (5\u20136), an optimal solutioncertainly exists and is given by\u03bb\u2217= 19.4764 [s\u22121]\u21d2u\u22170=\uf8eb\uf8ec\uf8ed\u221222.3688\u221231.4159\u22129.0471\uf8f6\uf8f7\uf8f8[rad/s2]\u21d2 \u00a8p0=(61.186930.5935)[m/s2].As expected, there is at least a component of u\u22170that is saturated (only the second one, at itsnegative lower bound). The obtained task acceleration is \u00a8p0=\u2212\u03bb\u2217\u02d9p0, as expected.To verify further the method, consider now the following joint velocity at time t=t0,\u02d9q0=\uf8eb\uf8ec\uf8ed2\u03c0\u03c0/20\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed6.28321.57080\uf8f6\uf8f7\uf8f8[rad/s],with the \ufb01rst component four times higher than before, all the rest being the same. The changedterms are\u02d9p0=(\u22127.8540\u22121.5708)[m/s], \u02d9J0=(1.5708 7.8540 7.8540\u22127.8540\u22127.8540 0),h0=(22.2066\u221261.6850)[m/s2],and thusa=\uf8eb\uf8ec\uf8ed\u22124.7124\u22123.14161.5708\uf8f6\uf8f7\uf8f8,b=\uf8eb\uf8ec\uf8ed35.3661\u221213.1595\u221248.5256\uf8f6\uf8f7\uf8f8.The component b3of vectorbexceeds now the lover bound \u2212Umax, 3=\u221231.4159 [rad/s2]. However,a3>0 and thus an optimal solution exists. According to the law (5\u20136), we obtain\u03bb\u2217= 5.8112 [s\u22121]\u21d2u\u22170=\uf8eb\uf8ec\uf8ed7.9814\u221231.4159\u221239.3973\uf8f6\uf8f7\uf8f8[rad/s2]\u21d2 \u00a8p0=(45.64119.1282)[m/s2].5As before, the second component of u\u22170is saturated at its negative lower bound. The rate ofdecrease of the Cartesian velocity is now slower3, because the optimal \u03bb\u2217is also smaller and therate of decrease of \u00a8p0depends on \u03bb\u2217only. In fact, it is immediate to see that\u00a8p=\u2212\u03bb\u02d9p\u21d2 \u02d9p(t) =e\u2212\u03bb(t\u2212t0)\u02d9p(t0)\u2243(1\u2212\u03bbdt)\u02d9p0\u21d2\u02d9p(t)\u2212\u02d9p0dt\u2243\u2212\u03bb\u02d9p0,for a sufficiently small dt=t\u2212t0>0.As a last example, we double the joint velocity at time t=t0with respect to the \ufb01rst case,\u02d9q0=\uf8eb\uf8ec\uf8ed\u03c0\u03c00\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed3.14163.14160\uf8f6\uf8f7\uf8f8[rad/s],all the rest being again the same4. The changed terms are now\u02d9p0=(\u22126.2832\u22123.1416)[m/s], \u02d9J0=(3.1416 6.2832 6.2832\u22126.2832\u22126.2832 0),h0=(29.6088\u221239.4784)[m/s2],anda=\uf8eb\uf8ec\uf8ed\u22123.1416\u22123.14160\uf8f6\uf8f7\uf8f8,b=\uf8eb\uf8ec\uf8ed32.8987\u22123.2899\u221236.1885\uf8f6\uf8f7\uf8f8.Again, the third component of bexceeds its lower bound \u2212Umax, 3=\u221231.4159 [rad/s2]. However,sincea3= 0, no solution exists in this case. In fact, according to the law (5\u20136), it is\u03bb1= 25.4720, \u03bb 2= 8.9528,but\u03bb3=\u2212\u221e \u21d2 \u03bb\u2217=\u2212\u221e.", "robot": "3R", "tags": ["planar"]},
 "73": {"file": "Robotics2_21.09.10.pdf", "date": "21-09-10", "num_ex": 1, "exam": "robo2", "question": "For the same robot in Fig. 1, assume that the three links of equal length L= 0.5 [m] are all modeledas thin rods with a uniformly distributed mass of m= 5 [kg]. Provide the eigenvalues of the 2 \u00d72Cartesian inertia matrix Mp, when the robot is in the regular con\ufb01guration q\u2217= (\u03c0/2,\u03c0/2,0).Hint: Use an equivalent expression for the Cartesian inertia matrix Mp=J\u2212TMJ\u22121that appliesboth to square and non-square Jacobians under the same full rank assumption .", "solution": "Note \ufb01rst that the m\u00d7mCartesian inertia matrix of a robot with a m\u00d7nJacobianJ(q) thathas full rank mcan always be written as5Mp(q) =(J(q)M\u22121(q)JT(q))\u22121, (8)whereM(q)>0 is then\u00d7ninertia matrix in the con\ufb01guration space. The derivation of (8) forthe casem<n (redundant robot) with a full rank Jacobian is simple. Let the robot dynamics injoint space beM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4, (9)and the second-order differential kinematics to the Cartesian space be\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q. (10)Extracting \u00a8qfrom (9), using the transformation of generalized forces \u03c4=JT(q)F, and substitutingin (10) yields\u00a8p=J(q)M\u22121(q)(JT(q)F\u2212c(q,\u02d9q)\u2212g(q))+\u02d9J(q)\u02d9q=(J(q)M\u22121(q)JT(q))F\u2212J(q)M\u22121(q)(c(q,\u02d9q) +g(q))+\u02d9J(q)\u02d9q3This happens independently from the value of \u2225\u00a8p0\u2225, which is smaller here than in the \ufb01rst case.4This case coincides with the \ufb01rst one considered in Exercise 1 of the exam of July 12, 2021.5The expression (8) appears also in the lecture slides on robot redundancy (block 2, part 2, p. 10) and on collisiondetection and reaction (block 19, p. 40).6orMp(q)\u00a8p+cp(q,\u02d9q) +gp(q) =F, (11)withMp(q) as in (8) andcp(q,\u02d9q) =Mp(q)(J(q)M\u22121(q)c(q,\u02d9q)\u2212\u02d9J(q)\u02d9q),gp(q) =Mp(q)J(q)M\u22121(q)g(q).Indeed, the dynamic description (11) is incomplete when m < n and should be complementedby additional n\u2212mdynamic equations (e.g., judiciously extracted from the original completedynamics (9) in the joint space). On the other hand, when the Jacobian is square ( m=n) andnonsingular, the terms in the (now complete) Cartesian dynamic model (11) simplify toMp(q) =J\u2212T(q)M(q)J\u22121(q)andcp(q,\u02d9q) =J\u2212T(q)c(q,\u02d9q)\u2212Mp(q)\u02d9J(q)\u02d9q,gp(q) =J\u2212T(q)g(q).The Jacobian of the planar 3R robot in Fig. 1 is given by (7). The inertia matrix M(q) is extractedfrom the kinetic energy of the three links of the robot. Under the assumption of equal uniformthin rods, the center of mass of each link is at dci=L/2 on its kinematic axis and the barycentralinertia (around the axis normal to the plane) equals Ii= (1/12)mL2. For the \ufb01rst link, we havethenT1=12(md2c1+I1)\u02d9q21=12(m(L2)2+112mL2)\u02d9q21=12mL23\u02d9q21.For the second link, we havepc2=L\uf8eb\uf8ec\uf8edc1+12c12s1+12s12\uf8f6\uf8f7\uf8f8\u21d2vc2=\u02d9pc2=L\uf8eb\uf8ec\uf8ed\u2212s1\u02d9q1\u221212s12( \u02d9q1+ \u02d9q2)c1\u02d9q1+12c12( \u02d9q1+ \u02d9q2)\uf8f6\uf8f7\uf8f8,and thusT2=12(m\u2225vc2\u22252+I2( \u02d9q1+ \u02d9q2)2)=12(mL2(\u02d9q21+14( \u02d9q1+ \u02d9q2)2+c2\u02d9q1( \u02d9q1+ \u02d9q2))+112mL2( \u02d9q1+ \u02d9q2)2)=12mL2((43+c2)\u02d9q21+(23+c2)\u02d9q1\u02d9q2+13\u02d9q22).Finally, for the third linkpc3=L\uf8eb\uf8ec\uf8edc1+c12+12c123s1+s12+12s123\uf8f6\uf8f7\uf8f8\u21d2vc3=L\uf8eb\uf8ec\uf8ed\u2212(s1\u02d9q1+s12( \u02d9q1+ \u02d9q2) +12s123( \u02d9q1+ \u02d9q2+ \u02d9q3))c1\u02d9q1+c12( \u02d9q1+ \u02d9q2) +12c123( \u02d9q1+ \u02d9q2+ \u02d9q3)\uf8f6\uf8f7\uf8f8,7and soT3=12(m\u2225vc3\u22252+I3( \u02d9q1+ \u02d9q2+ \u02d9q3)2)=12(mL2(\u02d9q21+ ( \u02d9q1+ \u02d9q2)2+14( \u02d9q1+ \u02d9q2+ \u02d9q3)2+ 2c2\u02d9q1( \u02d9q1+ \u02d9q2)+c23\u02d9q1( \u02d9q1+ \u02d9q2+ \u02d9q3) +c3( \u02d9q1+ \u02d9q2) ( \u02d9q1+ \u02d9q2+ \u02d9q3))+112mL2( \u02d9q1+ \u02d9q2+ \u02d9q3)2)=12mL2((73+ 2c2+c23+c3)\u02d9q21+(83+ 2c2+c23+ 2c3)\u02d9q1\u02d9q2+(23+c23+c3)\u02d9q1\u02d9q3+(43+c3)\u02d9q22+(23+c3)\u02d9q2\u02d9q3+13\u02d9q23)..Therefore, fromT=T1+T2+T3=12\u02d9qTM(q)\u02d9qwe obtainM(q) =mL2\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed4 + 3c2+c23+c353+32c2+12c23+c313+12c23+12c3...53+c313+12c3symm \u00b7\u00b7\u00b713\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8. (12)SinceL= 0.5 [m] andmL2= 5\u00b70.52= 1.25 [kgm2], evaluating eqs. (7) and (12) at the con\ufb01gurationq\u2217= (\u03c0/2,\u03c0/2,0) gives:J=J(q\u2217) =(\u22120.5 0 0\u22121\u22121\u22120.5),M=M(q\u2217) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed2541032524103103252425242524512\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\u2243\uf8eb\uf8ec\uf8ed6.25 3.3333 1.04173.3333 3.3333 1.04171.0417 1.0417 0.4167\uf8f6\uf8f7\uf8f8.The Cartesian inertia matrix in (8) isMp=Mp(q\u2217) =(35/3 00 35/24)\u2243(11.6667 00 1.4583).Its two eigenvalues are then\u03bb1= 11.6667, \u03bb 2= 1.4583.Note that the Cartesian inertia is fully decoupled in the con\ufb01guration q\u2217. This is by no means thegeneric case, although the matrix Mp(q) is always symmetric, and also positive de\ufb01nite as long asthe Jacobian is full rank (its eigenvalues are always real, and strictly positive outside singularities).", "robot": "unknown", "tags": ["planar"]},
 "74": {"file": "Robotics2_21.09.10.pdf", "date": "21-09-10", "num_ex": 2, "exam": "robo2", "question": "The end-effector of a 2-dof Cartesian robot with different link masses m1andm2moves in a verticalplane (x,y) making contact with an environment. There is no force/torque sensor mounted onthe robot. Design an impedance control law that shapes the response between interacting forcesand tracking errors by assigning the same two real, negative and coincident eigenvalues (i.e., in\u2212\u03bb<0) to the closed-loop linear dynamics along the two decoupled directions xandy.[180 minutes (3 hours); open books]1", "solution": "With reference to Fig. 4, the dynamic model of the 2-dof Cartesian robot in contact with a genericenvironment isM\u00a8q+g=\u03c4+F, (13)withM=(m1+m200m2),g=(0m2g0),\u03c4=(\u03c41\u03c42),F=(FxFy),where\u03c4\u2208R2is the control input force at the prismatic joints and F\u2208R2is the contact forceexerted from the environment on the robot end effector.q1y0x0q2g0m1m2\u2295\u2295F\ud835\udf0f#\ud835\udf0f$Figure 4: A 2-dof Cartesian robot making contact with an environment.The desired linear and decoupled impedance model isMd\u00a8e+Dd\u02d9e+Kde=F, (14)wheree=p\u2212pd,p=(xy)=(q1q2),withpd\u2208R2being the desired position of the robot end effector, andMd=(Mdx 00Mdy)>0,Dd=(Ddx 00Ddy)>0,Kd=(Kdx 00Kdy)>0.Since there is no force/torque sensor available, we have to choose necessarily the actual (Cartesian)inertia as desired (apparent) inertia:Md=M\u21d0\u21d2Mdx=m1+m2, Mdy=m2. (15)From (13) and (14), with (15), the required control law is\u03c4=M\u00a8pd+g\u2212Dd\u02d9e\u2212Kde=((m1+m2) \u00a8xdm2\u00a8yd)+(0m2g0)+(Ddx( \u02d9xd\u2212\u02d9x) +Kdx(xd\u2212x)Ddy( \u02d9yd\u2212\u02d9y) +Kdy(yd\u2212y)),(16)9which has the standard form of a PD action with a feedforward acceleration term (if \u00a8pd\u0338=0)and gravity cancellation. For the choice of the gains, we rewrite the impedance model (14), usingagain (15), in the Laplace domain,(Ms2+Dds+Kd)e(s) =F(s),and impose the desired dynamic characteristics between F(s) ande(s) in each Cartesian direction:(Is2+M\u22121Dds+M\u22121Kd)=((s+\u03bb)200 (s+\u03bb)2)=(s2+ 2\u03bbs+\u03bb200s2+ 2\u03bbs+\u03bb2).As a result,Ddx= 2 (m1+m2)\u03bb, Kdx= (m1+m2)\u03bb2,andDdy= 2m2\u03bb, Kdy=m2\u03bb2.", "robot": "2R", "tags": ["vertical"]},
 "75": {"file": "Robotics2_13.07.15.pdf", "date": "13-07-15", "num_ex": 0, "exam": "robo2", "question": "Consider a planar 3R robot on a horizontal plane, having link lengths \u21131,\u21132, and\u21133. Figure 1shows three different situations. In each of them, the robot is subject to:\u2022asingle unknown external force Fi=(FxiFyi)T, of arbitrary direction and intensityin the plane, applied to a point of the \ufb01rst, second, or third link, at a ( possibly, unknown )distance\u2113cifrom the link ibase (with i= 1,2,3, respectively);\u2022an associated known (measured, or computed by a controller) joint torque \u03c4=(\u03c41\u03c42\u03c43)Tthat keeps the robot in a static equilibrium q=(q1q2q3)T, asmeasured by encoders.Figure 1: A planar 3R robot subject to an unknown external force Fiapplied to the \ufb01rst ( i= 1,left), second ( i= 2, center), or third link ( i= 3, right)Analyze for each of the above three generic situations ifandhow:1. one can identify which link is subject to the external force;2. knowing the distance \u2113ciof the application point along the link (which can be obtainedby means of an external camera, a Kinect, or using distributed tactile sensing), one cancompletely estimateFi, e.g., its direction and intensity;3. one can estimate Fiandthe distance \u2113c,iof the application point along the link, withoutany external/extra sensing;4. the presence of gravity (with the robot being in a vertical plane) makes a difference for theabove problems.Verify the analysis for a 3R robot in a horizontal plane, with the numerical data\u21131= 0.5 [m],\u21132= 0.3 [m],\u21133= 0.2 [m],q=(45\u25e6\u221290\u25e660\u25e6)T(in D-H convention) ,and for the following two cases of known equilibrium joint torques:a)\u03c4a=(\u22120.25\u22120.75 0)T[Nm], b)\u03c4b=(0.7585\u22120.2995 0.2000)T[Nm].Estimate the applied external force in case a)andb), respectively. Following the outcome of youranalysis, try to work without any a priori knowledge of the application point of the external force.If a case turns out to be under-determined, choose the application point at the link midpoint .[120 minutes; open books]1", "solution": "In the absence of gravity, the joint torque that balances at an equilibrium qa force applied to apoint along the robot structure having position pc=fc(q) is given by\u03c4=\u2212(\u2202fc\u2202q)TF=\u2212JTc(q)F.Planar forces F\u2208R2are expressed here in the base frame ( x0,y0). From the position of thecontact point pc\u2208R2, we can derive the contact Jacobian associated to a force Fiacting on linkiat a distance \u2113cifrom its base, for i= 1,2,3 (three cases).For a forceF1acting on the \ufb01rst link, with \u2113c1\u2208(0,\u21131]:Jc1=(\u2212\u2113c1sinq10 0\u2113c1cosq10 0).For a forceF2acting on the second link, with \u2113c2\u2208(0,\u21132]:Jc2=(\u2212\u21131sinq1\u2212\u2113c2sin(q1+q2)\u2212\u2113c2sin(q1+q2) 0\u21131cosq1+\u2113c2cos(q1+q2)\u2113c2cos(q1+q2) 0).For a forceF3acting on the third link, with \u2113c3\u2208(0,\u21133]:Jc3=(\u2212\u21131s1\u2212\u21132s12\u2212\u2113c3s123\u2212\u21132s12\u2212\u2113c3s123\u2212\u2113c3s123\u21131c1+\u21132c12+\u2113c3c123\u21132c12+\u2113c3c123\u2113c3c123),where we used the usual compact notation, e.g., s123= sin(q1+q2+q3).In order to have a better insight on the contact forces that are felt at the robot joints, it isconvenient to express these forces in the local frame attached to each link, i.e., according to theirtangential and normal components w.r.t. the geometric link. Since we are dealing with a purelyplanar problem, the planar rotation matrices of interest are0R1=(c1\u2212s1s1c1),0R2=(c12\u2212s12s12c12),0R3=(c123\u2212s123s123c123).we haveFi=0RiiFi\u21d2\u03c4i=\u2212JTci(q)Fi=\u2212JTci(q)0RiiFi=\u2212(0RTiJci(q))TiFi=\u2212iJTci(q)iFi.Once expressed in the local link frame, the contact JacobiansiJci(q) for the considered cases are:1Jc1=0RT1Jc1(q) =(0 0 0\u2113c10 0), always of rank 1;2Jc2=0RT2Jc2(q) =(\u21131s2 0 0\u21131c2+\u2113c2\u2113c20), of rank 2 if and only if|s2|\u0338= 0;3Jc3=0RT3Jc3(q) =(\u21131s23+\u21132s3\u21132s3 0\u21131c23+\u21132c3+\u2113c3\u21132c3+\u2113c3\u2113c3),of rank 2 if and only if s22+s23\u0338= 0.Therefore, we have the following explicit equations at steady state.2For a force1F1=(1F1x1F1y)Tacting on the \ufb01rst link:\u03c41,1=\u2212\u2113c11F1y,\u03c41,2= 0,\u03c41,3= 0.(1)For a force2F2=(2F2x2F2y)Tacting on the second link:\u03c42,1=\u2212\u21131s22F2x\u2212(\u21131c2+\u2113c2)2F2y=\u2212\u21131(s22F2x+c22F2y)+\u03c42,2,\u03c42,2=\u2212\u2113c22F2y,\u03c42,3= 0.(2)For a force3F3=(3F3x3F3y)Tacting on the third link:\u03c43,1=\u2212(\u21131s23+\u21132s3)3F3x\u2212(\u21131c23+\u21132c3+\u2113c3)3F3y=\u2212\u21131(s233F3x+c233F3y)+\u03c43,2,\u03c43,2=\u2212(\u21132s33F3x+ (\u21133c3+\u2113c3)3F3y)=\u2212\u21132(s33F3x+c33F3y)+\u03c43,3,\u03c43,3=\u2212\u2113c33F3y.(3)Inner recursions from the outer to the inner joints have been used to simplify the expressions.Based on the above, the following series of observations can be made.1. Identi\ufb01cation of which link is subject to the contact force is made using the components ofthe joint torque vector \u03c4i, based on the following cascaded (generic) rule:\u03c4i,3=\u03c4i,2= 0\u21d2i= 1, link 1 is involved\u03c4i,3= 0,\u03c4i,2\u0338= 0\u21d2i= 2, link 2 is involvedelse\u21d2i= 3, link 3 is involved.Note that, if a force is applied at the base of link i(corresponding to the exact location ofjointi), it is then attributed to the tip of the previous link i\u22121 (with\u2113c,i\u22121=\u2113i\u22121), since\u2113ci\u0338= 0 by de\ufb01nition.2. Knowledge of the joint torque vector \u03c4iat an equilibrium con\ufb01guration qis obtained in oneof the following alternative, but equivalent ways (however, note the signs!):\u2022from the static measurement by a joint torque sensor, \u03c4m=\u2212JTc(q)Fc=\u03c4i;\u2022as the steady-state value of the residual vector rgenerated in response to a collisionwith a constant contact force Fc,r=JTc(q)Fc=\u2212\u03c4i;\u2022as the steady-state output of a feedback controller, e.g., with a regulation law designedfor a desired position qdand including a proportional term, \u03c4c=KP(qd\u2212q) =\u2212JTc(q)Fc=\u03c4i.3. Since the rank of matrix Jc1(and of1Jc1) is always one, we can never estimate completelya contact force acting on link 1. As intuition suggests, from eqs. (1) we can only estimatethe force component1F1ythat is normal to the link, once we know its application point, as1F1y=\u2212\u03c41,1\u2113c1,3whereas1F1xcan be arbitrary and is balanced by the internal reaction force of the linkstructure.4. When matrix Jc2(2Jc2) has full rank, by using eqs. (2) we can estimate completely thecontact force F2acting on link 2, provided that\u2113c2is known, as2F2y=\u2212\u03c42,2\u2113c2,2F2x=\u22121\u21131s2(\u03c42,1\u2212(\u21131c2+\u2113c2)\u03c42,2\u2113c2).To recover the expression of the contact force in the base frame, we use F2=0R22F2.5. When the second link is aligned with the \ufb01rst one ( s2= 0),Jc2loses rank and we recover asimilar situation to that in item 3, namely2F2xcannot be estimated. However, in this casethe two data \u03c42,1and\u03c42,2can be used to estimate both2F2yand\u2113c2as2F2y=\u00b1\u03c42,1\u2212\u03c42,2\u21131, \u2113 c2=\u2212\u03c42,22F2y,where the sign \u2018\u2212\u2019 corresponds to q2= 0 and the sign \u2018+\u2019 to q2=\u03c0.6. When matrix3Jc3(orJc3) has full rank and \u2113c3is known, by using eqs. (3) we can estimatecompletely the contact force F3acting on link 3 as3F3y=\u2212\u03c43,3\u2113c3,3F3x=\u22121\u21132s3(\u03c43,2\u2212(\u21132c3+\u2113c3)\u03c43,3\u2113c3), ifs3\u0338= 0or3F3x=\u22121\u21132s23(\u03c43,1\u2212\u03c43,2\u2212\u21131c23\u03c43,3\u2113c3), ifs3= 0, buts23=\u00b1s2\u0338= 0.To recover the expression of the contact force in the base frame, we use F3=0R33F3. Whenthe robot arm is fully stretched or folded, we can proceed as in item 5 and identify from \u03c43both3F3yand\u2113c3, but not3F3x.7. One interesting feature of having three independent information from the joint torque vectorin case of contact on the third link, is that the estimation of the force F3can be performedeven without knowing \u2113c3. In fact, the value \u2113c3has disappeared in the recursive expressionsof the \ufb01rst two equations in (3). Therefore, we can evaluate3F3=(3F3x3F3y)=\u2212(\u21131s23\u21131c23\u21132s3\u21132c3)\u22121(\u03c43,1\u2212\u03c43,2\u03c43,2\u2212\u03c43,3),provided that s2\u0338= 0 holds (for the invertibility of the coefficient matrix), and then completethe analysis by using the third equation in (3)\u2113c3=\u2212\u03c43,33F3y.8. The results in the above items 3, 4, and 6 can all be obtained by using the pseudoinverse ofthe associated contact Jacobian, independently from its rank,\u02c6Fi=\u2212(JTci(q))#\u03c4i ori\u02c6Fi=\u2212(iJTci(q))#\u03c4i, fori= 1,2,3.4The \u2018hat\u2019 has been added to express the fact that the estimation may not be complete (e.g.,in the contact on the \ufb01rst link, or in the other two cases when the contact Jacobian losesrank). On the other hand, the estimation result in item 7 is obtained by direct inspection ofthe equations.9. The presence of a gravity term g(q) in the robot dynamics does not change the picturesubstantially. The main difference is that the joint torque \u03c4should be replaced in all aboveformulas by\u03c4\u2212g(q), since at the equilibriumg(q) =\u03c4+JTc(q)F.For the two assigned numerical problems, we have the following results. We note \ufb01rst that thegiven robot con\ufb01guration \u00afq=(\u03c0/4\u2212\u03c0/2\u03c0/3)T[rad] does not lead to singularity problems.a)Contact occurs on the second link (see item 1) and eqs. (2) apply. Since knowledge of theapplication point is necessary in this case, we set \u2113c2=\u21132/2 = 0.15 [m]. The contact Jacobianis thenJc2(\u00afq) =(\u22120.2475 0.1061 00.4596 0.1061 0).Thus,F2=\u2212(JTc2(\u00afq))#\u03c4a=(4.2422.8284),2F2=0RT2(\u00afq)F2=(15),both expressed in [N].b)Contact occurs on the third link and eqs. (3) apply. Solving for contact force and distanceof its application point from the link base yieldsF3=(2.6736\u22120.3189),3F3=(2.5\u22121),both expressed in [N]; \u2113c3= 0.2 [m] (i.e., at the tip).Using the computed \u2113c3, the resulting contact Jacobian is thenJc3(\u00afq) =(0.1932 0.1604\u22120.05180.7589 0.4053 0.1932).Finally, one can verify that F3=\u2212(JTc3(\u00afq))#\u03c4b.", "robot": "3R", "tags": ["planar", "horizontal", "vertical"]},
 "76": {"file": "Robotics2_Final_Test_2016-17_17.05.29.pdf", "date": "17-05-29", "num_ex": 0, "exam": "robo2", "question": "Let the dynamics of a robot manipulator with njoints be described by the usual Lagrangian model(neglecting dissipative terms):M(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4. (1)\u2022List all feedback control laws for \u03c4that allow regulation to a desired (generic) constantcon\ufb01guration qd. For each control law, specify the design conditions that guarantee success,the type of convergence/stability achieved, and the pros and cons of the method.\u2022When applied to eq. (1), is it possible that the control law\u03c4=KP(qd\u2212q)\u2212KD\u02d9q (2)achieves asymptotic stabilization of a desired state ( q,\u02d9q) = (qd,0)? If so, under whichoperative conditions? Would these conditions be only sufficient or also necessary?\u2022Can it happen that the following control law applied to eq. (1)\u03c4=g(qd) +KP(qd\u2212q)\u2212KD\u02d9q (3)does notachieve asymptotic stabilization of the state ( q,\u02d9q) = (qd,0)? Why (or why not)?What should be done in (3) to validate the reverse statement \u201cdoes certainly achieve . . . \u201d?", "solution": "The \ufb01rst part is a free text exercise. Completeness, accuracy, and clarity in writing are evaluated.For the two other speci\ufb01c questions:\u2022The control law (2) achieves asymptotic stabilization of a desired state ( q,\u02d9q) = (qd,0) also inthe presence of gravity if: i)g(qd) =0(the desired con\ufb01guration is an unforced equilibriumfor the open-loop system); ii)KPis symmetric and positive de\ufb01nite, and its minimumeigenvalueKP,m> \u03b1, where\u03b1 > 0 is a global upper bound on the norm of the Hessian ofthe potential energy Ug(q) due to gravity; iii)KDis symmetric and positive de\ufb01nite. Ingeneral, these are only sufficient conditions.\u2022Even assuming that KPandKDare symmetric and positive de\ufb01nite, the control law (3)may still fail because KP,m\u2264\u03b1. Indeed, when this sufficient condition is violated, we cannotpredict if we will obtain asymptotic stabilization of the desired equilibrium state or not.", "robot": "unknown", "tags": []},
 "77": {"file": "Robotics2_Final_Test_2016-17_17.05.29.pdf", "date": "17-05-29", "num_ex": 1, "exam": "robo2", "question": "\u2022In the context of image-based visual servoing (IBVS), determine the interaction matrixJp,polar associated to a point feature s= (\u03c1 \u03b8)T\u2208R2which is parametrized with polarcoordinates in the image plane, i.e.,\u02d9s=(\u02d9\u03c1\u02d9\u03b8)=Jp,polar (\u03c1,\u03b8,\u03bb,Z )(V\u2126),where\u03bb>0 is the focal length of the camera, Z > 0 is the depth coordinate of the CartesianpointP= (X,Y,Z ) in the camera frame, and the perspective equations of a pinhole cameramodel are used.\u2022Discuss the characteristics of the obtained interaction matrix in terms of decoupled effectson the chosen feature parameters, when only single components of the linear velocity V\u2208R3or of the angular velocity \u2126\u2208R3are active. Compare this analysis with the one on theinteraction matrix Jpthat uses the Cartesian coordinates ( u,v) in the image plane.\u2022In an IBVS control law that regulates the polar coordinates of a point feature sto a desiredconstant value sd, what careful actions may be needed when the point Pis on or gets closeto the optical axis of the camera?1", "solution": "Using the pinhole model, a 3D Cartesian point P= (X,Y,Z ), with coordinates expressed in thecamera frame, becomes in the image plane a point feature ( u,v)u=\u03bbXZ, v =\u03bbYZ,when 2D Cartesian coordinates are used, being \u03bb>0 the focus length of the camera. These twofeature parameters move in the image plane in response to a linear and angular velocity of thecamera, respectively Vand\u2126, as(\u02d9u\u02d9v)=\uf8eb\uf8ec\uf8ed\u03bbZ0\u2212uZ0\u03bbZ\u2212vZ\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed\u02d9X\u02d9Y\u02d9Z\uf8f6\uf8f7\uf8f8,\uf8eb\uf8ec\uf8ed\u02d9X\u02d9Y\u02d9Z\uf8f6\uf8f7\uf8f8=\u2212V\u2212\u2126\u00d7P=\uf8eb\uf8ec\uf8ed\u22121 0 0 0 \u2212Z Y0\u22121 0Z 0\u2212X0 0\u22121\u2212Y X 0\uf8f6\uf8f7\uf8f8(V\u2126)\u21d2(\u02d9u\u02d9v)=\uf8eb\uf8ec\uf8ed\u2212\u03bbZ0uZuv\u03bb\u2212(\u03bb+u2\u03bb)v0\u2212\u03bbZvZ\u03bb+v2\u03bb\u2212uv\u03bb\u2212u\uf8f6\uf8f7\uf8f8(V\u2126)=Jp(u,v,\u03bb,Z )(V\u2126).When using instead the polar coordinates as feature parameters in the image plane, we have thetransformations(uv)=(\u03c1cos\u03b8\u03c1sin\u03b8)\u21d0\u21d2(\u03c1\u03b8)=(\u221au2+v2ATAN2{v,u})\u21d2(\u02d9u\u02d9v)=(\u02d9\u03c1cos\u03b8\u2212\u03c1\u02d9\u03b8sin\u03b8\u02d9\u03c1sin\u03b8+\u03c1\u02d9\u03b8cos\u03b8)=(cos\u03b8\u2212\u03c1sin\u03b8sin\u03b8 \u03c1 cos\u03b8)(\u02d9\u03c1\u02d9\u03b8)=Jt(\u03c1,\u03b8)(\u02d9\u03c1\u02d9\u03b8),3with detJt=\u03c1. Therefore,(\u02d9\u03c1\u02d9\u03b8)=J\u22121t(\u03c1,\u03b8)(\u02d9u\u02d9v)=\uf8eb\uf8edcos\u03b8 sin\u03b8\u2212sin\u03b8\u03c1cos\u03b8\u03c1\uf8f6\uf8f8(\u02d9u\u02d9v),provided that \u03c1=\u221au2+v2\u0338= 0.Evaluating thenJp,t(\u03c1,\u03b8,\u03bb,Z ) =Jp(u,v,\u03bb,Z )|u=\u03c1cos\u03b8v=\u03c1sin\u03b8=\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u03bbZ0\u03c1cos\u03b8Z\u03c12sin\u03b8cos\u03b8\u03bb\u2212(\u03bb+\u03c12cos2\u03b8\u03bb)\u03c1sin\u03b80\u2212\u03bbZ\u03c1sin\u03b8Z\u03bb+\u03c12sin2\u03b8\u03bb\u2212\u03c12sin\u03b8cos\u03b8\u03bb\u2212\u03c1cos\u03b8\uf8f6\uf8f7\uf8f7\uf8f8,we obtain(\u02d9\u03c1\u02d9\u03b8)=J\u22121t(\u03c1,\u03b8)Jp,t(\u03c1,\u03b8,\u03bb,Z )(V\u2126)=Jp,polar (\u03c1,\u03b8,\u03bb,Z )(V\u2126),withJp,polar (\u03c1,\u03b8,\u03bb,Z ) =\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u03bbcos\u03b8Z\u2212\u03bbsin\u03b8Z\u03c1Z(\u03bb2+\u03c12) sin\u03b8\u03bb\u2212(\u03bb2+\u03c12) cos\u03b8\u03bb0\u03bbsin\u03b8\u03c1Z\u2212\u03bbcos\u03b8\u03c1Z0\u03bbcos\u03b8\u03c1\u03bbsin\u03b8\u03c1\u22121\uf8f6\uf8f7\uf8f7\uf8f8.Comparing now the structural zeros of Jp(u,v,\u03bb,Z ) andJp,polar (\u03c1,\u03b8,\u03bb,Z ), we see that in the \ufb01rstcase the effects of VxandVyrespectively on \u02d9 uand \u02d9vare decoupled, whereas in the second case thedecoupled effects of Vzand \u2126 zare respectively on \u02d9 \u03c1and \u02d9\u03b8.Finally, when the 3D Cartesian point Pis sufficiently close to the optical axis ( \u03c1\u21920), matrixJtbecomes ill-conditioned, meaning that small motions of the Cartesian point may then lead to hugevariations of the chosen polar parameters \u2014in particular of \u03b8\u2014 in the image plane. To recover aregular behavior close to and across \u03c1= 0, the inverse of Jtmay be replaced, for instance, by adamped least squares matrix with damping factor \u03c32>0,JDLSt(\u03c1,\u03b8) =JTt(\u03c1,\u03b8)(\u03c32I2\u00d72+Jt(\u03c1,\u03b8)JTt(\u03c1,\u03b8))\u22121=(cos\u03b8 sin\u03b8\u2212\u03c1sin\u03b8 \u03c1 cos\u03b8)(\u03c32+ cos2\u03b8+\u03c12sin2\u03b8 (1\u2212\u03c12) sin\u03b8cos\u03b8(1\u2212\u03c12) sin\u03b8cos\u03b8 \u03c32+ sin2\u03b8+\u03c12cos2\u03b8)\u22121=\uf8eb\uf8ec\uf8ec\uf8edcos\u03b81 +\u03c32sin\u03b81 +\u03c32\u2212\u03c1sin\u03b8\u03c12+\u03c32\u03c1cos\u03b8\u03c12+\u03c32\uf8f6\uf8f7\uf8f7\uf8f8,with det(JDLSt) =\u03c1/[\u03c12+\u03c32)(1 +\u03c32)]>0 for\u03c32>0 (and equal to 1 /\u03c1for\u03c32= 0).", "robot": "unknown", "tags": []},
 "78": {"file": "Robotics2_Final_Test_2016-17_17.05.29.pdf", "date": "17-05-29", "num_ex": 2, "exam": "robo2", "question": "Consider the planar PRP robot in Fig. 1, moving under gravity. Its dynamic model can be writtenin the formYM(q,\u02d9q,\u00a8q)aM+g(q) =\u03c4, (4)where the inertial terms and the related Coriolis and centrifugal components are already expressedin a linear factorized form in terms of the dynamic coefficients aM\u2208RpM. In the following, assumethat the symbolic expressions of YMandaMare known.\u2022Derive explicitly the gravity term g(q) and an associated minimal factorization in the formg(q) =Yg(q)ag, withag\u2208Rpg.\u2022Provide the expression of an adaptive control law that guarantees global asymptotic trackingof a desired joint trajectory qd(t)\u2208C2, without any a priori knowledge of the numericalvalues of the robot dynamic parameters. How many states will have this dynamical controller?\u2022Assume now that the actual values of the dynamic coefficients aMare known in advance.Solve the previously stated trajectory tracking problem by designing an adaptive controllerthat has a reduced number of states. Sketch a formal proof of your result.q3 xq2 q1 d2 y     ! ! g \u43a9!\u43a9!\u43a9!m3,I3 m2,I2 m1,I1 d3Figure 1: A planar PRP robot, with an associated set ofgeneralized coordinates q= (q1,q2,q3).Figure 2: Robotized surface polishingof a metallic work piece.", "solution": "We compute \ufb01rst the gravitational potential energy Ug(q) =U1+U2+U3, withU1= 0, U 2=m2g0d2sinq2, U 3=m3g0(q3+d3) sinq2.4Therefore, the gravity vector and its (minimal) linear parametrization are given byg(q) =(\u2202Ug(q)\u2202q)T=\uf8eb\uf8ec\uf8ed0g0(m2d2+m3(q3+d3)) cosq2g0m3sinq2\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0g0q3cosq2g0cosq2g0sinq2 0\uf8f6\uf8f7\uf8f8(m3m2d2+m3d3)=Yg(q)ag,withpg= dim(ag) = 2. The dynamic model (4) can thus be rewritten asYM(q,\u02d9q,\u00a8q)aM+Yg(q)ag=(YM(q,\u02d9q,\u00a8q)Yg(q))(aMag)=Y(q,\u02d9q,\u00a8q)a=\u03c4.Note that the linear parametrization of the dynamic model by amay not be minimal, since therecould be some overlapping between the coefficients in aMand those de\ufb01ned in ag.Assuming that the values of all dynamic coefficients aare unknown, the adaptive trajectory track-ing control takes the usual form\u03c4=Y(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a+KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q),KP,KD>0\u02d9\u02c6a=\u0393YT(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q), \u0393>0,(5)where \u02d9qr=\u02d9qd+\u039b(qd\u2212q),\u039b>0, andY(q,\u02d9q,\u02d9qr,\u00a8qr) =(YM(q,\u02d9q,\u02d9qr,\u00a8qr)Yg(q))\u02c6a=\u02c6M(q)\u00a8qr+\u02c6C(q,\u02d9q)\u02d9qr+\u02c6g(q).The number of states of the adaptive controller (5), i.e., the number of its de\ufb01ning differentialequations, is equal to the number of updating dynamic coefficients: dim( \u02c6a) =pM+pg=pM+ 2.Assuming that the values of the dynamic coefficients aMare already known, one can de\ufb01ne anadaptive trajectory control with the same global tracking properties of (5), but with a reducednumber of states equal to pg= 2. In fact, it is natural to de\ufb01ne this controller as\u03c4=YM(q,\u02d9q,\u02d9qr,\u00a8qr)aM+Yg(q)\u02c6ag+KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q),KP,KD>0\u02d9\u02c6ag=\u0393gYTg(q) (\u02d9qr\u2212\u02d9q), \u0393g>0,(6)where \u02d9qr=\u02d9qd+\u039b(qd\u2212q),\u039b>0, andYg(q)\u02c6ag=\u02c6g(q).The proof of global asymptotic stability of the tracking error follows the same lines of the proofholding for (5). The \u2018trick\u2019 in (6) that leads to this sufficient result stands in preserving thepassivity structure also in the known term: namely, adopting \u02d9qrand\u00a8qrin the evaluation of YM(and not \u02d9qonly (or \u02d9qd) and \u00a8qd), as well as using the skew-symmetric property of a suitablefactorization c(q,\u02d9q) =C(q,\u02d9q)\u02d9qof the Coriolis and centrifugal terms. More in detail, take theLyapunov candidateVg=12sTM(q)s+eTKPe+12\u02dcaTg\u0393g\u02dcag\u22650,withs=\u02d9qr\u2212\u02d9q,e=qd\u2212q,R>0, and \u02dcag=ag\u2212\u02c6ag. Its time derivative is\u02d9Vg=12sT\u02d9M(q)s+sTM(q)\u02d9s+ 2eTKP\u02d9e\u2212\u02dcaTg\u0393g\u02d9\u02c6ag.5The closed-loop system under (6) satis\ufb01es the differential equationM(q)\u00a8q+C(q,\u02d9q)\u02d9q+g(q) =M(q)\u00a8qr+C(q,\u02d9q)\u02d9qr+\u02c6g(q) +KPe+KD\u02d9eorM(q)\u02d9s+C(q,\u02d9q)s=\u02dcg(q)\u2212KPe\u2212KD\u02d9e, (7)with \u02dcg(q) =g(q)\u2212\u02c6g(q) =Yg(q)ag\u2212Yg(q)\u02c6ag=Yg(q)\u02dcag. When evaluated along the trajectoriesof (7), \u02d9Vgbecomes\u02d9Vg=12sT(\u02d9M(q)\u22122C(q,\u02d9q))s+sT(\u02dcg(q)\u2212KPe\u2212KD\u02d9e) + 2eTKP\u02d9e\u2212\u02dcaTg\u0393g\u02d9\u02c6ag=sT(Yg(q)\u02dcag\u2212KPe\u2212KD\u02d9e) + 2eTKP\u02d9e\u2212\u02dcaTgYTg(q)s=\u2212(\u02d9e+\u039be)T(KPe+KD\u02d9e) + 2eTKP\u02d9e=\u2212(\u02d9e+K\u22121DKPe)T(KPe+KD\u02d9e) + 2eTKP\u02d9e=\u2212eTKPK\u22121DKPe\u2212\u02d9eTKD\u02d9e\u22640,where the skew-symmetry of \u02d9M\u22122C, the updating law for \u02c6agin (6), and \u039b=\u039bT=K\u22121DKP>0(with diagonal PD gains) have been used. The rest of the proof follows as in the general case,using Barbalat lemma and LaSalle theorem.", "robot": "PRP", "tags": ["planar"]},
 "79": {"file": "Robotics2_Final_Test_2016-17_17.05.29.pdf", "date": "17-05-29", "num_ex": 3, "exam": "robo2", "question": "Consider a robotized polishing task of a large surface area of a metallic work piece, as shown inFig. 2. The work piece has a complex geometry, with planar and curved surfaces. The polishingtool held by the robot ends with a sphere which is in point-wise contact with the geometric surfaceof the work piece. The tool needs not to be orthogonal to the local tangent plane to the surface.However, in order to complete an optimal polishing (reducing the roughness of the surface belowa speci\ufb01ed level \u2014with tolerances in the order of few \u00b5m), a speci\ufb01ed normal force should beapplied to the surface while moving the tool in contact with an assigned constant speed. Assume aperfectly rigid interaction and that friction at the contact can be neglected in this modeling stage.De\ufb01ne a task frame in which the polishing operation can be correctly de\ufb01ned and executed. Specifyaccordingly the natural and arti\ufb01cial constraints. Sketch the task frame in two cases, on a \ufb02atsurface of the work piece and on a curved one.[240 minutes (4 hours); open books, but no computer or smartphone]2", "solution": "With reference to Fig. 3, the task frame is placed at the contact point between the sphericaltool and the surface. The zt-axis is always aligned with the downward normal to the surface, nomatter if the surface is locally \ufb02at or curved. One of the two other axes, say xt, can be chosento be aligned with the desired polishing direction on the metallic surface. Remember that, in themodeling phase, the tool-surface contact is assumed to be rigid and frictionless . Therefore, thespherical tool can also slide without rolling in contact. Moreover, being the contact point-wise,there cannot be any moment applied by the tool at the contact.xt xt zt zt yt yt flat area curved areaFigure 3: Task frame de\ufb01nition for the surface polishing of a metallic work piece.6According to the chosen task frame, the natural (geometric) constraints of this interaction problemarevz= 0, F x= 0, F y= 0, M x= 0, M y= 0, M z= 0,while the arti\ufb01cial constraints areFz=Fz,d>0, v x=vx,d>0, v y=vy,d= 0, \u03c9 x=\u03c9x,d, \u03c9 y=\u03c9y,d, \u03c9 z=\u03c9z,d.Therefore, a hybrid force-motion controller designed based on feedback linearization and decouplingwill include \ufb01ve scalar position control loops and only one force control loop. The value vy,d= 0is related to the choice of the xt-axis being aligned with the tangent to the polishing path, whichis executed at the speed vx,d, that should be followed on the surface. Moreover, when there is noneed to change the orientation of the tool (e.g., for avoiding collision with some lateral side of thework piece), we set \u03c9d=(\u03c9x,d\u03c9y,d\u03c9z,d)T=0. Finally, the positive value Fz,dspeci\ufb01es thenormal force needed for obtaining a satisfactory polishing result (by pressure).", "robot": "unknown", "tags": ["planar", "constraints"]},
 "80": {"file": "Robotics2_22.10.21.pdf", "date": "22-10-21", "num_ex": 0, "exam": "robo2", "question": "ExerciseConsider the PR robot in Fig. 1, moving in a vertical plane.xm1y\u2295q2q1m2,Ic2dc2u1\u2295u2g0Figure 1: A PR planar robot with the relevant dynamic parameters and variables.1. Derive the dynamic model of the robot in the formM(q)\u00a8q+c(q,\u02d9q) +g(q) =u.2. Find a linear parametrization of the dynamic model in the formY(q,\u02d9q,\u00a8q)a=u,where a\u2208Rphas the minimal possible dimension p(the gravity acceleration g0is known).3. Design a control law u=u(q,\u02d9q,qd) that globally asymptotically stabilizes the robot to thedesired con\ufb01guration qd= (0,\u03c0) [m,rad], when only the total mass m=m1+m2of the robot,the acceleration g0, and the length \u21132of the second link are known.4. Suppose that the robot is initially in equilibrium at qin=q(0) = (0,0). Under the action ofthe control law designed in step 3, determine the sign of the initial acceleration \u00a8 q1(0) of the \ufb01rstjoint, in case this is different from zero.5. Assume now that all robot dynamic parameters are known. Show how it is possible to design amodel-based command u=u(t) that will transfer the robot from the state ( q(0),\u02d9q(0)) = ( qin,0)to the \ufb01nal state ( q(T),\u02d9q(T)) = (qd,0) in a given time T >0 and without moving the \ufb01rst joint.6. The robot input commands are now limited as |ui(t)|\u2264Ui,i= 1,2. Consider the rest-to-resttask of moving in minimum time Tfromq(0) = (q1(0),\u00afq2) toq(T) = (q1(0)\u2212\u2206,\u00afq2), with \u2206>0,while keeping the second joint constantly atq2= \u00afq2>0. Determine the optimal solution in ananalytic way and sketch the time-optimal pro\ufb01les of \u00a8 q1(t), \u00a8q2(t),u1(t) andu2(t) fort\u2208[0,T].[180 minutes; open books]1", "solution": "Exercise1. Dynamic modelKinetic energyT=T1+T2,withT1=12m1\u02d9q21, T 2=12m2\u2225vc2\u22252+12Ic2\u02d9q22,wherevc2=\u02d9pc2=ddt(q1+dc2c2dc2s2)=(\u02d9q1\u2212dc2s2\u02d9q2dc2c2\u02d9q2)\u21d2 \u2225 vc2\u22252= \u02d9q21+d2c2\u02d9q22\u22122dc2s2\u02d9q1\u02d9q2.ThusT=12(m1+m2) \u02d9q21+12(Ic2+m2d2c2)\u02d9q22\u2212m2dc2s2\u02d9q1\u02d9q2.Inertia matrixT=12\u02d9qTM(q)\u02d9q\u21d2M(q) =(m1(q)m2(q))=(m1+m2\u2212m2dc2s2\u2212m2dc2s2Ic2+m2d2c2).Coriolis and centrifugal termsc(q,\u02d9q) =(\u02d9qTC1(q)\u02d9q\u02d9qTC2(q)\u02d9q),withCi(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i= 1,2.SinceC1(q) =(0 00\u2212m2dc2c2),C2(q) =O,we havec(q,\u02d9q) =(\u2212m2dc2c2\u02d9q220).Potential energy and gravity termsU=U1+U2=\u2212m1g0q1\u2212m2g0(q1+dc2c2),and sog(q) =(\u2202U\u2202q)T=(\u2212(m1+m2)g0m2dc2g0s2).Robot equationsM(q)\u00a8q+c(q,\u02d9q) +g(q) =u\u21d3(m1+m2\u2212m2dc2s2\u2212m2dc2s2Ic2+m2d2c2)(\u00a8q1\u00a8q2)+(\u2212m2dc2c2\u02d9q220)+(\u2212(m1+m2)g0m2dc2g0s2)=(u1u2).(1)22. Linear parametrizationY(q,\u02d9q,\u00a8q)a=(\u00a8q1\u2212g0\u2212s2\u00a8q2\u2212c2\u02d9q2200\u2212s2(\u00a8q1\u2212g0) \u00a8q2)\uf8eb\uf8ec\uf8edm1+m2m2dc2Ic2+m2d2c2\uf8f6\uf8f7\uf8f8,with a minimal number p= 3 of dynamic coefficients ai,i= 1,2,3.3. Regulation controlUnder the given assumptions, we can design a PD plus constant gravity compensation law asu=KP(qd\u2212q)\u2212KD\u02d9q+g(qd) (2)with diagonal gain matrices KP>0,KD>0 and with KPm>\u03b1, where\u2225\u2202g/\u2202q\u2225\u2264\u03b1. In fact,forqd= (0,\u03c0), the control law (2) becomes simplyu=(\u2212KP1q1\u2212KD1\u02d9q1\u2212mg0KP2(\u03c0\u2212q2)\u2212KD2\u02d9q2), (3)wherem(=m1+m2) andg0are known. Moreover,\u2202g\u2202q=(0 00m2dc2g0c2)\u21d2\ued79\ued79\ued79\ued79\u2202g\u2202q\ued79\ued79\ued79\ued79=\ued6a\ued6b\ued6b\u221a\u03bbmax{\u2202g\u2202q(\u2202g\u2202q)T}=m2dc2g0|c2|<m\u2113 2g0=\u03b1,being\u21132also known. Thus, to guarantee global asymptotic stabilization to qdwith the controllaw (3) we chooseKPm= min{KP1,KP2}\u2265m\u21132g0.4. Initial accelerationIsolating the acceleration \u00a8qfrom the dynamic model (1) and evaluating it at t= 0, with initialstate ( q(0),\u02d9q(0)) = ( 0,0) and when using the control law (3), gives\u00a8q(0) =M\u22121(q(0)) (u(0)\u2212g(q(0)) =1detM(q(0))(Ic2+m2d2c2 00m1+m2)(0KP2\u03c0),since in particular qd1\u2212q1(0) = 0 and u1(0)\u2212g1(0) =\u2212mg0+ (m1+m2)g0= 0. Thus,\u00a8q1(0) = 0.This should not be unexpected, being the dynamics of the two joints fully decoupled in the initialstate and joint 1 still at an equilibrium under the control law (3). Note that a simple PD controllaw without the gravity compensation term g(qd) in (3) would result in an initial acceleration\u00a8q1(0) =g0= 9.81>0, i.e., the \ufb01rst (prismatic) joint would initially slide downwards.5. Inverse dynamics commandThe desired motion task is obtained by using inverse dynamics on a suitable rest-to-rest trajectoryinterpolating the initial and \ufb01nal con\ufb01guration in a given time T. Consider for instance the cubicpolynomial trajectoryqd(t) =qin+ (qd\u2212qin)(\u22122(tT)3+ 3(tT)2), t\u2208[0,T],3or, componentwise,qd1(t) = 0\u21d2 \u02d9qd1(t) = \u00a8qd1(t) = 0,qd2(t) =\u03c0(\u22122(tT)3+ 3(tT)2)\u21d2\u02d9qd2(t) = 6\u03c0(\u2212(tT)2+tT)\u21d2\u00a8qd2(t) = 12\u03c0(1\u22122tT).Accordingly, the required command is computed asu=ud(t) =M(qd(t))\u00a8qd(t) +c(qd(t),\u02d9qd(t)) +g(qd(t))=(\u2212m2dc2(sinqd2(t) \u00a8qd2(t)\u2212cosqd2(t) \u02d9q2d2(t))\u2212(m1+m2)g0(Ic2+m2d2c2)\u00a8qd2(t) +m2dc2g0sinqd2(t)), t\u2208[0,T].6. Minimum time motionThe problem can be formulated as a minimum-time motion on a prescribed path in the joint space,whereq1needs to move between q1(0) andq1(0)\u2212\u2206 whileq2is kept always at the constant value\u00afq2(hence, \u02d9q2= \u00a8q2= 0). Since the velocity term c(q,\u02d9q) =0for \u02d9q2= 0, from eq. (1) the dynamicsalong this path is thenM(\u00afq2)(\u00a8q10)+g(\u00afq2) =(m1+m2\u2212m2dc2sin \u00afq2)(\u00a8q1\u2212g0) =u, (4)which is parametrized by the single acceleration \u00a8 q1(t), withs(t) =q1(t) acting as the (scalar)timing law. Note that the two differential equations in (4) are linear and not independent. Thismeans that one equation should be used in forward dynamics (with the optimal input command)to determine the acceleration \u00a8 q1, while the other will be used in inverse dynamics to \ufb01nd the otherinput command.For compactness, de\ufb01ne the two constantsa=m1+m2>0, b =m2dc2sin \u00afq2>0.being \u00afq2\u2208(0,\u03c0) and thus sin \u00af q2>0. Then, from (4) and using the bounds on the input commands,we have\u2212U1\u2264a(\u00a8q1\u2212g0)\u2264U1,\u2212U2\u2264\u2212b(\u00a8q1\u2212g0)\u2264U2.Manipulating the inequalities, we obtain that \u00a8 q1(t), fort\u2208[0,T], is bounded bymax{\u2212U1a+g0,\u2212U2b+g0}= \u00a8q\u22121\u2264\u00a8q1(t)\u2264\u00a8q+1= min{U1a+g0,U2b+g0}. (5)While \u00a8q+1>0 clearly holds, it is necessary to enforce \u00a8 q\u22121<0 in order to be able to perform anydesired (rest-to-rest) motion transfer by \u2206 \u22760 with a suitable sequence of positive and negativeacceleration of the \ufb01rst joint. However, this condition is trivially obtained once we realize that theminimum requirement for the actuation torques at each joint is that they should be able to sustain(at least) the robot gravity load in any con\ufb01guration. As a result, we can safely assume thatU1>(m1+m2)g0=ag0, U 2>m 2dc2g0>m 2dc2sin \u00afq2g0=bg0\u21d2 \u00a8q\u22121<0.Note that the two possible saturation levels for the acceleration of the \ufb01rst joint (at its positiveor negative value) correspond to two different physical situations: either because the \ufb01rst actuatorpushes/pulls the robot as fast as possible ( U1saturates), or because the second actuator reaches4its limit capability in order to keep the second link at the \ufb01xed con\ufb01guration \u00af q2(U2saturates).Furthermore, it follows from the expressions of the bounds in (5) that the same actuator willsaturate during the acceleration and deceleration phases, while equation (4) shows that the twoinput commands will always have opposite signs.With such asymmetric bounds on the feasible acceleration of joint 1, the requested rest-to-restmotion task for a displacement \u2212\u2206<0 (thus, moving against gravity) will be executed in minimumtimeTby the following acceleration command:\u00a8q1(t) ={\u00a8q\u22121, t\u2208[0,Ts),\u00a8q+1, t\u2208[Ts,T).The values of TsandTare obtained from the two relationships:\u00a8q\u22121Ts+ \u00a8q+1(T\u2212Ts) = 0 (rest-to-rest motion enforced)12\u00a8q\u22121T2s\u221212\u00a8q+1(T\u2212Ts)2=\u2212\u2206 (net displacement to be achieved).As a result,T=\u221a2\u2206(\u00a8q+1\u2212\u00a8q\u22121)\u23d0\u23d0\u00a8q\u22121\u23d0\u23d0\u00a8q+1, T s=\u00a8q+1\u00a8q+1\u2212\u00a8q\u22121T.Note that in case of opposite values of the positive and negative acceleration (\u00a8 q+1=\u2212\u00a8q\u22121=A),these formulas return the usual symmetric bang-bang pro\ufb01le with T=\u221a4\u2206/AandTs=T/2.Qualitative optimal pro\ufb01les of \u00a8 q1(t),u1(t) andu2(t) fort\u2208[0,T] are sketched in Fig. 2, assuminghere thatU1/a<U 2/b. Indeed, \u00a8q2(t) = 0 at any time t(thus, it is not shown).\ud835\udc5e\u0308#\ud835\udc61\ud835\udc47\ud835\udc47&\ud835\udc5e\u0308#'\ud835\udc5e\u0308#(\ud835\udc62#\ud835\udc61\ud835\udc47\ud835\udc47&\ud835\udc48#\u2212\ud835\udc48#\ud835\udc62,\ud835\udc61\ud835\udc47\ud835\udc47&\ud835\udc48,\u2212\ud835\udc48,Figure 2: Time-optimal pro\ufb01les of \u00a8 q1(t),u1(t) andu2(t) for a displacement \u2212\u2206<0 ofq1.On the other hand, Figure 3 shows the numerical results obtained with the datam1= 8, m 2= 5 [kg], d c2= 1 [m],\u00afq2=\u03c04[rad], U 1= 260 [N], U 2= 100 [Nm] ,(6)5yielding for a displacement of \u2212\u2206 =\u22121 [m] ofq1:\u00a8q\u22121=\u221210.19,\u00a8q+1= 29.81 [rad/s2], T = 0.5132, T s= 0.3825 [s].The \ufb01rst joint saturates its command ( |u1|=U1= 260 [N]), whereas the command to the secondjoint is set to a maximum (absolute) value of |u2|=\u2212b(\u00a8q\u22121\u2212g0)= 70.7107<100 =U2[Nm].00.050.10.150.20.250.30.350.40.450.5time [s]-10-5051015202530d2q1/dt2 [rad/s2] acceleration: first part = -10.19, second part = 29.8100.050.10.150.20.250.30.350.40.450.5time [s]-250-200-150-100-50050100150200250u1 [N]switch time Ts = 0.38245, total time T = 0.5131900.050.10.150.20.250.30.350.40.450.5time [s]-100-80-60-40-20020406080100u2 [Nm]switch time Ts = 0.38245, total time T = 0.51319Figure 3: Time-optimal pro\ufb01les of \u00a8 q1(t),u1(t) andu2(t) for the data in (6) and \u2212\u2206 =\u22121.", "robot": "PR", "tags": ["planar", "vertical"]},
 "81": {"file": "Robotics2_14.04.02.pdf", "date": "14-04-02", "num_ex": 0, "exam": "robo2", "question": "TheJustin upper-body robot by DLR (Fig. 1) is made of a 3-dof torso (with coordinates qT\u2208R3),carrying two identical 7-dof structures as left ( qL\u2208R7) and right ( qR\u2208R7) arms. Neglecting theanthropomorphic hands, there is a total of 17 joints (all revolute), with q=(qTTqTLqTR)T\u2208R17.Let the desired Cartesian motion (in position and orientation) of the end-effectors of the left andright robot arms be independently speci\ufb01ed as rL,d(t)\u2208R6andrR,d(t)\u2208R6, respectively.Figure 1: Justin upper-body robot: A 3-dof torso with two 7-dof arms\u2022De\ufb01ne a kinematic control law for the joint velocity \u02d9qof the robot that is able to accomplishthe whole task, recovering also from any possible initial errors at the Cartesian level.\u2022Is it possible to shape the joint solution so that motion of the torso is reduced (i.e., mostof the task is executed by the two arms only)? And by blocking completely the dofs of thetorso? Discuss qualitatively the nature of possible singularities that can be encountered withthe proposed control strategies, and how to avoid them or milden their effects.", "solution": "The 3R robot in Fig. 2 is placed on a horizontal plane. The three links have unitary length,uniform mass distribution, and their masses are m1,m2, and m3. With the robot at rest, a forceFis applied to the tip as illustrated.F x0 y0 p .. A B C DFigure 2: A planar 3R arm with a force applied at the end effector\u2022Will the robot end effector accelerate like in case A,B, orC? Motivate your answer.\u2022Determine the symbolic expression of the end-effector acceleration \u00a8pin terms of the dynamiccoefficients of the robot model.\u2022By considering a special distribution of link masses and inertias, would it be possible toobtain an end-effector acceleration like in case D? Motivate your answer.[180 minutes; open books]", "robot": "R7R7R", "tags": ["planar", "horizontal"]},
 "82": {"file": "Robotics2_11.06.17.pdf", "date": "11-06-17", "num_ex": 0, "exam": "robo2", "question": "Consider a 2R planar robot with equal links of unitary length, uniformly distributed link masses,and moving in the horizontal plane. During free motion , the robot dynamics isB(q)\u00a8q+c(q,\u02d9q) =\u03c4,whereB(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3)c(q,\u02d9q) =(\u2212a2sinq2\u02d9q2( \u02d9q2+ 2 \u02d9q1)a2sinq2\u02d9q21),and with the dynamic coefficients a1,a2, anda3being known (their numerical value is not essentialin the following).In the con\ufb01guration q= (0,\u03c0/4) [rad] and with \u02d9q= (0,\u2212\u03c0/2) [rad/s], the robot is hit by aninstantaneous planar Cartesian force F= (\u221210,0) [N] applied at the midpoint of the second link.1. Determine the explicit expression of the feedback control law for the joint torque vector \u03c4thatminimizes in norm the resulting instantaneous joint acceleration \u00a8q. Provide the associatedexpression of\u2225\u00a8q\u2225.2. What are the robot sensing requirements for achieving this result? How could we designa dynamic control law for the torque \u03c4that approximates this same robot behavior whenhaving only joint position and velocity measurements available?[120 minutes; open books]1", "solution": "When the 2R planar robot is hit at a given state ( q,\u02d9q) by a forceF, its dynamics becomesB(q)\u00a8q+c(q,\u02d9q) =\u03c4+JTk(q)F, (1)where the Jacobian Jk(q) is associated to the collision point, in the present case the midpoint of thesecond link. Taking into account the kinematic data and the collision con\ufb01guration q= (0,\u03c0/4),we haveJK=Jk(q)|q=(0,\u03c0/4)=(\u2212sinq1\u22120.5 sin(q1+q2)\u22120.5 sin(q1+q2)cosq1+ 0.5 cos(q1+q2) 0.5 cos(q1+q2))\u23d0\u23d0\u23d0\u23d0\u23d0q=(0,\u03c0/4)=\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u221a24\u2212\u221a241 +\u221a24\u221a24\uf8f6\uf8f7\uf8f7\uf8f8.The instantaneous joint acceleration \u00a8qin response to the collision force Fand to an appliedtorque\u03c4at the joints will be\u00a8q=B\u22121(q)(\u03c4+JTk(q)F\u2212c(q,\u02d9q)).Therefore, the control torque\u03c4=\u03c4(q,\u02d9q,F) =c(q,\u02d9q)\u2212JTk(q)F (2)will produce \u00a8q=0, which is the minimum possible acceleration ( \u2225\u00a8q\u2225= 0, and the robot willcontinue its motion unperturbed by the collision). In order to be realizable, this control law shouldhave access to a (direct or indirect) instantaneous measure of F, beyond measuring the internalstate of the robot. Moreover, the collision point (assumed to be at the midpoint of the secondlink in the formulation) should also be known exactly in order to use the correct JTk(q). Thesetwo requirements could be matched in principle if there is a camera observing the scene and/or asurface touch sensor capable of measuring the collision force (if different from the assumed one).If this can be accomplished, the actual value of the control torque at the collision instant iscomputed usingc=c(q,\u02d9q)|q=(0,\u03c0/4),\u02d9q=(0,\u2212\u03c0/2)=(\u2212a2sinq2\u02d9q2( \u02d9q2+ 2 \u02d9q1)a2sinq2\u02d9q21)\u23d0\u23d0\u23d0\u23d0\u23d0q=(0,\u03c0/4),\u02d9q=(0,\u2212\u03c0/2)=\uf8eb\uf8ed\u2212a2\u221a22(\u03c02)20\uf8f6\uf8f8as\u03c4=c\u2212JTKF=\uf8eb\uf8ed\u2212a2\u221a22(\u03c02)20\uf8f6\uf8f8\u2212\uf8eb\uf8ec\uf8ec\uf8ed\u2212\u221a24\u2217\u2212\u221a24\u2217\uf8f6\uf8f7\uf8f7\uf8f8(\u2212100)=\u221a22\uf8eb\uf8ed5\u2212a2(\u03c02)25\uf8f6\uf8f8,(3)2where the dynamic coefficient a2is known.Indeed, the above situation is quite restrictive. In order to get rid of extra sensing and measure-ments, we could use the concept of model-based residuals to estimate at once the global quantity\u03c4k=Jk(q)TFneeded in the control action (2). In fact, we can generate on line the following (here, two-dimensional) residual signal rr=KI(B(q)\u02d9q\u2212\u222b(CT(q,\u02d9q)\u02d9q+r+\u03c4)dt)(4)forKI>0, typically diagonal, and where the matrix C(q,\u02d9q) is a factorization of the Coriolis andcentrifugal terms that satis\ufb01esc(q,\u02d9q) =C(q,\u02d9q)\u02d9q,s.t.\u02d9B(q)\u22122C(q,\u02d9q) is skew-symmetric \u21d2 \u02d9B(q) =C(q,\u02d9q)+CT(q,\u02d9q).(5)Such a matrix always exists and can be computed, e.g., using the Christoffels symbols. From (4),using the dynamics (1) and the property (5), it follows that the evolution of rsatis\ufb01es\u02d9r=KI(B(q)\u00a8q+\u02d9B(q)\u02d9q\u2212CT(q,\u02d9q)\u02d9q\u2212r\u2212\u03c4)=KI(\u03c4+\u03c4k\u2212C(q,\u02d9q)\u02d9q+\u02d9B(q)\u02d9q\u2212CT(q,\u02d9q)\u02d9q\u2212r\u2212\u03c4)=KI(\u03c4k\u2212r).Therefore,ris a low-pass stable \ufb01rst-order \ufb01lter of the unknown signal \u03c4kwith bandwidth goingto in\ufb01nity for increasingly larger KI. Its evaluation in (4) requires only the proprioceptive mea-surementsqand \u02d9q(beside, and as before, a reasonable accuracy for the dynamic model of therobot) and the available of the command \u03c4being applied to the robot.As a result, the control law (2) can be replaced by\u03c4=c(q,\u02d9q)\u2212r, (6)and the resulting robot behavior approximated at a low expense.", "robot": "2R", "tags": ["planar", "horizontal"]},
 "83": {"file": "Robotics2_11.09.12.pdf", "date": "11-09-12", "num_ex": 0, "exam": "robo2", "question": "Exercise1. A 2R robot moving in the vertical plane and having link lengths l1=l2= 1 [m] is self-balancedwith respect to gravity in the absence of a payload (see Fig. 1). Provide the mechanicalconditions under which the gravity term in the dynamics of this robot is identically zero forany con\ufb01guration q= (q1,q2).x0 y0 g0 l2 l1Figure 1: A 2R robot2. For a regulation task to a desired qd, the following control law (PD + constant gravitycompensation)u=KP(qd\u2212q)\u2212KD\u02d9q+g(qd),KP>0,KD>0, (1)is applied to this robot, now in the presence of a point-wise payload of known mass Mlocatedat the end of the second link.a) Derive the correct expression of the gravity term g(qd) in (1).b) Given the \ufb01xed choice of PD gain matricesKP= diag{100,100},KD= diag{25,25}, (2)provide an upper bound for the value of Msuch that the control law (1), with the gainschosen as in (2), certainly guarantees global asymptotic stability of the equilibrium state(q,\u02d9q) = (qd,0). It is suggested to perform an approximate (conservative) analysis.[120 minutes; open books]1", "solution": "ExerciseIn the absence of a payload, the potential energy Udue to gravity isU=U1+U2, U 1=m1g0d1sinq1, U 2=m2g0(l1sinq1+d2sin(q1+q2)),wherem1andm2are the masses of the two links, g0= 9.81 [m/s2] is the gravity acceleration, andd1andd2are the (oriented) distances of the the center of mass of link 1 and, respectively, of link2 from the associated joint axes ( d1andd2can be positive, zero, or negative). The gravity termis theng(q) =(\u2202U\u2202q)T=((m1d1+m2l1)g0cosq1+m2d2g0cos(q1+q2)m2d2g0cos(q1+q2)),from which the requested mechanical conditions are:g(q)\u22610\u21d0\u21d2\uf8f1\uf8f2\uf8f3d2= 0,d1=\u2212m2m1l1<0.The center of mass of the second link is then on the axis of joint 2, while the center of mass of the\ufb01rst link is located \u2018in opposition\u2019 to the second link 2 with respect to the joint 2 axis so that thecenter of gravity of the two masses of the \ufb01rst and second link lies always on the axis of joint 1.In these conditions, it follows that U\u22610 (or constant).In the presence of a payload, the additional potential energy UMdue to the point-wise massMat the end-effector isUM=Mg0(l1sinq1+l2sin(q1+q2)),and so the gravity term in the robot dynamics becomesg(q) =(\u2202UM\u2202q)T=Mg0(l1cosq1+l2cos(q1+q2)l2cos(q1+q2)).Evaluating this at q=qdyields the term g(qd) in the control law (1).For part 2.b, one relies on the property of boundedness for the gradient of the gravity term forall con\ufb01gurations of the robot, i.e.,\ued79\ued79\ued79\ued79\u2202g(q)\u2202q\ued79\ued79\ued79\ued79\u2264\u03b1,\u2200q,where\u03b1is a suitable (large enough) positive constant, and the norm of the matrix A=\u2202g\u2202qisde\ufb01ned1as the square root of the largest eigenvalue of the (symmetric and positive semi-de\ufb01nite)matrix ATA:\u2225A\u2225=\u221a\u03bbmax(ATA).1This matrix norm is the one induced by (or, naturally associated with) the standard Euclidean norm of vectors:\u2225x\u2225=\u221axTx.2Indeed, both the con\ufb01guration-dependent norm of matrix Aand its constant upper bound \u03b1willbe functions of (in particular, increase with) the mass M. In order to guarantee that the controllaw (1) globally asymptotically stabilizes any desired equilibrium state of the robot, with the PDgains chosen as in (2), it will be sufficient to have\u03b1<KP,min= 100. (3)We compute thenA=\u2202g\u2202q=Mg0(\u2212l1sinq1\u2212l2sin(q1+q2)\u2212l2sin(q1+q2)\u2212l2sin(q1+q2)\u2212l2sin(q1+q2)),andATA= (Mg0)2\u00b7((l1sinq1+l2sin(q1+q2))2+ (l2sin(q1+q2))2(l1sinq1+l2sin(q1+q2))l2sin(q1+q2)(l1sinq1+l2sin(q1+q2))l2sin(q1+q2) 2 ( l2sin(q1+q2))2).The two (real and non-negative) eigenvalues of ATAare the roots ofdet(\u03bbI\u2212ATA)=\u03bb2\u2212b(q,M)\u03bb+c(q,M) = 0,withb(q,M) = (Mg0)4((l1sinq1+l2sin(q1+q2))2+ 3 (l2sin(q1+q2))2)\u22650,c(q,M) = (Mg0)4[2 (l2sin(q1+q2))4+ (l2sin(q1+q2))2(l1sinq1+l2sin(q1+q2))2]\u22650,and where the inequalities on the right hold for all qand all positive values of M. For a givenM > 0 and q, the largest of the two eigenvalues is written compactly as\u03bbmax(AT(q,M)A(q,M))=b(q,M) +\u221ab2(q,M)\u22124c(q,M)2.From the non-negativity of both bandc, an upper bound to this expression is obtained by simplyneglectingc, so that\u03bbmax(AT(q,M)A(q,M))\u2264b(q,M).The maximum value for b(q,M) over all possible qis obtained when simultaneouslysinq1= 1 AND sin( q1+q2) = 1 (e.g., for q1=\u03c0/2,q2= 0).Plugging the numerical values of the link lengths, l1=l2= 1, and setting g0= 9.81, we can setfor the constant \u03b1to be used as an upper bound to \u2225\u2202g/\u2202q\u2225\u03b12=b(q,M)|q1=\u03c0/2,q2=0= 7\u00b7(9.81)4\u00b7M4,and thus\u03b1=\u221a7\u00b7(9.81)2\u00b7M2.Therefore, the inequality (3) is satis\ufb01ed forM <109.8114\u221a7\u22430.6267 [kg].", "robot": "2R", "tags": ["vertical"]},
 "84": {"file": "Robotics2_23.06.12.pdf", "date": "23-06-12", "num_ex": 0, "exam": "robo2", "question": "Consider the 4R planar robot in Fig. 1, with generic lengths, masses and inertias of the links butwith the center of mass of each link placed on its kinematic axis. As shown in the \ufb01gure, theabsolute angles of the links with respect to the axis x0must be used as generalized coordinates q.\u2295y0x0q2q1\u2295\u2295\u2295q3q4Figure 1: A 4R planar robot.\u2022Compute the inertia matrix M(q) of this robot.\u2022From the elements of M(q), derive the expression of the robot inertia matrix when using insteadthe Denavit-Hartenberg joint angles \u03b8as generalized coordinates.\u2022With the experience gained for the case n= 4, provide the general expression of the kineticenergyTi(q,\u02d9q) of linkiin anR planar robot using the generalized coordinates qand undersimilar assumptions.", "solution": "We compute the kinetic energy of this 4R planar robot, taking advantage of the absolute coordinatesqi,i= 1,..., 4, as shown in Fig. 1. Let mibe the mass and lithe kinematic length of link i,dcithe distance along the link axis of the center of mass (CoM) of link ifrom the previous joint, andIcithe barycentric inertia of link iaround the axis normal to the plane of motion. The positionpciand the velocity vciof the CoM of link iare two-dimensional vectors in the plane ( x0,y0).For the \ufb01rst link, we haveT1=12(Ic1+m1d2c1)\u02d9q21.For the second link, beingvc2=\u02d9pc2=ddt(l1c1+dc2c2l1s1+dc2s2)=(\u2212(l1s1\u02d9q1+dc2s2\u02d9q2)l1c1\u02d9q1+dc2c2\u02d9q2),it isT2=12Ic2\u02d9q22+12m2\u2225vc2\u22252=12m2l21\u02d9q21+12(Ic2+m2d2c2)\u02d9q22+m2l1dc2c2\u22121\u02d9q1\u02d9q2,wherec2\u22121= cos(q2\u2212q1).For the third link, beingvc3=\u02d9pc3=ddt(l1c1+l2c2+dc3c3l1s1+l2s2+dc3s3)=(\u2212(l1s1\u02d9q1+l2s2\u02d9q2+dc3s3\u02d9q3)l1c1\u02d9q1+l2c2\u02d9q2+dc3c3\u02d9q3),it isT3=12Ic3\u02d9q23+12m3\u2225vc3\u22252=12m3(l21\u02d9q21+l22\u02d9q22)+12(Ic3+m3d2c3)\u02d9q23+m3(l1l2c2\u22121\u02d9q1\u02d9q2+l1dc3c3\u22121\u02d9q1\u02d9q3+l2dc3c3\u22122\u02d9q2\u02d9q3),wherec3\u22121= cos(q3\u2212q1) andc3\u22122= cos(q3\u2212q2).For the fourth and last link, we follow the same pattern and obtainT4=12Ic4\u02d9q24+12m4\u2225vc4\u22252=12m4(l21\u02d9q21+l22\u02d9q22+l23\u02d9q23)+12(Ic4+m4d2c4)\u02d9q24+m4(l1l2c2\u22121\u02d9q1\u02d9q2+l1l3c3\u22121\u02d9q1\u02d9q3+l2l3c3\u22122\u02d9q2\u02d9q3+ (l1c4\u22121\u02d9q1+l2c4\u22122\u02d9q2+l3c4\u22123\u02d9q3)dc4\u02d9q4),wherec4\u22121= cos(q4\u2212q1),c4\u22122= cos(q4\u2212q2) andc4\u22123= cos(q4\u2212q4).Finally,T=T1+T2+T3+T4=12\u02d9qTM(q)\u02d9q3and the robot inertia matrix is given byM(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8edIc1+m1d2c1+ (m2+m3+m4)l21 symm(m2dc2+ (m3+m4)l2)l1c2\u22121Ic2+m2d2c2+ (m3+m4)l22(m3dc3+m4l3)l1c3\u22121 (m3dc3+m4l3)l2c3\u22122 Ic3+m3d2c3+m4l23m4dc4l1c4\u22121 m4dc4l2c4\u22122 m4dc4l3c4\u22123 Ic4+m4d2c4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The coordinate transformation between the \u03b8variables of Denavit-Hartenberg and the generalizedcoordinatesqis linear and is given byq=T\u03b8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1 0 0 01 1 0 01 1 1 01 1 1 1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u03b8\u21d0\u21d2\u03b8=T\u22121q=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1 0 0 0\u22121 1 0 00\u22121 1 00 0\u22121 1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8q.To obtain the inertia matrix in the new coordinates \u03b8, we \ufb01rst replace the arguments of the cosinefunctions inside the elements mij(q) ofM(q) as follows:c2\u22121= cos\u03b82, c 3\u22121= cos(\u03b82+\u03b83), c 4\u22121= cos(\u03b82+\u03b83+\u03b84),c3\u22122= cos\u03b83c4\u22122= cos(\u03b83+\u03b84), c 4\u22123= cos\u03b84.Applying then the transformation rule, one obtains\u02dcM(\u03b8) =TTM(q)|q=T\u03b8T=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edm11+ 2m12+ 2m13+ 2m14+m22+ 2m23+ 2m24+m33+ 2m34+m44symmm12+m13+m14+m22+ 2m23+ 2m24+m33+ 2m34+m44m22+ 2m23+ 2m24+m33+ 2m34+m44m13+m14+m23+m24+m33+ 2m34+m44m23+m24+m33+ 2m34+m44m33+ 2m34+m44m14+m24+m34+m44 m24+m34+m44 m34+m44 m44\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8|q=T\u03b8,which clearly shows how more cumbersome would be the explicit expression of the robot inertiamatrix for this robot when using the DH (relative) angles \u03b8.For thenR planar robot, based on the previous derivations and under the same assumptions, it iseasy to \ufb01nd the general expression for the kinetic energy of link i, fori= 1,...,n :Ti(q,\u02d9q) =12Ici\u02d9q2i+12mi\u2225vci\u22252,with\u2225vci\u22252=i\u22121\u2211j=1l2j\u02d9q2j+d2ci\u02d9q2i+ 2i\u22121\u2211j=1\uf8eb\uf8edi\u22121\u2211k=j+1lkck\u2212j\u02d9qk\uf8f6\uf8f8lj\u02d9qj+ 2\uf8eb\uf8edi\u22121\u2211j=1ljci\u2212j\u02d9qj\uf8f6\uf8f8dci\u02d9qi.4", "robot": "4R", "tags": ["planar"]},
 "85": {"file": "Robotics2_23.06.12.pdf", "date": "23-06-12", "num_ex": 1, "exam": "robo2", "question": "Let the robot of Fig. 1 have all four links of unitary length, and suppose that we can commandthe robot using the joint velocities \u02d9q\u2208R4. With the robot in the con\ufb01gurationq0=(0\u03c06\u2212\u03c03\u2212\u03c03)T,consider two (alternative or simultaneous) tasks: (i)the end-effector should move with a velocityve\u2208R2; and (ii)the tip of the second link should move with a velocity vt\u2208R2. Determine thejoint velocity commands \u02d9qfor the following problems:a. execute at best the end-effector task ve= (0.4330,\u22120.75), while minimizing the norm of \u02d9q;b. execute at best the second link tip task vt= (\u22120.5,0.8660), while minimizing the norm of \u02d9q;c. execute at best both tasks veandvtsimultaneously;d. execute at best both tasks veandvt, with priority to the end-effector task ve;e. execute at best both tasks veandvt, with priority to the second link tip task vt.For each case, provide also the obtained velocity errors eeandeton both tasks (whether assignedor not) and their norm.1", "solution": "With all links of the 4R planar robot being of unitary length and using again the absolute jointvariables of Fig. 1, the Jacobians for the two considered tasks areJe(q) =(\u2212s1\u2212s2\u2212s3\u2212s4c1c2c3c4)ve=Je(q)\u02d9qandJt(q) =(\u2212s1\u2212s20 0c1c20 0)vt=Jt(q)\u02d9q.In the con\ufb01guration q0(see Fig. 4), we haveJe(q0) =(0\u22120.5 0.8660 0.86601 0.8660 0.5 0.5)\u21d2 rankJe(q0) = 2andJt(q0) =(0\u22120.5 0 01 0.8660 0 0)\u21d2 rankJt(q0) = 2,showing that both tasks can certainly be executed separately, no matter which are the values ofveandvt. However, the complete Jacobian for the two simultaneous tasks is singular,rankJ(q0) = rank(Je(q0)Jt(q0))= 3<4,and thus the robot is in an algorithmic singularity.y0x0q2 = \ud835\udf0b6\u2044q1 = 0q3 = \u2212\ud835\udf0b3\u2044q4 = \u2212\ud835\udf0b3\u2044vtveFigure 4: The 4R planar robot in the con\ufb01guration q0, with the two assigned tasks.With the above in mind, we set for veandvtthe given numerical values (see again Fig. 4), andsolve the stated problems as follows.a. Execute at best the end-effector task ve= (0.4330,\u22120.75), while minimizing the norm of \u02d9q:\u02d9qa=J#e(q0)ve=\uf8eb\uf8ec\uf8ec\uf8ed\u22120.4\u22120.51960.10.1\uf8f6\uf8f7\uf8f7\uf8f8\u21d2ee=ve\u2212Je(q0)\u02d9qa=0et=vt\u2212Jt(q0)\u02d9qa=(\u22120.75981.7160)\u21d2 \u2225et\u2225= 1.8767.5b. Execute at best the second link tip task vt= (\u22120.5,0.8660), while minimizing the norm of \u02d9q:\u02d9qb=J#t(q0)vt=\uf8eb\uf8ec\uf8ec\uf8ed0100\uf8f6\uf8f7\uf8f7\uf8f8\u21d2et=vt\u2212Jt(q0)\u02d9qb=0ee=ve\u2212Jt(q0)\u02d9qb=(0.9330\u22121.6160)\u21d2 \u2225ee\u2225= 1.8660.c. Execute at best both tasks veandvtsimultaneously:\u02d9qc=J#(q0)(vevt)=\uf8eb\uf8ec\uf8ec\uf8ed00.067000\uf8f6\uf8f7\uf8f7\uf8f8\u21d2e=(vevt)\u2212J(q0)\u02d9qc=\uf8eb\uf8ec\uf8ec\uf8ed0.4665\u22120.8080\u22120.46650.8080\uf8f6\uf8f7\uf8f7\uf8f8\u21d2 \u2225e\u2225= 1.3195.d. Execute at best both tasks veandvt, with priority to the end-effector task ve:\u02d9qd=J#e(q0)ve+ (Jt(q0)Pe(q0))#(vt\u2212Jt(q0)J#e(q0)ve)=\uf8eb\uf8ec\uf8ec\uf8ed0\u22120.866000\uf8f6\uf8f7\uf8f7\uf8f8withPe(q0) =I\u2212J#e(q0)Je(q0).\u21d2ee=ve\u2212Je(q0)\u02d9qd=0et=vt\u2212Jt(q0)\u02d9qd=(\u22120.93301.6160)\u21d2 \u2225e\u2225=\u2225et\u2225= 1.8660.e. Execute at best both tasks veandvt, with priority to the second link tip task vt:\u02d9qe=J#t(q0)vt+ (Je(q0)Pt(q0))#(ve\u2212Je(q0)J#t(q0)vt)=\uf8eb\uf8ec\uf8ec\uf8ed0100\uf8f6\uf8f7\uf8f7\uf8f8withPt(q0) =I\u2212J#t(q0)Jt(q0).\u21d2et=vt\u2212Jt(q0)\u02d9qe=0ee=ve\u2212Je(q0)\u02d9qe=(0.9330\u22121.6160)\u21d2 \u2225e\u2225=\u2225ee\u2225= 1.8660.Summarizing, one can observe that:\u2022As expected, the attempt to execute both tasks simultaneously without the use of any priority(case c.) produces errors on all tasks components, due to the algorithmic singularity. On theother hand, the introduction of priority preserves the correct execution of one of the two tasks.Nonetheless, the norm of the error on the complete set of tasks in the \ufb01rst case is smaller(\u2225e\u2225= 1.3195) than when using priorities ( \u2225e\u2225= 1.8660 in both cases d. and e.).\u2022In the speci\ufb01c situation considered, the independent execution of either of the two tasks withoutcare of the other (cases a. and b.) and their simultaneous execution with priority given to eitherof the two tasks (cases d. and e., respectively) produce exactly the same error in norm for thediscarded or the lower priority task.6\u2022The two chosen velocity tasks for the tip of the second link and for the end-effector are highlycon\ufb02icting (as apparent also from the geometry in Fig. 4). In fact, the two velocity vectorsveandvthave a common direction, but opposite orientations. Moreover, they lie along theCartesian direction where the third and fourth link of the robot are stretched: as a consequence,joints 3 and 4 cannot contribute to their simultaneous execution. Note also that these two taskvelocities are slightly different in norm ( \u2225ve\u2225= 0.8660,\u2225vt\u2225= 1): if we had chosen still thesame common direction, but exactly opposite values (i.e., ve=\u2212vt), the best solution in casec. would have been \u02d9qc=0(the robot does not move!).", "robot": "RPRP", "tags": ["planar"]},
 "86": {"file": "Robotics2_23.06.12.pdf", "date": "23-06-12", "num_ex": 2, "exam": "robo2", "question": "For regulating the PRR planar robot shown in Fig. 2 to a desired con\ufb01guration qd, the PD+gravitycompensation torque \u03c4=KP(qd\u2212q)\u2212KD\u02d9q+g(qd) is being used, with diagonal gain matricesKP>0 andKD>0. For this control law, provide the symbolic expression of the feedforwardtermg(qd) and of the minimum constant value for the elements of KPthat guarantees globalasymptotic stabilization of any desired equilibrium con\ufb01guration qd.q1q2yx\u2295m2m1\u2295dc2l2g0q3\u2295m3Figure 2: A PRR planar robot under gravity.q1q2yxAmpg0B\ud835\udf0f1\ud835\udf0f2guideFigure 3: The mechanism with a constrained2R robot for elevating payloads.", "solution": "With reference to Fig. 2, the potential energy due to gravity is computed (up to constants) foreach link asU1(q1) =m1g0q1U2(q1,q2) =m2g0(q1+dc2sinq2)U3(q1,q2) =m3g0(q1+l2sinq2),whereg0= 9.81. Thus, from U=U1+U2+U3=U(q), one hasg(q) =(\u2202U\u2202q)T=\uf8eb\uf8ec\uf8edg0(m1+m2+m3)g0cosq2(m2dc2+m3l2)0\uf8f6\uf8f7\uf8f8, (1)from which the feedforward term g(qd) in the control law follows by direct substitution of q2=q2,d.A well known sufficient condition for the global asymptotic stability of a desired equilibrium con\ufb01g-urationqdin a robot controlled by PD + gravity compensation is that KP,m>\u03b1. For a diagonalgain matrixKP,KP,mis the smallest diagonal element of the matrix. The constant \u03b1is de\ufb01nedas a value that bounds the norm of the Hessian matrix of the gravitational potential energy in allcon\ufb01gurations, or\ued79\ued79\ued79\ued79\u22022U\u2202q2\ued79\ued79\ued79\ued79=\ued79\ued79\ued79\ued79\u2202g\u2202q\ued79\ued79\ued79\ued79=\ued6a\ued6b\ued6b\u221a\u03bbmax{(\u2202g\u2202q)T(\u2202g\u2202q)}\u2264\u03b1,\u2200q. (2)Therefore, from\u2202g\u2202q=\uf8eb\uf8ec\uf8ed0 0 00\u2212g0sinq2(m2dc2+m3l2) 00 0 0\uf8f6\uf8f7\uf8f8,the only positive eigenvalue of the symmetric, positive semi-de\ufb01nite matrix{(\u2202g\u2202q)T(\u2202g\u2202q)}is\u03bbmax(q2) =g20(m2dc2+m3l2)2sin2q2and so the minimum value for \u03b1that globally satis\ufb01es (2) is\u03b1=g0(m2dc2+m3l2)>0.Indeed, due to the structure of the gravity vector (1) for this robot, with a \ufb01rst constant componentand a zero third component, it is easy to see that the sufficient condition is simpli\ufb01ed to KP,2>\u03b1while the other two diagonal gains KP,1andKP,3only need to be positive.7", "robot": "PRR", "tags": ["planar"]},
 "87": {"file": "Robotics2_23.06.12.pdf", "date": "23-06-12", "num_ex": 3, "exam": "robo2", "question": "The mechanism in Fig. 3 elevates payloads by means of a 2R robot, which is constrained atits end effector by a vertical guide. The robot has unitary link lengths. The extension of thevertical motion is limited between points A= (0,0.95) andB= (0,1.45) \u2014the robot is never in asingularity. When including also the payload mp, the inertia matrix of the unconstrained 2R robotis parametrized asM(q) =(a1+ 2a2c2a3+a2c2a3+a2c2a3).Derive all the individual elements of the reduced dynamic model of this constrained robotic system.In particular, provide:\u2022the remaining elements c(q,\u02d9q) andg(q) of the 2R robot dynamic model;\u2022the 1\u00d72 Jacobian of the constraint A(q) and a 1\u00d72 completion matrix D(q) that guaranteesnon-singularity in the operating region, together with their time derivatives \u02d9A(q) and \u02d9D(q);\u2022a physical interpretation of the pseudo-velocity v\u2208R;\u2022the (scalar) reduced inertia FT(q)M(q)F(q).Design then a suitable motion control law for the torque \u03c4\u2208R2that should impose a desiredcyclic motion from AtoBand vice versa in a total motion time T. The joint motion of the 2Rrobot should have a continuous acceleration pro\ufb01le at all times. Moreover, no reaction force \u03bb\u2208Rshould be exerted on the end-effector by the constraining guide.[240 minutes; open books]2", "solution": "Given the inertia matrix M(q) of the unconstrained 2R planar robot, the Coriolis and centrifugalterms are derived using the Christoffel symbols (without the need of knowing the actual expressionsof the dynamic coefficients). One obtainsc(q,\u02d9q) =(\u2212a2s2(2 \u02d9q1+ \u02d9q2) \u02d9q2a2s2\u02d9q21).As for the gravity term, the potential energy should include also the payload. Therefore, being thelink lengths l1=l2= 1, we haveU1(q1) =m1g0dc1s1U2(q1,q2) =m2g0(s1+dc2s12)Up(q1,q2) =mpg0(s1+s12),whereg0= 9.81. FromU=U1+U2+Up=U(q), one hasg(q) =(\u2202U\u2202q)T=(g0(m1dc1+m2+mp)c1+g0(m2dc2+mp)c12g0(m2dc2+mp)c12)=(a4c1+a5c12a5c12).The guide constrains the motion of the robot end-effector to h(q) =px(q) = 0. Thus, from thedirect kinematics, we haveh(q) =c1+c12= 0\u21d2A(q) =\u2202h\u2202q=(\u2212(s1+s12)\u2212s12).A convenient choice for completing a square nonsingular matrix isD(q) =(c1+c12c12). (3)In fact, the resulting matrix is nothing else than the robot Jacobian(A(q)D(q))=(\u2212(s1+s12)\u2212s12c1+c12c12)=J(q),whose determinant det J(q) =s2never vanishes in the operating region of the constrained mech-anism. Therefore, we can safely invert this matrix and obtain(A(q)D(q))\u22121=1s2(c12 s12\u2212(c1+c12)\u2212(s1+s12))=(E(q)F(q)).Moreover, the following time derivatives are needed:\u02d9A(q) =(\u2212c1\u02d9q1\u2212c12( \u02d9q1+ \u02d9q2)\u2212c12( \u02d9q1+ \u02d9q2))\u02d9D(q) =(\u2212s1\u02d9q1\u2212s12( \u02d9q1+ \u02d9q2)\u2212s12( \u02d9q1+ \u02d9q2)).The choice (3) leads also to a simple physical interpretation of the pseudo-velocityv=D(q)\u02d9q=c1\u02d9q1+c12( \u02d9q1+ \u02d9q2)as the end-effector velocity component along the ydirection, i.e., v=vy= \u02d9py(q). Finally, thereduced inertia of the constrained robot is evaluated asFT(q)M(q)F(q) =1s22(a3s21+ (a1\u2212a3)s212\u22122a2s1s12c2)>0.8The motion control law is computed by inverse dynamics and is given by\u03c4=M(q)(F(q) \u02d9vd\u2212(E(q)\u02d9A(q) +F(q)\u02d9D(q))\u02d9q)+c(q,\u02d9q) +g(q), (4)where each individual term has already been de\ufb01ned, except for the desired pseudo-acceleration \u02d9 vd.It can be shown that the control law (4) provides\u02d9v= \u02d9vd, \u03bb = 0,as requested.Multiple possibilities are available for the de\ufb01nition of a smooth cyclic motion with period Tbetween points AandB. For instance, one can use two specular quintic polynomials, one for theelevation from AtoBin the time interval t\u2208[0,T/2], the other for returning from BtoAwitht\u2208[T/2,T]. By imposing zero boundary conditions on the \ufb01rst and second time derivatives atAy= 0.95 andBy= 1.45, we obtainpy,d(t) =\uf8f1\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f3Ay+ (By\u2212Ay)(10\u03c33\u221215\u03c34+ 6\u03c35), \u03c3 =tT/2, t\u2208[0,T/2],By+ (Ay\u2212By)(10\u03c33\u221215\u03c34+ 6\u03c35), \u03c3 =t\u2212T/2T/2, t\u2208[T/2,T].From this, we get the pseudo-acceleration command\u02d9vd(t) = \u00a8py,d(t) =\uf8f1\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f360 (By\u2212Ay)(T/2)2(\u03c3\u22123\u03c32+ 2\u03c33), \u03c3 =tT/2, t\u2208[0,T/2],60 (Ay\u2212By)(T/2)2(\u03c3\u22123\u03c32+ 2\u03c33), \u03c3 =t\u2212T/2T/2, t\u2208[T/2,T].The desired position pro\ufb01le py,d(t) and the pseudo-acceleration command \u02d9 vd(t) are shown in Fig. 5,for a chosen motion period of T= 1 s.00.10.20.30.40.50.60.70.80.91time [s]0.9511.051.11.151.21.251.31.351.41.45py,d [m] desired position profile00.10.20.30.40.50.60.70.80.91time [s]-15-10-5051015dvd/dt [m/s2] desired pseudo-accelerationFigure 5: Periodic motion of the constrained robot end-effector: py,d(t) [left] and \u02d9 vd(t) [right].", "robot": "2R", "tags": ["planar", "vertical"]},
 "88": {"file": "Robotics2_15.04.01.pdf", "date": "15-04-01", "num_ex": 0, "exam": "robo2", "question": "Consider the planar RP in Fig. 1, moving in the vertical plane. The center of mass of the \ufb01rstlink lies always on the axis of the revolute joint. In the following, use the generalized coordinatesq= (q1, q2) de\ufb01ned in this \ufb01gure.Figure 1: A planar RP robot moving in the vertical planea) Determine all equilibrium con\ufb01gurations q0= (q01, q02) for the open-loop system.b) Derive the linearized model equations, obtained by a \ufb01rst-order Taylor expansion around anequilibrium x= (q,\u02d9q) = (q0,0) =x0, expressed in the state-space format \u02d9x=Ax+Bu,where uis the vector of generalized joint forces provided by the actuators.c) Design a regulation controller that globally asymptotically stabilizes any desired state of theformx0= (q0,0) in the closed-loop system, specifying all model terms in the control law.d) What kind of behavior can be inferred locally around the desired state for the obtainedclosed-loop system, using the linearized model as in step b)?", "solution": "<EMPTY>", "robot": "RP", "tags": ["planar", "vertical"]},
 "89": {"file": "Robotics2_15.04.01.pdf", "date": "15-04-01", "num_ex": 1, "exam": "robo2", "question": "Figure 2: A planar 3R robot moving among obstaclesThe 3R robot shown in Fig. 2 has equal links of unitary length and is redundant for all tasksde\ufb01ned only in terms of the position of its end effector in the plane. The robot should move itsend-effector toward the goal, while avoiding to collide with the obstacles in its workspace. Discussthe use of redundancy for the speci\ufb01c con\ufb01guration shown in the \ufb01gure, illustrating also graphicallythe instantaneous velocities imposed to the robot structure by the goal attraction and the repulsionfrom the obstacle(s).[120 minutes; open books]", "solution": "<EMPTY>", "robot": "3R", "tags": ["planar"]},
 "90": {"file": "Robotics2_14.07.15.pdf", "date": "14-07-15", "num_ex": 0, "exam": "robo2", "question": "A KUKA LWR has its base mounted on a vertical wall as illustrated in Fig. 1, where the robot isshown in its zero con\ufb01guration. Consider a situation in which the last three joints (constituting aspherical wrist with center at W=O6) are permanently frozen at their zero values.For kinematic and dynamic analysis, use the DH frame assignment as in the \ufb01gure and assumethatl1=l2=l3=l4=l5(while l0andl6are different). Frame 7 is drawn for clarity in a displacedposition, but is actually located on the \ufb01nal \ufb02ange of the robot at a distance l6fromW. Each linkhas mass mi(i= 0,1, . . . , 7, including the base) and its center of mass is on one of the axes of theDH frame attached to it. In particular, for the \ufb01rst six bodies, the center of mass lies along the(positive direction of) axis zifor orange/even links ( i= 0,2,4) or along the (negative direction of)axisyifor yellow/odd links ( i= 1,3,5). For links 6 and 7, the two centers of mass are collocatedwithO6andO7, respectively.l6 l0 l5 l4 l3 l2 l1 x7 y7 z7 x5,x6 y0 x0 z0 z1 z3 z5 y2 y4 y6 y5,z6 y1,z2 x1,x2 y3,z4 x3,x4 g0Figure 1: DH frames for a KUKA LWR robot, with direction of gravity acceleration indicated\u2022Let\u03b8\u2208R4be the variables of the \ufb01rst four active joints. Determine the symbolic expressionof the gravity term g(\u03b8)\u2208R4of this 4-dof dynamic model of the LWR robot.\u2022Find all unforced equilibrium con\ufb01gurations of the 4-dof structure.[180 minutes; open books]", "solution": "<EMPTY>", "robot": "RPPRRR", "tags": ["vertical"]},
 "91": {"file": "Robotics2_13.02.06.pdf", "date": "13-02-06", "num_ex": 0, "exam": "robo2", "question": "The end-effector of the RProbot in Fig. 1 is constrained to move on the Cartesian line x=k,withk>0.q2 q1 X0 Y0 x = k dFigure 1: A RProbot moving on a horizontal plane with its end-effector constrained on a line\u2022Derive the expression of the reduced robot dynamics (in this case, a single \ufb01rst-order dif-ferential equation), written in terms of pseudoacceleration and automatically satisfying theconstraint. Try to provide global validity to this model.\u2022Design a control law that regulates to constant desired values vdand\u03bbd, respectively thetangent velocity and the normal force to the end-effector constraint.[120 minutes; open books]1", "solution": "Following the Lagrangian approach for a robot with N, with multipliers \u03bbused to weigh the M-dimensional holonomic constraints h(q) =0, the dynamic equations (in the absence of gravity)take the formB(q)\u00a8q+c(q,\u02d9q) =u+AT(q)\u03bbs.t.h(q) =0, (1)withA(q) =\u2202h(q)/\u2202q.The reduced dynamic model is obtained by restricting the motion to a R-dimensional con\ufb01gu-ration space, with R=N\u2212M, that is automatically compatible with the constraints h(q) =0.The constraints are thus discarded from the formulation. At the same time, it is also possible toeliminate the appearance of the multipliers (i.e., of the forces that arise when attempting to violatethe constraints) in the resulting dynamic equations.We provide \ufb01rst the terms that appear in (1), namely the robot inertia matrix B, the Coriolisand centrifugal vector c, and the matrix A. The kinetic energy1isT=T1+T2=12I1\u02d9q21+12(I2\u02d9q21+m2vTc2vc2).Sincepc2=((q2\u2212d) cosq1(q2\u2212d) sinq1)\u21d2vc2=\u02d9pc2=(\u2212(q2\u2212d) sinq1\u02d9q1+ \u02d9q2cosq1(q2\u2212d) cosq1\u02d9q1+ \u02d9q2sinq1),it followsT=12(I1+I2+m2(q2\u2212d)2)\u02d9q21+12m2\u02d9q22=12\u02d9qT(I1+I2+m2(q2\u2212d)200 m2)\u02d9q=12\u02d9qTB(q)\u02d9q.From the inertia matrix, using the Christoffel symbols, we obtainc(q,\u02d9q) =(2m2(q2\u2212d) \u02d9q1\u02d9q2\u2212m2(q2\u2212d) \u02d9q21).The (scalar) Cartesian constraint on the end-effector ish(q) =q2cosq1\u2212k= 0.Thus,A(q) =\u2202h(q)\u2202q=(\u2212q2sinq1cosq1).The reduction of the dynamics proceeds then as follows. In the present case, it is N= 2 andM= 1, so that R= 1. De\ufb01ne the matrix D(q) (a row in our case) such that(A(q)D(q))=(\u2212q2sinq1cosq1d1(q)d2(q))isnonsingular .1For simplicity, it is assumed that the \ufb01rst link has its center of mass on the axis of the \ufb01rst joint. Otherwise, ifthe center of mass is at a distance dc1, simply replace I1byI1+m1d2c1in the following.2A good choice isD(q) =(q2cosq1sinq1)\u21d2 det(A(q)D(q))=\u2212q2.Since the end-effector is constrained to live on x=k > 0, it will always be q2\u0338= 0. Thus, therequested non-singularity of the matrix holds globally as long as the constraint is enforced. Thisimplies that the following derivations will lead also to a globally de\ufb01ned reduced model.De\ufb01ne then the pseudovelocity v(a scalar) and its derivative \u02d9 v(the pseudoacceleration) asv=D(q)\u02d9q=q2cosq1\u02d9q1+ sinq1\u02d9q2,\u02d9v=D(q)\u00a8q+\u02d9D(q)\u02d9q=q2cosq1\u00a8q1+ sinq1\u00a8q2\u2212q2sinq1\u02d9q21+ 2 cosq1\u02d9q1\u02d9q2.To invert these relations, de\ufb01ne(E(q)F(q))=(A(q)D(q))\u22121=\uf8eb\uf8ed\u2212sinq1q2cosq1q2cosq1sinq1\uf8f6\uf8f8.We obtain then\u02d9q=F(q)v=\uf8eb\uf8edcosq1q2sinq1\uf8f6\uf8f8v,\u00a8q=F(q) \u02d9v+\u02d9F(q)v=\uf8eb\uf8edcosq1q2sinq1\uf8f6\uf8f8\u02d9v+\uf8eb\uf8ec\uf8ed\u2212(sinq1\u02d9q1q2+cosq1\u02d9q2q22)cosq1\u02d9q1\uf8f6\uf8f7\uf8f8v.(2)Based on their de\ufb01nitions, the matrix relations AF=OandAE=Ihold for allq. Premul-tiplying (1) by FT(q) and substituting the acceleration \u00a8qfrom (2) yieldsFT(q)B(q)F(q) \u02d9v=FT(q)(u\u2212B(q)\u02d9F(q)v\u2212c(q,\u02d9q)), (3)which is the reduced dynamics that we were looking for \u2014in fact, a scalar \ufb01rst-order differentialequation in v. All terms in (3) have been de\ufb01ned, but we can write more explicitly the leadingscalar (a pseudoinertia)FT(q)B(q)F(q) =(I1+I2+m2(q2\u2212d)2)cos2q1q22+m2sin2q1.Similarly, by premultiplying (1) by ET(q) (a row) we can isolate the scalar multiplier \u03bb. Sub-stituting the acceleration \u00a8qfrom (2) yields\u03bb=ET(q)(B(q)F(q) \u02d9v+B(q)\u02d9F(q)v+c(q,\u02d9q)\u2212u). (4)The control task is de\ufb01ned at the end-effector level, and requires the stabilization to zero ofthe errorev=vd\u2212vfor the tangential velocity and of the error e\u03bb=\u03bbd\u2212\u03bbfor the normal force.3The tangential and normal directions are indeed referred to the geometry of the constraint. Thishybrid control task is easily achieved in a linear and decoupled way by using a preliminary feedbacklinearization law for the joint-space control input u\u2208R2. De\ufb01ning in eqs. (3) and (4)u=B(q)\u02d9F(q)v+c(q,\u02d9q) +B(q)F(q)u1\u2212AT(q)u2leads simultaneously to\u02d9v=u1, \u03bb =u2.The control design is completed by choosingu1=k1ev, u 2=\u03bbd+k2\u222bt0e\u03bb(\u03c4)d\u03c4,withk1>0,k2>0. Beside the feedforward term ( \u03bbdin the force loop, while \u02d9 vd= 0 in the velocityloop for constant desired velocity), we have respectively a proportional action on the velocity errorand an integral action on the force error. The two error dynamics will be\u02d9ev+k1ev= 0, e \u03bb+k2\u222be\u03bb= 0,both exponentially converging to zero.", "robot": "RP", "tags": ["horizontal", "constraints"]},
 "92": {"file": "Robotics2_18.03.27.pdf", "date": "18-03-27", "num_ex": 0, "exam": "robo2", "question": "An automated crane can be seen as a mechanical system with two degrees of freedom that movesalong a horizontal rail subject to the actuation force F, and that transports a swinging linkconnected with a passive and frictionless revolute joint, as sketched in Fig. 1. With reference tothe kinematic variables and dynamic parameters de\ufb01ned therein:\u2022derive the dynamic model of this system using a Lagrangian formalism;\u2022provide a linear parameterization of the obtained model in terms of a minimal number ofdynamic coefficients;\u2022provide a linear approximation of the nonlinear model for small variations around the un-forced equilibrium state x0=(q1q2\u02d9q1\u02d9q2)T=0;\u2022\ufb01nd the nonlinear state feedback law for the force F=F(x,a) that linearizes exactly thedynamics of the \ufb01rst coordinate as \u00a8 q1=a.g0 m F q1 q2 \u43a9!mp, Ip dp passive jointFigure 1: An automated crane with the relevant kinematic and dynamic de\ufb01nitions.", "solution": "The crane is an underactuated mechanical system with n= 2 degrees of freedom, but with onlya single control command ( p= 1). To derive its dynamic model, we can follow a Lagrangianapproach. For this, the position and velocity of the center of mass of the swinging link are1pc=(q1+dpsinq2\u2212dpcosq2),vc=\u02d9pc=(\u02d9q1+dpcosq2\u02d9q2dpsinq2\u02d9q2).The kinetic energy of the system isT=Tm+Tp=12m\u02d9q21+12mp\u2225vc\u22252+12Ip\u02d9q22=12((m+mp) \u02d9q21+ (Ip+mpd2p) \u02d9q22+ 2mpdpcosq2\u02d9q1\u02d9q2),and thusT=12\u02d9qTM(q)\u02d9q\u21d2M(q) =(m+mpmpdpcosq2mpdpcosq2Ip+mpd2p).Using the Christoffel\u2019s symbols, we found only a centrifugal termc(q,\u02d9q) =(\u2212mpdpsinq2\u02d9q220).The potential energy and the associated gravity vector areU=U0\u2212mpg0dpcosq2\u21d2g(q) =(\u2202U(q)\u2202q)T=(0mpg0dpsinq2),withg0= 9.81 [m/s2]. Assuming the possible presence of a viscous friction term (with a viscouscoefficientfv\u22650) on the movement along the rail, the dynamic equations take the scalar form(m+mp)\u00a8q1+mpdpcosq2\u00a8q2\u2212mpdpsinq2\u02d9q22+fv\u02d9q1=Fmpdpcosq2\u00a8q1+ (Ip+mpd2p)\u00a8q2+mpg0dpsinq2= 0(1)Equations (1) can be rewritten in the linearly parametrized form(\u00a8q10 cosq2\u00a8q2\u2212sinq2\u02d9q22\u02d9q10 \u00a8q2cosq2\u00a8q1+g0sinq20)\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm+mpIp+mpd2pmpdpfv\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=Y(q,\u02d9q,\u00a8q)\u03c0=(F0).The linear approximation of the dynamic equations of the crane around the (stable) equilibriumstatex0=(qT0\u02d9qT0)T=(q1q2\u02d9q1\u02d9q2)T=0, which satis\ufb01es (1) with F=F0= 0 (unforced), isobtained by setting in (1)q=q0+\u2206q=\u2206q,\u02d9q=\u02d9q0+\u2206\u02d9q=\u2206\u02d9q,\u00a8q=\u00a8q0+\u2206\u00a8q=\u2206\u00a8q, F =F0+ \u2206F= \u2206F,1We have taken the x-axis along the rail, and the y-axis in the vertical upward direction.2and neglecting second- and higher-order increments (e.g., setting sin \u2206 q2\u2243\u2206q2and cos \u2206q2\u22431):(m+mpmpdpmpdpIp+mpd2p)(\u2206\u00a8q1\u2206\u00a8q2)+(fv00 0)(\u2206 \u02d9q1\u2206 \u02d9q2)+(0 00mpg0dp)(\u2206q1\u2206q2)=(\u2206F0).Finally, partial feedback linearization of the crane dynamics as concerns the motion of q1is obtainedas follows. Solve (globally!) for the revolute joint acceleration \u00a8 q2from the second equation in (1),\u00a8q2=\u22121Ip+mpd2p(mpdpcosq2\u00a8q1+mpdpg0sinq2)and substitute it in the \ufb01rst one, yielding((m+mp)\u2212m2pd2pcos2q2Ip+mpd2p)\u00a8q1\u2212m2pd2pg0sinq2cosq2Ip+mpd2p\u2212mpdpsinq2\u02d9q22+fv\u02d9q1=F.From this, it is immediate to see that the nonlinear state feedback lawF=(m+mp)Ip+mm pd2p+m2pd2psin2q2Ip+mpd2pa\u2212m2pd2pg0sinq2cosq2Ip+mpd2p\u2212mpdpsinq2\u02d9q22+fv\u02d9q1yields (again, globally) \u00a8 q1=a. Accordingly, the second equation in (1) becomes(Ip+mpd2p)\u00a8q2+mpg0dpsinq2=\u2212mpdpcosq2a", "robot": "RPR", "tags": ["horizontal", "vertical"]},
 "93": {"file": "Robotics2_18.03.27.pdf", "date": "18-03-27", "num_ex": 1, "exam": "robo2", "question": "The end-effector of a PPR robot moving on a horizontal plane and equipped with a 2D force sensorshould follow a stiff and frictionless linear surface tilted by \u03b1>0 w.r.t. the absolute yaxis, startingat timet=t0in the position ps=(xsys)T, with a tangential speed Vt=Vt(t0) +At(t\u2212t0)(withVt(t0)>0 and a constant At>0), and applying a constant normal force Fn>0 (see Fig. 2).Assuming full knowledge of geometric, kinematic, and dynamic parameters, provide the symbolicexpressions of the initial robot state and explicitly of all terms in the force/torque commands atthe joints that will guarantee perfect execution of the desired task in nominal conditions. Is thesolution unique? If not, provide the simplest one.\u43a9!\u43a9!\u43a9!q1 q2 q3 dc3 m!,I! m1 m2 dc2 dc1 l3!!2D force sensor stiff and frictionless  linear surface S y x psFigure 2: A PPR robot should move in contact with a stiff and frictionless linear surface.[150 minutes; open books]1", "solution": "Noting that q1affects they-coordinate and q2thex-coordinate, the direct/differential kinematicsof the end-effector position, velocity, and acceleration are given respectively byp=(q2+l3cosq3q1+l3sinq3)=f(q),\u02d9p=\u2202f(q)\u2202q\u02d9q=J(q)\u02d9q=(0 1\u2212l3sinq31 0l3cosq3)\u02d9q (2)and\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=J(q)\u00a8q+(0 0\u2212l3cosq3\u02d9q30 0\u2212l3sinq3\u02d9q3)\u02d9q, (3)where the Jacobian J(q) has been introduced.The robot has n= 3 joints and the (hybrid) planar task has dimension m= 2 (one in force, theother in motion/velocity). In the presence of n\u2212m= 1 degree of redundancy, the task can beexecuted in an in\ufb01nite number of ways, beginning right from the different initial choices of aninverse kinematic con\ufb01guration q(t0) at timet0, among those associated to the initial Cartesianpointp(t0) =ps, and of the initial joint velocity \u02d9q(t0), among those associated to the initialend-effector velocity\u02d9p(t0) =Vt(t0)(\u2212sin\u03b1cos\u03b1).3It is then possible to parametrize the joint-space motion in terms of one variable. In this case, theeasy choice is to pick the third joint variable q3as the parametrizing one. We set an arbitrary (butsufficiently smooth) time pro\ufb01le for itq3(t) =\u03b2(t), \u02d9q3(t) =\u02d9\u03b2(t),\u2200t\u2265t0,and thusq3(t0) =\u03b2(t0), \u02d9q3(t0) =\u02d9\u03b2(t0).As a result, the two prismatic joints will be initialized at(q1(t0)q2(t0))=(ys\u2212l3sin\u03b2(t0)xs\u2212l3cos\u03b2(t0)),with initial velocity(\u02d9q1(t0)\u02d9q2(t0))=(Vt(t0) cos\u03b1\u2212l3\u02d9\u03b2(t0) cos\u03b2(t0)\u2212Vt(t0) sin\u03b1\u2212l3\u02d9\u03b2(t0) sin\u03b2(t0)).Moreover, we can also invert the second-order differential kinematics (3) in a parametrized way as\u00a8q=\uf8eb\uf8ec\uf8ed\u00a8q1\u00a8q2\u00a8q3\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ed\u00a8py+l3(\u2212cos\u03b2\u00a8\u03b2+ sin\u03b2\u02d9\u03b22)\u00a8px+l3(sin\u03b2\u00a8\u03b2+ cos\u03b2\u02d9\u03b22)\u00a8\u03b2\uf8f6\uf8f7\uf8f7\uf8f8. (4)With this in mind, the dynamic model of the planar PPR robot (in the absence of gravity andwithout dissipative effects), when in contact with a stiff environment environment takes the formM(q)\u00a8q+c(q,\u02d9q) =\u03c4+JT(q)F. (5)whereF\u2208R2is the contact force applied by the environment on the robot end-effector (equal andopposite to the one applied by the robot on the environment) and Jhas been de\ufb01ned in (2). Weprovide next the explicit symbolic expressions of the dynamic terms appearing in (5). Note \ufb01rstthat the position and velocity of the center of mass of the third link arepc3=(q2+dc3cosq3q1+dc3sinq3),vc3=\u02d9pc3=(\u02d9q2\u2212dc3sinq3\u02d9q3\u02d9q1+dc3cosq3\u02d9q3).Following a Lagrangian approach, we compute the total kinetic energy T=T1+T2+T3as:T1=12m1\u02d9q21, T 2=12m2(\u02d9q21+ \u02d9q22),T3=12m3(\u02d9q21+ \u02d9q22+d2c3\u02d9q23+ 2dc3\u02d9q3(cosq3\u02d9q1\u2212sinq3\u02d9q2))+12I3\u02d9q23\u21d2T=12\u02d9qTM(q)\u02d9q,withM(q) =\uf8eb\uf8ec\uf8edm1+m2+m3 0m3dc3cosq30 m2+m3\u2212m3dc3sinq3m3dc3cosq3\u2212m3dc3sinq3I3+m3d2c3\uf8f6\uf8f7\uf8f8.The Coriolis and centrifugal terms c(q,\u02d9q) are derived using the Christoffel\u2019s symbols, i.e., for eachcomponentci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i= 1,2,3,4beingmitheith column of the inertia matrix M. We obtainC1(q) =\uf8eb\uf8ec\uf8ed0 0 00 0 00 0\u2212m3dc3sinq3\uf8f6\uf8f7\uf8f8\u21d2c1(q,\u02d9q) =\u2212m3dc3sinq3\u02d9q23,C2(q) =\uf8eb\uf8ec\uf8ed0 0 00 0 00 0\u2212m3dc3cosq3\uf8f6\uf8f7\uf8f8\u21d2c2(q,\u02d9q) =\u2212m3dc3cosq3\u02d9q23,C3(q) =0 \u21d2c3(q,\u02d9q) = 0.We note that there are only centrifugal terms and no Coriolis torques.Applying now to (5) the feedback linearizing control law\u03c4=M(q)a+c(q,\u02d9q)\u2212JT(q)F (6)will transform the system into a set of decoupled input-output integrators\u00a8q=a.For the speci\ufb01ed hybrid task, the desired end-effector acceleration and contact force are respectively\u00a8pd=At(\u2212sin\u03b1cos\u03b1),Fd=Fn(cos\u03b1sin\u03b1).From the desired end-effector acceleration, using (4), we obtain also the desired joint accelerationin parametrized form\u00a8qd=\uf8eb\uf8ec\uf8ec\uf8edAtcos\u03b1+l3(\u2212cos\u03b2\u00a8\u03b2+ sin\u03b2\u02d9\u03b22)\u2212Atsin\u03b1+l3(sin\u03b2\u00a8\u03b2+ cos\u03b2\u02d9\u03b22)\u00a8\u03b2\uf8f6\uf8f7\uf8f7\uf8f8Substituting a=\u00a8qdandF=\u2212Fdin the feedback linearizing law (6), yields the desired nominalcontrol commands\u03c4d=M(q)\uf8eb\uf8ec\uf8ec\uf8edAtcos\u03b1+l3(\u2212cos\u03b2\u00a8\u03b2+ sin\u03b2\u02d9\u03b22)\u2212Atsin\u03b1+l3(sin\u03b2\u00a8\u03b2+ cos\u03b2\u02d9\u03b22)\u00a8\u03b2\uf8f6\uf8f7\uf8f7\uf8f8+c(q,\u02d9q) +JT(q)(Fncos\u03b1Fnsin\u03b1),(7)where the dependence of the inertia matrix Mand of the Jacobian Jis actually only on q3=\u03b2and that of the centrifugal terms cis only onq3=\u03b2and \u02d9q3=\u02d9\u03b2. This can be made more explicitby rewriting (7) in extended form as\u03c4d=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed(m1+m2+m3)(Atcos\u03b1+l3(\u2212cos\u03b2\u00a8\u03b2+ sin\u03b2\u02d9\u03b22))+m3dc3(cos\u03b2\u00a8\u03b2\u2212sin\u03b2\u02d9\u03b22)+Fnsin\u03b1(m1+m3)(\u2212Atsin\u03b1+l3(sin\u03b2\u00a8\u03b2+ cos\u03b2\u02d9\u03b22))\u2212m3dc3(sin\u03b2\u00a8\u03b2+ cos\u03b2\u02d9\u03b22)+Fncos\u03b1(I3+m3d2c3)\u00a8\u03b2+m3dc3(Atcos(\u03b1\u2212\u03b2)\u2212l3\u00a8\u03b2)+Fnl3sin(\u03b1\u2212\u03b2)\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.Note that the \ufb01rst two components of \u03c4dare forces (the units of all terms are [N] = [kg \u00b7m/s2]),while the last component is a torque (units in [Nm]). Moreover, thanks to the fact that the initial5robot state is matched with the task at the initial time t=t0, there will be no need of a feedbackaction on task errors in the nominal control commands (7) in order to execute the entire task inideal conditions.The above parametrized control law is one of the many realizing the desired task, depending on thechoice of the time evolution \u03b2(t) for the variable q3of the revolute joint. Indeed, simpli\ufb01cationsarise for speci\ufb01c choices. The simplest one is choosing to keep q3at a constant value \u03b2, with\u02d9\u03b2=\u00a8\u03b2= 0. We obtain\u03c4d=\uf8eb\uf8ec\uf8ed\u03c4d1\u03c4d2\u03c4d3\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8edAt(m1+m2+m3) cos\u03b1+Fnsin\u03b1\u2212At(m1+m3) sin\u03b1+Fncos\u03b1Atm3dc3cos(\u03b1\u2212\u03b2) +Fnl3sin(\u03b1\u2212\u03b2)\uf8f6\uf8f7\uf8f8.Having chosen to keep the third joint at rest for the entire motion, the robot behaves kinematicallyas a 2P robot. In particular, when placing the third robot link normal to the frictionless surface,we have\u03b2=\u03b1and the third control component reduces to \u03c4d3=Atm3dc3.", "robot": "PPR", "tags": ["planar", "horizontal"]},
 "94": {"file": "Robotics2_21.02.04.pdf", "date": "21-02-04", "num_ex": 0, "exam": "robo2", "question": "Consider the RRPR robot in Fig. 1, where all relevant kinematic and dynamic parameters are alsoshown. The robot moves in a vertical plane. Compute the inertia matrix M(q) and the gravityvectorg(q) in the Lagrangian dynamic model of this robot. Provide a linear factorization of eachterm,M(q)\u00a8q=YM(q,\u00a8q)aMandg(q) =Yg(q)ag, introducing dynamic coefficients am\u2208Rpmandag\u2208Rpg. Find also all open-loop equilibrium con\ufb01gurations qe, i.e., such that g(qe) =0.a1q1q2q3q4x0y0\u2a01m1,I1\u2a01\u2a01\u2a01gm2,I2m3,I3m4,I4dc1dc3dc4Figure 1: A 4-dof RRPR robot: DH coordinates, kinematic and dynamic parameters.", "solution": "The dynamic modeling steps and the requested linear factorizations of terms are quite standard pro-cedures. They are sketched hereafter for the given RRPR planar robot without further comments.We assume that the kinematic parameter a1([m]) and the gravity acceleration g0= 9.81 [m/s2]are accurately known. We \ufb01nally evaluate the open-loop equilibria of the robot under gravity.Kinetic energyT1=12(I1+m1d2c1)\u02d9q21T2=12m2a21\u02d9q21+12I2( \u02d9q1+ \u02d9q2)2T3=12m3\u2225vc3\u22252+12I3( \u02d9q1+ \u02d9q2)2pc3=(a1cosq1+ cos (q1+q2) (q3\u2212dc3)a1sinq1+ sin (q1+q2) (q3\u2212dc3))\u21d2vc3=\u02d9pc3=(\u2212(a1s1+s12(q3\u2212dc3)) \u02d9q1\u2212s12(q3\u2212dc3) \u02d9q2+c12\u02d9q3(a1c1+c12(q3\u2212dc3)) \u02d9q1+c12(q3\u2212dc3) \u02d9q2+s12\u02d9q3)T4=12m4\u2225vc4\u22252+12I4( \u02d9q1+ \u02d9q2+ \u02d9q4)2pc4=(a1cosq1+q3cos (q1+q2) +dc4cos (q1+q2+q4)a1sinq1+q3sin (q1+q2) +dc4sin (q1+q2+q4))\u21d2vc4=\u02d9pc4=(\u2212(a1s1+q3s12+dc4s124) \u02d9q1\u2212(q3s12+dc4s124) \u02d9q2+c12\u02d9q3\u2212dc4s124\u02d9q4(a1c1+q3c12+dc4c124) \u02d9q1+ (q3c12+dc4c124) \u02d9q2+s12\u02d9q3+dc4c124\u02d9q4)T(q,\u02d9q) =T1+T2+T3+T4=12\u02d9qTM(q)\u02d9qInertia matrixM(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edm11m12m13m14...m22m23m24......m33m34symm\u00b7\u00b7\u00b7 \u00b7\u00b7\u00b7 m44\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8m11=I1+m1d2c1+I2+I3+m3d2c3+I4+m4d2c4+ (m2+m3+m4)a21+ (m3+m4)q23\u22122m3d3q3\u22122m3dc3a1cosq2+ 2 (m3+m4)a1q3cosq2+ 2m4dc4(a1cos(q2+q4) +q3cosq4)m12=I2+I3+m3d2c3+I4+m4d2c4+ (m3+m4)q23\u22122m3dc3q3\u2212m3dc3a1cosq2+ (m3+m4)a1q3cosq2+m4dc4(a1cos(q2+q4) + 2q3cosq4)m13= (m3+m4)a1sinq2\u2212m4dc4sinq4m14=I4+m4d2c4+m4dd4(a1cos(q2+q4) +q3cosq4)m22=I2+I3+m3d2c3+I4+m4d2c4+ (m3+m4)q23\u22122m3dc3q3+ 2m4dc4q3cosq4m23=\u2212m3dc3sinq4m24=I4+m4d2c4+m4dc4q3cosq4m33=m3+m4m34=\u2212m4dc4sinq4m44=I4+m4d2c43Linear parametrization of the inertia termM(q)\u00a8q=YM(q,\u00a8q)aM,aM\u2208R6m11=aM1+aM4q23\u22122aM3q3+ 2 (aM4q3\u2212aM3)a1c2+ 2aM5(a1c24+q3c4)m12=aM2+aM4q23\u22122aM3q3+ (aM4q3\u2212aM3)a1c2+aM5(a1c24+ 2q3c4)m13=aM4a1s2\u2212aM5s4m14=aM6+aM5(a1c24+q3c4)m22=aM2+aM4q23\u22122aM3q3+ 2aM5q3c4m23=\u2212aM3s4m24=aM6+aM5q3c4m33=aM4m34=\u2212aM5s4m44=aM6aM=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edaM1aM2aM3aM4aM5aM6\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edI1+m1d2c1+I2+I3+m3d2c3+I4+m4d2c4+ (m2+m3+m4)a21I2+I3+m3d2c3+I4+m4d2c4m3dc3m3+m4m4dc4I4+m4d2c4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8YM(q,\u00a8q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u00a8q1 \u00a8q2\u22122 (q3+a1s2) \u00a8q1\u2212(2q3+a1s2) \u00a8q2(q23+ 2q3a1c2)\u00a8q1+(q23+q3a1c2)\u00a8q2+a1s2\u00a8q32 (a1c24+q3c4) \u00a8q1+ (a1c24+ 2q3c4) \u00a8q2\u2212s4\u00a8q3(a1c24+q3c4) \u00a8q4\u00a8q40 \u00a8q1+ \u00a8q2(q23+q3a1c2)\u00a8q1\u22122q3\u00a8q2(q23+q3a1c2)\u00a8q1+q23\u00a8q2(a1c24+ 2q3c4) \u00a8q1+q3c4(2 \u00a8q2+ \u00a8q4)\u00a8q40 0 \u2212s3\u00a8q2 a1s2\u00a8q1+ \u00a8q3\u2212s4(\u00a8q1+ \u00a8q4) 00 0 0 0(a1c24+q3c4) \u00a8q1+q3c4\u00a8q2\u2212s4\u00a8q3\u00a8q1+ \u00a8q2+ \u00a8q4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8Potential energyU1=m1dc1g0sinq1U2=m2a1g0sinq1U3=m3g0(a1sinq1+ (q3\u2212dc3) sin(q1+q2))U4=m4g0(a1sinq1+q3sin(q1+q2) +dc4sin(q1+q2+q4))U(q) =U1+U2+U3+U4Gravity vectorg(q) =(\u2202U(q)\u2202q)T=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edg1g2g3g4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f84g1= (m1dc1+ (m2+m3+m4)a1)g0cosq1\u2212m3dc3g0c12+ (m3+m4)g0q3c12+m4dc4g0c124g2=\u2212m3dc3g0c12+ (m3+m4)g0q3c12+m4dc4g0c124g3= (m3+m4)g0s12g4=m4dc4g0c124Linear parametrization of the gravity vectorg(q) =Yg(q)ag,ag\u2208R4ag=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edag1ag2ag3ag4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm1dc1+ (m2+m3+m4)a1m3dc3m3+m4m4dc4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8Yg(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8edg0c1\u2212g0c12g0q3c12g0c1240\u2212g0c12g0q3c12g0c1240 0 g0s12 00 0 0 g0c124\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8Note. We kept separated the two linear parametrizations, as requested. Indeed, ag2=aM3,ag3=aM4andag4=aM5, so that only 6 + 1 = 7 different dynamic coefficients would be needed in total.Open-loop equilibriag(qe) =0\u21d0\u21d2\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3qe1=\u00b1\u03c02(m3+m4)qe3=m3dc3qe1+qe2={0,\u03c0}qe1+qe2+qe4=\u00b1\u03c02\u21d0\u21d2\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3qe1=\u00b1\u03c02qe2=\u00b1\u03c02qe3=m3dc3m3+m4<dc3qe4=\u00b1\u03c02One of the equilibria is shown in Fig. 5.q1q2q3q4x0y0\u2a01m1\u2a01\u2a01\u2a01gm2m3m4dc3Figure 5: An equilibrium con\ufb01guration of the RRPR robot: qe=(\u03c02,\u2212\u03c02,m3dc3m3+m4,\u03c02).5", "robot": "RRPR", "tags": ["planar", "vertical"]},
 "95": {"file": "Robotics2_21.02.04.pdf", "date": "21-02-04", "num_ex": 1, "exam": "robo2", "question": "Consider the situation depicted in Fig. 2. The two Cartesian robots AandBare commanded bymotors and transmissions that generate linear forces \u03c4A\u2208R2and\u03c4B\u2208R2along the axes of theirprismatic joints. Each control force component is bounded as|\u03c4A,i|\u2264\u03c4A,max, i= 1,2,|\u03c4B,i|\u2264\u03c4B,max, i= 1,2.The two robots hold \ufb01rmly a payload mass mpand cooperate in moving the mass in minimumtime along a horizontal linear path p=p(s), from point Pinto pointPfinin a rest-to-rest mode.In addition, it is desired that the sum H=\u2225\u03c4A\u22252+\u2225\u03c4B\u22252is always minimized instantaneously.Motion occurs in the vertical plane, and we assume that motors are powerful enough to sustain theweight of the respective robot and of the payload. Provide a dynamic model of this cooperatingtask and determine the optimal time pro\ufb01les of the four commands \u03c4Aand\u03c4B.PinywxwqA1qA2gqB1qB2Pfin\u2a01\u2a01\u2a01\u2a01mB1mB2mA2mA1mp\ud835\udf0fA1\ud835\udf0fB1\ud835\udf0fA2\ud835\udf0fB2robot Arobot BFigure 2: Two Cartesian robots that move a mass mpunder gravity along a linear horizontal path.1", "solution": "We de\ufb01ne \ufb01rst a path parametrization (for the payload motion) and see how the direct kinematicsof each robot is related to the common cooperative task. The problem is then addressed byconsidering the dynamics of each of the two robots and of the payload separately. However, thethree subsystems will interact among each other via exchanged forces. For these, the principle ofaction and reaction holds: a force applied from a robot to the payload is equal to the same forceapplied by the payload to that robot.Once we put everything together, the original optimal control problem is naturally decomposed ini)a minimum-time motion problem for the total mass of the system moving along the path, and ii)a minimum internal force problem along the normal to the path (while compensating for gravity).The \ufb01rst problem is solved by a common bang-bang pro\ufb01le for the command forces acting on the\ufb01rst (horizontal) prismatic joints of the two robots. The second problem is solved by equally dis-tributing the total gravity load between the two command forces on the second (vertical) prismaticjoints of the two robots. The resulting commands provide the minimum value of the objective func-tionH(sum of the squared norms of the robot inputs ) among all force commands that producethe same motion in minimum time along the given path.Path parametrizationThe simplest parametrization of the desired path is a linear one. Expressing it in the world referenceframeRFw, we havep(s) =pin+pfin\u2212pinLs=(pin,x+spin,y), s\u2208[0,L], L =\ued79\ued79pfin\u2212pin\ued79\ued79.The acceleration along the path is then given by\u00a8p=(\u00a8px\u00a8py)=(\u00a8s0). (1)Task kinematicsIndeed, the payload position pcoincides with the end effector position of both robots. As seen fromeach robot side, the direct kinematics of each robot is related to the task by p=fA(qA) =fB(qB),withfA(qA) =(qA1+qA1,0qA2,0)=(qB1+qB1,0qB2,0)=fB(qB),for some constant (but irrelevant hereafter) values qA1,0,qA2,0,qB1,0, andqB2,0. Differentiatingtwice w.r.t. time and using (1), yields\u00a8qA1= \u00a8qB1= \u00a8px= \u00a8s, \u00a8qA2= \u00a8qB2= \u00a8py= 0. (2)Payload dynamicsWith reference to the free-body diagram in Fig. 6, we shall consider the forces applied by thetwo robots AandBto the payload as decomposed in those that contribute to motion (along thepath tangent) and those that may generate internal forces on the rigid payload (along the normalto the path) \u2014and will produce in any event no motion. In this simple cooperative task, suchdecomposition occurs along two \ufb01xed directions, i.e., those of the world frame RFw. Thus, we havemp\u00a8px=FA,motion +FB,motionmp\u00a8py+mpg0=FA,internal\u2212FB,internal.6FA,internalywxwmpg0FB,motionFA,motionFB,internalpayloadFigure 6: Free-body diagram of the forces applied to the payload.Using (1), these simplify tomp\u00a8s=FA,motion +FB,motion (3)mpg0=FA,internal\u2212FB,internal (4)Dynamics of the cooperating robotsFor the two robots AandB, one has(mA1+mA2) \u00a8qA1=\u03c4A1\u2212FA,motionmA2\u00a8qA2+mA2g0=\u03c4A2\u2212FA,internal,(5)and, respectively,(mB1+mB2) \u00a8qB1=\u03c4B1\u2212FB,motionmB2\u00a8qB2\u2212mB2g0=\u03c4B2\u2212FB,internal.(6)As already mentioned, the force components Fiappearing on the right-hand sides of these equationsare those applied to the robots by the payload dynamics.Minimum time motionPutting together (3) with the \ufb01rst components of (5) and (6), and using (2), we obtainmp\u00a8s=\u03c4A1\u2212(mA1+mA2) \u00a8s+\u03c4B1\u2212(mB1+mB2) \u00a8sormtot\u00a8s=\u03c4A1+\u03c4B1=\u03c4motion, withmtot=mp+mA1+mA2+mB1+mB2. (7)As a result, the rest-to-rest minimum time solution for the total mass mtotmoving under anequivalent force command \u03c4motion , bounded as|\u03c4motion|\u2264\u03c4A,max +\u03c4B,max =\u03c4max,will be given by the bang-bang pro\ufb01les \u03c4\u2217A1,\u03c4\u2217B1, and\u03c4\u2217motion , as illustrated in Fig. 7. Accordingly,the minimum motion time isT\u2217=\u221a4L\u00a8smax= 2\u221aLmtot\u03c4max.Minimum internal forceConsider now (4) together with the second components of (5) and (6). Using again (2), we obtainmpg0=\u03c4A2\u2212mA2g0\u2212\u03c4B2\u2212mB2g0,7tB,max-tB,maxtA,max-tA,maxtBtAtmax-tmaxttmotionT/2TtB,max-tB,maxttB1T/2TtA,max-tA,maxttA1T/2T\u21d4\u21d4Figure 7: Bang-bang pro\ufb01les of the individual robot force commands \u03c4\u2217A1and\u03c4B1\u2217and of theequivalent total force \u03c4\u2217motion in the minimum motion time solution.or(mp+mA2+mB2)g0=\u03c4A2\u2212\u03c4B2=(1\u22121)(\u03c4A2\u03c4B2)=Jinternal(\u03c4A2\u03c4B2). (8)The requirement of minimizing the objective functionH=\u2225\u03c4A\u22252+\u2225\u03c4B\u22252=\u03c42A1+\u03c42A2+\u03c42B1+\u03c42B2,in view of the (unique) minimum time solution already found for \u03c4A1=\u03c4\u2217A1and\u03c4B1=\u03c4\u2217B1, reducesto the minimization of the quadratic sub-functionH\u2032=\u03c42A2+\u03c42B2,subject to the linear constraint (8). It is easy to see that the (unique) solution to this simple LQproblem for the remaining robot commands is\u03c4\u2217A2=12(mp+mA2+mB2)g0, \u03c4\u2217B2=\u221212(mp+mA2+mB2)g0=\u2212\u03c4\u2217A2. (9)Indeed, any other force pair of the perturbed form\u03c4A2=\u03c4\u2217A2+ \u2206, \u03c4 B2=\u03c4\u2217B2+ \u2206,\u2200\u2206\u2208R,will still satisfy the linear constraint (8) of the reduced problem. These force perturbations are infact in the null space of the Jacobian of the constraint, or\u2206(11)\u2208N{Jinternal},and therefore produce solutions that are larger in norm (thus, with a higher H\u2032). Such perturba-tions have the meaning of internal forces that may arise when the payload is rigidly held by thetwo robots. Thus, the optimal solution (9) has the nice physical interpretation of minimizing theinternal forces (\u2206 = 0). We \ufb01nally note that, if gravity were not present (e.g., for motions occurringon a horizontal plane), the solution that minimizes the internal forces would be \u03c4\u2217A2=\u03c4\u2217B2= 0.", "robot": "RPP", "tags": ["horizontal", "vertical"]},
 "96": {"file": "Robotics2_21.02.04.pdf", "date": "21-02-04", "num_ex": 2, "exam": "robo2", "question": "The planar 3R robot shown in Fig. 3 is commanded by joint torques \u03c4\u2208R3that use feed-back from the current state ( q,\u02d9q). The robot is initially at rest in the con\ufb01guration qin=(\u2212\u03c0/9,11\u03c0/18,\u2212\u03c0/4) and should then perform a self-motion so as to guarantee that the thirdjoint asymptotically reaches the \ufb01nal value q3,fin=\u2212\u03c0/2, while keeping the position of its end-effector always at the same initial point Pin. Design a torque control scheme that completes thistask in a robust way, i.e., by rejecting transient position and/or velocity errors and without en-countering any singular situation for the control law. Hint: Use an approach based on joint spacedecomposition.x0y0Pinq1q2q3\ud835\udf0f1\ud835\udf0f2\ud835\udf0f3gFigure 3: A 3R robot that should perform a self-motion task with constant end-effector position.", "solution": "With the dynamics of this planar 3R robot given byM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4we apply \ufb01rst a feedback linearization law in the joint space, i.e.,\u03c4=M(q)a+c(q,\u02d9q) +g(q)\u21d2 \u00a8q=a, (10)to convert the self-motion task into a purely kinematic one. The robot should always keep theposition of its end effectorp=f(q) =(l1cosq1+l2cos (q1+q2) +l3cos (q1+q2+q3)l1sinq1+l2sin (q1+q2) +l3sin (q1+q2+q3))atpin=f(qin) =\uf8eb\uf8ec\uf8ec\uf8edl1cos\u03c09+\u221a22l3\u2212l1cos\u03c09+l2+\u221a22l3\uf8f6\uf8f7\uf8f7\uf8f8.Indeed, the 3R robot has n\u2212m= 3\u22122 = 1 degree of redundancy for the positioning task inthe plane. A joint acceleration command performing a robot self-motion, as driven by the targetpositionq3,finfor the third joint, can then be designed asa=\u2212J#(q)\u02d9J(q)\u02d9q+(I\u2212J#(q)J(q))\uf8eb\uf8ed\uf8eb\uf8ed00\u03b1(q3,fin\u2212q3)\uf8f6\uf8f8\u2212Kv\u02d9q\uf8f6\uf8f8, (11)for some\u03b1>0. In (11), a damping velocity term \u2212Kv\u02d9q, with diagonal gain matrix Kv>0, hasbeen added in the null space of the task Jacobian so as to stabilize the joint motion1. In order toreject also position and/or velocity errors that may occur around the desired constant end-effectorpositionpin, a more robust version of the command (11) is given bya=J#(q)(KP(pin\u2212f(q))\u2212KDJ(q)\u02d9q\u2212\u02d9J(q)\u02d9q)+(I\u2212J#(q)J(q))\uf8eb\uf8ec\uf8ed\u2212kv,1\u02d9q1\u2212kv,2\u02d9q2\u03b1(q3,fin\u2212q3)\u2212kv,3\u02d9q3\uf8f6\uf8f7\uf8f8,(12)including thus a PD action, with (typically diagonal) gain matrices KP>0 andKD>0, on theCartesian position error, and taking into account that \u02d9pin=0. Plugging (12) into (10) yields thetorque control law\u03c4=M(q)[J#(q)(KP(pd\u2212f(q))\u2212KDJ(q)\u02d9q\u2212\u02d9J(q)\u02d9q)+(I\u2212J#(q)J(q))\uf8eb\uf8ec\uf8ed\u2212kv,1\u02d9q1\u2212kv,2\u02d9q2\u03b1(q3,fin\u2212q3)\u2212kv,3\u02d9q3\uf8f6\uf8f7\uf8f8]+c(q,\u02d9q) +g(q).(13)It should be noted that the control law (13), or simply the acceleration law (11) and its robustversion (12), may or may not guarantee the reaching of the \ufb01nal desired value for the third joint.1This is rather customary (and almost mandatory) when resolving redundancy at the acceleration level.9In principle, at a steady-state with \u02d9q=0, the projection operator P=I\u2212J#J(with its columnsPi,i= 1,2,3) may still mask the presence of a residual con\ufb01guration error. Thus, one should alsoshow that there exists no con\ufb01guration q\u2217such thatf(q\u2217) =pin(i.e., belonging to the self-motionmanifold in the joint space associated to the initial point Pin) for whichP3(q\u2217)e3=0whilee3=q3,fin\u2212q\u22173\u0338= 0. Such statement about non-existence is in fact true, but its formal proof isnot trivial. Therefore, an alternative approach that directly guarantees also the convergence of q3toq3,finmay be more attractive.In the following, we will illustrate the use of a joint space decomposition approach at the acceler-ation level (i.e., to be applied, after feedback linearization, to \u00a8q=a). In this case, one focuses onthe command to be given to the third joint, the one that has a special target assigned, leaving tothe other two joints the task of keeping the end effector at the desired position Pin. First, for thethird joint we choose the control law\u00a8q3=a3=kp,3(q3,fin\u2212q3)\u2212kd,3\u02d9q3, k p,3>0, kd,3>0. (14)As a result, the error e3will satisfy the linear differential equation\u00a8e3+kd,3\u02d9e3+kp,3e3= 0,which guarantees that q3will converge exponentially from any initial state to the desired q3,fin,with \u02d9q3= \u02d9q3,fin= 0. Moreover, by a suitable choice of the gains kp,3andkd,3, the natural motionofq3will always remain in the interval [ q3,fin,q3,in] = [\u2212\u03c0/2,\u2212\u03c0/4] (i.e., without overshooting orwandering). Next, decompose the second-order differential kinematics as follows:\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=J12(q)\u00a8q12+J3(q) \u00a8q3+\u02d9J(q)\u02d9q=(\u2212l1s1\u2212l2s12\u2212l3s123\u2212l2s12\u2212l3s123l1c1+l2c12+l3c123l2c12+l3c123)(\u00a8q1\u00a8q2)+(\u2212l3s123l3c123)\u00a8q3+\u02d9J(q)\u02d9q.(15)The square sub-Jacobian J12made by the \ufb01rst two columns of JhasdetJ12(q) =l1(l2sinq2+l3sin(q2+q3)).As long as this determinant is different from zero, we can set \u00a8p=0in (15) and solve for \u00a8q12so asto realize our self-motion task by\u00a8q12=\u2212J\u2212112(q)(J3(q) \u00a8q3+\u02d9J(q)\u02d9q), (16)for any motion \u00a8 q3, in particular that given by (14). To introduce more robustness in the task ofkeeping the end-effector position at pin, we replace\u00a8p=\u00a8pin=0\u21d2 \u00a8p=KP(pin\u2212f(q))\u2212KDJ(q)\u02d9q, (17)with (diagonal) 2 \u00d72 gain matrices KP>0 andKD>0 weighting, respectively, the positionerroreP=pin\u2212f(q) and the velocity error eD=\u02d9pin\u2212\u02d9p=\u2212\u02d9p=\u2212J(q)\u02d9q. Using (14) and (17)in eq. (15) and solving again for \u00a8q12yields\u00a8q12=J\u2212112(q)(KP(pin\u2212f(q))\u2212KDJ(q)\u02d9q\u2212J3(q) (kP,3(q3,fin\u2212q3)\u2212kd,3\u02d9q3)\u2212\u02d9J(q)\u02d9q).(18)We can also combine (14) and (18) in a single formula asa=(\u00a8q12\u00a8q3)=(J\u2212112(q)\u2212J\u2212112(q)J3(q)0T1)(KP(pin\u2212f(q))\u2212(KDJ(q)\u2212\u02d9J(q))\u02d9qkP,3(q3,fin\u2212q3)\u2212kd,3\u02d9q3).(19)10Finally, plugging (19) into (10) yields the torque control law\u03c4=M(q)(J\u2212112(q)\u2212J\u2212112(q)J3(q)0T1)(KP(pin\u2212f(q))\u2212(KDJ(q)\u2212\u02d9J(q))\u02d9qkP,3(q3,fin\u2212q3)\u2212kd,3\u02d9q3)+c(q,\u02d9q) +g(q).(20)The last thing to check is the absence of singularities for J12(q) during the self-motion under thecontrol law (20), or simply the acceleration law (19). It can be shown that det J12(q) = 0 if andonly if the end-effector of the 3R robot \ufb01nds itself aligned with the \ufb01rst link of the structure. Fromthe illustration in Fig. 8, it is rather evident that such condition is not encountered in this task.x0y0Pinq3,fin  =\t\u2212\ud835\udf0b/2qinFigure 8: Con\ufb01guration reached by the 3R robot at the end of the controlled self-motion task.", "robot": "3R", "tags": ["planar"]},
 "97": {"file": "Robotics2_21.02.04.pdf", "date": "21-02-04", "num_ex": 3, "exam": "robo2", "question": "Figure 4 shows a simple 1-dof model of the interaction between a robot of mass mr>0, commandedby a forceF, and a rigid environment, with a force sensor of stiffness ks>0 measuring the contactforceFc. The two coefficients br>0 andbs>0 represent, respectively, the viscous friction affectingrobot motion and the viscous damping of the force sensor. The reference position xr= 0 is whenthe robot mass is in contact with Fc= 0. Provide the dynamic model of this system assuminglinearity of all effects. Based only on the measured force, design a control law for Fthat is able toregulate asymptotically the contact force Fcto a desired constant value Fd>0, despite uncertaintyin all model parameters. Provide the associated steady-state values of F=\u00afFandxr= \u00afxr.\ud835\udc5a'\ud835\udc39\ud835\udc39$\ud835\udc65'\ud835\udc58'\ud835\udc4f'\ud835\udc4f'rigidenvironmentrigidrobotforcesensorFigure 4: A 1-dof model of interaction between a robot and a rigid environment.[240 minutes (4 hours); open books]2", "solution": "The dynamics of the system represented in Fig. 4 ismr\u00a8xr+ (br+bs) \u02d9xr+ksxr=F, (21)with the contact force measured by the sensor given byFc=ksxr.Since we deal with a linear dynamics, one can also transform (21) in the Laplace domain andrepresent the system by its transfer function from the control input Fto the controlled output FcasP(s) =Fc(s)F(s)=ksxr(s)F(s)=ksmrs2+ (br+bs)s+ks. (22)Since the physical parameters mr,br,bsandksare all positive, P(s) has two poles with negativereal part, and the open-loop system is thus asymptotically stable (with a unitary steady-stategain,P(0) = 1). The simplest feedback controller C(s) that tries to regulate the contact force toa (constant, but arbitrary) desired value Fdis a proportional law to the force error Fe=Fd\u2212Fc,F=KP(Fd\u2212Fc) =KPFe\u21d0\u21d2C(s) =F(s)Fe(s)=KP>0.The input-output transfer function of the closed-loop system would then beW(s) =F(s)Fd(s)=P(s)C(s)1 +P(s)C(s)=ksKPmrs2+ (br+bs)s+ks(1 +KP),11which is still asymptotically stable, but with a non-unitary gain W(0) =KP/(1 +KP)\u0338= 1. Thismeans that the steady-state output response to a desired step input Fdwould have an error (unlessKP\u2192\u221e , which is impossible). The value of this force error can also be found from the input-errortransfer function,We(s) =Fe(s)Fd(s)=Fd(s)\u2212F(s)Fd(s)= 1\u2212W(s) =11 +P(s)C(s)=mrs2+ (br+bs)s+ksmrs2+ (br+bs)s+ks(1 +KP).In fact, from the \ufb01nal value theorem, the steady-state error for a constant Fdis computed asFe,\u221e= limt\u2192\u221eFe(t) = lims\u21920Fe(s) = lims\u21920We(s)Fd(s) =We(0)Fd=11 +KPFd\u0338= 0.\ud835\udc43\ud835\udc60\ud835\udc3e$+\t\ud835\udc3e'\ud835\udc60\ud835\udc39\ud835\udc39)+\u23af\ud835\udc39+\ud835\udc39,Figure 9: The closed-loop scheme of the robot-environment system under PI force control.In order to eliminate this steady-state error in a robust way (i.e., using feedback), we need anintegral action2(a pole ins= 0) in the controller C(s). With reference to Fig. 9, we consider thena proportional-integral (PI) controller on the force error Fe=Fd\u2212Fc, orF(t) =KPFe(t) +KI\u222bt0Fe(\u03c4)d\u03c4\u21d0\u21d2C(s) =KP+KIs=KPs+KIs(23)Combining (23) with (22) gives the closed-loop systemW(s) =F(s)Fd(s)=P(s)C(s)1 +P(s)C(s)=ks(KPs+KI)mrs3+ (br+bs)s2+ks(1 +KP)s+ksKI, (24)with gainW(0) = 1. To check the conditions under which the three poles of W(s) will all havenegative real part, we apply the Routh criterion. From the Routh table built for the polynomialdenominator of W(s) in (24)3210\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0mr ks(1 +KP)br+bs ksKIks(1 +KP)\u2212mrksKIbr+bsksKIwe see that the elements in the \ufb01rst column have the same (here, positive) sign iffKI>0, (1 +KP)\u2212mrKIbr+bs>0.2From the elementary feedback theory, in order to guarantee zero error at steady state in the step response, thecontrol system in Fig. 9 should be asymptotically stable and have (at least) a pole in s= 0 in the forward path(type I). If the process P(s) does not have already such a pole, it should be introduced in the controller.12Therefore, choosing the two gains KPandKIin the rangesKI\u2265br+bsmr>0, K P>mrKI\u2212(br+bs)br+bs\u22650will ensure asymptotic stability of the closed-loop system (in a robust way with respect to un-certainties in system parameters \u2014there is only a need to enforce inequalities that are simple tooverbound). Moreover, the force error at steady state will be zero as expected, since the input-errortransfer functionWe(s) = 1\u2212W(s) =(mrs2+ (br+bs)s+ks)smrs3+ (br+bs)s2+ks(1 +KP)s+ksKI,has a zero at s= 0, and thusFe,\u221e=We(0)Fd= 0\u00b7Fd= 0.As a result, at steady state\u00afFc=Fd=ks\u00afxr, \u00afxr=Fdks, \u00afF=KI\u222b\u221e0Fe(\u03c4)d\u03c4=Fd.", "robot": "unknown", "tags": []},
 "98": {"file": "Robotics2_22.07.08.pdf", "date": "22-07-08", "num_ex": 0, "exam": "robo2", "question": "A generic 3R spatial manipulator, which is self-balanced with respect to gravity, is driven by threeactuators that deliver the torques \u03c4=(\u03c41\u03c42\u03c43)T. When using the generalized coordinatesq\u2208R3, the robot dynamic model is expressed in compact form asMq(q)\u00a8q+cq(q,\u02d9q) =\u03c4q, (1)whereMq=\uf8eb\uf8edm11(q2,q3) 0 00m22(q3)m23(q3)0m23(q3)m33\uf8f6\uf8f8,cq=\uf8eb\uf8edc1(q2,q3,\u02d9q2,\u02d9q3)c2(q2,q3,\u02d9q1,\u02d9q2,\u02d9q3)c3(q2,q3,\u02d9q1,\u02d9q2)\uf8f6\uf8f8,\u03c4q=\uf8eb\uf8ed\u03c41\u03c42+\u03c43\u03c43\uf8f6\uf8f8.\u2022Find the set of coordinates p\u2208R3on which the torque vector \u03c4\u2208R3produces work component-wise, and give the coordinate transformation between qandp.\u2022Write the dynamic model in the coordinates p, expressing the elements of the inertia matrix Mpand of the Coriolis and centrifugal vector cpin terms of the elements mijandciof model (1).For compactness, there is no need to replace the dependences on ( q,\u02d9q) by those on ( p,\u02d9p) withinthese terms.", "solution": "The objective is to obtain the robot dynamic equations in the transformed coordinates p=t(q)such thatMp(p)\u00a8p+cp(p,\u02d9p) =\u03c4p=\uf8eb\uf8ec\uf8ed\u03c41\u03c42\u03c43\uf8f6\uf8f7\uf8f8, (3)i.e., in the right-hand side of eq. (3) the three available actuators torques \u03c4are those performingwork of the coordinates p.Since the following holds by duality\u02d9p=\u2202t(q)\u2202q=Jt(q)\u02d9q\u21d0\u21d2\u03c4q=JTt(q)\u03c4p,we extract from the right-hand side of (1) the required Jacobian of the transformation,\u03c4q=\uf8eb\uf8ec\uf8ed\u03c41\u03c42+\u03c43\u03c43\uf8f6\uf8f7\uf8f8=JTt\u03c4p\u21d2JTt=\uf8eb\uf8ec\uf8ed1 0 00 1 10 0 1\uf8f6\uf8f7\uf8f8,which turns out to be constant. Therefore, the change of coordinates is linearp=Jtq=\uf8eb\uf8ec\uf8ed1 0 00 1 00 1 1\uf8f6\uf8f7\uf8f8q=\uf8eb\uf8ec\uf8edq1q2q2+q3\uf8f6\uf8f7\uf8f8and its inverse isq=J\u22121tp=\uf8eb\uf8ec\uf8ed1 0 00 1 00\u22121 1\uf8f6\uf8f7\uf8f8p=\uf8eb\uf8ec\uf8edp1p2p3\u2212p2\uf8f6\uf8f7\uf8f8\u21d2 \u02d9q=J\u22121t\u02d9p,\u00a8q=J\u22121t\u00a8p.Plugging these into (1) yields \ufb01nally (3) withMp(p) =J\u2212TtMq(q)J\u22121t=\uf8eb\uf8ec\uf8edm11(p2,p3\u2212p2) 0 00m22(p3\u2212p2) +m33\u22122m23(p3\u2212p2)m23(p3\u2212p2)\u2212m330 m23(p3\u2212p2)\u2212m33 m33\uf8f6\uf8f7\uf8f8(4)cp(p,\u02d9p) =J\u2212Ttcq(q,\u02d9q) =\uf8eb\uf8ec\uf8edc1(p2,p3\u2212p2,\u02d9p2,\u02d9p3\u2212\u02d9p2)c2(p2,p3\u2212p2,\u02d9p1,\u02d9p2,\u02d9p3\u2212\u02d9p2)\u2212c3(p2,p3\u2212p2,\u02d9p1,\u02d9p2)c3(p2,p3\u2212p2,\u02d9p1,\u02d9p2)\uf8f6\uf8f7\uf8f8, (5)where the arguments in the functions on the right-hand sides of (4) and (5) have been substitutedwith the inverse mappings ( q,\u02d9q) =(J\u22121tp,J\u22121t\u02d9p). This is not strictly needed in general (norrequired by the text), but is particularly simple here because of the linearity of the transformation.3", "robot": "3R", "tags": []},
 "99": {"file": "Robotics2_22.07.08.pdf", "date": "22-07-08", "num_ex": 1, "exam": "robo2", "question": "The dynamic model of a serial manipulator with nrevolute joints can always be written as(m11(q)mT12(q)m12(q)M22(q))(\u00a8q1\u00a8q2)+(n1(q,\u02d9q)n2(q,\u02d9q))=(\u03c41\u03c42), (2)where the joint variables q\u2208Rnare partitioned in q1\u2208Randq2\u2208Rn\u22121and, similarly, thejoint torques \u03c4\u2208Rnin\u03c41\u2208Rand\u03c42\u2208Rn\u22121. The inertia matrix M(q) and the dynamic termsn(q,\u02d9q) =c(q,\u02d9q) +g(q) in (2) have been partitioned accordingly. Suppose that a constraint isimposed on the \ufb01rst joint, so that q1(t) =k(an arbitrary constant value).\u2022Derive the explicit form of the ( n\u22121)-dimensional reduced dynamics of the constrained robot.\u2022Provide the corresponding expression of the force multiplier \u03bb\u2208Rthat arises when attemptingto violate the constraint during a generic robot motion.\u2022De\ufb01ne control laws for \u03c41and for\u03c42that regulate the robot to a desired con\ufb01guration qd, whichis feasible (i.e., such that q1d=k), while keeping \u03bb(t) = 0 at all times.", "solution": "We apply the standard procedure for obtaining the reduced dynamic model, which is particularlysimple in this case.The Jacobian of the scalar constraint h(q) =q1(t)\u2212k= 0 isA=\u2202h(q)/\u2202q=(101\u00d7(n\u22121)).Therefore, the obvious completion of Awith a matrix Dto obtain a square nonsingular matrix is(AD)=(1 01\u00d7(n\u22121)0(n\u22121)\u00d71I(n\u22121)\u00d7(n\u22121))=In\u00d7n,and thus(E F)=(AD)\u22121=(1 01\u00d7(n\u22121)0(n\u22121)\u00d71I(n\u22121)\u00d7(n\u22121)).As a result, the pseudo-velocity vector isv=D\u02d9q=\u02d9q2\u2208Rn\u22121.Being all the de\ufb01ned transformation matrices constant, the reduced dynamics becomes(FTM(q)F)\u02d9v=FT(\u03c4\u2212n(q,\u02d9q)),orM22(q)\u00a8q2=\u03c42\u2212\u00afn2(q,\u02d9q) =\u03c42\u2212\u00afc2(q,\u02d9q)\u2212\u00afg2(q), (6)where a \u2018bar\u2019 on a dynamic term means that:\u2022M22is identical to the same block in (2), because q1does not appear in the inertia matrix M(q)of any robot (a so-called cyclic variable );\u2022\u00afc2is evaluated at \u02d9 q1= 0 while, as a result of the previous property, is also independent from q1;\u2022\u00afg2is evaluated at q1=q1d=k.Similarly, the expression of the (scalar) force multiplier \u03bbbecomes\u03bb=ET(M(q)F\u02d9v+n(q,\u02d9q)\u2212\u03c4) =mT12(q)\u00a8q2+ \u00afn1(q,\u02d9q)\u2212\u03c41=mT12(q)M\u2212122(q) (\u03c42\u2212\u00afn2(q,\u02d9q)) + \u00afn1(q,\u02d9q)\u2212\u03c41,(7)where eq. (6) has been used.For any arbitrary choice of the torque \u03c42, the control law applied at joint 1 to make sure that\u03bb(t)\u22610 is then\u03c41= \u00afn1(q,\u02d9q) +mT12(q)M\u2212122(q) (\u03c42\u2212\u00afn2(q,\u02d9q)). (8)Note that gravity effects acting on joint 1 are also cancelled at rest by the \u00af g1torque within \u00af n1.Furthermore, in order to achieve regulation to a desired q2d, one can use a feedback linearizationapproach yielding\u03c42=M22(q) (KP(q2d\u2212q2)\u2212KD\u02d9q2) +\u00afn2(q,\u02d9q), withKP>0,KD>0, (9)which provides exponential and decoupled stabilization of the error e2=qd2\u2212q2to zero. Inalternative, one can design a simpler PD regulator with gravity cancellation\u03c42=KP(q2d\u2212q2)\u2212KD\u02d9q2+\u00afg2(q,\u02d9q), withKP>0,KD>0. (10)4It is straightforward to prove asymptotic stability of the closed-loop system with (10), using aLyapunov/LaSalle argument on the reduced dynamics (6).", "robot": "nR", "tags": []},
 "100": {"file": "Robotics2_22.07.08.pdf", "date": "22-07-08", "num_ex": 2, "exam": "robo2", "question": "With reference to Fig. 1, consider a Cartesian (PP) robot with links of mass m1andm2, movingin a vertical plane. The end-effector should transfer from rest to rest between two generic pointsPsandPginminimum time , with the two input force commands being bounded as|ui|\u2264Ui,max, i =x,y.The robot starts at an equilibrium and should remain in equilibrium when the motion ends.1g0uxyPgPsxuy\u2295\u2295m2m1Figure 1: A Cartesian robot in a point-to-point task in the vertical plane.\u2022Determine the minimum feasible value T\u2217of the transfer time in a parametric form with respectto the problem data.\u2022For the numerical valuesPs= (1,0.3), Pg= (0.6,0.7) [m], m 1= 5, m 2= 3 [kg], U x,max =Uy,max = 40 [N],evaluate time T\u2217and sketch the optimal pro\ufb01les of force, acceleration, velocity, and position ofthe two robot joints.\u2022Is the end-effector path associated to this time-optimal trajectory a straight line segment betweenPsandPg? (Support your answer with an argument: a simple \u2018yes\u2019 or \u2018no\u2019 does not count!).[180 minutes; open books]2", "solution": "The task does not require any coordination between the two joints, nor there is a velocity bound.Thus, each joint will move as fast as possible with a bang-bang force pro\ufb01le. The minimum transfertime will be given by the slowest joint completing its motion (while the fastest joint remains atrest for some interval).The two scalar problems are however different because of the presence of gravity on the vertical(second) joint, which offsets its feasible acceleration range. With q= (x,y), the dynamic model ofthis PP robot is(m1+m2) \u00a8x=uxm2\u00a8y+m2g0=uy,(11)beingg0= 9.81 [m/s2]. As a result|ux|\u2264Ux,max\u21d2 | \u00a8x|\u2264Ux,maxm1+m2|uy|\u2264Uy,max\u21d2 \u2212(Uy,maxm2+g0)\u2264\u00a8y\u2264Uy,maxm2\u2212g0,with an asymmetric feasible range for \u00a8 y. Moreover, let Pg\u2212Ps= (\u2206x,\u2206y) be the requireddisplacement.\ud835\udc48',$%&\u2212\ud835\udc48',$%&\ud835\udc62'\ud835\udc61\ud835\udc47'\ud835\udc47',+,\ud835\udc48',$%&\ud835\udc5a.\u2212\ud835\udc540\ud835\udc66\u0308\ud835\udc61\ud835\udc47'\ud835\udc47',+,\u2212\ud835\udc48',$%&\ud835\udc5a.+\ud835\udc54012\ud835\udc48',$%&\ud835\udc5a.\u2212\ud835\udc540\ud835\udc47',+,\ud835\udc66\u0307\ud835\udc61\ud835\udc47'\ud835\udc47',+,Figure 2: Force, acceleration and velocity pro\ufb01les for the joint moving under gravity by \u2206 y>0.Consider \ufb01rst the time-optimal motion for the y-axis under gravity. With reference to Fig. 2,which shows only the case of \u2206 y>0, the acceleration is bang-bang and the velocity is triangular,both switching at Ty,swand being typically asymmetric in time with respect to the total intervalTy. Two relations are then obtained from these behaviors: i) the area with sign covered by theacceleration pro\ufb01le (i.e., its integral) should be zero in order to obtain a rest-to-rest motion, i.e.,(sign(\u2206y)Uy,maxm2\u2212g0)Ty,sw\u2212(sign(\u2206y)Uy,maxm2+g0)(Ty\u2212Ty,sw) = 0;ii) the area with sign covered by the velocity pro\ufb01le should be equal to the required displacement\u2206yof the joint, i.e.,12(sign(\u2206y)Uy,maxm2\u2212g0)T2y,sw+12(sign(\u2206y)Uy,maxm2\u2212g0)Ty,sw(Ty\u2212Ty,sw) = \u2206y.5Solving these two equations for TyandTy,swgivesTy= 2\u221am2|\u2206y|Uy,maxU2y,max\u2212(m2g0)2(12)andTy,sw=Ty2(1 + sign(\u2206y)m2g0Uy,max)\u0338=Ty2. (13)If \u2206y>0 thenTy,sw>Ty/2 and, viceversa, if \u2206 y<0 thenTy,sw<Ty/2.The time-optimal motion for the x-axis without gravity is a sub-case of the formulas (12) and (13),obtained by setting g0= 0 and replacing m2with the total mass m1+m2driven by this joint.Thus,Tx= 2\u221a(m1+m2)|\u2206x|Ux,maxandTx,sw=Tx2. (14)Therefore,T\u2217= max{Tx,Ty}. (15)Note that the joint that arrives \ufb01rst should remain then at rest, waiting for the slower joint to reachits goal. Indeed, the faster joint could also remain at rest at the beginning and then start movingat an instant such that task completion occurs simultaneously at T\u2217for both joints. In any event,to stay at rest at steady state, the horizontal joint does not require any force ( ux,ss= 0), whereasthe vertical joint should sustain gravity ( uy,ss=m2g0). Except for very special combinations ofproblem data, the above minimum-time control strategy will not result in a coordinated robotmotion (i.e., all joints start and end their motion at the same instant, without intermediate stops).With the problem data, it is \u2206 x=\u22120.4, \u2206y= 0.4 [m] and we obtain the following motion times(in seconds):Tx= 0.5657, T x,sw= 0.2828, T y= 0.5115, T y,sw= 0.4439\u21d2T\u2217= 0.5657.The results are reported in Fig. 3. We note that, since in this case the y-axis is faster, when thisjoint reaches its goal (at t=Ty<T\u2217), the control input switches to the steady-state equilibriumforceuy,ss= 20.43 [N].The resulting Cartesian path of the robot end-effector is not a straight line segment between PsandPg\u2014see Fig. 4. Rather, the initial part of the path, between t= 0 andt=Tx,sw, is linearsincedydx=\u02d9y\u02d9x=Uy,maxm2tUx,maxm1+m2t=Uy,maxUx,maxm2m1+m2=k;it is followed then by two different curvilinear parts1, betweent=Tx,swandt=Ty,swand betweent=Ty,swandt=Ty; the last part, between t=Tyandt=Tx=T\u2217, is again a (very short) linearsegment.It can be shown2that even if the problem data were such that the two joints complete their taskat the same instant (i.e., T\u2217=Tx=Ty), the resulting path would still not be a linear segmentbetweenPsandPg.1These parts have no easy geometric expressions. In fact, the tangent to each curve is a rational function givenby the ratio of linear polynomials in time t.2If you write a code for this problem, try out Pg= (0.673,0.7) with all the rest being the same. This will resultin a coordinated joint motion, but still without a resulting linear Cartesian path. Try out also a motion task infavor of gravity (\u2206 y <0), in order to better understand the need of the absolute value and sign of \u2206 yin eqs. (12)and (13).600.10.20.30.40.5time [s]0.30.40.50.60.70.80.91[m]joint positions00.10.20.30.40.5time [s]-1.5-1-0.500.511.5[m/s]joint velocities00.10.20.30.40.5time [s]-25-20-15-10-505[m/s^2]joint accelerations00.10.20.30.40.5time [s]-40-30-20-10010203040[N]input forcesFigure 3: From top to bottom: Joint position, velocity, acceleration, and input force in the time-optimal solution (blue = x-axis, red = y-axis).70.650.70.750.80.850.90.951x [m]0.30.350.40.450.50.550.60.650.7y [m]end-effector Cartesian path\ud835\udc43'=\ud835\udc43(\ud835\udc61=0)\ud835\udc43(=\ud835\udc43(\ud835\udc61=\ud835\udc47\u2217)\ud835\udc43(\ud835\udc61=\ud835\udc47+)\ud835\udc43(\ud835\udc61=\ud835\udc47+,'-)\ud835\udc43(\ud835\udc61=\ud835\udc47.,'-)Figure 4: Cartesian path of the robot end-effector.", "robot": "PP", "tags": ["horizontal", "vertical"]},
 "101": {"file": "Robotics2_Remote_Midterm_Test_2020-21_21.04.14.pdf", "date": "21-04-14", "num_ex": 0, "exam": "robo2", "question": "The 2R robot in Fig. 1 moves in a vertical plane. The two links have, respectively, kinematiclengthsl1andl2, massesm1andm2, and barycentric inertias I1andI2(around the axis normalto the motion plane). The position of the center of mass (CoM) of each link with respect to theattached link frame is given by rci=(rci,xrci,y0)T, withrci,x\u0338=\u2212liandrci,y\u0338= 0, fori= 1,2.A) Determine the robot dynamic model, M(q)\u00a8q+c(q,\u02d9q)+g(q) =u, neglecting dissipative effects.B) Provide a linear parametrization of the model, Y(q,\u02d9q,\u00a8q)a=u, in terms of a regressor matrixY\u2208R2\u00d7pand a vector a\u2208Rpof dynamic coefficients.", "solution": "The special feature of this planar 2R arm is the generic location of the CoM of the links, notnecessarily placed on the kinematic link axis. A Lagrangian approach is followed for dynamicmodeling. We can work either with vectors in 3D or in 2D, considering the planar nature of theproblem2. In the \ufb01rst case, we may also use the recursive algorithm with moving frames (the resultis indeed the same).Kinetic energy. For the \ufb01rst link, we haveT1=12m1\u2225vc1\u22252+12\u03c9T1I1\u03c91=12m1((l1+rc1,x)2+r2c1,y)\u02d9q21+12I1\u02d9q21,where the coefficient in parentheses multiplying m1is the squared distance of the CoM of link 1from the axis of joint 1. For the second link, we haveT2=12m2\u2225vc2\u22252+12\u03c9T2I2\u03c92=12m2\u2225vc2\u22252+12I2( \u02d9q1+ \u02d9q2)2.The velocity of the CoM of link 2 can be computed in two alternative ways. We can start fromthe absolute position of the CoM in 2D,0pc2=(l1c1l1s1)+0\u00afR2(q1,q2)(l2+rc2,xrc2,y),0\u00afR2(q1,q2) =(c12\u2212s12s12c12),leading to0vc2=0\u02d9pc2=(\u2212l1s1l1c1)\u02d9q1+(\u2212(l2+rc2,x)s12\u2212rc2,yc12(l2+rc2,x)c12\u2212rc2,ys12)( \u02d9q1+ \u02d9q2).Or we can work with velocities in 3D and rely on moving frames; in this case, using1\u03c92=2\u03c92=\uf8eb\uf8ec\uf8ed00\u02d9q1+ \u02d9q2\uf8f6\uf8f7\uf8f8,1R2(q2) =\uf8eb\uf8ec\uf8edc2\u2212s20s2c200 0 1\uf8f6\uf8f7\uf8f8,we compute2v2=1RT2(q2)(1v1+1\u03c92\u00d71r12)=1RT2(q2)\uf8eb\uf8ec\uf8ed0l1\u02d9q10\uf8f6\uf8f7\uf8f8+1RT2(q2)1\u03c92\u00d71RT2(q2)1r12=2v1+2\u03c92\u00d72r12=\uf8eb\uf8ec\uf8edl1s2\u02d9q1l1c2\u02d9q10\uf8f6\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ed00\u02d9q1+ \u02d9q2\uf8f6\uf8f7\uf8f8\u00d7\uf8eb\uf8ec\uf8edl200\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8edl1s2\u02d9q1l1c2\u02d9q1+l2( \u02d9q1+ \u02d9q2)0\uf8f6\uf8f7\uf8f8,and then2vc2=2v2+2\u03c92\u00d72rc2=2v2+\uf8eb\uf8ec\uf8ed00\u02d9q1+ \u02d9q2\uf8f6\uf8f7\uf8f8\u00d7\uf8eb\uf8ec\uf8edrc2,xrc2,y0\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8edl1s2\u02d9q1\u2212rc2,y( \u02d9q1+ \u02d9q2)l1c2\u02d9q1+ (l2+rc2,x) ( \u02d9q1+ \u02d9q2)0\uf8f6\uf8f7\uf8f8.2We use the compact trigonometric notation throughout this exercise, e.g., c12= cos( q1+q2).3As a result\ued79\ued792vc2\ued79\ued792=l21\u02d9q21+((l2+rc2,x)2+r2c2,y)( \u02d9q1+ \u02d9q2)2+ 2l1((l2+rc2,x)c2\u2212rc2,ys2) \u02d9q1( \u02d9q1+ \u02d9q2).Indeed, it is\ued79\ued792vc2\ued79\ued792=\ued79\ued790vc2\ued79\ued792. But computations (and simpli\ufb01cations) are easier when using themoving frames. The total kinetic energy is thusT=T1+T2=12(I1+m1((l1+rc1,x)2+r2c1,y)+m2l21+I2+m2((l2+rc2,x)2+r2c2,y)+ 2m2l1((l2+rc2,x)c2\u2212rc2,ys2))\u02d9q21+12(I2+m2((l2+rc2,x)2+r2c2,y))\u02d9q22+(I2+m2((l2+rc2,x)2+r2c2,y)+m2l1((l2+rc2,x)c2\u2212rc2,ys2))\u02d9q1\u02d9q2=12\u02d9qTM(q)\u02d9q.Inertia matrix. One can organize the robot inertia matrix M(q) in a compact way, by introducingthe following dynamic coefficients:a1=I1+m1((l1+rc1,x)2+r2c1,y)+m2l21+I2+m2((l2+rc2,x)2+r2c2,y)a2=m2l1(l2+rc2,x)a3=\u2212m2l1rc2,ya4=I2+m2((l2+rc2,x)2+r2c2,y)(1)As a result,M(q) =(a1+ 2a2c2+ 2a3s2a4+a2c2+a3s2a4+a2c2+a3s2 a4)(2)This compact form is useful for the following derivation of the velocity terms in the dynamic model.Note that the asymmetric location of the CoM of link 2 w.r.t. the link axis x2(i.e.,rc2,y\u0338= 0) hasintroduced the extra dynamic coefficient a3and modi\ufb01ed the two coefficients a1anda4. On theother hand, asymmetry in the CoM of link 1 (i.e., rc1,y\u0338= 0) modi\ufb01es only a1.Coriolis and centrifugal terms. Denoting by Mitheith column of the inertia matrix M(q), wecompute the components of the Coriolis/centrifugal vector c(q,\u02d9q) using the Christoffel symbols:ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202Mi\u2202q+(\u2202Mi\u2202q)T\u2212\u2202M\u2202qi), i = 1,2.We obtainC1(q) =12((0\u22122a2s2+ 2a3c20\u2212a2s2+a3c2)+(0 0\u22122a2s2+ 2a3c2\u2212a2s2+a3c2)\u2212O)=(0\u2212a2s2+a3c2\u2212a2s2+a3c2\u2212a2s2+a3c2)\u21d2c1(q,\u02d9q) = (a3c2\u2212a2s2) (2 \u02d9q1+ \u02d9q2) \u02d9q2=\u2212m2l1(rc2,yc2+ (l2+rc2,x)s2) (2 \u02d9q1+ \u02d9q2) \u02d9q2andC2(q) =12((0\u2212a2s2+a3c20 0)+(0 0\u2212a2s2+a3c20)\u2212(2a3c2\u22122a2s2a3c2\u2212a2s2a3c2\u2212a2s2 0))=(\u2212(a3c2\u2212a2s2) 00 0)\u21d2c2(q,\u02d9q) =\u2212(a3c2\u2212a2s2) \u02d9q21=m2l1(rc2,yc2+ (l2+rc2,x)s2) \u02d9q214Thus, the \ufb01nal expression of the quadratic velocity terms in the model isc(q,\u02d9q) = (a3c2\u2212a2s2)(\u02d9q22+ 2 \u02d9q1\u02d9q2\u2212\u02d9q21). (3)Potential energy and gravity term. From the expression of the potential energy of a genericlinkiin the serial chain,Ui=\u2212migT0r0,ci,we obtain for the \ufb01rst linkU1=\u2212m1(0\u2212g00)\uf8eb\uf8ed\u2217(l1+rc1,x)s1+rc1,yc1\u2217\uf8f6\uf8f8=m1g0((l1+rc1,x)s1+rc1,yc1),and for the second linkU2=\u2212m2(0\u2212g00)\uf8eb\uf8ed\u2217l1s1+ (l2+rc2,x)s12+rc2,yc12\u2217\uf8f6\uf8f8=m2g0(l1s1+(l2+rc2,x)s12+rc2,yc12).FromU=U1+U2, we haveg(q) =(\u2202U\u2202q)T=(g0((m1(l1+rc1,x) +m2l1)c1\u2212m1rc1,ys1+m2(l2+rc2,x)c12\u2212m2rc2,ys12)m2g0((l2+rc2,x)c12\u2212rc2,ys12)).The gravity vector in the dynamic model is rewritten more compactly asg(q) =(a5c1+a6s1+a7c12+a8s12a7c12+a8s12)(4)by introducing the additional dynamic coefficientsa5=g0(m1(l1+rc1,x) +m2l1)a6=\u2212m1g0rc1,ya7=m2g0(l2+rc2,x)a8=\u2212m2g0rc2,y.(5)In the gravity term, the asymmetric location of the CoM of each link introduces a single extradynamic coefficient, namely a6for the \ufb01rst link and a8for the second. Instead, the two othergravity coefficients of a 2R robot with symmetric CoMs are not modi\ufb01ed.Linear parametrization. The complete dynamic model of the considered 2R robot,M(q)\u00a8q+c(q,\u02d9q) +g(q) =u, (6)is obtained by using (2), (3), and (4). We have already introduced the inertia-related dynamiccoefficients in (1) and the gravity-related ones in (5). The linear factorization of the model (6),M(q)\u00a8q+c(q,\u02d9q) +g(q) =Y(q,\u02d9q,\u00a8q)a, (7)is immediately obtained in terms of the coefficient vector a\u2208R8. The regressor matrix in (7) isY(q,\u02d9q,\u00a8q) =\uf8eb\uf8ec\uf8ed\u00a8q1c2(2\u00a8q1+ \u00a8q2)\u2212s2\u02d9q2(2 \u02d9q1+ \u02d9q2)s2(2\u00a8q1+ \u00a8q2)+c2\u02d9q2(2 \u02d9q1+ \u02d9q2)\u00a8q2c1s1c12s120c2\u00a8q1+s2\u02d9q21s2\u00a8q1\u2212c2\u02d9q21 \u00a8q1+ \u00a8q20 0c12s12\uf8f6\uf8f7\uf8f8.(8)5We \ufb01nally note that, assuming both the link length l1and the gravity acceleration g0to be known,the number of independent dynamic coefficients reduces from p= 8 top= 6. In facts, two pairsof dynamic coefficients collapse:a2=m2l1(l2+rc2,x) =l1a\u20322a7=m2g0(l2+rc2,x) =g0a\u20322}\u21d0\u21d2a\u20322=m2(l2+rc2,x),a3=\u2212m2l1rc2,y=l1a\u20323a8=\u2212m2g0rc2,y=g0a\u20323}\u21d0\u21d2a\u20323=\u2212m2rc2,y.The \ufb01rst merging is present also in the 2R robot with symmetric CoMs. The second is related tothe asymmetric case only.", "robot": "2R", "tags": ["planar", "vertical"]},
 "102": {"file": "Robotics2_Remote_Midterm_Test_2020-21_21.04.14.pdf", "date": "21-04-14", "num_ex": 1, "exam": "robo2", "question": "Consider the planar 3R robot with links of unitary length in Fig. 2 and use the absolute coordinatesq= (q1,q2,q3) de\ufb01ned therein. The robot is commanded with the joint velocity \u02d9q\u2208R3. Startingfrom the con\ufb01guration q(0) = (\u03c0/4,0,0), the robot should simultaneously move its end-effectorpointPalong a vertical line parallel to y0with a constant speed v>0, while keeping the secondlink horizontal. Determine the \ufb01rst encountered con\ufb01guration qsat which these two tasks run intoan algorithmic singularity. In q=qsand forv= 1 [m/s], compute the following three commands:a)\u02d9qPSusing pseudoinversion of the extended Jacobian of the two tasks;b)\u02d9qDLSusing damped least squares on the extended Jacobian, with damping parameter \u00b52= 0.25;c)\u02d9qTPusing the task priority method, with the end-effector task having the highest priority.Compare in the three cases the norm of the resulting joint velocity, the norm of the end-effectorvelocity error \u02d9eP\u2208R2, and the absolute value of the second joint velocity error \u02d9 eq2\u2208R.", "solution": "Taking into account the use of absolute coordinates (link angles w.r.t. the x0axis) for this planarrobot with n= 3 and unitary link lengths, the kinematics of the \ufb01rst task (of dimension m1= 2)involving the position pof the end-effector point Pisr1=p=(pxpy)=(cosq1+ cosq2+ cosq3sinq1+ sinq2+ sinq3)=f1(q), (9)with associated JacobianJ1(q) =\u2202f1(q)\u2202q=(\u2212sinq1\u2212sinq2\u2212sinq3cosq1 cosq2 cosq3). (10)From (9), the end-effector position in the initial con\ufb01guration q(0) = (\u03c0/4,0,0) isp(0) = f1(q(0)) =(2 +\u221a22\u221a22)=(2.70710.7071).The desired behavior is to move the point Pfromp(0) along a vertical line parallel to y0with aconstant speed v>0. Thusr1d(t) =p(0) +(0vt)\u21d2 \u02d9r1d=\u02d9pd=(01)v.The second task (of dimension m2= 1) is to keep the second link always horizontal (as in theinitial con\ufb01guration q(0)). It is described byr2=q2=f2(q)\u21d2J2=\u2202f2(q)\u2202q=(0 1 0), r 2d(t) = 0\u21d2 \u02d9r2d= \u02d9q2d= 0.(11)The two tasks are simultaneously executed using the extended Jacobian JE(q) (a square matrixof sizem=m1+m2= 3 =n) and the extended task velocity de\ufb01ned byJE(q) =(J1(q)J2)=\uf8eb\uf8ec\uf8ed\u2212sinq1\u2212sinq2\u2212sinq3cosq1 cosq2 cosq30 1 0\uf8f6\uf8f7\uf8f8, \u02d9rE,d=(\u02d9r1d\u02d9r2d)\u2208R3. (12)6Therefore, out of singularities, the joint velocity will be commanded in an unique way by\u02d9q=J\u22121E(q)\u02d9rE,d=J\u22121E(q)\uf8eb\uf8ed0v0\uf8f6\uf8f8. (13)In the initial con\ufb01guration q(0), the extended Jacobian JE(q(0)) has full rank. From (13), weobtain \u02d9q(0) = (0,0,1) [rad/s], with only the third link rotating counterclockwise. It is ratherintuitive that, when the robot moves its end effector upwards vertically and keeps its second linkhorizontal ( q2= 0), the \ufb01rst link will rotate clockwise (decreasing its orientation from \u03c0/4) andthe third link counterclockwise (increasing its absolute orientation from 0). This motion willcontinue until a singular con\ufb01guration qsis \ufb01rst encountered for the extended Jacobian in (12).To determine qs, we impose at the same timedetJE(qs) = sin(qs3\u2212qs1) = 0and that the end effector is still on the initial vertical path (with the second link horizontal), orpx(qs)|qs2=0= cosqs1+ cosqs2|qs2=0+ cosqs3= cosqs1+ 1 + cosqs3= 2 +\u221a22=px(q(0)).These two equations are solved asqs3=qs1\u21d2 2 cosqs1= 1 +\u221a22\u21d2qs1= arccos(2 +\u221a24)= 0.5480 [rad].The singular con\ufb01guration and the associated end-effector position are thus (see Fig. 4)qs=\uf8eb\uf8ec\uf8ed0.548000.5480\uf8f6\uf8f7\uf8f8[rad]\u21d2 ps=f(qs) =(2.70711.0420)[m].x0q(0)= (p/4, 0, 0)y0p(0) = 2+##,##vx0qs= (0.548, 0, 0.548)y0p(qs) = 2+##,1.0420Figure 4: The 3R robot in its initial con\ufb01guration q(0) and in the singular con\ufb01guration qs.The extended Jacobian is evaluated asJE(qs) =(J1(qs)J2)=\uf8eb\uf8ec\uf8ed\u22120.5210 0\u22120.52100.8536 1 0 .85360 1 0\uf8f6\uf8f7\uf8f8.SincerankJ1(qs) = 2 =m1,rankJ2= 1 =m2, but rank JE(qs) = 2<3 =m=m1+m2,7the con\ufb01guration qsis a true algorithmic singularity. Moreover, the extended task cannot berealized in this con\ufb01guration, since\u02d9rd=\uf8eb\uf8ed0v0\uf8f6\uf8f8\u0338\u2208R{JE(qs)},\u2200v\u0338= 0.We evaluate then the three requested joint velocity commands, setting in particular v= 1 [m/s].Using the pseudoinverse method, we have\u02d9qPS=J#E(qs)\u02d9rd=\uf8eb\uf8ec\uf8ed\u22120.4098 0.3357\u22120.33570.3498 0.2135 0.7865\u22120.4098 0.3357\u22120.3357\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed010\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0.33570.21350.3357\uf8f6\uf8f7\uf8f8. (14)Using instead the damped least squares method, with damping parameter \u00b52= 0.25, we obtain\u02d9qDLS=JTE(qs)(\u00b52I+JE(qs)JTE(qs))\u22121\u02d9rd=\uf8eb\uf8ec\uf8ed\u22120.3251 0.2959\u22120.23670.2467 0.2199 0.6241\u22120.3251 0.2959\u22120.2367\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed010\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0.29590.21990.2959\uf8f6\uf8f7\uf8f8.(15)Note that the two velocities \u02d9qPSand \u02d9qDLS are quite similar. In particular, in both commandsthe \ufb01rst and the third joint move with the same speed (different in the two methods). Finally, toapply the task priority method when the end-effector task is given the highest priority, we need tocompute3\u02d9qTP=J#1(qs)\u02d9rd1+ (J2P1(qs))#(\u02d9rd2\u2212J2J#1(qs)\u02d9rd1), (16)where, being J1(qs) a full rank matrix, the pseudoinverse of the \ufb01rst task Jacobian is evaluated asJ#1(qs) =JT1(qs)(J1(qs)JT1(qs))\u22121=\uf8eb\uf8ec\uf8ed\u22120.9597 01.6383 1\u22120.9597 0\uf8f6\uf8f7\uf8f8,and the associated projector in the null space N{J(qs)}becomesP1(qs) =I\u2212J#1(qs)J1(qs) =\uf8eb\uf8ec\uf8ed0.5 0\u22120.50 0 0\u22120.5 0 0.5\uf8f6\uf8f7\uf8f8.It is easy then to see the vanishing of the termJ2P1(qs) =(0 0 0)\u21d2 (J2P1(qs))#=\uf8eb\uf8ed000\uf8f6\uf8f8=0. (17)As a result, the task priority method (16) collapses here into the simple use of the pseudoinverseof the \ufb01rst task Jacobian\u02d9qTP=J#1(qs)\u02d9rd1=\uf8eb\uf8ed010\uf8f6\uf8f8. (18)3Here, we set \u02d9 rd2= 0. However, one should not care too much about the terms inside the last parenthesis in (16):these will be premultiplied anyway by zero \u2014see eq. (17).8Only the second link rotates, fully violating the second task but perfectly realizing the \ufb01rst one.The task executions obtained with the three methods (14), (15), and (18) are\u02d9rPS=JE(qs)\u02d9qPS=\uf8eb\uf8ed\u22120.34980.78650.2135\uf8f6\uf8f8\u02d9rDLS=JE(qs)\u02d9qDLS =\uf8eb\uf8ed\u22120.30840.72510.2199\uf8f6\uf8f8\u02d9rTP=JE(qs)\u02d9qTP=\uf8eb\uf8ed011\uf8f6\uf8f8\uf8fc\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8fd\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8fe\u21d0\u21d2 \u02d9rE,d=\uf8eb\uf8ed010\uf8f6\uf8f8.For comparison, the norms of the joint velocity \u02d9qmethod obtained with the three methods, togetherwith the norms of the end-effector velocity error \u02d9eP=\u02d9pd\u2212J1(q)\u02d9qmethod (task 1), and the absolutevalue of the velocity error of the second joint \u02d9 eq2= \u02d9q2,method (task 2) are reported in Table 1.Table 1: Comparison of results with the three methods.method\u2225\u02d9qmethod\u2225[rad/s]\u2225\u02d9eP\u2225[m/s]|\u02d9eq2|[rad/s]PS 0.5205 0.4098 0.2135DLS 0.4728 0.4131 0.2199TP 1 0 1", "robot": "3R", "tags": ["planar", "horizontal", "vertical"]},
 "103": {"file": "Robotics2_Remote_Midterm_Test_2020-21_21.04.14.pdf", "date": "21-04-14", "num_ex": 2, "exam": "robo2", "question": "The dynamic model of a PR robot moving on a horizontal plane is given in the lecture slides1.The end-effector point Pshould trace in minimum time a circular path of radius R=l2p(s) =(k+Rcos (s\u2212\u03b1)Rsin (s\u2212\u03b1)), s = [0,2\u03b1] (0<\u03b1<\u03c02),from rest to rest between PiandPf(see Fig. 3), under bounded input force/torque |ui|\u2264Ui,max, ,i= 1,2. Assuming that the second bound U2,max is the only limiting factor, provide the expressionof the needed input ud(t)\u2208R2and of the minimum time T. Sketch the time pro\ufb01les of the inputs.[180 minutes (3 hours); open books]1Block 03LagrangianDynamics 1.pdf , slide #25.1\u2295x0q2rc2y0m2,I2l2m1,I1l1x2y2\u2295q1rc1x1y1g0Figure 1: A planar 2R robot having the link CoMs in generic positions.x0q1q2q3y0PLLLFigure 2: A planar 3R robot, with absolute coordinates qand equal links of length L= 1 m.q1xq2dc2ym2,Ic2,zz\u2295l2m1\u2295\ud835\udc62#\ud835\udc62$2\ud835\udefc\ud835\udc5d=\ud835\udc5d(\ud835\udc60)R = l2\ud835\udc43\ud835\udc56\ud835\udc43\ud835\udc53PFigure 3: The assigned motion task for a planar PR robot.2", "solution": "The dynamic model of the PR robot in Fig. 3 is(m1+m2) \u00a8q1\u2212m2dc2sinq2\u00a8q2\u2212m2dc2cosq2\u02d9q22=u1, (19)\u2212m2dc2sinq2\u00a8q1+(Ic2,zz+m2d2c2)\u00a8q2=u2. (20)The geometry of the desired Cartesian motion task is very peculiar to this robot: an arc of a circlewith center Con the joint axis 2 and radius Requal to the length l2of the second link. Thisrequires simply no motion for the \ufb01rst joint, namelyq1d=k(this value is irrelevant) , \u02d9q1d= \u00a8q1d= 0.Accordingly, the inverse dynamics obtained from (19\u201320) yieldsu1d=\u2212m2dc2sinq2d\u00a8q2d\u2212m2dc2cosq2d\u02d9q22d, (21)u2d=I\u00a8q2d, (22)where we set for compactness I=Ic2,zz+m2d2c2>0. Therefore, in order to trace the arc of thecircle from rest to rest ( \u02d9q(0) = \u02d9q(T) =0) in minimum time, equation (22) implies that a bang-bangtorque\u00b1U2,max will be applied at the second (revolute) joint, with switching at the middle timet=T/2 of the motion. The force u1din (21) at the prismatic joint is needed to keep the \ufb01rst linkat rest. The assumption that the bound U2,max is the only limiting factor when reducing as muchas possible the motion time implies that the input force |u1d(t)|will never exceed U1,max.9The motion pro\ufb01le q2d(t) of the second joint is then easily de\ufb01ned. Setting A2,max =U2,max/Ias the maximum acceleration of the second joint, and taking into account that q2d(0) =\u2212\u03b1and\u02d9q2d(0) = 0, by successive integration and boundary condition satisfaction we get\u00a8q2d(t) ={A2,max, t\u2208[0,T2]\u2212A2,max, t\u2208[T2,T]\u02d9q2d(t) ={A2,maxt, t\u2208[0,T2]A2,max(T\u2212t), t\u2208[T2,T]q2d(t) ={\u2212\u03b1+12A2,maxt2, t \u2208[0,T2]\u2212\u03b1+A2,max(T2)2\u221212A2,max(T\u2212t)2, t\u2208[T2,T].(23)00.050.10.150.20.250.30.350.40.45time [s]-25-20-15-10-50510152025[rad/sec2] acceleration of joint 200.050.10.150.20.250.30.350.40.45time [s]-10123456[rad/sec]velocity of joint 200.050.10.150.20.250.30.350.40.45time [s]-0.6-0.4-0.200.20.40.6[rad]position of joint 2Figure 5: Time-optimal acceleration, velocity, and position pro\ufb01les for the second joint.The motion time Tis determined by imposing that the area of the (triangular and symmetric)velocity pro\ufb01le \u02d9 q2d(t) in [0,T] is equal to the required joint displacement \u2206 q2= 2\u03b1. Thus\u02d9q2d(T/2)\u00b7T2=A2,maxT2\u00b7T2= 2\u03b1\u21d2T=\u221a8\u03b1A2,max. (24)Figure 5 shows representative kinematic pro\ufb01les of the second joint motion4. As for the \ufb01rst input,we have from eqs. (21) and (23)u1d(t) =\u2212m2dc2sinq2d(t) \u00a8q2d(t)\u2212m2dc2cosq2d(t) \u02d9q22d(t)=u1d,acceleration (t) +u1d,centripetal (t)=\u2212m2dc2A2,max(sinq2d(t) + cosq2d(t)A2,maxt2),(25)where the last identity holds for the \ufb01rst half of the motion, i.e., for t\u2208[0,T2]. The behavior inthe second half of the motion, for t\u2208[T2,T], is perfectly specular.The analysis of the two contributions to u1d(t) in (25) is simple \u2014see also Fig. 6. The accelerationterm is always non-negative, with a sinusoidal pro\ufb01le that has its maximum at t= 0 andt=T,whereu1d,acceleration (0) =u1d,acceleration (T) =m2dc2A2,max\u00b7sin\u03b1, (26)whileu1d,acceleration (T/2) = 0. Vice versa, the centripetal term is never positive, it is zero at t= 0andt=T, and takes its maximum (negative) value at t=T/2, whenq2d(T/2) = 0, withu1d,centripetal (T/2) =\u2212m2dc2A22,max(T2)2=m2dc2A2,max\u00b72\u03b1, (27)4To generate these plots, the data reported in (29\u201330) have been used.10where (24) has been used. It is easy to see that the maximum value in (27) always dominates (26).Therefore,|u1d(t)|\u2264U1,max,\u2200t\u2208[0,T]\u21d0\u21d2 maxt\u2208[0,T]|u1d(t)|= 2\u03b1m2dc2A2,max\u2264U1,max.For this inequality to be veri\ufb01ed with the assumed time-optimal solution for joint 2 (i.e., for theassumption in the text to hold true), the bounds on the two inputs should satisfyA2,max =U2,maxI\u21d22\u03b1m2dc2IU2,max\u2264U1,max. (28)While it is straightforward to sketch the input pro\ufb01les of u1d(approximately) and u2d(exactly,being this a bang-bang torque), we conclude instead with a numerical evaluation using MATLAB.Setting for the arc of the circle the value \u03b1=\u03c0/6 = 30\u25e6and using the robot datam1=m2= 2 [kg], l2= 0.5, dc2= 0.25 [m], I = 0.1667 [kg m2], (29)with boundsU1,max = 14 [N], U 2,max = 4 [Nm]\u21d2A2,max = 24 [rad/s2], (30)the minimum motion time is found by (24) as T= 0.4178 [s]. Note that the input bounds in (30)satisfy inequality (28), being u1d(T/2) =\u221212.587 [N]. The associated pro\ufb01le of the force inputon the prismatic joint is shown in Fig. 6, together with those of its two contributions. The twotime-optimal inputs pro\ufb01les and their assigned bounds are reported in Fig. 7.00.050.10.150.20.250.30.350.40.45time [s]-14-12-10-8-6-4-20246[N] input force on joint 1 and its two contributionsFigure 6: Input force u1d(t), with its acceleration (dotted-dashed) and centripetal (dashed) terms.Figure 7: Time-optimal input pro\ufb01les along the assigned path and their maximum bounds.", "robot": "PR", "tags": ["planar", "horizontal"]},
 "104": {"file": "Robotics2_20.10.23.pdf", "date": "20-10-23", "num_ex": 0, "exam": "robo2", "question": "The PR robot in Fig. 1 moves on a horizontal plane. Its positive de\ufb01nite inertia matrix has theformM(q) =(a b cosq2bcosq2c)>0. (1)Using only the symbolic coefficients a,bandcin (1), provide the expression of the regressor matrixY(q,\u02d9q,\u02d9qr,\u00a8qr) in the adaptive control law that guarantees global asymptotic tracking of a smoothjoint trajectory qd(t), without a priori information on the values of the dynamic coefficients.q1q2yx\u2295m2,I2m1\u2295dc2l2Figure 1: The planar PR robot with de\ufb01nition of joint variables q1andq2and relevant parameters.", "solution": "<EMPTY>", "robot": "PR", "tags": ["planar", "horizontal"]},
 "105": {"file": "Robotics2_20.10.23.pdf", "date": "20-10-23", "num_ex": 1, "exam": "robo2", "question": "For the same PR robot in Fig. 1, suppose that a desired twice-differentiable trajectory yd(t)\u2208Rhasbeen assigned to the coordinate yof the end-effector position. With the robot in the con\ufb01guration\u00afq=(1\u03c0/2)Tand at rest, provide the three input vectors of joint force/torque \u03c4A,\u03c4B, and\u03c4C(all\u2208R2) that execute the desired task and instantaneously minimize, respectively,HA=12\u2225\u03c4\u22252, H B=12\u2225\u03c4\u22252M\u22121(\u00afq), orHC=12\u2225\u03c4\u22252M\u22122(\u00afq).Which of the three solutions has the largest component at the \ufb01rst joint in absolute value?", "solution": "<EMPTY>", "robot": "PR", "tags": []},
 "106": {"file": "Robotics2_20.10.23.pdf", "date": "20-10-23", "num_ex": 2, "exam": "robo2", "question": "Assume now that the robot in Fig. 1 is moving instead in a vertical plane. Derive the expressionof the gravity term g(q) in the dynamic model as a function of the robot dynamic parameters m1,m2,dc2andI2. In order to regulate the robot con\ufb01guration at a desired constant value qd, thefollowing control law is being applied:\u03c4=KP(qd\u2212q)\u2212KD\u02d9q+g(qd). (2)Provide explicit sufficient conditions (depending also on the robot dynamic parameters) ensuringthat the law (2) globally asymptotically stabilizes the closed-loop equilibrium state ( q,\u02d9q) = (qd,0).1", "solution": "<EMPTY>", "robot": "unknown", "tags": ["vertical"]},
 "107": {"file": "Robotics2_20.10.23.pdf", "date": "20-10-23", "num_ex": 3, "exam": "robo2", "question": "Consider the task of rolling a sphere of radius Ron a rigid plane, while the contact point Cfollowsa desired trajectory on the planar surface. The sphere will be held by a robot through a gimbalfork that allows free rotation of the sphere around the instantaneous direction of the axis r\u2014seeFig. 2. In turn, the fork can be rotated around the axis t, which remains however always vertical.Under the action of a sufficiently large force in the normal direction to the plane, friction at thecontact will let the sphere only roll when in motion, without slipping. With this in mind, de\ufb01nea suitable task frame and specify the natural and arti\ufb01cial constraints associated to this hybridforce-velocity control problem. How many generalized velocity directions V=(vT\u03c9T)T\u2208R6can be independently assigned by the control law?gimbalforksphereplanarsurfacetrajectoryRCaxis taxis rFigure 2: A sphere rolling on a plane and following a desired trajectory of the contact point C.[180 minutes (3 hours); open books]2", "solution": "<EMPTY>", "robot": "unknown", "tags": ["planar", "vertical", "constraints"]},
 "108": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 0, "exam": "robo2", "question": "Exercise  #1When and why is it convenient to choose a two-stage calibration procedure for the uncertainDenavit-Hartenberg parameters in the kinematic model of a manipulator?", "solution": "Exercise  #1When and why is it convenient to choose a two-stage calibration procedure for the uncertainDenavit-Hartenberg parameters in the kinematic model of a manipulator?Reply #1When it is expected that subsets of Denavit-Hartenberg parameters will have a very differentuncertainty range (some with large, some with small uncertainty), the calibration procedure isperformed in a \ufb01rst stage only for the set of parameters with large uncertainty, holding the othersat their nominal values. In a second stage, calibration is completed for all parameters at the sametime. In this stage, one starts with the nominal values for the original parameters with smalluncertainty and with the updated values for those that have been partially calibrated in the \ufb01rststage (and thus have now also a small residual uncertainty). This two-stage procedure improvesthe accuracy of the pseudoinverse solution of the regressor equation by equalizing the numericalconditioning of the regressor matrix. Normalizing a set of equations in this way is very commonin optimization and in engineering practice. \u25a0", "robot": "unknown", "tags": []},
 "109": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 1, "exam": "robo2", "question": "Exercise  #2The position p\u2208R3of the origin Onof the last frame of a n-dof serial manipulator is computedin homogeneous coordinates through the direct kinematics as(p1)=0A11A2...i\u22121Ai...n\u22122An\u22121n\u22121An(01),where 4\u00d74 Denavit-Hartenberg homogeneous transformation matrices are used. Suppose that theonly uncertainty in the kinematic model is on the value of the twist angle \u03b1iof theith homogeneousmatrix around its nominal value \u03b1nomi=\u03c0/2. Write the expression of the 3 \u00d71 regressor matrix \u03a6in the basic equation \u2206 p=\u03a6\u2206\u03b1ithat is used for calibration at a generic con\ufb01guration q\u2208Rn.", "solution": "Exercise  #2The position p\u2208R3of the origin Onof the last frame of a n-dof serial manipulator is computedin homogeneous coordinates through the direct kinematics as(p1)=0A11A2...i\u22121Ai...n\u22122An\u22121n\u22121An(01),where 4\u00d74Denavit-Hartenberg homogeneous transformation matrices are used. Suppose that theonly uncertainty in the kinematic model is on the value of the twist angle \u03b1iof theith homogeneousmatrix around its nominal value \u03b1nomi=\u03c0/2. Write the expression of the 3\u00d71regressor matrix\u03a6in the basic equation \u2206p=\u03a6\u2206\u03b1ithat is used for calibration at a generic con\ufb01guration q\u2208Rn.Reply #2We need to evaluate the sensitivity of p\u2208R3with respect to the single scalar parameter \u03b1i,which appears only in the ith Denavit-Hartenberg (DH) homogeneous transformation matrixi\u22121Ai.Therefore, by rewriting the direct kinematics in compact form, we have\u2202phom\u2202\u03b1i=\uf8eb\uf8ed\u2202p\u2202\u03b1i0\uf8f6\uf8f8=0Ai\u22121\u2202(i\u22121Ai)\u2202\u03b1iiAn(01),where the sensitivity of the i-th DH matrix is\u2202(i\u22121Ai)\u2202\u03b1i=\u2202\u2202\u03b1i\uf8eb\uf8ec\uf8ec\uf8edcos\u03b8i\u2212sin\u03b8icos\u03b1isin\u03b8isin\u03b1iaicos\u03b8isin\u03b8icos\u03b8icos\u03b1i\u2212cos\u03b8isin\u03b1iaisin\u03b8i0 sin \u03b1i cos\u03b1idi0 0 0 1\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ed0 sin\u03b8isin\u03b1i sin\u03b8icos\u03b1i00\u2212cos\u03b8isin\u03b1i\u2212cos\u03b8icos\u03b1i00 cos\u03b1i\u2212sin\u03b1i 00 0 0 0\uf8f6\uf8f7\uf8f7\uf8f8.3The \ufb01rst-order Taylor expansion of the direct kinematics around the nominal value of \u03b1iispnomhom+\u2202phom\u2202\u03b1i\u23d0\u23d0\u23d0\u23d0\u03b1i=\u03b1nomi(\u03b1i\u2212\u03b1nomi)=0Anomi\u22121\uf8eb\uf8edi\u22121Anomi+\u2202(i\u22121Ai)\u2202\u03b1i\u23d0\u23d0\u23d0\u23d0\u23d0DHi=DHnomi(\u03b1i\u2212\u03b1nomi)\uf8f6\uf8f8iAnomn(01).Eliminating the nominal identities on the left and right side, we obtain the regressor matrix \u03a6(actually, a vector here) as(\u03a60)=0Anomi\u22121\u2202(i\u22121Ai)\u2202\u03b1i\u23d0\u23d0\u23d0\u23d0\u23d0DHi=DHnomiiAnomn(01),Being\u03b1nomi=\u03c0/2, the evaluation of the sensitivity matrix(\u2202i\u22121Ai)/\u2202\u03b1iin nominal conditionsyields\uf8eb\uf8ec\uf8ec\uf8ed0 sin\u03b8isin\u03b1i sin\u03b8icos\u03b1i00\u2212cos\u03b8isin\u03b1i\u2212cos\u03b8icos\u03b1i00 cos\u03b1i\u2212sin\u03b1i 00 0 0 0\uf8f6\uf8f7\uf8f7\uf8f8\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0DHi=DHnomi=\uf8eb\uf8ec\uf8ec\uf8ed0 sin\u03b8nomi 0 00\u2212cos\u03b8nomi 0 00 0\u22121 00 0 0 0\uf8f6\uf8f7\uf8f7\uf8f8.Finally, the regressor equation is\u03a6\u2206\u03b1i= \u2206p,with \u2206\u03b1i=\u03b1i\u2212\u03b1nomi\u2208Rand \u2206 p\u2208R3being the end-effector position error measured in ageneric experiment. \u25a0", "robot": "nR", "tags": []},
 "110": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 2, "exam": "robo2", "question": "Exercise  #3The differential kinematics of a 3-dof robot performing a two-dimensional task xis expressed byJ(q)\u02d9q=\u02d9x. Suppose that, in a given con\ufb01guration q\u2208R3, we have the following values for thetask Jacobian Jand the desired task velocity \u02d9x:J=(3 1 21.5 0.5 1), \u02d9x=(21).Find the joint velocity \u02d9q\u2217of minimum norm that realizes at best the desired instantaneous task.Does the task velocity error vanish or not? Find another \u02d9q\u2032\u0338=\u02d9q\u2217providing the same task velocityerror and show that \u2225\u02d9q\u2217\u2225<\ued79\ued79\u02d9q\u2032\ued79\ued79.", "solution": "Exercise  #3The differential kinematics of a 3-dof robot performing a two-dimensional task xis expressed byJ(q)\u02d9q=\u02d9x. Suppose that, in a given con\ufb01guration q\u2208R3, we have the following values for thetask Jacobian Jand the desired task velocity \u02d9x:J=(3 1 21.5 0.5 1), \u02d9x=(21).Find the joint velocity \u02d9q\u2217of minimum norm that realizes at best the desired instantaneous task.Does the task velocity error vanish or not? Find another \u02d9q\u2032\u0338=\u02d9q\u2217providing the same task velocityerror and show that \u2225\u02d9q\u2217\u2225<\ued79\ued79\u02d9q\u2032\ued79\ued79.Reply #3It is easy to see that rank( J) = 1, but also that \u02d9x\u2208range{J}so that we can \ufb01nd ( \u221e2!) solutionsto this underdetermined system of linear equations. The minimum norm solution \u02d9q\u2217is the onebased on the pseudoinverse of J, i.e., \u02d9qPS=J#\u02d9x, and will yield in this case zero task velocityerror (i.e., \u02d9x\u2212J\u02d9qPS=0). Since we can discard one of the two equations in J\u02d9q=\u02d9x(because oftheir linear dependence and consistency), the pseudoinverse solution is easily computed fromJ1\u02d9q=(3 1 2)\u02d9q= 2 = \u02d9x1\u21d2 \u02d9qPS=J#1\u02d9x1=114\uf8eb\uf8ed312\uf8f6\uf8f8\u00b72 =\uf8eb\uf8ed3/71/72/7\uf8f6\uf8f8=\uf8eb\uf8ed0.42860.14290.2857\uf8f6\uf8f8.4Another solution is found by simple inspection. For instance, being the third column of Jequalto\u02d9x, the joint velocity \u02d9q\u2032=(0 0 1)Tis also a solution. Indeed, \u2225\u02d9qPS\u2225= 0.5345<1 =\ued79\ued79\u02d9q\u2032\ued79\ued79.\u25a0", "robot": "unknown", "tags": []},
 "111": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 3, "exam": "robo2", "question": "Exercise  #4A 3R planar robot with links of unitary length moving in a vertical plane has to perform twotasks: i)follow a trajectory with its end-effector position, and ii)keep its last link upwards. Atq=(\u03c0/4 0\u03c0/4)T[rad], the desired end-effector linear velocity is vp=(2\u22121)T[m/s]. Doesthere exist a joint velocity \u02d9q\u2208R3that executes both tasks simultaneously? If not, \ufb01nd a jointvelocity \u02d9qTPwith the Task Priority method, giving higher priority to the last link orientation task.", "solution": "Exercise  #4A 3R planar robot with links of unitary length moving in a vertical plane has to perform twotasks: i)follow a trajectory with its end-effector position, and ii)keep its last link upwards. Atq=(\u03c0/4 0\u03c0/4)T[rad], the desired end-effector linear velocity is vp=(2\u22121)T[m/s]. Doesthere exist a joint velocity \u02d9q\u2208R3that executes both tasks simultaneously? If not, \ufb01nd a jointvelocity \u02d9qTPwith the Task Priority method, giving higher priority to the last link orientation task.Reply #4Since\u03b1=f1(q) =q1+q2+q3,p=f2(q) =(cosq1+ cos(q1+q2) + cos(q1+q2+q3)sinq1+ sin(q1+q2) + sin(q1+q2+q3)),the two Jacobians of the link orientation task and, respectively, of the position task areJ1=(1 1 1), J2(q) =(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123),with the usual shorthand notation for trigonometric quantities (e.g., s12= sinq1+ sin(q1+q2)).Atq=(\u03c0/4 0\u03c0/4)T, the orientation of the third link is already upwards ( \u03b1=\u03c0/2), and thiswould means that no task velocity is needed for keeping the correct link orientation, or v\u03b1= 0.The complete task Jacobian matrix and the associated task velocity vector are thusJ=(J1J2)=\uf8eb\uf8ed1 1 1\u22122.4142\u22121.7071\u221211.4142 0.7071 0\uf8f6\uf8f8,v=(v1v2)=(v\u03b1vp)=\uf8eb\uf8ed02\u22121\uf8f6\uf8f8.The Jacobian Jis singular (the sum of its rows is zero), while v\u0338\u2208range{J}(in fact, the sum of thescalar components of vis 1). This means that the two tasks are in con\ufb02ict and cannot be executedsimultaneously without an error. If attempting a solution with, for instance, the pseudoinverse ofJ(rather than with the forbidden inverse), we would get\u02d9qPS=J#v=\uf8eb\uf8ed\u22120.8873\u22120.11110.6650\uf8f6\uf8f8\u21d2ev,PS =v\u2212J#\u02d9qPS=\uf8eb\uf8ed0.33330.33330.3333\uf8f6\uf8f8,spamming equally the error on all components of both velocity tasks. Instead, consider the TaskPriority (TP) method for the two tasks, each with its assigned priority. For the highest prioritytask, we haveJ#1=13\uf8eb\uf8ed111\uf8f6\uf8f8\u21d2 P1=I\u2212J#1J1=\uf8eb\uf8ed2/3\u22121/3\u22121/3\u22121/3 2/3\u22121/3\u22121/3\u22121/3 2/3\uf8f6\uf8f8=13\uf8eb\uf8ed2\u22121\u22121\u22121 2\u22121\u22121\u22121 2\uf8f6\uf8f8Considering that v1= 0, the TP method simpli\ufb01es to\u02d9qTP=J#1v1+ (J2P1)#(v2\u2212J2J#1v1)= (J2P1)#v2,5yielding\u02d9qTP=\uf8eb\uf8ed(\u22122.4142\u22121.7071 11.4142 0.7071 0)\u00b713\uf8eb\uf8ed2\u22121\u22121\u22121 2\u22121\u22121\u22121 2\uf8f6\uf8f8\uf8f6\uf8f8#(2\u22121)=(\u22120.7071 0 0 .70710.7071 0\u22120.7071)#(2\u22121)=\uf8eb\uf8ed\u22120.3536 0.35360 00.3536\u22120.3536\uf8f6\uf8f8(2\u22121)=\uf8eb\uf8ed\u22121.060701.0607\uf8f6\uf8f8.Thus, joints 1 and 3 will move with the same speed but in opposite directions so as to satisfy the\ufb01rst task, pushing the error only to the second task. In fact, we haveev,TP =v\u2212J#\u02d9qTP=\u2212\uf8eb\uf8ed00.50.5\uf8f6\uf8f8,withev1,TP= 0. Note, however, that the TP method leads to a larger norm of the error on thelinear velocity task than the PS method: \u2225ev2,TP\u2225= 0.7071>0.4243 =\u2225ev2,PS\u2225. \u25a0", "robot": "3R", "tags": ["planar", "vertical"]},
 "112": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 4, "exam": "robo2", "question": "Exercise  #5A 3R planar robot is moving on a horizontal plane. At a given instant of time t, the robot is inthe con\ufb01guration q(t) =(0\u03c0/2\u03c0/4)T[rad], with velocity \u02d9q(t) =(\u03c0/2\u2212\u03c0/4\u03c0/8)T[rad/s].If the applied torque is u(t) =(1.5 0\u22124)T[Nm], will the instantaneous total energy Eof therobot increase, stay the same, or decrease? And what about the Lagrangian function L?1", "solution": "Exercise  #5A 3R planar robot is moving on a horizontal plane. At a given instant of time t, the robot is inthe con\ufb01guration q(t) =(0\u03c0/2\u03c0/4)T[rad], with velocity \u02d9q(t) =(\u03c0/2\u2212\u03c0/4\u03c0/8)T[rad/s].If the applied torque is u(t) =(1.5 0\u22124)T[Nm], will the instantaneous total energy Eof therobot increase, stay the same, or decrease? And what about the Lagrangian function L?Reply #5Since the robot moves with constant potential energy U, we have \u02d9U= 0. Then, the instantaneousvariation \u02d9Eof the total energy E=T+Uand the instantaneous variation \u02d9Lof the LagrangianfunctionL=T\u2212Uwill be the same. At the time instant t, we have\u02d9E(t) =\u02d9L(t) (= \u02d9T(t)) = \u02d9qT(t)u(t) =(\u03c0/2\u2212\u03c0/4\u03c0/8)T\uf8eb\uf8ed1.50\u22124\uf8f6\uf8f8= 0.7854>0.Thus, the total energy of the robot and its Lagrangian will instantaneously increase. \u25a0", "robot": "3R", "tags": ["planar", "horizontal"]},
 "113": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 5, "exam": "robo2", "question": "Exercise  #6Given the inertia matrix of a 2R polar robotM(q) =(a1+a2sin2q2+a3cos2q200 a4),\ufb01nd two factorizations of the associated Coriolis/centrifugal terms c(q,\u02d9q) =S\u2032(q,\u02d9q)\u02d9q=S\u2032\u2032(q,\u02d9q)\u02d9qsuch that the matrix \u02d9M\u22122S\u2032is skew symmetric, while the matrix \u02d9M\u22122S\u2032\u2032is not.", "solution": "Exercise  #6Given the inertia matrix of a 2R polar robotM(q) =(a1+a2sin2q2+a3cos2q200 a4),\ufb01nd two factorizations of the associated Coriolis/centrifugal terms c(q,\u02d9q) =S\u2032(q,\u02d9q)\u02d9q=S\u2032\u2032(q,\u02d9q)\u02d9qsuch that the matrix \u02d9M\u22122S\u2032is skew symmetric, while the matrix \u02d9M\u22122S\u2032\u2032is not.Reply #6We compute the velocity terms using the matrices Ciof Christoffel\u2019s symbols. These are alsohelpful for de\ufb01ning a factorization that satis\ufb01es the requested skew-symmetric property. For thecomponents of vector c(q,\u02d9q), we have:ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202Mi(q)\u2202q+(\u2202Mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi),fori= 1,2,6being Mitheith column of the inertia matrix M. We obtainC1(q) =12(0 2( a2\u2212a3) sinq2cosq22(a2\u2212a3) sinq2cosq2 0)=(012(a2\u2212a3) sin(2q2)12(a2\u2212a3) sin(2q2) 0)C2(q) =\u221212(2(a2\u2212a3) sinq2cosq200 0)=(\u221212(a2\u2212a3) sin(2q2) 00 0),leading toc(q,\u02d9q) =(c1(q,\u02d9q)c2(q,\u02d9q))=((a2\u2212a3) sin(2q2) \u02d9q1\u02d9q2\u221212(a2\u2212a3) sin(2q2) \u02d9q21).We need at this point the time derivative of the inertia matrix, i.e.,\u02d9M=((a2\u2212a3) sin(2q2) \u02d9q200 0).A factorization S\u2032that satis\ufb01es the skew-symmetric property is then given byS\u2032(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q))=(12(a2\u2212a3) sin(2q2) \u02d9q212(a2\u2212a3) sin(2q2) \u02d9q1\u221212(a2\u2212a3) sin(2q2) \u02d9q1 0),being c(q,\u02d9q) =S\u2032(q,\u02d9q)\u02d9qand\u02d9M\u22122S\u2032=(0\u2212(a2\u2212a3) sin(2q2) \u02d9q1(a2\u2212a3) sin(2q2) \u02d9q1 0).A possible factorization S\u2032\u2032that, on the contrary, fails to satisfy the skew-symmetric property isS\u2032\u2032(q,\u02d9q) =((a2\u2212a3) sin(2q2) \u02d9q2 0\u221212(a2\u2212a3) sin(2q2) \u02d9q10).In fact, one can verify that c(q,\u02d9q) =S\u2032\u2032(q,\u02d9q)\u02d9q, but the matrix\u02d9M\u22122S\u2032\u2032=(\u2212(a2\u2212a3) sin(2q2) \u02d9q10(a2\u2212a3) sin(2q2) \u02d9q10),is not skew-symmetric. \u25a0", "robot": "2R", "tags": []},
 "114": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 6, "exam": "robo2", "question": "Exercise  #7Consider the PPR planar robot in the \ufb01gure below. Using the coordinates q\u2208R3and the dynamicparameters de\ufb01ned therein, determine the expression of the robot inertia matrix M(q). Providethen a linear parametrization only of the inertial terms in the dynamic model, i.e., such thatM(q)\u00a8q=YM(q,\u00a8q)aM,where the 3\u00d7pregressor matrix YMand the vector of dynamic coefficients aM\u2208Rphave theleast possible dimension p.q2xwq3q1dc3yw\u2295m1m3,I3\u2295\u2295l3m2", "solution": "Exercise  #7Consider the PPR planar robot in the \ufb01gure below. Using the coordinates q\u2208R3and the dynamicparameters de\ufb01ned therein, determine the expression of the robot inertia matrix M(q). Providethen a linear parametrization only of the inertial terms in the dynamic model, i.e., such thatM(q)\u00a8q=YM(q,\u00a8q)aM,7where the 3\u00d7pregressor matrix YMand the vector of dynamic coefficients aM\u2208Rphave the leastpossible dimension p.Reply #7The \ufb01rst two simple contributions to the robot kinetic energy areT1=12m1\u02d9q21 andT2=12m2(\u02d9q21+ \u02d9q22).q2xwq3q1dc3yw\u2295m1m3,I3\u2295\u2295l3m2ForT3, we compute \ufb01rst (in the plane)pc3=(q2+dc3cosq3q1+dc3sinq3)\u21d2 vc3=\u02d9pc3=(\u02d9q2\u2212dc3sinq3\u02d9q3\u02d9q1+dc3cosq3\u02d9q3)\u21d2 \u2225 vc3\u22252= \u02d9q21+ \u02d9q22+d2c3\u02d9q23+ 2dc3(cosq3\u02d9q1\u2212sinq3\u02d9q2) \u02d9q3and thenT3=12I3\u02d9q23+12m3(\u02d9q21+ \u02d9q22+d2c3\u02d9q23+ 2dc3(cosq3\u02d9q1\u2212sinq3\u02d9q2) \u02d9q3).The total kinetic energy of the robot is thusT=T1+T2+T3=12\u02d9qTM(q)\u02d9q=12\u02d9qT\uf8eb\uf8ec\uf8edm1+m2+m3 0m3dc3cosq30 m2+m3\u2212m3dc3sinq3m3dc3cosq3\u2212m3dc3sinq3I3+m3d2c3\uf8f6\uf8f7\uf8f8\u02d9q.By introducing a vector aM\u2208R4of dynamic coefficients, the inertia matrix can be rewritten asaM=\uf8eb\uf8ec\uf8ec\uf8eda1a2a3a4\uf8f6\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8edm1+m2+m3m2+m3I3+m3d2c3m3dc3\uf8f6\uf8f7\uf8f7\uf8f8\u21d2M(q) =\uf8eb\uf8ec\uf8eda1 0a4cosq30a2\u2212a4sinq3a4cosq3\u2212a4sinq3a3\uf8f6\uf8f7\uf8f8.Clearly,p= 4 is the minimum number of dynamic coefficients for this robot. The linear parametriza-tion of the inertial terms isM(q)\u00a8q=\uf8eb\uf8ec\uf8ed\u00a8q10 0 cos q3\u00a8q30 \u00a8q20\u2212sinq3\u00a8q30 0 \u00a8q3cosq3\u00a8q1\u2212sinq3\u00a8q2\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ec\uf8eda1a2a3a4\uf8f6\uf8f7\uf8f7\uf8f8=YM(q,\u00a8q)aM. \u25a08", "robot": "PPR", "tags": ["planar"]},
 "115": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 7, "exam": "robo2", "question": "Exercise  #8Provide the inertia matrix Mp(p) of the robot considered in Question #7when using for theLagrangian dynamic modeling the new set of coordinates p=(x y \u03b1)T\u2208R3, where (x,y) arethe components of the Cartesian position of the robot end-effector in world coordinates and \u03b1isthe angle of the last link w.r.t. the xwaxis of the world frame.", "solution": "Exercise  #8Provide the inertia matrix Mp(p)of the robot considered in Question #7 when using for theLagrangian dynamic modeling the new set of coordinates p=(x y \u03b1)T\u2208R3, where (x,y)arethe components of the Cartesian position of the robot end-effector in world coordinates and \u03b1isthe angle of the last link w.r.t. the xwaxis of the world frame.Reply #8The change of coordinatesp=\uf8eb\uf8edxy\u03b1\uf8f6\uf8f8=\uf8eb\uf8edq2+l3cosq3q1+l3sinq3q3\uf8f6\uf8f8=f(q)represents the desire to use Cartesian variables for describing the dynamics of a PPR robot. Thechange of coordinates is here a diffeomorphism (i.e., a differentiable mapping with a unique anddifferentiable inverse) in R2\u00d7SO(1). Its inverse isq=f\u22121(p) =\uf8eb\uf8edp2\u2212l3sinp3p1\u2212l3cosp3p3\uf8f6\uf8f8,while the Jacobian matrix of the transformation (and its inverse) takes the formJ(q) =\u2202f(q)\u2202q=\uf8eb\uf8ed0 1\u2212l3sinq31 0l3cosq30 0 1\uf8f6\uf8f8\u21d2 J\u22121(q) =\uf8eb\uf8ed0 1\u2212l3cosq31 0l3sinq30 0 1\uf8f6\uf8f8.The inertia matrix of the PPR robot in the new coordinates is obtained asMp(p) =(J\u2212T(q)M(q)J\u22121(q))\u23d0\u23d0\u23d0q=f\u22121(p)in which all quantities have been already de\ufb01ned. \u25a0Additional remark: Further elaboration of the above expression is straightforward but lengthy(and beyond the scope of the present question). Nonetheless, using the Matlab Symbolic Toolbox,it can be shown that the explicit expression of Mpas a function of ponly can be rewritten asMp(p) =\uf8eb\uf8ec\uf8edap2 0\u2212ap4sinp30 ap1 ap5cosp3\u2212ap4sinp3ap5cosp3ap3+ (ap1\u2212ap2)l23cos2p3\uf8f6\uf8f7\uf8f8,where a new set of dynamic coefficients ap\u2208R5has been introduced for compactness, de\ufb01ned interms of the dynamic coefficients a\u2208R4already present in M(q). These new dynamic coefficientsareap=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8eda1a2a3+a2l23\u22122a4l3a4\u2212a2l3a4\u2212a1l3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.Indeed, note that the 5 coefficients in apare not a minimal dynamic set: they can be expressed infact as linear combinations of the 4 coefficients in a, provided that the length l3of the third link(a kinematic quantity) is known.9", "robot": "unknown", "tags": []},
 "116": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 8, "exam": "robo2", "question": "Exercise  #9A single link moving under gravity is modeled by the differential equation I\u00a8\u03b8+mg0dsin\u03b8=u,withm= 3 [kg],d= 0.5 [m],I= 1 [kgm2], andg0= 9.81 [m/s2]. The motor torque is boundedby|u|\u2264U= 25 [Nm]. The desired task is a rest-to-rest swing-up maneuver from \u03b8(0) = 0 to\u03b8(T) =\u03c0[rad] inT= 1 [s], to be done with a bang-bang acceleration pro\ufb01le. Is the torque boundsatis\ufb01ed? If not, \ufb01nd the minimum uniform time scaling to execute the task in a feasible way.", "solution": "Exercise  #9A single link moving under gravity is modeled by the differential equation I\u00a8\u03b8+mg0dsin\u03b8=u,withm= 3 [kg],d= 0.5[m],I= 1 [kgm2], andg0= 9.81[m/s2]. The motor torque is boundedby|u|\u2264U= 25 [Nm]. The desired task is a rest-to-rest swing-up maneuver from \u03b8(0) = 0 to\u03b8(T) =\u03c0[rad] inT= 1 [s], to be done with a bang-bang acceleration pro\ufb01le. Is the torque boundsatis\ufb01ed? If not, \ufb01nd the minimum uniform time scaling to execute the task in a feasible way.Reply #9We start by determining the value Aof the piecewise constant (bang-bang) acceleration pro\ufb01lerequested for executing the desired trajectory, given \u2206 \u03b8=\u03b8(T)\u2212\u03b8(0) =\u03c0andT= 1. Startingat rest, the velocity \u02d9\u03b8will grow linearly up to the midtime t=T/2, reaching a value V=A\u00b7T/2,and then returning linearly to zero at t=T. The area underlying the triangular velocity pro\ufb01le isequal to the angular displacement \u2206 \u03b8. Thus,\u2206\u03b8=\u222bT0\u02d9\u03b8d\u03c4=V\u00b7T2=A\u00b7T24\u21d2A=4\u2206\u03b8T2= 4\u03c0[rad/s2].The inertial term in the dynamic model will have a constant value ui=I\u00a8\u03b8(t) =IA= 4\u03c0in the\ufb01rst half of the motion, t\u2208[0,T/2], until the link reaches the midpoint \u2206 /2 = \u03a0/2 of the motiontrajectory; during the second half, t\u2208(T/2,T], this inertial term will have the same amplitude buta negative sign. On the other hand, the gravitational torque ug=mg0dsin\u03b8(t) = 14.715 sin\u03b8(t)will grow from zero to its maximum at t=T/2, when\u03b8(T/2) = \u2206\u03b8/2 =\u03c0/2 andug,max = 14.7150,and return then symmetrically to zero. As a result, the maximum (positive) torque requested bythe desired trajectory is attained at t=T/2 = 1 [s] and is equal to umax=ui+ug,max = 27.2814>25 =U[Nm], exceeding so the motor torque bound. The original trajectory is unfeasible. We needthen to uniformly slow down motion by a factor k>1, in order to reduce the inertial accelerationcomponent of the inverse dynamics torque (the gravitational torque ugis unaffected by any timescaling). Since the inertial torque scales with k2(quadratically), the minimum scaling factor kiscomputed ask= max{1,\u221aumax\u2212ug,maxU\u2212ug,max}= max{1,\u221a4\u03c010.2850}= 1.1054.The new motion time will be Ts=kT= 1.1054 [s] and the peak of the total torque will be againassumed at t=Ts/2, where\u03b8(Ts/2) =\u03c0/2. Without the need of a new inverse dynamics analysis,this is computed asumax,s =umax\u2212ug,maxk2+ug,max =uik2+ug,max = (U\u2212ug,max )+ug,max =U= 25 [Nm].\u25a0Additional material: Plots of the relevant quantities obtained using Matlab are reported at theend for the original trajectory (Figure 1) and for the scaled, feasible one (Figure 2).", "robot": "unknown", "tags": []},
 "117": {"file": "Robotics2_Remote_Midterm_Test_2019-20_20.04.15.pdf", "date": "20-04-15", "num_ex": 9, "exam": "robo2", "question": "Exercise  #10Assume that we have available the Newton-Euler routine NE\u03b1(arg1,arg2,arg3), equipped with thekinematic and dynamic data of a n-dof serial manipulator. How can we compute the kinetic energyTin a generic state ( q,\u02d9q) of this robot by just one call of this routine and one scalar product?[180 minutes (3 hours); open books]2", "solution": "Exercise  #10Assume that we have available the Newton-Euler routine NE\u03b1(arg1,arg2,arg3), equipped with thekinematic and dynamic data of a n-dof serial manipulator. How can we compute the kinetic energyTin a generic state (q,\u02d9q)of this robot by just one call of this routine and one scalar product?Reply #10We compute \ufb01rst the Newton-Euler routine output y=12M(q)\u02d9q=NE0(q,0,12\u02d9q)and thenobtain the result with a scalar product: \u02d9qTy=12\u02d9qTM(q)\u02d9q=T(q,\u02d9q). \u25a01000.10.20.30.40.50.60.70.80.910123theta [rad]Delta=3.1416 [rad], V=6.2832 [rad/s], A=12.5664 [rad/s2], T=1 [s]00.10.20.30.40.50.60.70.80.910246dtheta/dt [rad/s]00.10.20.30.40.50.60.70.80.91time [s]-10010d2theta/dt2 [rad/s2]00.10.20.30.40.50.60.70.80.91time [s]-30-20-100102030u [Nm]total torque (umax=27.2814, U=25) [red] and gravity torque [blue]; motion time T=1 [s]Figure 1: Position, velocity and acceleration pro\ufb01les [left] and total and gravitational torques [right]for the original unfeasible trajectory with T= 1 [s].00.20.40.60.810123theta [rad]Delta=3.1416 [rad], scaled V=5.6843 [rad/s], scaled A=10.285 [rad/s2], scaled Ts=1.1054 [s]00.20.40.60.810246dtheta/dt [rad/s]00.20.40.60.81time [s]-10010d2theta/dt2 [rad/s2]00.20.40.60.81time [s]-30-20-100102030u [Nm]total scaled torque [red] and gravity torque [blue]; scaled motion time Ts=1.1054 [s]Figure 2: Position, velocity and acceleration pro\ufb01les [left] and total and gravitational torques [right]for the scaled feasible trajectory with Ts= 1.1054 [s].", "robot": "unknown", "tags": []},
 "118": {"file": "Robotics2_13.01.09.pdf", "date": "13-01-09", "num_ex": 0, "exam": "robo2", "question": "Y0!q1 X0!P=(px , py)!q2 q3 ya!Figure 1: A 3 Rplanar robot with unitary link lengths and two sets of task variablesConsider the 3 Rplanar robot of Fig. 1, having links of unitary length and with the generalizedcoordinates de\ufb01ned therein. This robot is redundant for the task of positioning its end-effector atp= (px,py), as well as for the task of imposing a value to the second link end-point height ya.a)For each separate task, de\ufb01ne the associated task Jacobian and its singularities.b)Characterize the so-called algorithmic singularities (con\ufb01gurations where each task can beexecuted separately, but not both tasks simultaneously).c)For the simultaneous execution of both tasks, provide the expression of an inverse differentialkinematic solution at the velocity level, based on a task-priority strategy that assigns higherpriority to the end-effector position task.", "solution": "Being the generalized coordinates qi(i= 1,2,3) the absolute angles of the links w.r.t. the x0axis,the end-effector position is expressed asp=(cosq1+ cosq2+ cosq3sinq1+ sinq2+ sinq3)=f1(q)The associated task Jacobian isJ1(q) =\u2202f1\u2202q=(\u2212sinq1\u2212sinq2\u2212sinq3cosq1 cosq2 cosq3)and is singular if and only ifsin(q2\u2212q1) = sin(q3\u2212q2) = 0, (\u21d2sin(q3\u2212q1) = 0) (1)or, in terms of Denavit-Hartenberg relative link angles \u03b8i=qi\u2212qi\u22121(fori= 2.3), when sin \u03b82=sin\u03b83= 0. This occurs only when all three links are folded or stretched along a common radialline originating at the robot base.The height yaof the end-point of the second link and its associated task Jacobian are given byya= sinq1+ sinq2=f2(q)\u21d2J2(q) =\u2202f2\u2202q=(cosq1cosq20).This Jacobian is singular if and only ifcosq1= cosq2= 0, (2)namely when the \ufb01rst two links are either folded or stretched andthe end-point of the second linkis on they0axis.When considering the two tasks together, the Extended Jacobian is squareJE(q) =(J1(q)J2(q))=\uf8eb\uf8ec\uf8ed\u2212sinq1\u2212sinq2\u2212sinq3cosq1 cosq2 cosq3cosq1 cosq2 0\uf8f6\uf8f7\uf8f8.Algorithmic singularities will occur when both J1andJ2are full (row) rank, butdetJE=\u2212cosq3\u00b7sin(q2\u2212q1) = 0. (3)Comparing eqs. (1\u20132) with (3), this happens when\u2022the third link is vertical (cos q3= 0), while the \ufb01rst two are not; or,\u2022the \ufb01rst two links are aligned (sin( q2\u2212q1) = 0) but not vertical, and the third link is notaligned with the \ufb01rst two.2Indeed, the above are only particular conditions for singularity of the Extended Jacobian. In fact,JEis not invertible as soon as the third link is vertical and/or the \ufb01rst two links are aligned, nomatter what is the situation of the other links.Letvd\u2208R2be a desired velocity for the robot end-effector and \u02d9 ya,da desired height variationrate for the end-point of the second link. An inverse solution of the form\u02d9q=J\u22121E(q)(vd\u02d9ya,d)will blow out as soon as a singularity occurs for JE. A task-priority solution, with the \ufb01rst task(of dimension m1= 2) of higher priority than the second one (of dimension m2= 1), is given by\u02d9q=J#1(q)vd+(J2(q)(I\u2212J#1(q)J1(q)))#(\u02d9ya,d\u2212J2(q)J#1(q)vd). (4)This will guarantee perfect execution of the \ufb01rst task even when JEis singular (i.e., eq. (3) holds),provided that eq. (1) is notsatis\ufb01ed (in particular, in algorithmic singularities, where eq. (2) is notsatis\ufb01ed too).Using the properties of projection matrices (symmetry and idempotency), and being the matrixJ2(I\u2212J#1J1) a row vector in our case, the solution (4) can also be rewritten as\u02d9q=J#1(q)vd+\u03b1(I\u2212J#1(q)J1(q))JT2(q),with the scalar\u03b1=\u03b1(q,vd,\u02d9ya,d) =\u02d9ya,d\u2212J2(q)J#1(q)vdJ2(q)(I\u2212J#1(q)J1(q))JT2(q).", "robot": "3R", "tags": ["planar", "vertical"]},
 "119": {"file": "Robotics2_13.01.09.pdf", "date": "13-01-09", "num_ex": 1, "exam": "robo2", "question": "q2 q1 X0 Y0 x = k dFigure 2: A RProbot moving on a horizontal plane with its end-effector constrained on a lineThe end-effector of the RProbot in Fig. 2 is constrained to move on the Cartesian line x=k, withk >0. For this operative condition, derive the expression of the constrained robot dynamics (inthis case, two second-order differential equations, with a dynamically consistent projection matrixacting on forces/torques so as to automatically satisfy the motion constraint in any admissiblerobot state).[210 minutes; open books]1", "solution": "Following the Lagrangian approach, with multipliers \u03bbused to weigh the holonomic constraintsh(q) =0, the dynamic equations (in the absence of gravity) take the formB(q)\u00a8q+c(q,\u02d9q) =u+AT(q)\u03bbs.t.h(q) =0,withA(q) =\u2202h(q)/\u2202q. By further elaboration, one can eliminate the multipliers (the forcesthat arise when attempting to violate the constraints) and obtain the so-called constrained robotdynamics in the formB(q)\u00a8q=(I\u2212AT(q)(A#B(q))T)(u\u2212c(q,\u02d9q))\u2212B(q)A#B(q)\u02d9A(q)\u02d9qwhereA#B(q) =B\u22121(q)AT(q)(A(q)B\u22121(q)AT(q))\u22121is the (dynamically consistent) pseudoinverse of A, weighted by the robot inertia matrix.We need thus to provide the robot inertia matrix B, the Coriolis and centrifugal vector c, thematrixAand its time derivative \u02d9A. The kinetic energy1isT=T1+T2=12I1\u02d9q21+12(I2\u02d9q21+m2vTc2vc2).1For simplicity, it is assumed that the \ufb01rst link has its center of mass on the axis of the \ufb01rst joint. Otherwise, ifthe center of mass is at a distance dc1, simply replace I1byI1+m1d2c1in the following.3Sincepc2=((q2\u2212d) cosq1(q2\u2212d) sinq1)\u21d2vc2=\u02d9pc2=(\u2212(q2\u2212d) sinq1\u02d9q1+ \u02d9q2cosq1(q2\u2212d) cosq1\u02d9q1+ \u02d9q2sinq1),it followsT=12(I1+I2+m2(q2\u2212d)2)\u02d9q21+12m2\u02d9q22=12\u02d9qT(I1+I2+m2(q2\u2212d)200 m2)\u02d9q=12\u02d9qTB(q)\u02d9q.From the inertia matrix, using the Christoffel symbols, we obtainc(q,\u02d9q) =(2m2(q2\u2212d) \u02d9q1\u02d9q2\u2212m2(q2\u2212d) \u02d9q21).The (scalar) Cartesian constraint on the end-effector ish(q) =q2cosq1\u2212k= 0.Thus,A(q) =\u2202h(q)\u2202q=(\u2212q2sinq1cosq1)and\u02d9A(q) =(\u2212\u02d9q2sinq1\u2212q2cosq1\u02d9q1\u2212sinq1\u02d9q1).Sinceq2is never allowed to go to zero (by the constraint x=k >0 on the end-effector), matrixAhas always full rank and all expressions in the constrained dynamics hold without singularities.For instance, the dynamically consistent weighted pseudoinverse takes the \ufb01nal expressionA#B(q) =m2(I1+I2+m2(q2\u2212d)2)I1+I2+m2q22+m2d(d\u22122q2) cos2q1\uf8eb\uf8ec\uf8ec\uf8ed\u2212q2sinq1I1+I2+m2(q2\u2212d)2cosq1m2\uf8f6\uf8f7\uf8f7\uf8f8.", "robot": "RP", "tags": ["horizontal", "constraints"]},
 "120": {"file": "Robotics2_21.06.11.pdf", "date": "21-06-11", "num_ex": 0, "exam": "robo2", "question": "Suppose that a routine is available that computes numerically the pseudoinverse of a matrix A,e.g., the pinv function in MATLAB, A#=pinv (A). Given a m\u00d7n,full rank matrixJ, withm < n , and an\u00d7n, positive de\ufb01nite, symmetric weighting matrix W, prove formally that theweighted pseudoinverse J#Wcan be computed as J#W=W\u22121/2pinv (JW\u22121/2). As a veri\ufb01cation,provide a simple numerical example with m= 2,n= 3.", "solution": "The weighted pseudoinverse J#Wof am\u00d7nmatrixJ, with rankJ=m < n and a symmetricmatrixW>0, is given byJ#W=W\u22121JT(JW\u22121JT)\u22121,with the three relations holdingJJ#WJ=J,J#WJJ#W=J#W,(JJ#W)T=JJ#W, (1)but not the fourth one (i.e., in general ( J#WJ)T\u0338=J#WJ). On the other hand, for a full row rankmatrixAthepinv routine provides as outputA#=pinv (A) =AT(AAT)\u22121.Therefore,W\u22121/2pinv (JW\u22121/2) =W\u22121/2(JW\u22121/2)T(JW\u22121/2(JW\u22121/2)T)\u22121=W\u22121/2W\u22121/2JT(JW\u22121/2W\u22121/2JT)\u22121=W\u22121JT(JW\u22121JT)\u22121=J#W.As a numerical example with m= 2,n= 3, forJ=(1 2 34 5 6),W=\uf8eb\uf8ed789\uf8f6\uf8f8,we obtainW\u22121/2pinv (JW\u22121/2) =\uf8eb\uf8ec\uf8ed\u22120.9792 0.4583\u22120.0417 0.08330.6875\u22120.2083\uf8f6\uf8f7\uf8f8=J#W,which satis\ufb01es indeed the de\ufb01ning identities (1).Note that the same formula holds also in the singular case (rank J<m), being thenJ#W=W\u22121JTpinv(JW\u22121JT)=W\u22121/2pinv (JW\u22121/2).For instance, withJ=(1 2 34 8 12), rankJ= 1,and the same previous diagonal W>0, we obtainW\u22121/2pinv (JW\u22121/2) =\uf8eb\uf8ec\uf8ed0.0051 0.02050.0090 0.03580.0119 0.0477\uf8f6\uf8f7\uf8f8=J#W.3", "robot": "unknown", "tags": []},
 "121": {"file": "Robotics2_21.06.11.pdf", "date": "21-06-11", "num_ex": 1, "exam": "robo2", "question": "A single link mounted on a passive elastic support is moved on a horizontal plane by a torque\u03c4applied by a motor to the revolute joint at its base, as sketched in Fig. 1. The generalizedcoordinates q1andq2are de\ufb01ned therein, together with the relevant dynamic parameters: massm, distanced > 0 of the CoM from the joint, and barycentric inertia ILof the link; stiffnessk>0 of the linear spring in the support. The spring is undeformed when q1= 0. Derive \ufb01rst theLagrangian dynamic model of this simple robotic system. Next, address the following two dynamicproblems.a) An input torque \u03c40>0 is applied at t= 0, with the system at q(0) = \u02d9q(0) = 0(zero initialstate). Determine if the spring will initially be compressed or extended and if the link will startmoving clockwise or counterclockwise. Provide the expression of the initial accelerations \u00a8 q1(0)and \u00a8q2(0) of the two coordinates .b) Starting at t= 0 in a generic non-zero initial state ( q(0),\u02d9q(0)), de\ufb01ne a control law \u03c4=\u03c4(q,\u02d9q)such thatq2(t) will exponentially converge to zero. At steady state, determine the residualdynamics of the other coordinate q1(t) and provide a physical interpretation of this result.x0q2y0q1m, IL\ud835\udf0fk\u2295dFigure 1: A single-link robotic system mounted on a \ufb02exible base.", "solution": "We compute the kinetic energy Tof the link and the potential energy Uedue to the elastic spring.The position and velocity of the center of mass of the link arepc=(dcosq2q1+dsinq2)\u21d2vc=\u02d9pc=(\u2212dsinq2\u02d9q2\u02d9q1+dcosq2\u02d9q2),while the angular velocity of the link has only the z-component \u03c9z= \u02d9q2. Therefore, the kineticenergy isT=12m(\u02d9q21+d2\u02d9q22+ 2dcosq2\u02d9q1\u02d9q2)+12IL\u02d9q22=12\u02d9qTM(q)\u02d9q,with the inertia matrix given byM(q) =(m md cosq2mdcosq2IL+md2).The velocity terms in the dynamic model are computed through the standard Christoffel\u2019s symbols.We obtainC1(q) =12\uf8f1\uf8f2\uf8f3(0 00\u2212mdsinq2)+(0 00\u2212mdsinq2)T\u22120\uf8fc\uf8fd\uf8fe=(0 00\u2212mdsinq2),yieldingc1(q,\u02d9q) =\u02d9qTC1(q)\u02d9q=\u2212mdsinq2\u02d9q22.On the other hand, it is easy to see thatC2(q) =0\u21d2c2(q,\u02d9q) = 0.The elastic potential Ueand its gradient areUe=12kq21\u21d2 \u2207 qUe=(kq10)As a result, the dynamic model of the robotic system is(m md cosq2mdcosq2IL+md2)(\u00a8q1\u00a8q2)+(\u2212mdsinq2\u02d9q220)+(kq10)=(0\u03c4). (2)For case a), at the initial state q(0) = \u02d9q(0) = 0and with an input \u03c4=\u03c40>0, we solve from (2)for the acceleration \u00a8q(0) as(\u00a8q1(0)\u00a8q2(0))=M\u22121(q(0))(0\u03c40)=1detM(q(0))(\u2212mdcosq2(0)m)\u03c40=\u03c40IL(\u2212d1).(3)As a consequence, the spring will be initially compressed (\u00a8 q1(0)<0) and the link will start movingcounterclockwise (\u00a8 q2(0)>0).For case b), we isolate \u00a8 q1from the \ufb01rst equation in (2),\u00a8q1=1m(md(sinq2\u02d9q22\u2212cosq2\u00a8q2)\u2212kq1),4and replace it in the second, obtaining thus(IL+md2(1\u2212cos2q2))\u00a8q2+md2sinq2cosq2\u02d9q22\u2212dkq 1cosq2=\u03c4. (4)Consider now the nonlinear feedback control law\u03c4=(IL+md2(1\u2212cos2q2))(\u2212kd\u02d9q2+kp(q2d\u2212q2)) +md2sinq2cosq2\u02d9q22\u2212dkq 1cosq2,(5)withkp>0 andkd>0, and any constant value for q2d. Note that the (inertial) factor multiplying\u00a8q2in this control law is always positive. Then, plugging the torque (5) into (4) will exactly linearizeand stabilize the dynamics of the coordinate q2in a global sense, yielding\u00a8q2+kd\u02d9q2+kpq2=kpq2,d\u21d2q2(t)\u2192q2dexponentially .At steady state, one has \u02d9 q2= \u00a8q2= 0. Thus, the \ufb01rst dynamic equation in (2) providesm\u00a8q1+kq1= 0.This is the dynamics of an undamped mass msuspended on a spring of stiffness k. If initiallyexcited at some t=\u00aft>0, i.e., forq1(\u00aft)\u0338= 0 and/or \u02d9 q1(\u00aft)\u0338= 0, the mass will oscillate forever asq1(t) =q1(\u00aft) cos\u03c9(t\u2212\u00aft) +\u02d9q1(\u00aft)\u03c9sin\u03c9(t\u2212\u00aft), \u03c9 =\u221akm>0,\u2200t\u2265\u00aft.Accordingly, the control law (5) boils down at steady state to the oscillatory command\u03c4ss(t) =\u2212(dkcosq2d)q1(t),which will prevent the link from rotating.", "robot": "R", "tags": ["horizontal"]},
 "122": {"file": "Robotics2_21.06.11.pdf", "date": "21-06-11", "num_ex": 2, "exam": "robo2", "question": "Draw a 3-dof robot whose dynamic model is given byM\u00a8q+g=u,M=\uf8eb\uf8ec\uf8edm1+m2+m3 0 00m2+m300 0 m3\uf8f6\uf8f7\uf8f8,g=\uf8eb\uf8ec\uf8ed00\u2212m3g0\uf8f6\uf8f7\uf8f8,with masses mi>0,i= 1,2,3, andg0= 9.81 [m/s2].1", "solution": "It is easy to recognize that the dynamic model refers to a Cartesian 3P robot with orthogonalaxes, see Fig. 4. Only the third (vertical) prismatic joint is subject to gravity. The structure isalso called a portal robot. It supports and moves heavy payloads and is usually equipped with anadditional 3R spherical wrist mounted on the end effector.q1\u2295q2q3m1m2m3\u2295\u2295g0xwywzwFigure 4: A Cartesian 3P robot with a portal structure.5", "robot": "unknown", "tags": ["vertical"]},
 "123": {"file": "Robotics2_21.06.11.pdf", "date": "21-06-11", "num_ex": 3, "exam": "robo2", "question": "Consider the planar 3R robot with equal link lengths in Fig. 2 and absolute joint coordinatesq= (q1,q2,q3) de\ufb01ned therein. The robot is equipped with three motors producing torques u=(u1,u2,u3) that perform work on the Denavit-Hartenberg angles \u03b8= (\u03b81,\u03b82,\u03b83), respectively.Provide the expression of the torque vector uq= (uq1,uq2,uq3) that should appear on the right-hand side of the robot dynamic model written in terms of the absolute coordinates q(i.e., inM(q)\u00a8q+n(q,\u02d9q) =uq), as function of the components of u.x0q1q2q3y0PLLLFigure 2: A planar 3R robot, with absolute joint coordinates qand equal links of length L.", "solution": "This is a straightforward application of the principle of virtual work. The (absolute) coordinatesqi,i= 1,2,3, in Fig. 2 are related to the (relative) joint variables \u03b8i,i= 1,2,3, of the Denavit-Hartenberg (DH) notation by the linear transformationq1=\u03b81q2=\u03b81+\u03b82q3=\u03b81+\u03b82+\u03b83\u21d2q=\uf8eb\uf8ec\uf8ed1 0 01 1 01 1 1\uf8f6\uf8f7\uf8f8\u03b8=T\u03b8.The joint torques uproduced by the three motors and performing work on the DH angles \u03b8andthe torquesuqperforming work on the qcoordinates that appear in the dynamic modelM(q)\u00a8q+n(q,\u02d9q) =uq,are related by the identityuTq\u02d9q=uT\u02d9\u03b8\u21d2uTq\u02d9q=uTqT\u02d9\u03b8=uT\u02d9\u03b8,\u2200\u02d9\u03b8oru=TTuq=\uf8eb\uf8ec\uf8ed1 1 10 1 10 0 1\uf8f6\uf8f7\uf8f8uq\u21d2u1=uq1+uq2+uq3u2=uq2+uq3u3=uq3and its inverseuq=T\u2212Tu=\uf8eb\uf8ec\uf8ed1\u22121 00 1\u221210 0 1\uf8f6\uf8f7\uf8f8u\u21d2uq1=u1\u2212u2uq2=u2\u2212u3uq3=u3.", "robot": "3R", "tags": ["planar"]},
 "124": {"file": "Robotics2_21.06.11.pdf", "date": "21-06-11", "num_ex": 4, "exam": "robo2", "question": "With reference to Fig. 3, the end-point Pof a planar 2R robot should execute a desired trajectorypd(t)\u2208R2, speci\ufb01ed by a circular path in the Cartesian plane with a time-varying desired tangentialvelocity. Motion occurs on a horizontal plane and the circle should be traced counterclockwise.An initial position and/or velocity error between the robot end-point and the desired trajectory ispresent att= 0. Later on, external disturbances may also affect occasionally the execution of thedesired motion task. Design a torque control law for the robot such that the trajectory trackingerror dynamics is exponentially stable, linear, and decoupled along the normal and tangentialdirections to the path. The error behaviors in these two directions (represented, respectively, bythextandytaxes of a time-varying frame that moves with the desired task) should be criticallydamped, with a dominant reaction time to position errors in the normal direction which is about\ufb01ve times faster than in the tangential one. Assume that no kinematic singularities are encountered(as suggested also by the placement of the circle in Fig. 3).x0y0Ppd(t)ytxtFigure 3: Tracking a circular Cartesian trajectory with a planar 2R robot.[240 minutes (4 hours); open books]2", "solution": "The solution is provided by a feedback linearization control law designed to stabilize in a decou-pled way the normal and tangential trajectory errors in the time-varying reference frame ( xt,yt)associated to the task. For this, having de\ufb01ned the position error e=pd\u2212p, the error vector ofinterest in the rotated task frame iste=0RTt(t)e=0RTt(t) (pd\u2212p),where0Rt(t) =(cos\u03b1d(t)\u2212sin\u03b1d(t)sin\u03b1d(t) cos\u03b1d(t))is the 2\u00d72 (planar) rotation matrix characterizing the current orientation (by the angle \u03b1d(t)) ofthe task frame ( xt,yt) moving with pd(t) w.r.t. the absolute frame ( x0,y0). Accordingly, the timederivative ofteis1t\u02d9e=0RTt(t)\u02d9e+0\u02d9RTt(t)e=0RTt(t)\u02d9e+0RTt(t)ST( \u02d9\u03b1d(t))e=0RTt(t)(\u02d9e+ST( \u02d9\u03b1d(t))e),(6)1In the following, the two formats of the expression oft\u02d9ein (6), and later oft\u00a8ein (7), can be used equivalently:either the one containing time derivatives of the rotation matrix, or the one where these are substituted by theirexplicit computation.6withS( \u02d9\u03b1d(t)) =(0\u2212\u02d9\u03b1d(t)\u02d9\u03b1d(t) 0).Similarly, its second time derivative ist\u00a8e=0RTt(t)\u00a8e+ 20\u02d9RTt(t)\u02d9e+0\u00a8RTt(t)e=0RTt(t)\u00a8e+ 20RTt(t)ST( \u02d9\u03b1d(t))\u02d9e+0RTt(t)ST(\u00a8\u03b1d(t))e\u22120RTt(t)D( \u02d9\u03b1d(t))e=0RTt(t)(\u00a8e+ 2ST( \u02d9\u03b1d(t))\u02d9e+(ST(\u00a8\u03b1d(t))\u2212D( \u02d9\u03b1d(t)))e),(7)beingD( \u02d9\u03b12d(t)) =\u2212(ST( \u02d9\u03b1d(t)))2=(\u02d9\u03b12d(t) 00 \u02d9\u03b12d(t)).Therefore, to satisfy the problem speci\ufb01cations, we should impose to the controlled robot thefollowing linear and decoupled error dynamicst\u00a8e+tKDt\u02d9e+tKPte=0, (8)with diagonal, positive de\ufb01nite gain matrices (task gains)tKP=(kP,norm 00kP,tang)>0,tKD=(kD,norm 00kD,tang)>0,where the subscripts norm andtang are used to denote, respectively, the normal direction xtandthe tangential direction ytof the current task frame.Consider the dynamic model of the planar 2R robot (without gravity term, being this on a hori-zontal plane)M(q)\u00a8q+c(q,\u02d9q) =\u03c4and the direct (and \ufb01rst- and second-order differential) kinematics of the robotp=f(q), \u02d9p=\u2202f(q)\u2202q\u02d9q=J(q)\u02d9q, \u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q.Assuming no singularities of the Jacobian matrix J(q) are encountered, we apply the control law\u03c4=M(q)J\u22121(q)(a\u2212\u02d9J(q)\u02d9q)+c(q,\u02d9q), (9)witha=\u00a8pd+0Rt(t)(tKDt\u02d9e+tKPte)+ 2ST( \u02d9\u03b1d(t))\u02d9e+(ST(\u00a8\u03b1d(t))\u2212D( \u02d9\u03b1d(t)))e. (10)This gives\u00a8p=\u00a8pd+0Rt(t)(tKDt\u02d9e+tKPte)+ 2ST( \u02d9\u03b1d(t))\u02d9e+(ST(\u00a8\u03b1d(t))\u2212D( \u02d9\u03b1d(t)))eor0RTt(t)(\u00a8e+ST( \u02d9\u03b1d(t)) 2\u02d9e+(ST(\u00a8\u03b1d(t))\u2212D( \u02d9\u03b1d(t)))e)+tKDt\u02d9e+tKPte=0,which is equivalent to the expression (8) of the desired behavior for the task errorte(t).7Note that the commanded acceleration ain (10) can be equivalently written using the time deriva-tives of the task rotation matrix0Rt(t) within the expressions oft\u02d9ein (6) andt\u00a8ein (7). Thiswould lead toa=\u00a8pd+0Rt(t)(tKDt\u02d9e+tKPte+ 20\u02d9RTt(t)\u02d9e+0\u00a8RTt(t)e), (11)which produces indeed the same target result (8). Moreover, equation (10) can be rewritten onlyin terms of the position and velocity errors eand\u02d9eexpressed in the base frame asa=\u00a8pd+KD(t)\u02d9e+KP(t)e=\u00a8pd+KD(t) (\u02d9pd\u2212\u02d9p) +KP(t) (pd\u2212p), (12)where we de\ufb01ned the two time-varying gain matrices associated to the taskKP(t) =0Rt(t)tKP0RTt(t) +0Rt(t)tKD0RTt(t)ST( \u02d9\u03b1d(t)) +ST(\u00a8\u03b1d(t))\u2212D( \u02d9\u03b1d(t))andKD(t) =0Rt(t)tKD0RTt(t) + 2ST( \u02d9\u03b1d(t)).We note that the desired task acceleration \u00a8pdneeds not to be rotated in the expression (12), andthat extra terms appear in these time-varying gain matrices, related to the changing orientationof the task frame. If the same trajectory were assigned along a linear path, then \u02d9 \u03b1d= \u00a8\u03b1d= 0 andthese gain matrices would become constanttKP=0RtKP0RTt,tKD=0RtKD0RTt.Finally, in order to assign a critical damping and the desired time scale separation between thenormal and tangential error components, we use standard results on linear second-order dynamicsystems. In order to impose two asymptotically stable eigenvalues/poles in\u2212a\u00b1ib=\u2212\u03c9(\u03b6\u00b1i\u221a1\u2212\u03b62)with\u03c9>0, \u03b6 > 0, a=\u03b6\u03c9> 0, b=\u221a1\u2212\u03b62\u03c9\u22650,to the characteristic equation s2+kDs+kP= 0 that governs the dynamics of each component ofthe tracking error in the task frame, one needs to choosekD= 2\u03b6\u03c9, k P=\u03c92.The coefficient \u03b6affects the way oscillations at the natural frequency \u03c9are damped. Moreover,the error response over time is enveloped by a decaying exponential e\u2212\u03b6\u03c9t. Therefore, to achieveour design target for the transient errors, we choose \ufb01rst a common critical damping \u03b6= 0.7 (orlarger) for both the tangential and normal directions. Then, once a sufficiently high frequency\u03c9tang>0 has been selected for the tangential direction, we setkP,tang =\u03c92tang, kD,tang = 2\u03b6\u03c9tang,andkP,norm =\u03c92norm = (5\u03c9tang)2= 25\u03c92tang, kD,norm = 2\u03b6\u03c9norm = 10\u03b6\u03c9tang.", "robot": "2R", "tags": ["planar", "horizontal"]},
 "125": {"file": "Robotics2_23.03.24.pdf", "date": "23-03-24", "num_ex": 0, "exam": "robo2", "question": "The torque controlled 2R planar robot in Fig. 1 moves in a vertical plane, performing a one-dimensionaltrajectory task r=rd(t)\u2208Rfor its end-effector that is speci\ufb01ed only along they-direction. The linkshave equal length land equal and uniformly distributed mass m, with barycentric inertia Ic=ml2/12(links are thin rods). When the robot is in the con\ufb01guration \u00afq= (\u03c0/4,\u2212\u03c0/2) [rad] and has a joint velocity\u00af\u02d9q= (1,\u22121) [rad/s], a task acceleration \u00a8 rdis assigned.\u2295yxq2q1\ud835\udf0f2\ud835\udf0f1\u2295\ud835\udc5f\u0308!g0Figure 1: A 2R planar robot in a one-dimensional task.Determine in a parametric way (with respect to l,m, \u00a8rd, andKD) the torque\u03c4\u2208R2that executes thetask and instantaneously minimizes the costH=12(\u03c4\u2212\u03c40)TM\u22121(q) (\u03c4\u2212\u03c40),\u03c40=\u2212KD\u02d9q,whereM(q) is the inertia matrix of the robot and matrix KD>0 is diagonal. Evaluate then numericallythe obtained solution torque \u03c4using the following data:l= 0.5 [m], m = 3 [kg], \u00a8rd= 1 [m/s2],KD= diag{2,2}[Nm\u00b7s].", "solution": "The solution is obtained by solving a LQ optimization problem in the standard form. Using the expressionof the dynamic modelM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4,the objective functionH=12(\u03c4\u2212\u03c40)TM\u22121(q) (\u03c4\u2212\u03c40)becomes a complete quadratic form in the joint acceleration \u00a8qH=12(M(q)\u00a8q+c(q,\u02d9q) +g(q)\u2212\u03c40)TM\u22121(q) (M(q)\u00a8q+c(q,\u02d9q) +g(q)\u2212\u03c40)=12\u00a8qTM(q)\u00a8q+ (c(q,\u02d9q) +g(q)\u2212\u03c40)T\u00a8q+12(c(q,\u02d9q) +g(q)\u2212\u03c40)TM\u22121(q) (c(q,\u02d9q) +g(q)\u2212\u03c40),to be locally minimized under the acceleration-level task constraintJ(q)\u00a8q+\u02d9J(q)\u02d9q\u2212\u00a8r=0.As a result, the joint acceleration solution is\u00a8q=M\u22121(q) (\u03c40\u2212c(q,\u02d9q)\u2212g(q)) +J#M(q)(\u00a8r\u2212\u02d9J(q)\u02d9q\u2212J(q)M\u22121(q) (\u03c40\u2212c(q,\u02d9q)\u2212g(q)))whereJ#M(q) =M\u22121(q)JT(q)(J(q)M\u22121(q)JT(q))\u22121is the inertia-weighted pseudoinverse of J. Then, the corresponding command torque is\u03c4=\u03c40+JT(q)(J(q)M\u22121(q)JT(q))\u22121(\u00a8r\u2212\u02d9J(q)\u02d9q\u2212J(q)M\u22121(q) (\u03c40\u2212c(q,\u02d9q)\u2212g(q)))(1)or, equivalently,\u03c4=JT(q)(J(q)M\u22121(q)JT(q))\u22121(\u00a8r\u2212\u02d9J(q)\u02d9q+J(q)M\u22121(q) (c(q,\u02d9q) +g(q)))+(I\u2212JT(q)(J(q)M\u22121(q)JT(q))\u22121J(q)M\u22121(q))\u03c40,with\u03c40=\u2212KD\u02d9q.In order to evaluate the torque (1) for the case at hand, we need \ufb01rst to \ufb01nd the expression of the termsassociated to the second-order differential kinematics for the given motion task along the y-direction,namely \u00a8rd\u2208R, the 1\u00d72 task Jacobian matrixJ(q) =(lc1+lc12lc12),and its time derivative\u02d9J(q) =(\u2212ls1\u02d9q1\u2212ls12( \u02d9q1+ \u02d9q2)\u2212ls12( \u02d9q1+ \u02d9q2)),so that\u02d9J(q)\u02d9q=\u2212ls1\u02d9q21\u2212ls12( \u02d9q1+ \u02d9q2)2.The task Jacobian Jloses rank (it vanishes!) for c1=c12= 0, namely when q=qs= (\u00b1\u03c0/2,0). This isnot our case since \u00afq0= (\u03c0/4,\u2212\u03c0/2)\u0338=qs.We compute then the terms in the dynamic model of the robot, taking into account that the links areconsidered as a thin rods with uniform mass distribution.2Kinetic energyFor the \ufb01rst link, we haveT1=12m(l2)2\u02d9q21+12(112ml2)\u02d9q21=12ml23\u02d9q21.For the second link, beingvc2=\u02d9pc2=ddt(l(c1s1)+l2(c12s12))=l(\u2212s1\u02d9q1\u221212s12( \u02d9q1+ \u02d9q2)c1\u02d9q1+12c12( \u02d9q1+ \u02d9q2)),it is\u2225vc2\u22252=l2(\u02d9q21+14( \u02d9q1+ \u02d9q2)2+c2\u02d9q1( \u02d9q1+ \u02d9q2)),and thusT2=12m\u2225vc2\u22252+12(112ml2)( \u02d9q1+ \u02d9q2)2=12ml2(43\u02d9q21+13\u02d9q22+23\u02d9q1\u02d9q2+c2\u02d9q1( \u02d9q1+ \u02d9q2)).Finally,T=T1+T2=12\u02d9qTM(q)\u02d9q.Inertia matrixFactoring out the common symbolic term ml2, one hasM(q) =ml2\uf8eb\uf8ec\uf8ec\uf8ed53+c213+c2213+c2213\uf8f6\uf8f7\uf8f7\uf8f8,with detM(q) =ml2(16\u22129c22)/36 and inverseM\u22121(q) =1ml2\u00b73616\u22129c22\uf8eb\uf8ec\uf8ec\uf8ed13\u2212(13+c22)\u2212(13+c22)53+c2\uf8f6\uf8f7\uf8f7\uf8f8.Velocity termsUsing the Christoffel symbols, the Coriolis and centrifugal terms are computed as follows:C1(q) =ml22(0\u2212s2\u2212s2\u2212s2)\u21d2c1(q,\u02d9q) =\u02d9qTC1(q)\u02d9q=\u2212ml22s2(2 \u02d9q1+ \u02d9q2) \u02d9q2,C2(q) =ml22(s200 0)\u21d2c2(q,\u02d9q) =\u02d9qTC2(q)\u02d9q=ml22s2\u02d9q21.Thereforec(q,\u02d9q) =ml22(\u2212s2(2 \u02d9q1+ \u02d9q2) \u02d9q2s2\u02d9q21)=ml22(\u2212s2\u02d9q2\u2212s2( \u02d9q1+ \u02d9q2)s2\u02d9q1 0)(\u02d9q1\u02d9q2)=S(q,\u02d9q)\u02d9q,where the factorization with a matrix Ssatis\ufb01es the skew-symmetry of \u02d9M\u22122S(a useful property neededin Exercise 2).3Potential energy and gravity termsFor the \ufb01rst and second links, we haveU1=mg0l2s1, U 2=mg0(ls1+l2s12),ThereforeU=U1+U2\u21d2g(q) =\u2202U\u2202q=mg0l\uf8eb\uf8ec\uf8ed32c1+12c1212c12\uf8f6\uf8f7\uf8f8.We can now evaluate at \u00afq= (\u03c0/4,\u2212\u03c0/2) [rad] and \u00af\u02d9q= (1,\u22121) [rad/s] all the needed terms using the givenrobot data ( l= 0.5 [m],m= 3 [kg]), i.e.,J(\u00afq) =(0.7071 0.3536)\u02d9J(\u00afq)\u00af\u02d9q=\u22120.3536M(\u00afq) =(1.25 0.250.25 0.25)M\u22121(\u00afq) =(1\u22121\u22121 5)c(\u00afq,\u00af\u02d9q) =(\u22120.375\u22120.375)g(\u00afq) =(20.81025.2025)\u03c40=KD\u00af\u02d9q=(\u221222)J#M(\u00afq) =(0.56571.6971),Finally, substituting these values in (1), the following joint torque is obtained for a desired task acceleration\u00a8rd= 1 [m/s2]:\u03c4=(11.89858.9492)[Nm].", "robot": "2R", "tags": ["planar", "vertical"]},
 "126": {"file": "Robotics2_23.03.24.pdf", "date": "23-03-24", "num_ex": 1, "exam": "robo2", "question": "Consider the same robot of Fig. 1, now with all kinematic anddynamic parameters that appear explicitlyin the model having uncertain/unknown values. In this situation, design an adaptive control law that isable to guarantee global asymptotic tracking of a desired smooth joint trajectory qd(t).", "solution": "By the assumption on mass distribution of the two links of the planar 2R robot, it is clear from theobtained dynamic terms in Exercise 1 that the model can be linearly parametrized in terms of only two(mixed) dynamic/kinematic coefficients, namely a1=ml2anda2=mg0l(the gravity acceleration g0canbe included or excluded from a2, with minimal changes in the following). Moreover, if the common lengthlof the two links (and g0) were known, then the single dynamic parameter mwould be sufficient.Thus, beingM(q)\u00a8q+c(q,\u02d9q) +g(q) =Y(q,\u02d9q,\u00a8q)a=\u03c4, witha=(ml2mlg 0),an adaptive control law that guarantees asymptotic stabilization of the trajectory error e(t) =qd(t)\u2212q(t)to zero in a global way is given by\u03c4=Y(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a+KPe+KD\u02d9e\u02d9\u02c6a=\u0393YT(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q),(2)with \u02d9qr=\u02d9qd+\u039be, diagonal gain matrices \u039b>0,\u0393>0,KD>0, andKP=KD\u039b>0, and whereY(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a=\u02c6M(q)\u00a8qr+\u02c6S(q,\u02d9q)\u02d9qr+\u02c6g(q),being theSmatrix that factorizes the Coriolis and centrifugal terms such that \u02d9M\u22122Sis skew-symmetric.Therefore, the 2\u00d72 regressor matrix Yto be used in the adaptive control law (2) isY(q,\u02d9q,\u02d9qr,\u00a8qr) =\uf8eb\uf8ec\uf8ec\uf8ed(53+c2)\u00a8q1r+(13+c22)\u00a8q2r\u2212s22( \u02d9q2\u02d9q1r+ ( \u02d9q1+ \u02d9q2) \u02d9q2r)3c12+c122(13+c22)\u00a8q1r+13\u00a8q2r+s22\u02d9q1\u02d9q1rc122\uf8f6\uf8f7\uf8f7\uf8f8.4", "robot": "unknown", "tags": ["planar"]},
 "127": {"file": "Robotics2_23.03.24.pdf", "date": "23-03-24", "num_ex": 2, "exam": "robo2", "question": "With reference to the situation in Fig. 2, a robot should move a triangular-shaped tool in continuouscontact with the bottom surface of a rectangular guide, in which the tool is perfectly inserted, of a metallicobject in order to remove excessive material and debris ( deburring ). Assign a task frame so as to de\ufb01nein a decoupled way the natural and arti\ufb01cial constraints associated to this hybrid task. Assume that nofriction is present at any of the contacts. Specify then qualitatively how desired values should be assignedto the variables that can be controlled, in order to perform the task at best and with minimum effort.Figure 2: The set-up of a hybrid force-motion task.[180 minutes; open books]1", "solution": "The chosen task frame and the associated natural and arti\ufb01cial constraints are shown in Fig. 3. We haveset to zero the reference values fy,d=mx,d=mz,d= 0 so as to minimize the internal forces between thetool and those parts of the object for which deburring is not necessary. On the other hand, a non-zero valuefz,d<0 is chosen both for maintaining the tool contact with the bottom of the guide and for guaranteeinga sufficient force to remove the debris that are present there. The speed vx,d>0 characterizes the progressof the deburring task. Finally, \u03c9y,d(t) is left free and is available for de\ufb02ecting the tool from the normaldirection to the bottom surface of the guide when necessary, e.g., for allowing a better execution of thedeburring operation.\ud835\udc65\ud835\udc66\ud835\udc67\t\ud835\udc53!=0\ud835\udc63'=0\ud835\udc63#=0\ud835\udf14!=0\ud835\udc5a'=0\ud835\udf14#=0artificialconstraintsnaturalconstraints\ud835\udc63!=\ud835\udc63!,%\ud835\udc53'=0\ud835\udc53#=\ud835\udc53#,%\ud835\udc5a!=0\ud835\udf14'=\ud835\udf14',%\ud835\udc5a#=0Figure 3: The chosen task frame and the associated natural and arti\ufb01cial constraints.", "robot": "unknown", "tags": ["constraints"]},
 "128": {"file": "Robotics2_10.09.15.pdf", "date": "10-09-15", "num_ex": 0, "exam": "robo2", "question": "Consider the planar robot with three degrees of freedom (RPR) shown in Fig. 1.Y!0!X!0!q!3!q!2!d!c1!q!1!d!c3!d!c2!Figure 1: A planar RPR robot1. Determine the symbolic expression of the robot inertia matrix B(q). Explicit all assumptionsthat are made.2. Find a set of dynamic coefficients a\u2208Rp, with a possibly minimal p, that provides a linearparameterization of the inertial term in the dynamic model, i.e., B(q)\u00a8q=Y(q,\u00a8q)a.", "solution": "We compute the robot kinetic energy taking into account that the motion is planar: linear velocitiesare vectors in the plane ( x, y), angular velocities are scalars (in the z-direction). With standardnotations, for the \ufb01rst link it is:T1=12(I1+m1d2c1)\u02d9q21.For the second link, frompc2=(q2cosq1q2sinq1)\u21d2 vc2=(\u02d9q2cosq1\u2212q2sinq1\u02d9q1\u02d9q2sinq1+q2cosq1\u02d9q1),we have:T2=12I2\u03c922+12m2vTc2vc2=12(I2\u02d9q21+m2(q22\u02d9q21+ \u02d9q22)).For the third link, frompc3=((q2+dc2) cosq1+dc3cos(q1+q3)(q2+dc2) sinq1+dc3sin(q1+q3))\u21d2vc3=(\u02d9q2cosq1\u2212(q2+dc2) sinq1\u02d9q1\u2212dc3sin(q1+q3)( \u02d9q1+ \u02d9q3)\u02d9q2sinq1+ (q2+dc2) cosq1\u02d9q1+dc3cos(q1+q3)( \u02d9q1+ \u02d9q3)),we have:T3=12I3\u03c923+12m3vTc3vc3=12I3( \u02d9q1+ \u02d9q3)2+12m3((q2+dc2)2\u02d9q21+ \u02d9q22+d2c3( \u02d9q1+ \u02d9q3)2+ 2dc3((q2+dc2) cosq3\u02d9q1\u2212sinq3\u02d9q2)( \u02d9q1+ \u02d9q3)).FromT=3\u2211i=1Ti=12\u02d9qTB(q)\u02d9q, with B(q) =\uf8eb\uf8edb11b12b13b12b22b23b13b23b33\uf8f6\uf8f8,we obtain for the single elements of the symmetric inertia matrix:b11=I1+m1d2c1+I2+m2q22+I3+m3d2c3+m3(q2+dc2)2+ 2m3dc3(q2+dc2) cosq3=a1+a2q2+a3q22+ 2a4cosq3+ 2a5q2cosq3b12=\u2212m3dc3sinq3=\u2212a5sinq3b13=I3+m3d2c3+m3dc3(q2+dc2) cosq3=a6+a5q2cosq3+a4cosq3b22=m2+m3=a3b23=\u2212m3dc3sinq3=\u2212a5sinq3b33=I3+m3d2c3=a6.2Therefore, the inertia matrix can be compactly rewritten asB(q) =\uf8eb\uf8ec\uf8eda1+a2q2+a3q22+ 2a4cosq3+ 2a5q2cosq3\u2212a5sinq3a6+a5q2cosq3+a4cosq3\u2212a5sinq3 a3\u2212a5sinq3a6+a5q2cosq3+a4cosq3\u2212a5sinq3 a6\uf8f6\uf8f7\uf8f8and the (minimal) parametrization of B(q)\u00a8q=Y(q,\u00a8q)ais thus of dimension p= 6, witha=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8eda1a2a3a4a5a6\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edI1+m1d2c1+I2+I3+m3(d2c2+d2c3)2m3dc2m2+m3m2dc2dc3m3dc3I3+m3d2c3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8andY(q,\u00a8q) =\uf8eb\uf8ec\uf8ed\u00a8q1q2\u00a8q1q22\u00a8q1cosq3(2\u00a8q1+ \u00a8q3)q2cosq3(2\u00a8q1+ \u00a8q3)\u2212sinq3\u00a8q2 \u00a8q30 0 \u00a8 q2 0\u2212sinq3(\u00a8q1+ \u00a8q3) 00 0 0 cos q3\u00a8q1 q2cosq3\u00a8q1\u2212sinq3\u00a8q2 \u00a8q1+ \u00a8q3\uf8f6\uf8f7\uf8f8.", "robot": "RPR", "tags": ["planar"]},
 "129": {"file": "Robotics2_17.06.06.pdf", "date": "17-06-06", "num_ex": 0, "exam": "robo2", "question": "Consider a planar 3R robot with unitary link lengths as in Fig. 1, where the generalized coordinates qare de\ufb01ned as the absolute angles of the links w.r.t. the x-axis. The position of the robot end-effectorp=p(q), as obtained through the direct kinematics, should follow the desired trajectorypd(t) =1 + 2 sin 3t2 + cos`3t+\u03c02\u00b4!, fort\u22650. (1)The robot is kinematically redundant for this task.\u2022De\ufb01ne a differential inversion scheme at the level of joint jerk commands...qsuch that the squarednorm\u2225...q\u22252is locally minimized and the trajectory can be executed exactly right from the initialtimet= 0.\u2022Provide numerical values for the initial joint position q(0), joint velocity \u02d9q(0), and joint acceleration\u00a8q(0) such that there is a perfect initial matching with the desired trajectory. Provide also thenumerical value of the initial locally optimal command...q(0).\u2022Suppose that there is no perfect matching between the initial kinematic conditions of the robotand the trajectory at time t= 0. How can we modify the command law for...qsuch that the errore(t) =pd(t)\u2212p(t) and all its time derivatives will exponentially converge to zero?x y p q1 q2 q3Figure 1: A planar 3R robot with absolute angles as generalized coordinates q= (q1, q2, q3).", "solution": "The direct kinematics of the planar 3R robot with unitary link lengths using absolute coordinates (i.e.,the link angles w.r.t. the x-axis) isp=p(q) =c1+c2+c3s1+s2+s3!.The associated \ufb01rst-order differential kinematics, with the Jacobian matrix, is\u02d9p=\u2202p(q)\u2202q\u02d9q=J(q)\u02d9q=\u2212s1\u2212s2\u2212s3c1c2c3!\u02d9q.The second-order differential kinematics, with the \ufb01rst time-derivative \u02d9Jof the Jacobian, is\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=J(q)\u00a8q+\u2212c1\u02d9q1\u2212c2\u02d9q2\u2212c3\u02d9q3\u2212s1\u02d9q1\u2212s2\u02d9q2\u2212s3\u02d9q3!\u02d9q.The third-order differential kinematics, including the second time-derivative \u00a8Jof the Jacobian, is...p=J(q)...q+ 2\u02d9J(q)\u00a8q+\u00a8J(q)\u02d9q=J(q)...q+ 2\u02d9J(q)\u00a8q+s1\u02d9q21\u2212c1\u00a8q1s2\u02d9q22\u2212c2\u00a8q2s3\u02d9q23\u2212c3\u00a8q3\u2212c1\u02d9q21\u2212s1\u00a8q1\u2212c2\u02d9q22\u2212s2\u00a8q2\u2212c3\u02d9q23\u2212s3\u00a8q3!\u02d9q.When the initial conditions of the robot are perfectly matched with the desired end-effector trajectory,p(q(0)) =pd(0),J(q(0))\u02d9q(0) = \u02d9pd(0),J(q(0))\u00a8q(0) + \u02d9J(q(0))\u02d9q(0) = \u00a8pd(0), (3)the nominal solution for executing pd(t) with minimum norm of the joint jerk is (dropping dependencies)...q=J#\u201c...pd\u22122\u02d9J\u00a8q\u2212\u00a8J\u02d9q\u201d. (4)From (1), we have\u02d9pd=6 cos 3t\u22123 sin`3t+\u03c02\u00b4!, \u00a8pd=\u221218 sin 3t\u22129 cos`3t+\u03c02\u00b4!,...pd=\u221254 cos 3t27 sin`3t+\u03c02\u00b4!.Thuspd(0) =12!, \u02d9pd(0) =6\u22123!, \u00a8pd(0) =00!,...pd(0) =\u22125427!.It is easy to \ufb01nd an initial con\ufb01guration q0=q(0) that is matched with the initial position of the trajectory:q0=`0\u03c0/2\u03c0/2\u00b4T[rad]\u21d2p(q0) =pd(0).In this con\ufb01guration, the Jacobian is full rank and its pseudoinverse is easily computed asJ0=J(q0) =0\u22121\u221211 0 0!\u21d2J#0=JT0\u201cJ0JT0\u201d\u22121=0B@0 1\u22120.5 0\u22120.5 01CA3The associated initial joint velocity \u02d9q0=\u02d9q(0) and acceleration \u00a8q0=\u00a8q(0) can be computed as minimumnorm solutions at their differential level. We have\u02d9q0=J#0\u02d9pd(0) =0B@\u22123\u22123\u221231CA[rad/s].From this, evaluating\u02d9J0\u02d9q0=3 0 00 3 3!0B@\u22123\u22123\u221231CA=\u22129\u221218!,we obtain also\u00a8q0=J#0\u201c\u00a8pd(0)\u2212\u02d9J0\u02d9q0\u201d=\u2212J#0\u02d9J0\u02d9q0=0B@18\u22124.5\u22124.51CA[rad/s2].Evaluating now\u02d9J0\u00a8q0=54\u221227!, \u00a8J0\u02d9q0=\u221218 9 9\u22129 4.5 4.5!0B@\u22123\u22123\u221231CA=00!=0,from eq. (4) we \ufb01nally obtain the jerk command at time t= 0:...q(0) =J#0\u201c...pd(0)\u22122\u02d9J0\u00a8q0\u2212\u00a8J0\u02d9q0\u201d=0B@0 1\u22120.5 0\u22120.5 01CA\u22125427!\u2212254\u221227!!=0B@8181811CA[rad/s3].Instead, when the initial conditions of the robot are not matched with the desired end-effector trajectory(i.e., if one or more of the identities in (3) is violated), in order to obtain exponential tracking of pd(t),the solution with minimum norm of the joint jerk can be modi\ufb01ed as (dropping dependencies)...q=J#\u201c...pd+k2\u201c\u00a8pd\u2212J\u00a8q\u2212\u02d9J\u02d9q\u201d+k1(\u02d9pd\u2212J\u02d9q) +k0(pd\u2212p)\u22122\u02d9J\u00a8q\u2212\u00a8J\u02d9q\u201d, (5)where the scalars k0,k1, andk2are such thatk(s) =s3+k2s2+k1s+k0is a Hurwitz polynomial, namely it has all roots in the left-hand side of the complex plane. From Routhcriterion, this happens if and only ifk0>0, k 1>k0k2>0, k 2>0. (6)To show the transient properties of the control law (5), let the Cartesian position error be de\ufb01ned ase=pd\u2212p\u2208R2. From...e=...pd\u2212...p=...pd\u2212\u201cJ...q+ 2\u02d9J\u00a8q+\u00a8J\u02d9q\u201dusing (5) and being JJ#=I2\u00d72, it is easy to see that the following linear differential equation holds:...e+k2\u00a8e+k1\u02d9e+k0e=0.Under the conditions (6), the evolution of e(t) and of its time derivatives is that of the modes of anasymptotically stable linear system, namely exponentially or pseudo-exponentially converging to zero.4", "robot": "3R", "tags": ["planar"]},
 "130": {"file": "Robotics2_17.06.06.pdf", "date": "17-06-06", "num_ex": 1, "exam": "robo2", "question": "For the same robot in Fig. 1, and using the same coordinates de\ufb01ned therein, assume that the three linkshave equal, uniformly distributed mass mi=m= 10 kg, for i= 1,2,3. Each torque \u03c4idelivered bythe motors and performing work on the absolute coordinate qiis bounded as|\u03c4i|\u2264Tmax= 300 Nm, fori= 1,2,3. Consider the Cartesian regulation control law\u03c4=JT(q)KP\u201cpd\u2212p(q)\u201d\u2212KD\u02d9q+g(q), withpd=12!, (2)where the gain matrices KPandKDare diagonal and positive de\ufb01nite. Let the robot starts at rest att= 0 in the con\ufb01guration q(0) =`\u03c0/2 0 0\u00b4T.\u2022If the gain matrices are of the form KP=kP\u00b7I2\u00d72andKD=kD\u00b7I2\u00d72, provide the largest valuesfor the scalars kPandkDsuch that\u03c4(0) in (2) does not violate its bounds.\u2022Let now the positional gain matrix be KP= diag{kPx,kPy}, whileKDis as before. Provide thelargest values for the scalars kPx,kPy, andkdsuch that\u03c4(0) in (2) does not violate its bounds.\u2022How would things change if the bounds were set as |\u03c4\u03b8,i|\u2264Tmax= 300 Nm, where \u03c4\u03b8,iis the torquedelivered by the motors and performing work on the relative (Denavit-Hartenberg) coordinate \u03b8i,fori= 1,2,3?[Turn sheet for the next exercise]1", "solution": "We compute \ufb01rst the gravitational potential energy Ug(q) =U1+U2+U3. We haveU1=m1g0d1sinq1, U 2=m2g0(\u21131sinq1+d2sinq2),U3=m3g0(\u21131sinq1+\u21132sinq2+d3sinq3).Sincedi=\u2113i/2 = 0.5, fori= 1,2,3, it isUg(q) =g0\u201cm12+m2+m3\u201dsinq1+g0\u201cm22+m3\u201dsinq2+g0m32sinq3andg(q) =\u201e\u2202Ug(q)\u2202q\u00abT=0B@g0((m1/2) +m2+m3) cosq1g0((m2/2) +m3) cosq2g0(m3/2) cosq31CA.Using the expressions of p(q) andJ(q) from Exercise 1 and the mass data, we evaluate the control law (2)withKP=kP\u00b7I2\u00d72, at the initial time t= 0, whenq(0) =`\u03c0/2 0 0\u00b4Tand \u02d9q(0) = 0:\u03c4(0) =kpJT(q(0)) (pd\u2212p(q(0))) +g(q(0))=kp0B@\u22121 00 10 11CA12!\u221221!!+0B@015g05g01CA=0B@kpkp+ 15g0kp+ 5g01CA, kp>0, g0= 9.81>0.(7)Therefore, the largest value kp>0 that satis\ufb01es the bounds on the joint torques, |\u03c4i|\u2264Tmax= 300 Nm,fori= 1,2,3, is the one that saturates the second torque component, i.e.,\u03c42(0) =kp+ 15g0= 300 [Nm]\u21d2kp= 300\u221215g0\u2243152.85.IfKP= diag{kPx,kPy}and all the rest is as before, the control law (2) is evaluated again as\u03c4(0) =JT(q(0)) diag{kPx,kPy}(pd\u2212p(q(0))) +g(q(0)) =0B@kPxkPy+ 15g0kPy+ 5g01CA, kPx>0, kPy>0.(8)Therefore, we can take as the largest gain values those that saturate the \ufb01rst two components of the torque\u03c4, i.e.,kPx=\u03c41(0) = 300 [Nm] , kPy= 300\u221215g0\u2243152.85 [Nm].In both cases, the value of KD=kD\u00b7I2\u00d72does not play any role (as long as \u02d9q=0).Finally, consider the case of torque bounds in the form |\u03c4\u03b8,i|\u2264Tmax= 300 Nm, for i= 1,2,3, where\u03c4\u03b8are the torques producing work on the relative coordinates \u03b8(of the Denavit-Hartenberg convention).Sinceq=0B@1 0 01 1 01 1 11CA\u03b8=T\u03b8\u21d2 \u02d9q=T\u02d9\u03b8,from the principle of virtual work ( \u03c4T\u02d9q=\u03c4T\u03b8\u02d9\u03b8) we have\u03c4\u03b8=TT\u03c4=0B@1 1 10 1 10 0 11CA\u03c4\u21d2\u03c4=T\u2212T\u03c4\u03b8=0B@1\u22121 00 1\u221210 0 11CA\u03c4\u03b8. (9)5Therefore, taking for example the gain structure in (7), it follows that0B@\u2212300\u2212300\u22123001CA\u2264\u03c4\u03b8(0) =TT\u03c4(0) =TT0B@kpkp+ 15g0kp+ 5g01CA=0B@3kp+ 20g02kp+ 20g0kp+ 5g01CA\u22640B@3003003001CA.The largest value kp>0 that satis\ufb01es all the above bounds is obtained then from the \ufb01rst component:kp=300\u221220g03\u224334.6 [Nm].Note also that, from the linear transformations (9), a feasible cube of side 2 Tmax= 600 Nm centered inthe origin of the \u03c4\u03b8-space becomes a skewed parallelepiped in the \u03c4-space (and vice versa).", "robot": "unknown", "tags": []},
 "131": {"file": "Robotics2_17.06.06.pdf", "date": "17-06-06", "num_ex": 2, "exam": "robo2", "question": "Consider the planar PRP robot in Fig. 2.q3 xq2 q1 d y     ! ! g \u43a9!\u43a9!\u43a9!m3,I3 m2,I2 m1,I1Figure 2: A planar PRP robot moving in a vertical plane, with de\ufb01nition of the generalizedcoordinates q= (q1, q2, q3) to be used.\u2022Determine the expressions of the inertial, Coriolis and centrifugal, and gravity terms in the dynamicmodel expressed in the usual Lagrangian formM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4.\u2022Find a factorization c(q,\u02d9q) =C(q.\u02d9q)\u02d9qsuch that \u02d9M\u22122Cis a skew-symmetric matrix.\u2022Find all equilibrium con\ufb01gurations qe(i.e., such that g(qe) =0), if any.\u2022Provide symbolic expressions for the scalar coefficients \u03b1 > 0 and\u03b2 > 0 such that the followingglobal linear bound holds for the Hessian of the gravitational potential energy Ug(q):\u201a\u201a\u201a\u201a\u22022Ug(q)\u2202q2\u201a\u201a\u201a\u201a=\u201a\u201a\u201a\u201a\u2202g(q)\u2202q\u201a\u201a\u201a\u201a\u2264\u03b1+\u03b2|q3|,\u2200q\u2208R3.[240 minutes; open books but no computer or smartphone]2", "solution": "Following a Lagrangian approach, we compute \ufb01rst the kinetic energy T(q,\u02d9q) =T1+T2+T3. We haveT1=12m1\u02d9q21, T 2=12m2`\u02d9q21+d2\u02d9q22\u22122dsinq2\u02d9q1\u02d9q2\u00b4+12I2\u02d9q22,T3=12m3`\u02d9q21+q23\u02d9q22+ \u02d9q23\u22122q3sinq2\u02d9q1\u02d9q2+ 2 cosq2\u02d9q1\u02d9q3\u00b4+12I3\u02d9q22.ThusT=12\u02d9qTM(q)\u02d9q=12\u02d9qT0B@m1+m2+m3\u2212(m2d+m3q3) sinq2m3cosq2I2+m2d2+I3+m3q23 0symm m31CA\u02d9q.The components of the Coriolis and centrifugal vector are computed using the Christoffel\u2019s symbolsci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12\u2202mi(q)\u2202q+\u201e\u2202mi(q)\u2202q\u00abT\u2212\u2202M(q)\u2202qi!,beingmitheith column of the inertia matrix M(q). We haveC1(q) =0B@0 0 00\u2212(m2d+m3q3) cosq2\u2212m3sinq20\u2212m3sinq2 01CA\u21d2c1(q,\u02d9q) =\u2212(m2d+m3q3) cosq2\u02d9q22\u22122m3sinq2\u02d9q2\u02d9q3.SimilarlyC2(q) =0B@0 0 00 0m3q30m3q3 01CA\u21d2c2(q,\u02d9q) = 2m3q3\u02d9q2\u02d9q3,andC3(q) =0B@0 0 00\u2212m3q300 0 01CA\u21d2c3(q,\u02d9q) =\u2212m3q3\u02d9q22.A factorization of the Coriolis and centrifugal terms c(q,\u02d9q) =C(q,\u02d9q)\u02d9qthat satis\ufb01es the skew-symmetricproperty is given byC(q,\u02d9q) =0B@\u02d9qTC1(q)\u02d9qTC2(q)\u02d9qTC3(q)1CA=0B@0\u2212(m2d+m3q3) cosq2\u02d9q2\u2212m3sinq2\u02d9q3\u2212m3sinq2\u02d9q20 m3q3\u02d9q3 m3q3\u02d9q20 \u2212m3q3\u02d9q2 01CA.6Being\u02d9M(q) =0B@0 \u2212(m2d+m3q3) cosq2\u02d9q2\u2212m3sinq2\u02d9q3\u2212m3sinq2\u02d9q2\u2212(m2d+m3q3) cosq2\u02d9q2\u2212m3sinq2\u02d9q3 2m3q3\u02d9q3 0\u2212m3sinq2\u02d9q2 0 01CA,it is easy to check that the matrix \u02d9M\u22122Cis skew-symmetric.For the potential energy due to gravity, Ug(q) =U1+U2+U3, we have (up to a constant)U1= 0, U 2=m2g0dsinq2, U 3=m3g0q3sinq2.Thusg(q) =\u201e\u2202Ug(q)\u2202q\u00abT=0B@0(m2d+m3q3)g0cosq2m3g0sinq21CA.The unforced equilibrium con\ufb01gurations areg(qe) =0\u21d2qe,1=any, qe,2={0,\u03c0}, qe,3=\u2212m2m3d.Taking a further partial derivative of gw.r.t.q, we obtain the matrix\u2202g(q)\u2202q=\u22022Ug(q)\u2202q2=0B@0 0 00\u2212(m2d+m3q3)g0sinq2m3g0cosq20m3g0cosq2 01CA=A(q).MatrixAis symmetric, thus it has real eigenvalues. To have all non-negative eigenvalues (so that we canorder them and \ufb01nd their maximum, as requested by the de\ufb01nition of norm of a matrix that we use), wecompute the semi-positive de\ufb01nite matrixAT(q)A(q) =0B@0 0 00g20`(m2d+m3q3)2sin2q2+m23cos2q2\u00b4\u2212g20m3(m2d+m3q3) sinq2cosq20\u2212g20m3(m2d+m3q3) sinq2cosq2 g20m23cos2q21CA,which has clearly one zero eigenvalue. Denote by Bthe lower 2\u00d72 block on the diagonal of this matrix.The characteristic polynomial of ATAis thendet\u201c\u03bbI\u2212AT(q)A(q)\u201d=\u03bb\u00b7det (\u03bbI\u2212B(q)) =\u03bb`\u03bb2\u2212trace{B(q)}\u03bb+ det{B(q)}\u00b4with trace{B(q)}>0 and det{B(q)}>0. Therefore, the maximum eigenvalue of ATAis\u03bbmax\u201cAT(q)A(q)\u201d=12trace{B(q)}+12p(trace{B(q)})2\u22124 det{B(q)}Since we are looking for a bound on the norm of A(q), we can write the chain of inequalities\u03bbmax`AT(q)A(q)\u00b4\u2264trace{B(q)}=g20`(m2d+m3q3)2sin2q2+ 2m23cos2q2\u00b4< g20`(m2d+m3q3)2+ 2m23\u00b4<g20(m2d+m3|q3|+\u221a2m3)2.Therefore, we \ufb01nally obtain the requested bound\u201a\u201a\u201a\u201a\u2202g(q)\u2202q\u201a\u201a\u201a\u201a=\u2225A(q)\u2225=q\u03bbmax`AT(q)A(q)\u00b4<g 0(m2d+m3|q3|+m3\u221a2) =\u03b1+\u03b2|q3|,\u2200q\u2208R3,with\u03b1=g0(m2d+m3\u221a2), \u03b2 =g0m3.", "robot": "PRP", "tags": ["planar", "vertical"]},
 "132": {"file": "Robotics2_13.06.10.pdf", "date": "13-06-10", "num_ex": 0, "exam": "robo2", "question": "Table 1 contains the Denavit-Hartenberg parameters of a robot with four revolute joints.i\u03b1iaidi\u03b8i1\u03c020 0\u03b812\u03c020 0\u03b823\u2212\u03c020d3\u03b834 0a40\u03b84Table 1: Denavit-Hartenberg parameters of a 4R robot1. Use the recursive algorithm based on moving frames to determine the kinetic energy of therobot. Make reasonable assumptions in order to simplify the inertial properties of the links(e.g., each link has a uniformly distributed mass, etc.)2. Determine the robot inertia matrix. Find a minimal linear parameterization for this matrix.[120 minutes; open books]", "solution": "<EMPTY>", "robot": "4R", "tags": []},
 "133": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 0, "exam": "robo2", "question": "The end-effector of a 3R planar robot, having equal link lengths l= 0.5 [m], is executing a positionaltrajectory pd(t)\u2208R2in the plane, commanded by joint accelerations \u00a8q(t)\u2208R3that are updated everyTc= 100 ms. The robot is subject to the following hard bounds on joint velocities and accelerations:|\u02d9qi|\u2264Vmax,i,|\u00a8qi|\u2264Amax,i, i = 1,2,3. (1)When the limits in (1) areVmax=\uf8eb\uf8ed1.51.51\uf8f6\uf8f8[rad/s], Amax=\uf8eb\uf8ed101010\uf8f6\uf8f8[rad/s2],and the robot is in the con\ufb01guration q=(0 0\u03c0/2)T[rad] with velocity \u02d9q=(0.8 0\u22120.8)T[rad/s],compute the acceleration command \u00a8qof minimum norm that realizes the desired end-effector acceleration\u00a8pd=(2 1)T[m/s2] while complying with the bounds imposed on robot motion.", "solution": "The task kinematics for the given 3R planar robot isp=f(q) =l(c1+c12+c123s1+s12+s123),with associated JacobianJ(q) =\u2202f\u2202q=l(\u2212s1\u2212s12\u2212s123\u2212s12\u2212s123\u2212s123c1+c12+c123c12+c123c123).The end-effector acceleration is then computed as\u00a8p=J(q)\u00a8q+n(q,\u02d9q),withn(q,\u02d9q) =\u02d9J(q)\u02d9q=\u2212l(\u02d9q21c1+ ( \u02d9q1+ \u02d9q2)2c12+ ( \u02d9q1+ \u02d9q2+ \u02d9q3)2c123\u02d9q21s1+ ( \u02d9q1+ \u02d9q2)2s12+ ( \u02d9q1+ \u02d9q2+ \u02d9q3)2s123).When evaluating the terms at the given state ( q,\u02d9q) we obtainJ=(\u22120.5\u22120.5\u22120.51 0.5 0), \u02d9J=(\u22120.8\u22120.4 00 0 0),n=(\u22120.640).Therefore, the minimum norm joint acceleration realizing the desired task acceleration \u00a8pdin the absenceof hard bounds on robot motion is\u00a8q=J#(\u00a8pd\u2212n) =\uf8eb\uf8ec\uf8ed0.3333 1\u22120.6667 0\u22121.6667\u22121\uf8f6\uf8f7\uf8f8((21)\u2212(\u22120.640))=\uf8eb\uf8ec\uf8ed1.88\u22121.76\u22125.40\uf8f6\uf8f7\uf8f8[rad/s2]. (4)In order to verify if this command is feasible, we have to check both the direct limits on joint acceleration(i.e., whether|\u00a8qi|\u2264Amax,i is satis\ufb01ed for all joints) and the indirect limits induced by the presence of jointvelocity bounds. Since the acceleration command \u00a8q=\u00a8q(kTc) att=kTcis kept constant for an intervalTc, the joint velocity at the next sampling instant will be\u02d9q((k+ 1)Tc) =\u02d9q(kTc) +\u00a8q(kTc)Tc.Thus, the current joint acceleration should also satisfy the bounds (in vector format)\u2212Vmax+\u02d9q(kTc)Tc\u2264\u00a8q(kTc)\u2264Vmax\u2212\u02d9q(kTc)Tc.As a result, we need to check componentwise (at the current instant) if\u00a8Qmin,i = max{\u2212Amax,i,\u2212Vmax,i + \u02d9qiTc}\u2264\u00a8qi\u2264min{Amax,i,Vmax,i\u2212\u02d9qiTc}=\u00a8Qmax,i, i = 1,2,3.Plugging in the problem data, we have\u00a8Qmin=\uf8eb\uf8ec\uf8ed\u221210\u221210\u22122\uf8f6\uf8f7\uf8f8, \u00a8Qmax=\uf8eb\uf8ec\uf8ed71010\uf8f6\uf8f7\uf8f8. (5)3While the acceleration (4) is feasible at the \ufb01rst two joints, the third acceleration component \u00a8 q3=\u22125.4exceeds the lower limit \u00a8Qmin, 3=\u22122. We apply thus a step of the SNS algorithm, as translated to theacceleration level.Set \ufb01rst the third joint acceleration to its lower limit, \u00a8 qSNS, 3=\u22122. Then, recompute the solution for theother two joints by using the reduced 2 \u00d72 Jacobian J\u22123, obtained by removing the third column J3fromthe task Jacobian J; the desired task acceleration \u00a8pdshould be modi\ufb01ed accordingly to account for thesaturated contribution of the third joint. We have\u00a8pSNS,d =\u00a8pd\u2212J3\u00a8qSNS, 3=(21)\u2212(\u22120.50)\u00b7(\u22122) =(11),and thus, as unique possible solution, we obtain(\u00a8qSNS, 1\u00a8qSNS, 2)= (J\u22123)\u22121(\u00a8pSNS,d\u2212n)=(\u22120.5\u22120.51 0.5)\u22121(1.641)=(5.28\u22128.56).The solution\u00a8qSNS=\uf8eb\uf8ec\uf8ed5.28\u22128.56\u22122\uf8f6\uf8f7\uf8f8[rad/s2].is now feasible, i.e., it stays within the limits (5) and, by the property of the SNS algorithm, its has alsothe minimum norm property among all feasible acceleration solutions.", "robot": "3R", "tags": ["planar"]},
 "134": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 1, "exam": "robo2", "question": "A 3R robot with Denavit-Hartenberg (DH) parameters \u03b1i= 0,di= 0, andai=li>0, fori= 1,2,3,moves in a vertical plane. The i-th link has mass mi>0 and position of the center of mass (CoM)irc,i= (rcx,i,rcy,i,0) when expressed in the i-th DH frame, for i= 1,2,3. De\ufb01ne suitable relationsbetween the link masses, lengths, and CoM positions of this robot such that the gravity term in thedynamic model takes the following expression:g(q) =\uf8eb\uf8ec\uf8edm1g0rcy,1cosq100\uf8f6\uf8f7\uf8f8, withg0= 9.81 [m/s2]. (2)Sketch a \ufb01gure of a robot having the positions of the link CoMs consistent with (2).", "solution": "Since the DH twist angles \u03b1iare all zero, the 3R robot is planar. Choose the axis x0pointing downwardin the vertical plane1, so that the gravity acceleration vector is g0=(g00 0)T(withg0= 9.81 [m/s2]).The potential energy of each link is given byUi=\u2212migT0rci, i = 1,2,3. (6)In order to use the constant expressions of the CoMs in the local frames, we haverhomc,i=(rc,i1)=0Ai(q1,...,q i)(irc,i1)=0A1(q1)...i\u22121Ai(qi)\uf8eb\uf8ec\uf8ec\uf8edrcx,ircy,i01\uf8f6\uf8f7\uf8f7\uf8f8, i = 1,2,3.where the homogeneous transformation matrices are computed from the DH parameters asi\u22121Ai(qi) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8edci\u2212si0licisici0lisi0 0 1 00 0 0 1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8, i = 1,2,3.Performing the computations in (6), one obtainsU1=m1g0(rcy,1s1\u2212(l1+rcx,1)c1)U2=m2g0(rcy,2s12\u2212(l2+rcx,2)c12\u2212l1c1)U3=m3g0(rcy,3s123\u2212(l3+rcx,3)c123\u2212l2c12\u2212l1c1).1A different choice for the direction of x0(e.g., horizontal or upward) would not affect the conditions that imposeg2=g3= 0 in the gravity term of the dynamic model, but only the actual trigonometric function appearing ing1(q), i.e.,\u00b1sinq1or\u00b1cosq1.4FromU=U1+U2+U3, we getg(q) =(\u2202U\u2202q)T=g0\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edm1rcy,1c1+ (m1(l1+rcx,1) + (m3+m3)l1)s1+m2rcy,2c12+ (m2(l2+rcx,2) +m3l2)s12+m3(rcy,3c123+ (l3+rcx,3)s123)m2rcy,2c12+ (m2(l2+rcx,2) +m3l2)s12+m3(rcy,3c123+ (l3+rcx,3)s123)m3(rcy,3c123+ (l3+rcx,3)s123)\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8edg1(q)g2(q)g3(q)\uf8f6\uf8f7\uf8f8.Proceeding backward from the last component, in order to obtain the desired structure (2) of the gravityterm, we have to set \ufb01rstrcx,3=\u2212l3, r cy,3= 0\u21d2g3\u22610,and then alsom2rcx,2=\u2212(m2+m3)l2, r cy,2= 0\u21d2g2\u22610,and \ufb01nallym1rcx,1=\u2212(m1+m2+m3)l1\u21d2g1(q1) =m1g0rcy,1c1.Figure 3 shows a sketch of a possible 3R planar robot satisfying the conditions for having the desired gravityterm (2) in its dynamic model. We have chosen here l1=l2=l3=l[m],m1= 4m2= 16m3= 10 [kg],andrcy,1= 0.2l[m].\u2295\u2295\u2295m3m1m2q1q2q3x0x1x2y1y2x3y3y0rcx,3= -lrcy,3= 0rcx,2= -1.2lrcy,2= 0rcx,1= -1.3125lrcy,1= 0.2lFigure 3: Localization of the CoMs of a 3R planar robot having the dynamic term g(q) as in eq. (2).", "robot": "3R", "tags": ["planar", "horizontal", "vertical"]},
 "135": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 2, "exam": "robo2", "question": "Compute the 4\u00d74 inertia matrix of the 4P planar robot in Fig. 1. With the robot in a generic con-\ufb01guration q, determine the joint velocity command \u02d9q\u2208R4that realizes a desired end-effector velocityvd=(vxdvyd)Twhile minimizing the kinetic energy Tof the robot. Which would be the solutioninstead if the norm of the joint velocity \u2225\u02d9q\u2225is minimized?yxm2m1\u2295\u2295\u2295\u2295m3m4vdFigure 1: A 4P planar robot in a generic con\ufb01guration.1", "solution": "Since there is no angular motion, the kinetic energy of the 4P planar robot is simply computed asT=4\u2211i=1Ti=124\u2211i=1mi\u2225vci\u22252=12\u02d9qTM\u02d9q,with velocity vectors (conveniently written in R2)vc1=(\u02d9q10),vc2=(\u02d9q1\u02d9q2),vc3=(\u02d9q1+ \u02d9q3\u02d9q2),vc4=(\u02d9q1+ \u02d9q3\u02d9q2+ \u02d9q4).5As a result, the robot inertia matrix is constant and is given byM=\uf8eb\uf8ec\uf8ec\uf8ec\uf8edm1+m2+m3+m4 0m3+m400 m2+m3+m4 0m4m3+m4 0m3+m400 m4 0m4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The end-effector Jacobian for the linear velocity vin the plane ( x,y) is also constant:J=(1 0 1 00 1 0 1).The joint velocity that produces the desired end-effector velocity vdwhile minimizing Tis obtained byusing the inertia-weighted pseudoinverse of J:\u02d9q=J#Mvd=M\u22121JT(JM\u22121JT)\u22121vd=\uf8eb\uf8ec\uf8ec\uf8ed0 00 01 00 1\uf8f6\uf8f7\uf8f7\uf8f8(vxdvyd)=\uf8eb\uf8ec\uf8ec\uf8ed00vxdvyd\uf8f6\uf8f7\uf8f7\uf8f8. (7)This result is rather intuitive: moving only the last two joints, each by the corresponding component ofthe end-effector desired velocity, involves the displacement of the minimum amount of mass, and is thusthe minimum kinetic energy solution. By this observation, the use of the following intermediate matrixcomputations is really unnecessary:M\u22121=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1m1+m20\u22121m1+m2001m2+m30\u22121m2+m3\u22121m1+m20m1+m2+m3+m4(m1+m2)(m3+m4)00\u22121m2+m30m2+m3+m4m4(m2+m3)\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8,JM\u22121JT=(1m3+m4001m4).In comparison with (7), the minimum velocity norm solution\u02d9q=J#vd=\uf8eb\uf8ec\uf8ec\uf8ed0.5 00 0.50.5 00 0.5\uf8f6\uf8f7\uf8f7\uf8f8(vxdvyd)=12\uf8eb\uf8ec\uf8ec\uf8edvxdvydvxdvyd\uf8f6\uf8f7\uf8f7\uf8f8equally distributes the desired Cartesian velocity between the pairs of robot joints that move, respectively,along thexand theydirections.", "robot": "4P", "tags": ["planar"]},
 "136": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 3, "exam": "robo2", "question": "Consider the RPR spatial robot in Fig. 2. Based on the DH frames and joint variables de\ufb01ned therein,provide the expression of the robot inertia matrix M(q). Assume that the three links have their center ofmass, respectively along the y1,y2, andx3axes, and that the barycentric inertia matrix of the third linkis diagonal and isotropic, i.e.,3Ic3= diag{I3,I3,I3}.x0y0\u2295y3q1q3x1y1x2\u2295z3z0q2z1\u2295z2x3Figure 2: A spatial RPR robot, with DH frames assigned to each link.", "solution": "We need to compute the kinetic energy of the three links. For i= 1,2,3, denote by mithe mass of link i,byliits kinematic length (i.e., the parameter dioraiof the DH convention), and byiIciandirci\u2208R3,respectively its 3 \u00d73 barycentric inertia matrix (for the third short link, this matrix is assumed to bediagonal and uniform) and the constant position vector of its center of mass (CoM), both expressed in thelocal DH frame. Because of the assumptions on the location of the CoMs of the links, only one componentof eachirciwill be different from zero. With reference to Fig. 4, we have1rc1=\uf8eb\uf8ec\uf8ed0\u2212dc10\uf8f6\uf8f7\uf8f8,2rc2=\uf8eb\uf8ec\uf8ed0dc20\uf8f6\uf8f7\uf8f8,3rc3=\uf8eb\uf8ec\uf8ed\u2212l3+dc300\uf8f6\uf8f7\uf8f8.wheredci>0, fori= 1,2,3. For the \ufb01rst two links, computation of the kinetic energy is rather straight-forward. For the third link, it is convenient to use the moving frame algorithm mainly to obtain3\u03c93.6x0y0\u2295y3q1q3x1y1x2\u2295z3z0q2z1\u2295z2x3dc2dc1dc3\ud835\udf03!diai\ud835\udefc!iq1l10\ud835\udf0b/21\ud835\udf0b/2q20\u2212\ud835\udf0b/22q30l303Figure 4: Localization of the link CoMs and DH table for the spatial RPR robot.Link 1T1=12Ic1,yy\u02d9q21=12I1\u02d9q21,where we set I1=Ic1,yyfor compactness. Note that the actual position of the CoM of link 1 along theaxisz0=y1is irrelevant.Link 2T2=12m2((rc2,y\u2212q2)2\u02d9q21+ \u02d9q22)+12Ic2,xx\u02d9q21=12(m2(q2\u2212dc2)2+I2)\u02d9q21+12m2\u02d9q22,whererc2,y=dc2>0 is the distance of the CoM of link 2 from the axis of joint 3 and we set Ic2,xx=I2for compactness.Link 3Sincedc3>0 is the distance of the CoM of link 3 from the axis of joint 3, we havepc3=\uf8eb\uf8ec\uf8ed(q2\u2212dc3s3)s1\u2212(q2\u2212dc3s3)c1l1+dc3c3\uf8f6\uf8f7\uf8f8\u21d2vc3=\u02d9pc3=\uf8eb\uf8ec\uf8ed(q2\u2212dc3s3)c1\u02d9q1+ ( \u02d9q2\u2212dc3c3\u02d9q3)s1(q2\u2212dc3s3)s1\u02d9q1\u2212( \u02d9q2\u2212dc3c3\u02d9q3)c1\u2212dc3s3\u02d9q3\uf8f6\uf8f7\uf8f8.Moreover,1\u03c91=\uf8eb\uf8ed0\u02d9q10\uf8f6\uf8f8\u21d22\u03c92=1RT21\u03c92=\uf8eb\uf8ed0 1 00 0\u22121\u22121 0 0\uf8f6\uf8f8\uf8eb\uf8ed0\u02d9q10\uf8f6\uf8f8=\uf8eb\uf8ed\u02d9q100\uf8f6\uf8f8,and so3\u03c93=2RT3(q3)\uf8eb\uf8ed2\u03c92+\uf8eb\uf8ed00\u02d9q3\uf8f6\uf8f8\uf8f6\uf8f8=\uf8eb\uf8edc3s30\u2212s3c300 0 1\uf8f6\uf8f8\uf8eb\uf8ed\u02d9q10\u02d9q3\uf8f6\uf8f8=\uf8eb\uf8edc3\u02d9q1\u2212s3\u02d9q1\u02d9q3\uf8f6\uf8f8.Therefore,T3=12m3vTc3vc3+123\u03c9T33Ic33\u03c93=12m3((q2\u2212dc3s3)2\u02d9q21+ \u02d9q22+d2c3\u02d9q23\u22122dc3c3\u02d9q2\u02d9q3)+12I3(\u02d9q21+ \u02d9q23).7As a result, the total kinetic energy isT=T1+T2+T3=12\u02d9qTM(q)\u02d9q,with the robot inertia matrix given byM(q) =\uf8eb\uf8ec\uf8edm11(q2,q3) 0 00m2+m3\u2212m3dc3c30\u2212m3dc3c3I3+m3d2c3\uf8f6\uf8f7\uf8f8, (8)wherem11(q2,q3) =I1+I2+m2d2c2+I3\u22122m2dc2q2+ (m2+m3)q22\u22122m3dc3q2s3+m3d2c3s23.Note \ufb01nally that by de\ufb01ning the six dynamic coefficientsa1=I1+I2+m2d2c2+I3a2=\u2212m2dc2a3=m2+m3a4=\u2212m3dc3a5=m3d2c3a6=I3+m3d2c3,the inertia matrix (8) is exactly the same input matrix (3) of the next exercise.", "robot": "RPR", "tags": []},
 "137": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 4, "exam": "robo2", "question": "The inertia matrix of a 3-dof robot with coordinates q= (q1,q2,q3) is given byM(q) =\uf8eb\uf8ec\uf8eda1+ 2a2q2+a3q22+ 2a4q2sinq3+a5sin2q3 0 00 a3a4cosq30 a4cosq3a6\uf8f6\uf8f7\uf8f8, (3)where a=(a1a2a3a4a5a6)Tis the vector of dynamic coefficients. Using (3), compute: i)theCoriolis and centrifugal term c(q,\u02d9q) in the robot dynamic model; ii)three different factorizationsc(q,\u02d9q) =S(q,\u02d9q)\u02d9q=S\u2032(q,\u02d9q)\u02d9q=S\u2032\u2032(q,\u02d9q)\u02d9q, such that \u02d9M\u22122Sand \u02d9M\u22122S\u2032are skew-symmetric matriceswhile \u02d9M\u22122S\u2032\u2032is not; iii)the unique 3\u00d76 regressor matrix Ysuch that M(q)\u00a8q+c(q,\u02d9q) =Y(q,\u02d9q,\u00a8q)a.", "solution": "This exercise is solved by the following symbolic code of MATLAB.syms q1 q2 q3 dq1 dq2 dq3 ddq1 ddq2 ddq3 a1 a2 a3 a4 a5 a6 realdisp(\u2018the given robot inertia matrix\u2019)M=[a1+2*a2*q2+a3*q22+2*a4*q2*sin(q3)+a5*(sin(q3))20 0;0 a3 a4*cos(q3);0 a4*cos(q3) a6]disp(\u2018Christoffel matrices\u2019)q=[q1;q2;q3];M1=M(:,1);C1=(1/2)*(jacobian(M1,q)+jacobian(M1,q)\u2019-diff(M,q1))M2=M(:,2);C2=(1/2)*(jacobian(M2,q)+jacobian(M2,q)\u2019-diff(M,q2))M3=M(:,3);C3=(1/2)*(jacobian(M3,q)+jacobian(M3,q)\u2019-diff(M,q3))disp(\u2018robot centrifugal and Coriolis terms\u2019)dq=[dq1;dq2;dq3];c1=dq\u2019*C1*dq;c2=dq\u2019*C2*dq;c3=dq\u2019*C3*dq;c=[c1;c2;c3]disp(\u2018time derivative of the inertia matrix\u2019)dM=diff(M,q1)*dq1+diff(M,q2)*dq2+diff(M,q3)*dq38disp(\u2018skew-symmetric factorization of velocity terms\u2019)S1=dq\u2019*C1;S2=dq\u2019*C2;S3=dq\u2019*C3;S=[S1;S2;S3]disp(\u2018check skew-symmetry of N=dM-2*S\u2019)N=simplify(dM-2*S)Nplus NT=simplify(N+N\u2019)disp(\u2018a second, different factorization of velocity terms (yet with skew-symmetry)\u2019)SS=[0 -dq3 dq2;dq3 0 -dq1;-dq2 dq1 0]Sprime=S+SS%namely, obtained by adding to S a skew symmetric matrix SS such that SS*dq=0disp(\u2018check validity of Sprime and skew-symmetry of N=dM-2*Sprime\u2019)checkzero=simplify(c-Sprime*dq)Nprime=simplify(dM-2*Sprime)Nprime plus NprimeT=simplify(Nprime+Nprime\u2019)disp(\u2018a third factorization of velocity terms (without skew-symmetry)\u2019)S2prime=S+[0 -dq3 dq2;dq3 0 -dq1;0 0 0]disp(\u2018check validity of S2prime and absence of skew-symmetry of N=dM-2*S2prime\u2019)checkzero=simplify(c-S2prime*dq)N2prime=simplify(dM-2*S2prime)N2prime plus N2primeT=simplify(N2prime+N2prime\u2019)disp(\u2018regressor Y in linear parametrization Y(q,dq,ddq)*a=tau\u2019)ddq=[ddq1;ddq2;ddq3];tau=M*ddq+c;a=[a1;a2;a3;a4;a5;a6];Y=simplify(jacobian(tau,a))The output of this code yields the matrices of Christoffel symbolsC1(q) =\uf8eb\uf8ec\uf8ed0 a2+a3q2+a4s3(a4q2+a5s3)c3a2+a3q2+a4s3 0 0(a4q2+a5s3)c3 0 0\uf8f6\uf8f7\uf8f8C2(q) =\uf8eb\uf8ec\uf8ed\u2212(a2+a3q2+a4s3) 0 00 0 00 0\u2212a4s3\uf8f6\uf8f7\uf8f8C3(q) =\uf8eb\uf8ec\uf8ed\u2212(a4q2+a5s3)c30 00 0 00 0 0\uf8f6\uf8f7\uf8f8,(9)from which the Coriolis and centrifugal terms are obtained (with ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q, fori= 1,2,3):c(q,\u02d9q) =\uf8eb\uf8ec\uf8ed2 (a2+a3q2+a4s3) \u02d9q1\u02d9q2+ 2 (a4q2+a5s3)c3\u02d9q1\u02d9q3\u2212(a2+a3q2+a4s3) \u02d9q21\u2212a4s3\u02d9q23\u2212(a4q2+a5s3)c3\u02d9q21\uf8f6\uf8f7\uf8f8. (10)9The time derivative of the inertia matrix is\u02d9M=\uf8eb\uf8ec\uf8ed2 (a2+a3q2+a4s3) \u02d9q2+ 2 (a4q2+a5s3)c3\u02d9q3 0 00 0 \u2212a4s3\u02d9q30 \u2212a4s3\u02d9q3 0\uf8f6\uf8f7\uf8f8.The standard factorization of (10) yielding the skew-symmetric property is given by the matrix having itsrowsSTibuilt with the Christoffel matrices ( STi(q,\u02d9q) =\u02d9qTCi(q), fori= 1,2,3):S(q,\u02d9q) =\uf8eb\uf8ec\uf8ed(a2+a3q2+a4s3) \u02d9q2+ (a4q2+a5s3)c3\u02d9q3(a2+a3q2+a4s3) \u02d9q1(a4q2+a5s3)c3\u02d9q1\u2212(a2+a3q2+a4s3) \u02d9q1 0 \u2212a4s3\u02d9q3\u2212(a4q2+a5s3)c3\u02d9q1 0 0\uf8f6\uf8f7\uf8f8.A different factorization yielding again the skew-symmetric property is obtained by adding a skew-symmetricmatrix Skew( \u02d9q) built with the components of \u02d9q,S\u2032(q,\u02d9q) =S(q,\u02d9q) + Skew( \u02d9q) =S(q,\u02d9q) +\uf8eb\uf8ec\uf8ed0\u2212\u02d9q3 \u02d9q2\u02d9q3 0\u2212\u02d9q1\u2212\u02d9q2 \u02d9q1 0\uf8f6\uf8f7\uf8f8,which is certainly another valid factorization of c(q,\u02d9q), being Skew( \u02d9q)\u02d9q=\u02d9q\u00d7\u02d9q=0. Both choices lead infact to the skew-symmetry, respectively of\u02d9M\u22122S=\uf8eb\uf8ec\uf8ed0\u22122 (a2+a3q2+a4s3) \u02d9q1\u22122 (a4q2+a5s3)c3\u02d9q12 (a2+a3q2+a4s3) \u02d9q1 0 a4s3\u02d9q32 (a4q2+a5s3)c3\u02d9q1\u2212a4s3\u02d9q3 0\uf8f6\uf8f7\uf8f8and of\u02d9M\u22122S\u2032=\uf8eb\uf8ec\uf8ed0\u22122 (a2+a3q2+a4s3) \u02d9q1+ 2 \u02d9q3\u22122 (a4q2+a5s3)c3\u02d9q1\u22122 \u02d9q22 (a2+a3q2+a4s3) \u02d9q1\u22122 \u02d9q3 0 2 \u02d9 q1+a4s3\u02d9q32 (a4q2+a5s3)c3\u02d9q1+ 2 \u02d9q2\u22122 \u02d9q1\u2212a4s3\u02d9q3 0\uf8f6\uf8f7\uf8f8.On the other hand, the choiceS\u2032\u2032(q,\u02d9q) =S(q,\u02d9q) +\uf8eb\uf8ec\uf8ed0\u2212\u02d9q3 \u02d9q2\u02d9q3 0\u2212\u02d9q10 0 0\uf8f6\uf8f7\uf8f8is still a feasible factorization, being S\u2032\u2032(q,\u02d9q)\u02d9q=S(q,\u02d9q)\u02d9q=c(q,\u02d9q), but leads to a matrix\u02d9M\u22122S\u2032\u2032=\uf8eb\uf8ec\uf8ed0\u22122 (a2+a3q2+a4s3) \u02d9q1+ 2 \u02d9q3\u22122 (a4q2+a5s3)c3\u02d9q1\u22122 \u02d9q22 (a2+a3q2+a4s3) \u02d9q1\u22122 \u02d9q3 0 2 \u02d9 q1+a4s3\u02d9q32 (a4q2+a5s3)c3\u02d9q1 \u2212a4s3\u02d9q3 0\uf8f6\uf8f7\uf8f8which is not skew-symmetric.Finally, the regressor matrix Y(q,\u02d9q,\u00a8q) that linearly parametrizes the robot dynamics (in the absence ofgravity), i.e.,M(q)\u00a8q+c(q,\u02d9q) =Y(q,\u02d9q,\u00a8q)a,is obtained from (3) and (10) asY=\uf8eb\uf8ec\uf8ed\u00a8q12 (q2\u00a8q1+ \u02d9q1\u02d9q2)q22\u00a8q1+ 2q2\u02d9q1\u02d9q22 (q2s3\u00a8q1+ (s3\u02d9q2+q2c3\u02d9q3) \u02d9q1)s23\u00a8q1+ 2s3c3\u02d9q1\u02d9q300\u2212\u02d9q21 \u00a8q2\u2212q2\u02d9q21 c3\u00a8q3\u2212s3(\u02d9q21+ \u02d9q23)0 00 0 0 c3(\u00a8q2\u2212q2\u02d9q21)\u2212s3c3\u02d9q21 \u00a8q3\uf8f6\uf8f7\uf8f8.", "robot": "unknown", "tags": []},
 "138": {"file": "Robotics2_Midterm_Test_2022-23_23.04.19.pdf", "date": "23-04-19", "num_ex": 5, "exam": "robo2", "question": "A 2-dof robot has the axes of the \ufb01rst prismatic joint and of the second revolute joint coincident andvertical (i.e., aligned with the acceleration of gravity). The two joints should perform a displacement\u2206q= (\u2206q1,\u2206q2), by tracing a rest-to-rest cubic trajectory in the same motion time T. The inputcommands u1andu2at the joints (respectively, a force and a torque) are bounded as |ui|\u2264Umax,i , fori= 1,2. Provide the minimum feasible motion time T\u2217to execute the task, as a function of the problemdata and of the robot dynamics. Without loss of generality, assume that the actuators are at least strongenough to sustain statically the weight of the robot links.[270 minutes (4.5 hours); open books]2", "solution": "The 2-dof system under consideration is a PR robot, as sketched in Fig. 5 together with its relevantdynamic parameters. The kinetic energy of this robot isT1=12m1\u02d9q21, T 2=12m2(\u02d9q21+d2c\u02d9q22)+12Ic2\u02d9q22\u21d2T=T1+T2=12\u02d9qTM\u02d9q,withM=(m1+m2 00Ic2+m2d2c2)=(M100M2),while the potential energy due to gravity and the corresponding gravity term areU1=m1g0q1, U 2=m2g0q1\u21d2U=U1+U2\u21d2 g=\u2202U\u2202q=((m1+m2)g00)=(g10)withg0= 9.81 [m/s2]. As a result, the dynamic model of this PR robot is given by two linear and decoupleddifferential equations:M1\u00a8q1+g1=u1M2\u00a8q2=u2.(11)q1m1g0\u2295m2q2Ic2\u2295dc2Figure 5: The PR robot with \ufb01rst and second axis coincident and vertical.The desired rest-to-rest joint trajectory is the cubic polynomialqd(t) =\u2206q(3(tT)2\u22122(tT)3), t\u2208[0,T],whereTis the (coordinated) motion time. The associated acceleration has a linear pro\ufb01le in time\u00a8qd(t) =6\u2206qT2(1\u22122(tT)).From the bounds |ui|\u2264Umax,i ,i= 1,2, and from eqs. (11) it follows that the maximum absolute value ofthe acceleration, which is reached at t= 0 andt=T,|\u00a8qd(0)|=|\u00a8qd(T)|=6|\u2206q|T2,should satisfy componentwiseM16|\u2206q1|T2\u2264Umax, 1\u2212g1, M 26|\u2206q2|T2\u2264Umax, 2.11Therefore, the minimum feasible motion time is given byT\u2217= max{\u221a6|\u2206q1|M1Umax, 1\u2212g1,\u221a6|\u2206q2|M2Umax, 2},which is well de\ufb01ned since Umax, 1\u2212g1>0 by assumption.", "robot": "nR", "tags": ["vertical"]},
 "139": {"file": "Robotics2_19.06.17.pdf", "date": "19-06-17", "num_ex": 0, "exam": "robo2", "question": "Consider the Kawasaki S030 robot with six revolute joints and a spherical wrist shown in Fig. 1.For every link mass mi,i= 1,..., 6, the location of the center of mass is shown graphically in thedifferent views (see also the distributed extra sheet in larger size; please, disregard any numericalvalue therein). Note that the position of the center of mass of the \ufb01fth link ( m5) as well as that ofthe sixth link ( m6) coincide with the wrist center \u2014a simplifying assumption. The robot has beencalibrated and all kinematic quantities are thus known.Determine the symbolic expression of the gravity vector g(q)\u2208R6and a possible linear parametriza-tion in terms of the unknown dynamic coefficients ag\u2208Rp, with the smallest value of p. Find allequilibrium con\ufb01gurations qeof the robot (i.e., such that g(qe) =0).\u2a01m2g0\u2a01m1\u2a01m2m2\u2a01m3\u2a01m1\u2a01m1\u2a01m3\u2a01m3\u2a01\u2a01m4\u2a01m5\u2a01m6\u2a01m4m5\u2a01m6\u2a01\u2a01\u2a01m4m5m6\u2a01m3\u2a01Figure 1: 6R Kawasaki S030 robot: Localization of the centers of mass of the six links.", "solution": "We need to de\ufb01ne \ufb01rst a set of generalized coordinates q, either by following a DH assignment offrames or by direct inspection of Fig. 1. The latter is more convenient here. In fact, it is rather easyto see that the de\ufb01nition of the link variables q1and (q4,q5,q6) is irrelevant for the computationof the gravity term g(q) in the robot dynamics because:\u2022the rotation q1of joint 1 will not affect the height of the center of mass of any link;\u2022the position of the center of mass of link 4 will not depend on q4, sincem4lies exactly on theaxis of joint 4;\u2022the position of the two center of masses m5andm6(which are assumed to be coincident1withthe center of the spherical wrist) is independent from the joint variables of the wrist.As a matter of fact, the potential energy of the system due to gravity, and thus the dynamic termg(q), will be a function of q2andq3only. Moreover, we will have g1=g4=g5=g6\u22610 for thecomponents of g(q2,q3).\u2a01m2\u2a01m1\u2a01m3\u2a01m4m5m6\u2a01q2q3\u2a01l1dc2l2dc3dc4l5Figure 3: One possible choice of variables q2andq3for the second and third links of the Kawasakirobot, together with the de\ufb01nition kinematic/dynamic parameters.With reference to Fig. 3, where the two joint variables q2andq3are de\ufb01ned (mimicking the classicalassignment for the planar 2R case), together with the kinematic/dynamic parameters l1,dc2,l2,dc3,dc4andl5, we obtainU1= constant, U 2=m2g0(l1+dc2sinq2), U 3=m3g0(l1+l2sinq2+dc3sin(q2+q3)),1This simplifying assumption is a very strong one, in particular concerning the location of m6.3U4=m4g0(l1+l2sinq2+dc4sin(q2+q3)), U 5+U6= (m5+m6)g0(l1+l2sinq2+l5sin(q2+q3)).As a result,U=\u22116i=1Ui=g0(m2dc2+ (m3+m4+m5+m6)l2) sinq2+g0(m3dc3+m4dc4+ (m5+m6)l5) sin(q2+q3) + constants=a1sinq2+a2sin(q2+q3) + constants .Thus,g(q2,q3) =(\u2202U\u2202q)T=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed0a1cosq2+a2cos(q2+q3)a2cos(q2+q3)000\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed0 0cosq2cos(q2+q3)0cos(q2+q3)0 00 00 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8(a1a2)=Yg(q2,q3)a,(1)with a linear parametrization expressed in terms of only p= 2 dynamic coefficients.All equilibrium con\ufb01gurations qeare found by setting g(qe) =0in (1). We obtainqe=(any\u00b1\u03c0/2 0 or\u03c0any any any)T.", "robot": "6R", "tags": ["planar"]},
 "140": {"file": "Robotics2_19.06.17.pdf", "date": "19-06-17", "num_ex": 1, "exam": "robo2", "question": "Consider the 3\u00d73 matrixM(q) =\uf8eb\uf8ec\uf8eda1+ (a2cosq2+a3cos(q2+q3))20 00 a4+a5+ 2a6cosq3a5+a6cosq30 a5+a6cosq3 a5\uf8f6\uf8f7\uf8f8.Check whether this can be the inertia matrix of a 3-dof serial robot manipulator and, if so, underwhich conditions this holds true for the dynamic coefficients ai(i= 1,..., 6) appearing in M(q).1", "solution": "The given matrix M(q) is symmetric and does not depend on q1\u2014both are necessary conditionsfor being the inertia matrix of a serial manipulator. In order to be a positive de\ufb01nite matrix, it isnecessary that all diagonal elements are strictly positive for all q. This impliesa1>0, a 4+a5>2|a6|>0, a 5>0. (2)The necessary and sufficient condition for positive de\ufb01niteness of a symmetric matrix (Sylvestercriterion) is that the leading minors are strictly positive (for all q). Under (2), this boils down inchecking thatdetM[2:3]= det(a4+a5+ 2a6cosq3a5+a6cosq3a5+a6cosq3 a5)>0,\u2200q.We havedetM[2:3]=a4a5\u2212a26cos2q3>0\u21d2a4a5>a26\u22650\u21d2a4>0, (3)the latter being implied by the previous condition a5>0. Joining conditions (2) and (3) leads tothe necessary and sufficient conditions2a1>0, a 4>0, a 5>0, a 4+a5>2|a6|, a 4a5>a26. (4)2Matrix M(q) is in fact the inertia matrix of the robot considered in the midterm test of Robotics 2 during theacademic year 2016/17, with some additional simplifying assumptions. As such, the conditions (4) are automaticallysatis\ufb01ed in that case by the explicit expressions of the dynamic coefficients.4", "robot": "unknown", "tags": []},
 "141": {"file": "Robotics2_19.06.17.pdf", "date": "19-06-17", "num_ex": 2, "exam": "robo2", "question": "A robot with n >3 joints, parametrized by q, is redundant w.r.t. a positional task x=f(q) ofdimensionm= 2 orm= 3 (so, always with m < n ), having task Jacobian J(q) =\u2202f(q)/\u2202q.At a con\ufb01guration \u00afqwhere rankJ(\u00afq) =r <m , consider the following two cases of joint velocitycommands associated to a desired task velocity \u02d9xd:\u02d9qA=J#(\u00afq)\u02d9xd, \u02d9qB=JT(\u00afq)\u02d9xd.Taking advantage of the Singular Value Decomposition of the matrix \u00afJ=J(\u00afq), show that:i. In both cases, the actual \u02d9xcan be different from the desired \u02d9xd, but the vectors \u02d9xdand \u02d9xmakealways a relative angle that is smaller than \u03c0/2;ii. When \u02d9xd\u2208 R(\u00afJ),\u02d9qAgives no task velocity error, while \u02d9qBleads in general to an error\u02d9e=\u02d9xd\u2212\u02d9x\u0338=0.", "solution": "We use the Singular Value Decomposition of the m\u00d7nmatrix \u00afJ=J(\u00afq) (withm<n ). From\u00afJ=U\u03a3VT=U(diag{\u03c31,...,\u03c3r}Or\u00d7(m\u2212r)O(m\u2212r)\u00d7r diag{0,..., 0}Om\u00d7(n\u2212m))VT,whereU=(u1u2...urur+1...um)andVare two orthonormal matrices, respectively ofdimensionmandn, and the singular values of \u00afJhave been ordered as \u03c31\u2265\u03c32\u2265\u00b7\u00b7\u00b7\u2265\u03c3r>0,\u03c3r+1=\u00b7\u00b7\u00b7=\u03c3m= 0, we have\u00afJ#=V\u03a3#UT=V\uf8eb\uf8ec\uf8ec\uf8eddiag{1\u03c31,...,1\u03c3r}Or\u00d7(m\u2212r)O(m\u2212r)\u00d7r diag{0,..., 0}O(n\u2212m)\u00d7n\uf8f6\uf8f7\uf8f7\uf8f8UTand\u00afJT=V\u03a3TUT=V\uf8eb\uf8ec\uf8eddiag{\u03c31,...,\u03c3r}Or\u00d7(m\u2212r)O(m\u2212r)\u00d7r diag{0,..., 0}O(n\u2212m)\u00d7n\uf8f6\uf8f7\uf8f8UT.Thus, the result of the two command choices \u02d9qA=\u00afJ#\u02d9xdand \u02d9qB=\u00afJT\u02d9xdis\u02d9xA=\u00afJ\u02d9qA=\u00afJ\u00afJ#\u02d9xd=U\u03a3VTV\u03a3#UT\u02d9xd=U\u03a3\u03a3#UT\u02d9xd=U(Ir\u00d7rOr\u00d7(m\u2212r)O(m\u2212r)\u00d7rdiag{0,..., 0})UT\u02d9xd=(u1u2...ur0...0)UT\u02d9xdand\u02d9xB=\u00afJ\u02d9qB=\u00afJ\u00afJT\u02d9xd=U\u03a3VTV\u03a3TUT\u02d9xd=U\u03a3\u03a3TUT\u02d9xd=U(diag{\u03c321,...,\u03c32r}Or\u00d7(m\u2212r)O(m\u2212r)\u00d7r diag{0,..., 0})UT\u02d9xd=(\u03c321u1\u03c322u2... \u03c32rur0...0)UT\u02d9xd.Based on these expressions, we can immediately see that3\u02d9xTd\u02d9xA=\u02d9xTdU\u03a3\u03a3#UT\u02d9xd=\u02d9xTdU(Ir\u00d7rOr\u00d7(m\u2212r)O(m\u2212r)\u00d7rdiag{0,..., 0})2UT\u02d9xd=wTw=\u2225w\u22252\u22650,having setw=(Ir\u00d7rOr\u00d7(m\u2212r)O(m\u2212r)\u00d7rdiag{0,..., 0})UT\u02d9xd.Similarly, one can show that \u02d9xTB\u02d9xd\u22650. From the de\ufb01nition of the scalar products it follows that\u02d9xTd\u02d9xA=\u2225\u02d9xd\u2225\u00b7\u2225\u02d9xA\u2225cos\u03b1A\u22650, \u02d9xTd\u02d9xB=\u2225\u02d9xd\u2225\u00b7\u2225\u02d9xB\u2225cos\u03b1B\u22650.Therefore, each of the obtained Cartesian velocities \u02d9xAand \u02d9xBwill form an angle \u03b1i\u2264\u03c0/2,i=A,B, with the desired \u02d9xd.3Matrix A:=\u03a3\u03a3#is diagonal and idempotent. Thus we can write A=A2=ATA.5Furthermore, when the desired Cartesian velocity \u02d9xdis in the image of the Jacobian \u00afJ, it is alwaysspanned by the \ufb01rst rcolums of the orthonormal matrix U, namely\u02d9xd\u2208R(\u00afJ)=\u21d2 \u02d9xd=r\u2211i=1\u03bbiui=(u1u2...ur)\u03bb,for a generic vector \u03bb=(\u03bb1\u03bb2... \u03bbr)T\u2208Rm. In this case, the choice \u02d9qAyields\u02d9xA=\u00afJ\u02d9qA=(u1u2...ur0...0)UT\u02d9xd=(u1u2...ur0...0)\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8eduT1...uTruTr+1...uTm\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8(u1u2...ur)\u03bb=(u1u2...ur0...0)(Ir\u00d7rO(m\u2212r)\u00d7r)\u03bb=(u1u2...ur)\u03bb=\u02d9xdwith no Cartesian velocity error. On the other hand, with the choice \u02d9qBwe do not generate thedesired \u02d9xd:\u02d9xB=\u00afJ\u02d9qB=(\u03c321u1\u03c322u2... \u03c32rur0...0)UT\u02d9xd=...=(\u03c321u1\u03c322u2... \u03c32rur)\u03bb\u0338=\u02d9xd.", "robot": "unknown", "tags": []},
 "142": {"file": "Robotics2_19.06.17.pdf", "date": "19-06-17", "num_ex": 3, "exam": "robo2", "question": "For a 2R robot moving on a horizontal plane, determine (in symbolic or numerical form) all termsin the expression of a control law producing a joint torque \u03c4\u2208R2that is able to regulate therobot end-effector position p\u2208R2to a desired constant value pd, with a transient error e=pd\u2212pwhich globally satis\ufb01es, up to kinematic singularities, the differential equations\u00a8e+(20 00 10)\u02d9e+(100 00 50)e=0.When starting at rest from an initial con\ufb01guration q0that is not associated to pd, will the Cartesianbehavior of the robot end-effector be oscillatory during the transient?", "solution": "In order to achieve the desired linear and decoupled dynamics for the Cartesian error e=pd\u2212pat the end-effector level, the torque command \u03c4inM(q)\u00a8q+c(q,\u02d9q) =\u03c4for the controlled 2R planar robot cannot be chosen as the simple Cartesian PD regulation law\u03c4=JT(q) (KPe\u2212KD\u02d9p),KP,KD>0,where \u02d9e=\u2212\u02d9pbeing \u02d9pd=0. Rather, we should resort to a feedback linearization control law inthe Cartesian space. In the considered case of a square and (assumed) nonsingular robot Jacobian,this law can be designed in two equivalent ways. Either by\u03c4=M(q)a+c(q,\u02d9q)\u21d2 \u00a8q=a\u00a8p=J(q)\u00a8q+\u02d9J(q)\u02d9q=KPe\u2212KD\u02d9p}\u21d2a=J\u22121(q)(KP(pd\u2212p)\u2212KD\u02d9p\u2212\u02d9J(q)\u02d9q),and thus\u03c4=M(q)J\u22121(q)(KP(pd\u2212p(q))\u2212KDJ(q)\u02d9q\u2212\u02d9J(q)\u02d9q)+c(q,\u02d9q), (5)with the matrix control gains chosen asKP=(100 00 50)>0,KD=(20 00 10)>0. (6)6Or, by using the Cartesian dynamics of the robotMp(q)\u00a8p+cp(q,\u02d9q) =F,withMp(q) =(J(q)M\u22121(q)JT(q))\u22121,cp(q,\u02d9q) =J\u2212T(q)(c(q,\u02d9q)\u2212M(q)J\u22121(q)\u02d9J(q)\u02d9q),and choosingF=Mp(q)a+cp(q,\u02d9q)\u21d2\u00a8p=a\u00a8p=KPe\u2212KD\u02d9p,\u03c4=JT(q)F}\u21d2\u03c4=JT(q)Mp(q) (KP(pd\u2212p)\u2212KD\u02d9p)+JT(q)cp(q,\u02d9q).By elaborating further the latter expression of \u03c4,\u03c4=JT(q)(J(q)M\u22121(q)JT(q))\u22121(KP(pd\u2212p)\u2212KD\u02d9p) +(c(q,\u02d9q)\u2212M(q)J\u22121(q)\u02d9J(q)\u02d9q)=M(q)J\u22121(q) (KP(pd\u2212p)\u2212KD\u02d9p) +c(q,\u02d9q)\u2212M(q)J\u22121(q)\u02d9J(q)\u02d9q,we recover (5) as expected.The requested symbolic form of the terms in (5) are easily obtained for a 2R planar robot (seelecture slides). The kinematic terms arep(q) =(l1cosq1+l2cos(q1+q2)l1sinq1+l2sin(q1+q2)),J(q) =\u2202p(q)\u2202q=(\u2212(l1sinq1+l2sin(q1+q2))\u2212l2sin(q1+q2)l1cosq1+l2cos(q1+q2)l2cos(q1+q2)),\u02d9J(q) =\u2212(l1cosq1\u02d9q1+l2cos(q1+q2)( \u02d9q1+ \u02d9q2)l2cos(q1+q2)( \u02d9q1+ \u02d9q2)l1sinq1\u02d9q1+l2sin(q1+q2)( \u02d9q1+ \u02d9q2)l2sin(q1+q2)( \u02d9q1+ \u02d9q2)).The dynamic terms areM(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3),c(q,\u02d9q) =(\u2212a2sinq2(2 \u02d9q1+ \u02d9q2) \u02d9q2a2sinq2\u02d9q21),with dynamic coefficients a1=Ic1,zz+m1d2c1+Ic2,zz+m2d2c2+m2l21>0,a2=m2l1dc2anda3=Ic2,zz+m2d2c2>0. The numerical values used in (5) are those of the matrix gains givenby (6).In order to study the characteristics of the transient behavior of the error e(t)\u21920, one maycompute the roots of the following two algebraic equations in the Laplace domain:(s2+ 20s+ 100)ex(s) = (s+ 10)2ex(s) = 0,(s2+ 10s+ 50)ey(s) = (s+ 5\u22125i) (s+ 5 + 5i)ey(s) = 0.As a result, when starting at rest with an initial ex(0)\u0338= 0,ex(t) will converge to zero withoutovershoot (double negative real root), whereas ey(t) will converge to zero from an initial ey(0)\u0338= 07Figure 4: The evolution of ex(t) [left] andey(t) [right] when the robot under control (5) starts at restin a con\ufb01guration q0with initial Cartesian position error e(0) = (ex(0),ey(0)) = (0.5,\u22120.5)\u0338=0.always changing its sign during the transient (a pair of complex conjugate roots, with negative realpart). See the numerical example in Fig. 4.", "robot": "2R", "tags": ["planar", "horizontal"]},
 "143": {"file": "Robotics2_19.06.17.pdf", "date": "19-06-17", "num_ex": 4, "exam": "robo2", "question": "A robot should slide a cube, \ufb01rmly held by its end-effector gripper, on a \ufb02at surface, following anarbitrary path (see Fig. 2). For modeling purposes, assume that the surface is in\ufb01nitely stiff andfrictionless.Figure 2: A cube sliding along a path on a \ufb02at surface.Provide the set of natural constraints and a suitable set of arti\ufb01cial constraints for this interactiontask with the environment. Consider both cases of a constant or arbitrary time-varying orientationof the cube while moving along the path. How many control loops of the generalized force or motiontype are needed to achieve a perfectly linear and decoupled behavior in the task space? How manydegrees of freedom are necessary for the robot in order to ful\ufb01l all control speci\ufb01cations? Can atleast some of the desired control tasks be performed by a Scara robot? And by a 3R planar robot?If so, under which conditions?[open books, 240 minutes]2", "solution": "With reference to the task frame ( xt,yt,zt) shown in Fig. 5, the six natural constraints on thetask are:vz= 0, \u03c9x= 0, \u03c9y= 0, Fx= 0, Fy= 0, Mz= 0.The six complementary arti\ufb01cial constraints specify the way in which the interaction task shouldbe executed:Fz=Fz,d<0, Mx=Mx,d= 0, My=My,d= 0, vx=vx,d, vy=vy,d, \u03c9z=\u03c9z,d.Here,|Fz,d|\u0338= 0 is the intensity of the normal force to the plane that the robot should apply tothe cube so as to keep one of its faces in permanent contact. The desired moments around theaxesxtandytare both set to zero, so as to minimize the actual strain on the cube. The desiredtrajectory on the plane will be followed with a scalar speed \u02d9 s=\u221av2x,d+v2y,d>0. Finally, thechoice of either a constant or arbitrary time-varying orientation of the cube while moving alongthe path is made by setting either \u03c9z,d= 0 or, respectively, \u03c9z,d=\u03c9z,d(t).xtytztFigure 5: The instantaneous task frame associated to the cube moving on a \ufb02at surface.As a result, in a hybrid force-velocity formulation, there will be three control loops on the gen-eralized force components and three control loops on the planar motion components. Out ofsingularities, hybrid force-velocity control will achieve a perfectly linear and decoupled behavior of8these six controlled outputs associated to the task space. In general, a robot with six degrees offreedom will be necessary in order to ful\ufb01l all control speci\ufb01cations.With a Scara-type robot (four parallel joint axes, three revolute joints providing motion on a planeand a prismatic joint acting orthogonally), only four control speci\ufb01cations can be satis\ufb01ed. Ifthe joint axes of the robot are (perfectly) normal to the plane of motion of the cube, then theremaining two speci\ufb01cations Mx,d=My,d= 0 are automatically satis\ufb01ed (although any desiredvalue different from zero for these quantities could not be realized).When using a 3R planar robot (with all revolute joint axes normal to the plane of motion of thecube), the task speci\ufb01cation of a non-zero normal force along the axis ztcannot be accomplished.The dofs of this robot are instead necessary and sufficient to execute a complete planar motion,with arbitrary values of vx,d,vy,dand\u03c9z,d.", "robot": "3R", "tags": ["planar", "constraints"]},
 "144": {"file": "Robotics2_16.06.06.pdf", "date": "16-06-06", "num_ex": 0, "exam": "robo2", "question": "x0 y0 q1 q2 g0Figure 1: A 2R polar robotDerive the dynamic model of a 2R polar robot moving in the presence of gravity, using the gener-alized coordinates q= (q1, q2) de\ufb01ned in Fig. 1. Assume that the links have cylindric form (as inthe picture) and uniformly distributed mass.Provide for this robot the explicit expression of the terms of an adaptive control law that guaranteesasymptotic tracking of a desired smooth joint trajectory qd(t), without any a priori knowledgeabout the robot dynamic parameters. Which is the minimum dimension of such an adaptivecontroller?", "solution": "The de\ufb01nition of the joint variables q1andq2follows the Denavit-Hartenberg convention. We showin Fig. 2 the two DH frames attached to the two moving links (and indexed with 1 and 2), whichwill be used for de\ufb01ning conveniently their inertial parameters. The rotation matrices betweenframes 0 and 1 and between frames 1 and 2 are found easily by inspection (without the need ofexplicitly de\ufb01ning a DH table of parameters) as0R1(q1) =\uf8eb\uf8edcosq10 sin q1sinq10\u2212cosq10 1 0\uf8f6\uf8f8,1R2(q2) =\uf8eb\uf8edcosq2\u2212sinq20sinq2cosq200 0 1\uf8f6\uf8f8.Since the cylindric links have uniform mass, their center of mass will lie along the y1-axis for link1 and along the x2-axis for link 2. We denote with d2>0 the distance of the center of mass oflink 2 from the axis of joint 1 (slightly more than half of the link length). The inertia matrix ofeach link is diagonal when referred to the kinematic reference frame attached to the link, as wellas when referred to the frame with origin in the center of mass and having the same orientation.We denote the link inertia matrices in the latter case asiIi=\uf8eb\uf8edIixIiyIiz\uf8f6\uf8f8, i = 1,2.x0 y0 q1 q2 g0 x1 z1 y2 \u43a9 x2 \u43a9Figure 2: The reference frames used for de\ufb01ning link inertial parameters of the 2R polar robotWe start by computing the various terms in the robot dynamic model, following a Lagrangianapproach.The kinetic energy of the robot is T=T1+T2. For the \ufb01rst link,T1=12I1y\u02d9q21.For the second link, the position of its center of mass ispc2=\uf8eb\uf8edd2cosq2cosq1d2cosq2sinq1\u21131+d2sinq2\uf8f6\uf8f8,2where \u21131is the length of link 1 (an irrelevant kinematic parameter for what follows). Thus, itsvelocity isvc2=\u02d9pc2=\uf8eb\uf8ed\u2212d2cosq2sinq1\u02d9q1\u2212d2cosq1sinq2\u02d9q2d2cosq2cosq1\u02d9q1\u2212d2sinq1sinq2\u02d9q2d2cosq2\u02d9q2\uf8f6\uf8f8,and its squared norm simpli\ufb01es to\u2225vc2\u22252=vTc2vc2=d22(\u02d9q22+ cos2q2\u02d9q21).The angular velocity of link 2, when expressed in frame 0, is computed as10\u03c92=0z0\u02d9q1+0z1\u02d9q2=\uf8eb\uf8ed001\uf8f6\uf8f8\u02d9q1+\uf8eb\uf8edsinq1\u2212cosq10\uf8f6\uf8f8\u02d9q2.In order to use the constant diagonal inertia matrix of link 2, we need to express the angularvelocity in frame 2. Since1z0=0RT1(q1)0z0=\uf8eb\uf8ed010\uf8f6\uf8f8,2z0=1RT2(q1)1z0=\uf8eb\uf8edsinq2cosq20\uf8f6\uf8f8and1z1=\uf8eb\uf8ed001\uf8f6\uf8f8,2z1=1RT2(q1)1z1=\uf8eb\uf8ed001\uf8f6\uf8f8,we have2\u03c92=2z0\u02d9q1+2z1\u02d9q2=\uf8eb\uf8edsinq2\u02d9q1cosq2\u02d9q1\u02d9q2\uf8f6\uf8f8.As a result,T2=12m2vTc2vc2+122\u03c9T22I22\u03c92=12(I2xsin2q2+(I2y+m2d22)cos2q2)\u02d9q21+(I2z+m2d22)\u02d9q22.We note that in general I2x\u0338=I2y, whereas it is I2y=I2z, due to the cylindric form and uniformmass distribution of the links. Therefore,T=T1+T2=12\u02d9qT(I1y+I2xsin2q2+(I2y+m2d22)cos2q2 00 I2z+m2d22)\u02d9q=12\u02d9qTB(q)\u02d9q.Using the following de\ufb01nition of dynamic coefficientsa\u20321=I1y, a\u20322=I2x, a\u20323=I2y+m2d22=I2z+m2d22,we can write the inertia matrix asB(q) =(a\u20321+a\u20322sin2q2+a\u20323cos2q200 a\u20323).1We use here the expression for revolute joints of the columns of the angular part of the geometric Jacobian.3Although there will be no reduction in the number of dynamic coefficients, it is slightly moreconvenient to use the trigonometric identity cos2q2= 1\u2212sin2q2and obtainB(q) =(a1+a2sin2q200 a3)=(b1(q2)b2),witha1= (a\u20321+a\u20323=)I1y+I2y+m2d22a2= (a\u20322\u2212a\u20323=)I2x\u2212I2y\u2212m2d22a3= (a\u20323=)I2y+m2d22=I2z+m2d22.For the Coriolis and centrifugal terms, we havec(q,\u02d9q) =(c1(q,\u02d9q)c2(q,\u02d9q))=S(q,\u02d9q)\u02d9q, c i(q,\u02d9q) =\u02d9qTCi(q)\u02d9q, i= 1,2,S(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q)),whereCi(q) =12{\u2202bi(q)\u2202q+(\u2202bi(q)\u2202q)T\u2212\u2202B(q)\u2202qi}, i = 1,2.Note that with the above de\ufb01nition based on Christoffel symbols, the factorization matrix Ssatis\ufb01es automatically the property of skew-symmetry for \u02d9B\u22122S.ComputingC1(q) =12{(0 2a2sinq2cosq20 0)+(0 02a2sinq2cosq20)\u22120}=(0 a2sinq2cosq2a2sinq2cosq2 0)C2(q) =\u00b7\u00b7\u00b7=(\u2212a2sinq2cosq200 0),we havec(q,\u02d9q) =(2a2sinq2cosq2\u02d9q1\u02d9q2\u2212a2sinq2cosq2\u02d9q21)and S(q,\u02d9q) =a2sinq2cosq2(\u02d9q2\u02d9q1\u2212\u02d9q10).The potential energy of the robot is given byU=U1+U2, U i=\u2212migT0r0,ci, i= 1,2.SincegT0=(0 0\u2212g0), g 0= 9.81 [m/s2]and the potential energy U1is constant, we only need the z-component of the position vector r0,c2of the center of mass of link 2. We haveU1= cost , U 2=m2g0d2sinq2=a4sinq2,where we have introduced a fourth, and last, dynamic coefficient a4=m2g0d2. Therefore,g(q) =(\u2202U(q)\u2202q)T=(0a4cosq2).4The dynamic model of the robot can thus be written in its linear parametrized form,B(q)\u00a8q+S(q,\u02d9q)\u02d9q+g(q) =Y(q,\u02d9q,\u00a8q)a=u,withY(q,\u02d9q,\u00a8q) =(\u00a8q1sin2q2\u00a8q1+ 2 sin q2cosq2\u02d9q1\u02d9q20 00\u2212sinq2cosq2\u02d9q21 \u00a8q2cosq2),a=\uf8eb\uf8ec\uf8ec\uf8eda1a2a3a4\uf8f6\uf8f7\uf8f7\uf8f8.De\ufb01ning \u02d9qr=\u02d9qd+\u039be=\u02d9qd+\u039b(qd\u2212q), with a diagonal matrix \u039b>0, two diagonal gainmatrices KD>0 and KP=KD\u039b\u22121>0, and a diagonal estimation gain matrix \u0393>0, theadaptive controller will have dimension 4 (equal to the minimum number of dynamic coefficientsto be estimated in this robot) and the expressionu=\u02c6B(q)\u00a8qr+\u02c6S(q,\u02d9q)\u02d9qr+\u02c6g(q) +KPe+KD\u02d9e=Y(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a+KPe+KD\u02d9e\u02d9\u02c6a=\u0393YT(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q), \u02c6a(0) = arbitrary ,whereY(q,\u02d9q,\u02d9qr,\u00a8qr) =(\u00a8qr1sin2q2\u00a8qr1+ sin q2cosq2( \u02d9q1\u02d9qr2+ \u02d9qr1\u02d9q2) 0 00\u2212sinq2cosq2\u02d9q1\u02d9qr1 \u00a8qr2cosq2),\u02c6a=\uf8eb\uf8ec\uf8ec\uf8ed\u02c6a1\u02c6a2\u02c6a3\u02c6a4\uf8f6\uf8f7\uf8f7\uf8f8.", "robot": "2R", "tags": []},
 "145": {"file": "Robotics2_16.06.06.pdf", "date": "16-06-06", "num_ex": 1, "exam": "robo2", "question": "For the robot in Fig. 1, write down all different symbolic expressions of control laws that you areaware of, which guarantee regulation to a desired (generic) constant con\ufb01guration qd. Specify foreach law the design conditions for success and the type of convergence/stability achieved.[180 minutes; open books]1", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "146": {"file": "Robotics2_Final_Test_2015-16_16.06.01.pdf", "date": "16-06-01", "num_ex": 0, "exam": "robo2", "question": "ExerciseA 2R robot moving in the vertical plane uses the joint coordinates de\ufb01ned in Fig. 1. The inertia matrix ofthis robot can be written asB(q) =\u201ea1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3\u00ab, (1)where the three dynamic coefficients ai,i= 1,2,3, satisfya1>a 3>a 2>0. The robot is initially at restand should move under the constraint of keeping the absolute orientation of the second link at a constantangle\u03b2w.r.t. the x0axis, with the value 0 <\u03b2 <\u03c0/ 2 being speci\ufb01ed by the initial con\ufb01guration.x0 y0 q1!q2!g0Figure 1: A planar 2R robot\u2022Derive a one-dimensional reduced dynamic model of the robot under the given geometric constrainton its motion. Point out the features of the obtained model. Are there any special (e.g., singular)situations from the dynamic point of view?\u2022With the robot at rest at t= 0 and with q(0) satisfying the geometric constraint, determine allfeasible torques u(0) that can keep the robot in static equilibrium. Which are the associated valuesof the scalar constraint force \u03bb(0)?\u2022Describe how a simulation with arbitrary joint torque inputs u(t)\u2208R2should be performed whenusing this model.\u2022Provide the symbolic expression of the joint torques u1andu2that should be applied when the robotis at a given generic state ( q,\u02d9q) compatible with the constraint, so that the pseudoacceleration isequal to a desired value \u02d9 vd\u2208Rand the constraint force is \u03bb= 0.[150 minutes; open books]1", "solution": "ExerciseWe \ufb01rst derive the Coriolis and centrifugal vector c(q.\u02d9q) from the expression of B(q) in (1), and thencompute the potential energy U(q) due to gravity and the associated vector g(q) in the dynamic model.From (1) andc(q,\u02d9q) =\u201ec1(q,\u02d9q)c2(q,\u02d9q)\u00ab, ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202bi(q)\u2202q+\u201e\u2202bi(q)\u2202q\u00abT\u2212\u2202B(q)\u2202qi)(i= 1,2),we haveC1(q) =12(0\u22122a2sinq20\u2212a2sinq2!+0 0\u22122a2sinq2\u2212a2sinq2!\u22120)=0\u2212a2sinq2\u2212a2sinq2\u2212a2sinq2!C2(q) =12(0\u2212a2sinq20 0!+0 0\u2212a2sinq20!\u2212\u22122a2sinq2\u2212a2sinq2\u2212a2sinq2 0!)=a2sinq200 0!and thusc(q,\u02d9q) =\u2212a2sinq2(2 \u02d9q1+ \u02d9q2) \u02d9q2a2sinq2\u02d9q21!. (2)The potential energy is given byU=2Xi=1Ui, U i=\u2212migT0r0,ci, i= 1,2.SincegT0=`g00 0\u00b4, g 0= 9.81 [m/s2],we need in the computations only the x-component of the position vector r0,ciof the center of mass of thelinki, fori= 1,2. We haveU1=\u2212m1g0d1cosq1U2=\u2212m2g0(\u21131cosq1+d2cos(q1+q2)),wheremiis the mass of link i,diis the distance of the CoM of link ifrom the axis of joint i, and\u21131is thelength of link 1. Therefore,g(q) =\u201e\u2202U(q)\u2202q\u00abT=a4sinq1+a5sin(q1+q2)a5sin(q1+q2)!,where we have introduced the dynamic coefficients a4= (m1d1+m2\u21131)g0anda5=m2d2g0.The scalar geometric constraint ( m= 1) imposed on the motion of the robot (with a con\ufb01guration spaceof dimension n= 2) is to keep the second link oriented at a constant angle \u03b2w.r.t. the axis x0. Thush(q) =q1+q2\u2212\u03b2= 0\u21d2 A(q)\u02d9q= 0,withA=\u2202h(q)\u2202q=`1 1\u00b4.2We note that matrix Ais constant since the constraint is linear in q. The constrained dynamic model isthenB(q)\u00a8q+c(q,\u02d9q) +g(q) =u+AT\u03bb, s.t.h(q) = 0.In order to obtain a reduced dynamic model, we can de\ufb01ne a matrix Din the following way:AD!=1 10 1!(a nonsingular matrix). (3)From thisAD!\u22121=1\u221210 1!=`E F\u00b4,and so we de\ufb01nev=D\u02d9q= \u02d9q2,\u02d9v= \u00a8q2\u21d0\u21d2 \u02d9q=Fv=\u221211!v,\u00a8q=F\u02d9v=\u221211!\u02d9v.Since all these matrices are constant, many simpli\ufb01cations will occur. In particular, the reduced dynamicmodel (of dimension n\u2212m= 1) is expressed by a single differential equation of the form\u201cFTB(q)F\u201d\u02d9v=FT(u\u2212c(q,\u02d9q)\u2212g(q)), (4)while the expression of the scalar constraint force will be given by\u03bb=ET(B(q)F\u02d9v+c(q,\u02d9q) +g(q)\u2212u). (5)These model expressions will hold everywhere, thanks to the global invertibility of the matrix in (3); nosingularity will occur with the chosen representation of the reduced dynamics.Performing computations, we haveFTB(q)F=a1\u2212a3>0 (constant!),FTu=u2\u2212u1,\u2212FT(c(q,\u02d9q) +g(q)) =\u2212a2sinq2( \u02d9q1+ \u02d9q2)2+a4sinq1,ETB(q)F=a3\u2212a1\u2212a2cosq2,ETu=u1,ET(c(q,\u02d9q) +g(q)) =c1(q,\u02d9q) +g1(q) =\u2212a2sinq2(2 \u02d9q1+ \u02d9q2) \u02d9q2+a4sinq1+a5sin(q1+q2).The reduced model (4) has to be initialized at a state ( q(0),\u02d9q(0)) that is compatible with the constraint,orq1(0) +q2(0) =\u03b2, \u02d9q1(0) + \u02d9q2(0) = 0. (6)The velocity constraint is indeed satis\ufb01ed if the robot is initially at rest (although this is not the only case).The constraints (6) will propagate then for all t>0, if we proceed by integrating (4). Thus, \u02d9 q1+ \u02d9q2= 0will hold at any time, and the dynamics (4) simpli\ufb01es \ufb01nally to(a1\u2212a3) \u02d9v=u2\u2212u1+a4sinq1, (7)while the expression (5) of the constraint force (multiplier) becomes\u03bb= (a3\u2212a1\u2212a2cosq2) \u02d9v\u2212a2sinq2\u02d9q1\u02d9q2+a4sinq1+a5sin\u03b2\u2212u1. (8)The pseudoinertia in (7) is now constant, and the quadratic velocity terms have disappeared as expected.The only residual nonlinearity is due to the gravity.3If the robot starts at rest ( \u02d9 q1(0) = \u02d9q2(0) = 0) and satis\ufb01es the constraints (6), in order to keep the staticequilibrium ( \u02d9 v= 0), from (7) we need to haveu1(0)\u2212u2(0) =a4sinq1(0),so that there is (apparently) an in\ufb01nity of joint torque combinations that will preserve the equilibrium.Associated to each of these, from (8) there is a single constraint force given by\u03bb(0) =a4sinq1(0) +a5sin\u03b2\u2212u1(0) =a5sin\u03b2\u2212u2(0).Note however that if the constraint h(q) = 0 is a virtual one, namely it is not imposed by a mechanismbut it is enforced only through a control action, then there can be no real constraint forces generated, i.e.,\u03bb(0) should vanish. In particular, this happens only with the natural choiceu(0) =u1(0)u2(0)!=a4sinq1(0) +a5sin\u03b2a5sin\u03b2!=g(q(0)).More in general, a simulation with the reduced dynamic model (7) and an arbitrary input torque u(t)proceeds, with an integration step T >0, as follows1:1. The initial state ( q0,\u02d9q0) = (q(0),\u02d9q(0)) should satisfy (6). Set k= 0.2. At every sampling instant tk=kT, compute \u02d9vk= \u02d9v(tk) as\u02d9vk=uk,2\u2212uk,1+a4sinqk,1a1\u2212a3,evaluate \u00a8qk=F\u02d9vk, and use your preferred integration routine to obtain ( qk+1,\u02d9qk+1).2\u2019. In alternative to step 2, since \u02d9 v= \u00a8q2, compute\u00a8qk,2=uk,2\u2212uk,1+a4sin(\u03b2\u2212qk,2)a1\u2212a3,use your preferred integration routine to obtain ( qk+1,2,\u02d9qk+1,2), and evaluate the remaining compo-nents of the state asqk+1,1=\u03b2\u2212qk+1,2, \u02d9qk+1,1=\u2212\u02d9qk+1,2.3. Setk=k+ 1, and cycle over step 2 (or 2\u2019).Finally, to address the last control problem, we evaluate eqs. (7\u20138) for \u02d9 v= \u02d9vdand\u03bb= 0 at a generic state(q,\u02d9q) obtaining the (unique) needed joint torqueu=u1u2!=(a3\u2212a1\u2212a2cosq2) \u02d9vd\u2212a2sinq2\u02d9q1\u02d9q2+a4sinq1+a5sin\u03b2u1+ (a1\u2212a3) \u02d9vd\u2212a4sinq1!. (9)4", "robot": "2R", "tags": ["planar", "vertical", "constraints"]},
 "147": {"file": "Robotics2_20.07.15.pdf", "date": "20-07-15", "num_ex": 0, "exam": "robo2", "question": "Consider the 4-dof robot in Fig. 1, made by a 3R planar arm mounted on a rail. The robot hasthe last three links of equal length \u2113. The generalized coordinates q\u2208R4to be used are alsoshown. Determine the inertia matrix M(q) of the dynamic model of this robot (if needed, de\ufb01nesymbolically any missing parameters).xwywP\u2022\u2295\u2295\u2295\u2295m1m2,I2m3,I3m4,I4q1q2q3q4hFigure 1: A 4-dof planar robot with generalized coordinates qand relevant parameters.", "solution": "Note \ufb01rst that we are using the absolute angles w.r.t. to the x0-axis for the orientation of the secondto the fourth link (thus, not the Denavit-Hartenberg relative angles). Also, denote by dci>0 thedistance of the center of mass of link ifrom jointi, fori= 2,3,4. The individual contributions tothe kinetic energy of this 4-dof planar robot are computed as follows.T1=12m1\u02d9q21pc2=(q1+dc2cosq2h+dc1sinq2)\u21d2vc2=(\u02d9q1\u2212dc2sinq2\u02d9q2dc2cosq2\u02d9q2)T2=12I2\u02d9q22+12m2(\u02d9q21+d2c2\u02d9q22\u22122dc2sinq2\u02d9q1\u02d9q2)pc3=(q1+\u2113cosq2+dc3cosq3h+\u2113sinq2+dc3sinq3)\u21d2vc3=(\u02d9q1\u2212\u2113sinq2\u02d9q2\u2212dc3sinq3\u02d9q3\u2113cosq2\u02d9q2+dc3cosq3\u02d9q3)T3=12I3\u02d9q23+12m3(\u02d9q21+\u21132\u02d9q22+d2c3\u02d9q23\u22122\u2113sinq2\u02d9q1\u02d9q2\u22122dc3sinq3\u02d9q1\u02d9q3+ 2dc3\u2113cos(q3\u2212q2) \u02d9q2\u02d9q3)pc4=(q1+\u2113(cosq2+ cosq3) +dc4cosq4h+\u2113(sinq2+ sinq3) +dc4sinq4)\u21d2vc4=(\u02d9q1\u2212\u2113(sinq2\u02d9q2+ sinq3\u02d9q3)\u2212dc4sinq4\u02d9q4\u2113(cosq2\u02d9q2+ cosq3\u02d9q3) +dc4cosq4\u02d9q4)T4=12I4\u02d9q24+12m4(\u02d9q21+\u21132( \u02d9q22+ \u02d9q23+ 2 cos(q3\u2212q2) \u02d9q2\u02d9q3) +d2c4\u02d9q24\u22122\u2113(sinq2\u02d9q2+ sinq3\u02d9q3) \u02d9q1\u22122dc4sinq4\u02d9q1\u02d9q4+ 2dc4\u2113(cos(q4\u2212q2) \u02d9q2+ cos(q4\u2212q3) \u02d9q3) \u02d9q4).FromT=4\u2211i=1Ti=12\u02d9qTM(q)\u02d9q=124\u2211i=14\u2211j=1Mij(q) \u02d9qi\u02d9qj,the elements Mij=Mjiof the 4\u00d74 symmetric inertia matrix M(q) of this robot areM11=m1+m2+m3+m4M12=\u2212(m2dc2+ (m3+m4)\u2113) sinq2M13=\u2212(m3dc3+m4\u2113) sinq3M14=\u2212m4dc4sinq4M22=I2+m2d2c2+ (m3+m4)\u21132M23= (m3dc3+m4\u2113)\u2113cos(q3\u2212q2)M24=m4dc4\u2113cos(q4\u2212q2)M33=I3+m3d2c3+m4\u21132M34=m4dc4\u2113cos(q4\u2212q3)M44=I4+m4d2c4.", "robot": "3R", "tags": ["planar"]},
 "148": {"file": "Robotics2_20.07.15.pdf", "date": "20-07-15", "num_ex": 1, "exam": "robo2", "question": "For the same robot in Fig. 1, assume \u2113=h= 1 [m] and consider the following tasks, to be executedusing a kinematic control scheme with joint velocity commands \u02d9q\u2208R4.Task 1. Trace with the end-effector counterclockwise a circle of radius R= 3 [m], centered atC= (7,0), starting from point P0= (10,0) and with constant speed v= 1 [m/s].Task 2. Keep the second link always horizontal ( q2(t) = 0).De\ufb01ne the augmented Jacobian JA(q) for both tasks 1 and 2. Choose a suitable initial robotcon\ufb01guration so as to stay at time t= 0 in P0and compute there the minimum joint velocitynorm solution that realizes both tasks simultaneously. Determine the \ufb01rst point Pson the circularpath where an algorithmic singularity of JA(q) necessarily occurs. In that situation, compute theminimum joint velocity norm solution that realizes the \ufb01rst task only. Will the execution of thesecond task be relaxed or not?", "solution": "The kinematics of the \ufb01rst task of dimension m1= 2 is given byr1=p=(q1+\u2113(cosq2+ cosq3+ cosq4)h+\u2113(sinq2+ sinq3+ sinq4))=f1(q),3with JacobianJ1(q) =\u2202f1(q)\u2202q=(1\u2212\u2113sinq2\u2212\u2113sinq3\u2212\u2113sinq40\u2113cosq2\u2113cosq3\u2113cosq4),while the kinematics of the second task of dimension m2= 1 is given just byr2=q2=f2(q),with JacobianJ2=\u2202f2(q)\u2202q=(0 1 0 0),The augmented Jacobian is thenJA(q) =(J1(q)J2)=\uf8eb\uf8ec\uf8ed1\u2212\u2113sinq2\u2212\u2113sinq3\u2212\u2113sinq40\u2113cosq2\u2113cosq3\u2113cosq40 1 0 0\uf8f6\uf8f7\uf8f8.It is easy to verify that JA(q) is singular, i.e., rank ( JA(q))<3 =mA(=m1+m2), if and only ifcosq3= cosq4= 0. This happens when the third and fourth link are aligned (or folded) along theywdirection.With reference to Fig. 4, the augmented task requiresr1d(t) =C+R\uf8eb\uf8ec\uf8edcosvtRsinvtR\uf8f6\uf8f7\uf8f8\u21d2 \u02d9r1d(t) =v\uf8eb\uf8ec\uf8ed\u2212sinvtRcosvtR\uf8f6\uf8f7\uf8f8withr1d(0) =P0,\u02d9r1d(0) =(0v)Tand\u2225\u02d9r1d(t)\u2225=v, as well asr2d(t) = 0\u21d2 \u02d9r2d= 0.Setting now \u2113=h= 1, in order to be consistent with the augmented task at the initial timet= 0, there will be multiple robot con\ufb01gurations ( q1,q3,q4) that satisfy the desired end-effectorpositioning with q2= 0 (second link horizontal and pointing to the right):(q1+ 1 + cosq3+ cosq4sinq3+ sinq4)=(100)=P0xwywP0\u2022q1 = 8 q2= 0 h= 1\u2113\t= 1q3= 0 q4= -p/2 CR= 3vxwywPs\u2022q1 = 6q2= 0 q3= p/2q4= p/2 CR= 3vP0Figure 4: The 4-dof planar robot in the initial con\ufb01guration q0[left] and in the singular con\ufb01gu-ration qs[right] for the two tasks of tracing the circle with its end effector (task 1) while keepingthe second link horizontal (task 2).4A simple choice is to pick q1= 8 [m],q3= 0,q4=\u2212\u03c0/2 [rad], as in Fig. 4 [left]. The con\ufb01gurationq0=q(0) =(8 0 0\u2212\u03c0/2)Tis not singular. Accordingly, any augmented task velocity\u02d9rd\u2208R3can be instantaneously realized (actually in a in\ufb01nite number of ways). The minimumnorm joint velocity solution is obtained using pseudoinversion ( J#A=JTA(JAJTA)\u22121):\u02d9q0=J#A(q0)\u02d9rd(0) =\uf8eb\uf8ec\uf8ed1 0 0 10 1 1 00 1 0 0\uf8f6\uf8f7\uf8f8#\uf8eb\uf8ec\uf8ed010\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0.5 0 00 0 10 1\u221210.5 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed010\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0010\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.As a result, only the third joint moves, rotating counterclockwise. As shown in Fig. 4 [right],the \ufb01rst point on the circle where the augmented task necessarily encounters a singularity is atPs= (Cx,Cy+R) = (7,3). The robot arrives there at some instant t=ts>0 and can satisfy thepositional/orientation tasks in only one con\ufb01guration qs=q(ts) =(6 0\u03c0/2\u03c0/2)T, whichis indeed singular. Note that this is a true algorithmic singularity , since both tasks are full rank(rank ( J1(qs)) = 2, rank ( J2) = 1) but rank ( JA(qs)) = 2<3 =mA. Indeed, one can stillcompute the pseudoinverse solution, which provides\u02d9qs=J#A(qs)\u02d9rd(ts) =\uf8eb\uf8ec\uf8ed1 0\u22121\u221210 1 0 00 1 0 0\uf8f6\uf8f7\uf8f8#\uf8eb\uf8ec\uf8ed\u2212100\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0.3333 0 00 0.5 0.5\u22120.3333 0 0\u22120.3333 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed\u2212100\uf8f6\uf8f7\uf8f8=13\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22121011\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The prismatic joint retracts, while joints 3 and 4 will rotate counterclockwise. When evaluatingthe execution of the augmented task with this joint velocity, we \ufb01ndJA(qs)\u02d9qs=\uf8eb\uf8ec\uf8ed1 0\u22121\u221210 1 0 00 1 0 0\uf8f6\uf8f7\uf8f8\u00b713\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u22121011\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed\u2212100\uf8f6\uf8f7\uf8f8=\u02d9rd(ts)!Thus, the entire velocity task is still satis\ufb01ed. In fact, despite the loss of rank of the augmentedJacobian, it is easy to see that \u02d9rd(ts)\u2208R{JA(qs)}. The pseudoinverse joint velocity returns thenthe exact solution also in this case. We note \ufb01nally that the robot will not be able to trace theentire circle, being the lower part outside its workspace.", "robot": "RPPR", "tags": ["planar", "horizontal"]},
 "149": {"file": "Robotics2_20.07.15.pdf", "date": "20-07-15", "num_ex": 2, "exam": "robo2", "question": "A 6-dof robot should hold \ufb01rmly with its three-\ufb01ngered gripper a cylindric payload, and move italong a desired path on a frictionless plane with one of its bases in full contact with the plane, asshown in Fig. 2. De\ufb01ne an associated task frame where the natural (geometric) constraints andthe arti\ufb01cial (control) constraints of this hybrid task can be de\ufb01ned and realized in a decoupledway. Where reasonable, provide also values for the control references.Figure 2: The hybrid task of moving along a path a cylinder in contact with a planar surface.1", "solution": "With reference to Fig. 5, we de\ufb01ne the task frame with axis ztnormal to the plane of motion andpassing through the center of the cylinder base, and axis xttangential to the path on the plane.The natural constraints are thenfx= 0, f y= 0, v z= 0, \u03c9 x= 0, \u03c9 y= 0, \u00b5 z= 0,in which we neglected any friction effect at the contact. The complementary arti\ufb01cial constraintsarevx=vx,d(t)>0, v y= 0, f z=fz,d\u0338= 0, \u00b5 x= 0, \u00b5 y= 0, \u03c9 z=\u03c9z,d.The value of the velocity vy(normal to the path) is chosen to be zero, signifying that the robotend-effector/payload should strictly follow the path on the plane. A non-zero fz,dcan be chosen5xtytztFigure 5: The task frame assignment for the contact motion of a cylinder following a path on africtionless plane.so as to enforce full surface contact with the base, despite of the presence of friction (and otherdisturbances) in the real world. The two reaction torques \u00b5xand\u00b5yare set to zero, in order notto stress the object while in contact. Finally, \u03c9z,dcan be set to zero or not, depending on whetherthe cylinder should keep its orientation or rotate around its major axis while the center of its baseis following the path traced on the plane.", "robot": "6R", "tags": ["planar", "constraints"]},
 "150": {"file": "Robotics2_20.07.15.pdf", "date": "20-07-15", "num_ex": 3, "exam": "robo2", "question": "During the accurate execution of a smooth joint trajectory qd(t) lastingT= 3 [s] with the 2Rplanar robot shown in Fig. 3 moving under gravity, the maximum torques of the two joints exceedat some instants their bounds, as given by |\u03c4i|\u2264\u03c4max,i ,i= 1,2. We have in particular\u03c41(t1) = maxt\u2208[0,T]\u03c41(t) = 140>100 =\u03c4max, 1, \u03c4 2(t2) = maxt\u2208[0,T]\u03c42(t) = 25>20 =\u03c4max, 2 [Nm].The robot links have equal length \u2113= 0.5 [m] and equal, uniformly distributed mass m= 5 [kg].The robot con\ufb01gurations at the time instants t=t1andt=t2areq(t1) =(\u03c0/4 0)T, q(t2) =(\u2212\u03c0/4 3\u03c0/4)T[rad].In order to recover motion feasibility, a uniform trajectory scaling is used. What will be theminimum feasible motion time T\u2032=kTthus obtained? What are the values of the new jointtorques\u03c41(kt1) and\u03c42(kt2)?y0\u2295\u2295g0x0Figure 3: A 2R robot moving under gravity. Joint variables are de\ufb01ned by the D-H convention.", "solution": "In this exercise, we just need to derive the gravity term in the dynamic model of the 2R planarrobot. No information is required in fact on the inertial terms. Using the Denavit-Hartenbergcoordinates, the q=0con\ufb01guration will correspond to the robot arm being stretched downwardalong the x0-axis, the con\ufb01guration of minimum potential energy. Therefore, being m1=m2=manddc1=dc2=\u2113/2, the potential energy due to gravity isU=U1+U2=\u2212m1g0dc1cosq1\u2212m2g0(\u2113cosq1+dc2cos(q1+q2))=\u2212mg0\u2113(32cosq1+12cos(q1+q2)),and sog(q) =(\u2202U(q)\u2202q)T=\uf8eb\uf8ec\uf8edmg0\u2113(32sinq1+12sin(q1+q2))mg0\u21132sin(q1+q2)\uf8f6\uf8f7\uf8f8=(g1(q)g2(q)). (1)Settingm= 5 [kg],\u2113= 0.5 [m] andg0= 9.81 [m/s2], by evaluating (1) at q(t1) = (\u03c0/4,0) andq(t2) = (\u2212\u03c0/4,3\u03c0/4) we obtain the gravity torques at the two jointsg1(q(t1)) = 34.6836 [Nm] and g2(q(t2)) = 12.2625 [Nm].The uniform time scaling factor k>1 needed to recover feasibility of the entire motion is computedfromk1=\u221a\u03c41(t1)\u2212g1(q(t1))\u03c4max, 1\u2212g1(q(t1))= 1.2698, k 2=\u221a\u03c42(t2)\u2212g2(q(t2))\u03c4max, 2\u2212g2(q(t2))= 1.2830,ask= max{k1,k2}= 1.2830 (=k2).6Thus, the second joint is the one with higher relative violation of the torque limit (once gravity isremoved). The motion time is then increased from T= 3 [s] to the new value T\u2032=kT= 3.8491 [s],which is the minimum feasible one under uniform time scaling. The values of the new joint torques(expressed in [Nm]) at the scaled instants t\u20321=kt1andt\u20322=kt2are computed as\u03c41(t\u20321) =\u03c41(t1)\u2212g1(q(t1))k2+g1(q(t1) = 98.6589<100 =\u03c4max, 1,\u03c42(t\u20322) =\u03c42(t2)\u2212g2(q(t2))k2+g2(q(t2) = 20 =\u03c4max, 2.As expected, the second joint torque will be in saturation at the scaled instant t\u20322.", "robot": "2R", "tags": ["planar"]},
 "151": {"file": "Robotics2_20.07.15.pdf", "date": "20-07-15", "num_ex": 4, "exam": "robo2", "question": "Consider again the 2R robot in Fig. 3, with the same de\ufb01nition of joint variables and using thesame kinematic and dynamic parameters. The robot is initially at rest at t= 0 in q(0) = q0.Provide the explicit expressions of all terms in the following three feedback control laws, eachachieving its own objective.a.Global exponential stabilization of the state ( q,\u02d9q) = (qd,0), with decoupled transient evolu-tions of the position errors ei(t) =qd,i\u2212qi(t),i= 1,2, of the form e1(t) =e1(0) (1 + 5t) exp(\u22125t)ande2(t) =e2(0) (2 exp(\u22125t)\u2212exp(\u221210t)).b.Global asymptotic stabilization of the state ( q,\u02d9q) = (qd,0), without knowledge of the robotinertia matrix.c.Exponential stabilization of the end-effector position p=pd\u2208R2with zero velocity \u02d9p=0, upto kinematic singularities.[180 minutes (3 hours); open books]2", "solution": "The three requested motion tasks are all regulation problems. The dynamic terms needed for thevarious feedback control laws are listed \ufb01rst. We make reference to the 2R robot in Fig. 3, withthe same de\ufb01nition of joint variables and using the same parameters. The inertia matrix isM(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3),witha1=I1+I2+32m\u21132,a2=12m\u21132,a3=I2+14m\u21132. The Coriolis and centrifugal terms arec(q,\u02d9q) =(\u2212a2sinq2( \u02d9q2+ 2 \u02d9q1) \u02d9q2a2sinq2\u02d9q21).The gravity vector has been already computed in Exercise #4, and is rewritten here asg(q) =(a4sinq1+a5sin(q1+q2)a5sin(q1+q2))witha4=12mg0\u2113,a5=12mg0\u2113. From the direct kinematics p=f(q), the robot Jacobian thatmaps the joint velocity \u02d9q\u2208R2to the velocity \u02d9p\u2208R2of the end effector isJ(q) =\u2202f(q)\u2202q=(\u2212\u2113(sinq1+ sin(q1+q2))\u2212\u2113sin(q1+q2)\u2113(cosq1+ cos(q1+q2))\u2113cos(q1+q2)).Finally, we shall need also the time derivative of the Jacobian matrix, namely\u02d9J(q) =(\u2212\u2113(cosq1\u02d9q1+ cos(q1+q2) ( \u02d9q1+ \u02d9q2))\u2212\u2113cos(q1+q2) ( \u02d9q1+ \u02d9q2)\u2212\u2113(sinq1\u02d9q1+ sin(q1+q2) ( \u02d9q1+ \u02d9q2))\u2212\u2113sin(q1+q2) ( \u02d9q1+ \u02d9q2)).a.Global exponential stabilization of the state ( q,\u02d9q) = (qd,0), with decoupled transient evolu-tions of the position errors ei(t) =qd,i\u2212qi(t),i= 1,2, of the form e1(t) =e1(0) (1 + 5t) exp(\u22125t)ande2(t) =e2(0) (2 exp(\u22125t)\u2212exp(\u221210t)).This is obtained by feedback linearization control in the joint space:u=M(q)a+c(q,\u02d9q) +g(q),witha=\u2212KD\u02d9q+KP(qd\u2212q),withKP>0 and KD>0 and both diagonal. The desired error transients are obtained bychoosing suitable gains in the linear and decoupled second-order dynamics\u00a8ei+KD,i\u02d9ei+KP,iei= 0, i = 1,2, (2)7for the two position errors ei(t) =qd,i\u2212qi(t). For joint 1, substitute e1(t) =e1(0) (1 + 5t) exp(\u22125t)and its \ufb01rst and second time derivatives in (2):e1(0) (\u221225 + 125t) exp(\u22125t)\u2212KD,1e1(0) 25texp(\u22125t) +KP,1e1(0) (1 + 5t) exp(\u22125t) = 0.Sincee1(0) exp(\u22125t)\u0338= 0 for any \ufb01nite t\u22650, this common factor can be eliminated so as to obtain(\u221225 + 125t)\u221225KD,1t+ (1 + 5t)KP,1= 0.By the principle of polynomial identity (w.r.t. the powers of t), this implies125\u221225KD,1+ 5KP,1= 0,\u221225 +KP,1= 0\u21d2KP,1= 25, KD,1= 10.Moreover, transforming eq. (2) for i= 1 in the Laplace domain and using these values leads to(s2+ 10s+ 25)e1(s) = (s+ 5)2e1(s) = 0,namely, the error dynamics at the \ufb01rst joint is characterized by two real and coincident negativeeigenvalues in\u22125.We proceed similarly for joint 2. Substitute e2(t) =e2(0) (2 exp(\u22125t)\u2212exp(\u221210t)) and its \ufb01rstand second time derivatives in (2):e2(0) (50 exp(\u22125t)\u2212100 exp(\u221210t)) +KD,2e2(0) (\u221210 exp(\u22125t) + 10 exp(\u221210t))+KP,2e2(0) (2 exp(\u22125t)\u2212exp(\u221210t)) = 0.Beinge2(0)\u0338= 0, in order for this expression to vanish identically at all times t\u22650, we should zerothe coefficients multiplying the two different exponentials exp( \u22125t) and exp(\u221210t). This yields50\u221210KD,2+ 2KP,2= 0,\u2212100 + 10KD,2\u2212KP,2= 0\u21d2KP,2= 50, KD,2= 15.Moreover, transforming eq. (2) for i= 2 in the Laplace domain and using these values leads to(s2+ 15s+ 50)e2(s) = (s+ 5)(s+ 10)e2(s) = 0,namely, the error dynamics at the second joint has two real and distinct negative eigenvalues in\u22125 and\u221210.b.Global asymptotic stabilization of the state ( q,\u02d9q) = (qd,0), without knowledge of the robotinertia matrix.This can be obtained by multiple choices, the most common being a PD control with gravitycancellationu=KP(qd\u2212q)\u2212KD\u02d9q+g(q),with symmetric KP>0 and KD>0, typically chosen diagonal. In alternative, one can usegravity compensationu=KP(qd\u2212q)\u2212KD\u02d9q+g(qd)further requiring that the minimum eigenvalue of KPis larger than a \ufb01nite upper bound \u03b1 > 0on the norm of the Hessian \u22022U(q)/\u2202q2of the gravitational potential energy U.8c.Exponential stabilization of the end-effector position p=pd\u2208R2with zero velocity \u02d9p=0, upto kinematic singularities.In this case, we require a feedback linearization control in the Cartesian space:u=M(q)J\u22121(q)(a\u2212\u02d9J(q)\u02d9q)+c(q,\u02d9q) +g(q),witha=\u2212KD\u02d9p+KP(pd\u2212p) =\u2212KDJ(q)\u02d9q+KP(pd\u2212f(q))and where KP>0 and KD>0 are both chosen diagonal.", "robot": "2R", "tags": []},
 "152": {"file": "Robotics2_22.01.11.pdf", "date": "22-01-11", "num_ex": 0, "exam": "robo2", "question": "The RPR robot in Fig. 1 moves on a horizontal plane, carrying at its end effector a payload ofmassmpand inertia Ip. The links of the robot can be considered as uniform rods of length liandmassmi,i= 1,2,3. The robot control architecture receives as reference input a high-level jointvelocity command \u02d9qr\u2208R3.[i] The \ufb01rst task requires to move the end-effector point Palong a desired trajectory pd(t)\u2208R2,while locally minimizing the robot kinetic energy T=12\u02d9qTM(q)\u02d9q. Design a high-level controllaw\u02d9q[i]rrealizing this task and provide the detailed symbolic expression of all its terms.[ii] Consider next the presence of a circular obstacle Oobsof radiusrthat is placed in a knownpositionPobsin the robot workspace. Modify the previous control law into a \u02d9q[ii]rso as to tryalso avoiding collisions between the full robot body and the obstacle. Provide the symbolicexpression of the additional terms in this law.[iii] Using the following kinematic and dynamic datal1= 0.45, l2= 0.7, l3= 0.35 [m], m 1=m2= 10, m3= 4, mp= 2 [kg], I p= 0.01 [kgm2],compute the numerical values of the command \u02d9q[i]rwhen the robot is in the con\ufb01gurationq=\u00afq= (\u03c0/4,0.25,\u2212\u03c0/4) [rad,m,rad] and the desired end-effector velocity is \u02d9pd= (1,\u22121).For case [ii], repeat the same evaluation for \u02d9q[ii]r, when the circular obstacle is placed at thepointPobs= (0.1 +l1\u221a2,\u22120.1)\u2243(0.736,\u22120.1) [m] and has radius r= 0.05 [m].l1x0y0q1q3q2l3\u2a01\u2a01m3,I3m1,I1m2,I2\u2a01l2PPobsmp,IpFigure 1: A planar RPR robot with a payload on the end effector. A circular obstacle Oobsmayalso be present in a generic position Pobsin the robot workspace.", "solution": "There is a unique solution to the problem of \ufb01nding a joint velocity command \u02d9qr\u2208RN(here,N= 3) that realizes a given task velocity \u02d9pd\u2208RM, withM < N (here,M= 2), by minimizingthe kinetic energy of the robot, i.e., for problem [i],min\u02d9q12\u02d9qTM(q)\u02d9q, s.t.J(q)\u02d9q=\u02d9pd,whereM(q)>0 is the robot inertia matrix and J(q) is the task Jacobian, both evaluated at thecurrent con\ufb01guration q. The solution is obtained by the weighted pseudoinverse\u02d9q[i]r=J#M(q)\u02d9pd=M\u22121(q)JT(q)(J(q)M\u22121(q)JT(q))\u22121\u02d9pd. (2)For the planar RPR robot in Fig. 1, the Jacobian matrix is computed from the direct kinematics1p=f(q) =(l1c1\u2212q2s1+l3c13l1s1+q2c1+l3s13)asJ(q) =\u2202f(q)\u2202q=(\u2212(l1s1+q2c1+l3s13)\u2212s2\u2212l3s13l1c1\u2212q2s1+l3c13c1l3c13). (3)Next, we compute the inertia matrix M(q) by extracting its elements from the total robot kineticenergyT. In doing so, we also use the fact that the links are uniform thin rods of length li,i= 1,2,3. The center of mass is then located at the link midpoint (at a distance di=li/2to the end of the rod), while the barycentric inertia (around an axis normal to the plane) isIi= (1/12)mil2i. The payload will be included in the kinetic energy of the robot.Kinetic energy and inertia matrixLink 1T1=12(I1+m1d21)\u02d9q21=12m1l213\u02d9q21Link 2T2=12m2\u2225vc2\u22252+12I2\u02d9q21\u21d2pc2=(l1c1\u2212(q2\u2212d2)s1l1s1+ (q2\u2212d2)c1)\u21d2vc2=\u02d9pc2=(\u2212(l1s1+ (q2\u2212d2)c1) \u02d9q1\u2212s1\u02d9q2(l1c1\u2212(q2\u2212d2)s1) \u02d9q1+c1\u02d9q2)\u21d2 \u2225vc2\u22252=(l21+ (q2\u2212d2)2)\u02d9q21+ \u02d9q22+ 2l1\u02d9q1\u02d9q2\u21d2T2=12((I2+m2(l21+ (q2\u2212d2)2))\u02d9q21+m2\u02d9q22+ 2m2l1\u02d9q1\u02d9q2)=12(m2(l21+l223+q22\u2212l2q2)\u02d9q21+m2\u02d9q22+ 2m2l1\u02d9q1\u02d9q2)1In the following, the shorthand notation for trigonometric quantities is used (e.g., s13= sin ( q1+q3)).3Link 3T3=12m3\u2225vc3\u22252+12I3( \u02d9q1+ \u02d9q3)2\u21d2pc3=(l1c1\u2212q2s1+d3c13l1s1+q2c1+d3s13)\u21d2vc3=(\u2212(l1s1+q2c1+d3s13) \u02d9q1\u2212s1\u02d9q2\u2212d3s13\u02d9q3(l1c1\u2212q2s1+d3c13) \u02d9q1+c1\u02d9q2+d3c13\u02d9q3)\u21d2 \u2225vc3\u22252=(l21+q22+d23+ 2l1d3c3+ 2q2d3s3)\u02d9q21+ \u02d9q22+d23\u02d9q23+ 2 (l1+d3c3) \u02d9q1\u02d9q2+ 2d3(d3+l1c3+q2s3) \u02d9q1\u02d9q3+ 2d3c3\u02d9q2\u02d9q3\u21d2T3=12((I3+m3(l21+q22+d23+ 2l1d3c3+ 2q2d3s3))\u02d9q21+m3\u02d9q22+(I3+m3d23)\u02d9q23+ 2m3(l1+d3c3) \u02d9q1\u02d9q2+ 2 (I3+m3d3(d3+l1c3+q2s3)) \u02d9q1\u02d9q3+ 2m3d3c3\u02d9q2\u02d9q3)=12(m3(l21+l233+q22+l1l3c3+q2l3s3)\u02d9q21+m3\u02d9q22+m3l233\u02d9q23+ 2m3(l1+l32)\u02d9q1\u02d9q2+ 2m3(l233+l1l32c3+q2l32s3)\u02d9q1\u02d9q3+ 2m3l32\u02d9q2\u02d9q3)PayloadTp=12mp\u2225vp\u22252+12Ip( \u02d9q1+ \u02d9q3)2\u21d2pp=(l1c1\u2212q2s1+l3c13l1s1+q2c1+l3s13)\u21d2vp=(\u2212(l1s1+q2c1+l3s13) \u02d9q1\u2212s1\u02d9q2\u2212l3s13\u02d9q3(l1c1\u2212q2s1+l3c13) \u02d9q1+c1\u02d9q2+l3c13\u02d9q3)\u21d2 \u2225vp\u22252=(l21+q22+l23+ 2l1l3c3+ 2q2l3s3)\u02d9q21+ \u02d9q22+l23\u02d9q23+ 2 (l1+l3c3) \u02d9q1\u02d9q2+ 2l3(l3+l2c3+q3s3) \u02d9q1\u02d9q3+ 2l3c3\u02d9q2\u02d9q3\u21d2Tp=12((Ip+mp(l21+l23+q22+ 2l1l3c3+ 2q2l3s3))\u02d9q21+mp\u02d9q22+(Ip+mpl23)\u02d9q23+ 2mp(l1+l3c3) \u02d9q1\u02d9q2+ 2(Ip+mp(l23+l1l3c3+q2l3s3))\u02d9q1\u02d9q3+ 2mpl3c3\u02d9q2\u02d9q3)Therefore, fromT=T1+T2+T3+Tp=12\u02d9qTM(q)\u02d9q=123\u2211i,j=1mij(q) \u02d9qi\u02d9qjwe obtain by extraction the coefficients of \u02d9 qi\u02d9qjthe elements mij=mjiof the symmetric inertiamatrixM(q) =\uf8eb\uf8ec\uf8edm11m12m13m12m22m23m13m23m33\uf8f6\uf8f7\uf8f8, (4)4withm11=m1l213+m2(l21+l223+q22\u2212l2q2)+m3(l21+l233+q22+l1l3c3+q2l3s3)+Ip+mp(l21+l23+q22+ 2l1l3c3+ 2q2l3s3)m12= (m2+m3+mp)l1+(m3l32+mpl3)c3m13=Ip+mpl23+m3l233+(m3l32+mpl3)(l1c3+q2s3)m22=m2+m3+mpm23=(m3l32+mpl3)c3m33=m3l233+Ip+mpl23.Using the given data, we have from (3)J(\u00afq) =(\u22120.495\u22120.7071 00.4914 0.7071 0.35)and from (4)M(\u00afq) =\uf8eb\uf8ec\uf8ed5.6126 8.1899 0.61638.1899 16 0 .98990.6163 0.9899 0.4183\uf8f6\uf8f7\uf8f8.Thus, we compute numerically the solution (2) obtaining\u02d9q[i]r=J#M(\u00afq)\u02d9pd=\uf8eb\uf8ec\uf8ed\u22122.0329 0.10420.0088\u22120.07292.8365 2.8582\uf8f6\uf8f7\uf8f8(1\u22121)=\uf8eb\uf8ec\uf8ed\u22122.13710.0818\u22120.0217\uf8f6\uf8f7\uf8f8[rad/s,m/s,rad/s] .(5)For case [ii], the solution includes a null space term with the gradient of the distance functionHobs(q) between the \ufb01xed obstacle Oobsand the entire robot body R=R(q) \u2014the robot occupiesa region in the Cartesian space that depends indeed on the current con\ufb01guration q. This resultsin\u02d9q[ii]r=J#M(q)\u02d9pd+\u03b1(I\u2212J#M(q)J(q))\u2207qHobs(q)=\u03b1\u2207qHobs(q) +J#M(q)(\u02d9pd\u2212\u03b1J(q)\u2207qHobs(q)),(6)for a sufficiently small step size \u03b1>0. The distance function from the obstacle (also known as theclearance of the robot) is de\ufb01ned asHobs(q) = mina(q)\u2208 Rb\u2208 O obs\u2225a(q)\u2212b\u2225, (7)with the Euclidean norm\u2225a(q)\u2212b\u2225=\u221a(a(q)\u2212b)T(a(q)\u2212b).5Accordingly, the gradient of Hobs(q) is evaluated2as\u2207qHobs(q) =(\u2202Hobs(q)\u2202q)T=121\u2225a(q)\u2212b\u2225(\u2202a(q)\u2202q)T(a(q)\u2212b). (8)l1=0.45x0y0\ud835\udc5e'1=45\u2218\ud835\udc5e'2=0.25l3=0.35\u2a01\u2a01\u2a01l2=0.7PPobs\t=(\ud835\udc59)2+0.1,\u22120.1)\ud835\udc5e'3 =\uff0d45\u2218AB\ud835\udc91\u03074=1\u22121\ud835\udf35\ud835\udc92\ud835\udc3b89:(\ud835\udc5e')clearance(=\t\ud835\udc3b89:(\ud835\udc5e'))Figure 3: The clearance between the RPR robot and the circular obstacle Oobswhen the robot isin the con\ufb01guration \u00afq= (\u03c0/4,0.25,\u2212\u03c0/4).We use now the given data and illustrate the situation in Fig. 3. At q=\u00afq, the two points on therobotRand on the obstacle Oobsthat are giving the clearance of the robot are point Aat thelower end of the second link and point Bon the boundary of the circular obstacle (at a distancer= 0.05 [m] from its center Pobs= (0.736,\u22120.1) [m]), along the line having the same orientationof the second link. For varying q, the position of the point Aon the robot and its Jacobian area(q) =(l1c1\u2212(q2\u2212l2)s1l1s1+ (q2\u2212l2)c1)\u21d2\u2202a(q)\u2202q=(\u2212l1s1\u2212(q2\u2212l2)c1\u2212s10l1c1\u2212(q2\u2212l2)s1c10).Moreover the position of the point Bon the obstacle is given byb=pobs+ra(q)\u2212pobs\u2225a(q)\u2212pobs\u2225.Thus, we have from (7)a(\u00afq) =(0.63640),b=(0.7007\u22120.0646)\u21d2Hobs(\u00afq) =\u2225a(\u00afq)\u2212b\u2225= 0.0911 [m],with the gradient in (8) being\u2207qHobs(\u00afq) =\uf8eb\uf8ec\uf8ed0.450910\uf8f6\uf8f7\uf8f8.2The expression in (8) holds in situations when the function Hobs(q) is differentiable. This occurs when the twopoints on the robot Rand on the obstacle Oobsthat determine the minimum distance at the current con\ufb01gurationqdo not jump form one location to another. In practice, the gradient \u2207qHobs(q) is often computed numerically by\ufb01nite differences of Hobs(q) between two successive con\ufb01guration q(tk) and q(tk\u22121) attained during motion (withsome safeguarding rule to obtain bounded variations).6Setting for instance \u03b1= 1, the evaluation of (6) yields the solution\u02d9q[ii]r=\uf8eb\uf8ec\uf8ed\u22123.67421.1577\u22120.0373\uf8f6\uf8f7\uf8f8[rad/s,m/s,rad/s] . (9)Compare now the two joint velocity commands in (5) and (9). It is evident that the presence ofthe obstacle will modify the inertia-weighted minimum norm solution by pushing away the secondlink through the sliding of the second (prismatic) joint in the positive direction. In order to stillachieve the desired end-effector velocity \u02d9pdwhile compensating for this extra joint motion, the\ufb01rst robot joint in \u02d9q[ii]rwill rotate in the clockwise direction by a larger amount than in \u02d9q[i]r.", "robot": "RPR", "tags": ["planar", "horizontal"]},
 "153": {"file": "Robotics2_22.01.11.pdf", "date": "22-01-11", "num_ex": 1, "exam": "robo2", "question": "Consider a robot manipulator with nrevolute joints and with dynamic model given byM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4. (1)At timet= 0, the robot is in a state x(0) =(qT(0) \u02d9qT(0))T=(qT0\u02d9qT0)T\u2208R2n, with \u02d9q0\u0338=0.1[i] De\ufb01ne a joint torque law \u03c4=\u03c4(x,t) that is continuous w.r.t. time and that will bring therobot with a coordinated joint motion in exactlyTseconds to an equilibrium state, i.e., to anarbitrary con\ufb01guration q(T) with \u02d9q(0) = 0, where the robot will remain for all t\u2265T.[ii] According to your choice, you should be able to provide in closed form both the reached jointcon\ufb01guration qf=q(T) and the resulting initial acceleration \u00a8q0=\u00a8q(0).[iii] Consider the case of a robot with g(q)\u22610. Assume that acceleration bounds |\u00a8qi|\u2264Amax,i ,i= 1,...,n , are imposed on the already de\ufb01ned robot motion and that at least one of thejoints exceeds its bound at some time instant \u00aft\u2208[0,T]. Provide the expression of the minimumfactork >0 such that the robot trajectory resulting from an uniform scaling of the motiontime toT\u2032=kTwill satisfy all the given bounds.", "solution": "To address the general problem of a robot motion that has to be completed in a prescribed \ufb01nitetime, it is convenient to apply \ufb01rst to (1) the nonlinear feedback law\u03c4=\u03c4(q,\u02d9q,t) =M(q)u(t) +c(q,\u02d9q) +g(q), (10)obtaining the linear and decoupled system \u00a8q=u. Then, we use the acceleration command u(t),which has to be continuous w.r.t. time for all t>0, to plan a state-to-rest trajectory qd(t) in exactlyTseconds. Since the \ufb01nal con\ufb01guration is not speci\ufb01ed a priori, but the state to be reached attimet=Tshould be an equilibrium, we will impose the following minimal set of (asymmetric)boundary conditions to the interpolating trajectory:qd(0) =q0, \u02d9qd(0) = \u02d9q0\u0338= 0, \u02d9qd(T) =0, \u00a8qd(T) =0. (11)One can satisfy these conditions by choosing a cubic trajectory in normalized time \u03c3=t/T\u2208[0,1],qd(\u03c3) =a\u03c33+b\u03c32+c\u03c3+d, (12)witha\u2208Rn,b\u2208Rn,c\u2208Rn, andd\u2208Rn. The joint motion will automatically be coordinatedsince the total time Tis the same for all joints. Imposing the boundary conditions (11) on thevector function (12) leads toqd(0) =q0\u21d2d=q0, \u02d9qd(0) = \u02d9q0\u21d2c=\u02d9q0,and{\u02d9qd(1) = 0\u00a8qd(1) = 0\u21d2\uf8f1\uf8f4\uf8f2\uf8f4\uf8f31T(3a+ 2b+\u02d9q0) =01T2(6a+ 2b) =0\u21d2\uf8f1\uf8f2\uf8f3a=\u02d9q03b=\u2212\u02d9q0.As a result, we obtainqd(t) =\u02d9q03(tT)3\u2212\u02d9q0(tT)2+\u02d9q0(tT)+q0, (13)and thus the requested valuesqf=qd(T) =q0+\u02d9q03, \u00a8q0=\u00a8qd(0) =\u22122\u02d9q0T2. (14)7The actual torque law realizing the task will be given by (10) withu(t) =\uf8f1\uf8f2\uf8f3\u00a8qd(t) =2\u02d9q0T2(tT\u22121), t\u2208[0,T]0, t \u2265T.(15)We note that, after stopping the robot at time t=Tinq=qf, the applied torque (10) with (15)will become equal to \u03c4(t) =g(qf), keeping the robot in equilibrium for all times t\u2265Tas requested.The choice of a cubic function (12) is also convenient for addressing the presence of bounds onthe joint accelerations. In fact, the accelerations in (15) are linear functions of time and theirmaximum (absolute) value is always attained at t= 0, as given by the second equation in (14).We have|\u00a8qi(t)|\u2264Amax,i,\u2200t\u2208[0,+\u221e)\u21d0\u21d2 maxt\u2208[0,T]|\u00a8qd,i(t)|=2|\u02d9q0,i|T2\u2264Amax,i, i = 1,...,n.Assuming that at least one of the joints exceeds its bound during the planned motion implies thatthis will happen at t= 0. De\ufb01ne the index i\u2217of the maximum violating joint asi\u2217= arg{maxi=1,...,n|\u02d9q0,i|Amax,i}, with|\u00a8qd,i\u2217(0)|=2|\u02d9q0,i\u2217|T2>Amax,i\u2217.Then, the uniform scaling of motion time with minimum k>0 that guarantees satisfaction of allacceleration bounds is given by2|\u02d9q0,i\u2217|(kT)2=Amax,i\u2217\u21d2k=1T\u221a2|\u02d9q0,i\u2217|Amax,i\u2217>1\u21d2T\u2032=kT. (16)The absence of the gravity term g(q) plays no role in the solution. In that case, when the robotcomes to rest at the end of the motion, the control law will simply vanish ( \u03c4(t) =0, fort\u2265T).", "robot": "nR", "tags": []},
 "154": {"file": "Robotics2_22.01.11.pdf", "date": "22-01-11", "num_ex": 2, "exam": "robo2", "question": "The end effector of the PR robot in Fig. 2 is constrained to move along a line segment, betweenpointsAandB. Assume that all dissipative effects are negligible and that the robot dynamicmodel in free space has the form (1).[i] Derive the (one-dimensional) reduced dynamic model of the constrained robot and the explicitexpression of the force multiplier \u03bb\u2208R.[ii] If the end-effector has to execute a rest-to-rest motion from AtoBwith a cubic pro\ufb01le in atotal timeTwithout generating any constraint force at the contact during the motion, whatwould be the explicit expression of the control law?[iii] Using the following dataL= 1, d2= 0.6 [m], m 1= 15, m2= 8 [kg], I 2= 1.2 [kgm2],A= (0.7,2), B = (0.5,1) [m], T = 2 [s],compute at the initial time t= 0 the numerical value \u03c4(0)\u2208R2of the force/torque commandsat the joints that execute the task speci\ufb01ed in [ii].q1q2L\u2a01m1m2,I2\u2a01xyB =(xB,yB)PA =(xA,yA)g0d2Figure 2: A planar PR robot with its end effector constrained on a segment ABof a line.[210 minutes (3.5 hours); open books]2", "solution": "We derive \ufb01rst the dynamic model of the PR robot in Fig. 2 when moving in an unconstrainedway in the vertical plane (under gravity).Kinetic energy and inertia matrixT1=12m1\u02d9q21, T 2=12m2\u2225vc2\u22252+12I2\u02d9q22,pc2=(d2cosq2q1+d2sinq2)\u21d2vc2=\u02d9pc2=(\u2212d2sinq2\u02d9q2\u02d9q1+d2cosq2\u02d9q2)\u21d2 \u2225vc2\u22252= \u02d9q21+d22\u02d9q22+2d2cosq2\u02d9q1\u02d9q2\u21d2T=T1+T2=12\u02d9qTM(q)\u02d9q, withM(q) =(m1+m2m2d2cosq2m2d2cosq2I2+m2d2c2).Potential energy and gravity vectorU1=m1g0q1, U 2=m2g0(q1+ sinq2)\u21d2U=U1+U2\u21d2g(q) =(\u2202U(q)\u2202q)T=(g0(m1+m2)g0m2d2cosq2).8Coriolis and centrifugal vectorC1(q) =12((\u2202m1\u2202q)+(\u2202m1\u2202q)T\u2212(\u2202M\u2202q1))=(0 00\u2212m2d2sinq2)\u21d2c1(q,\u02d9q) =\u02d9qTC1(q)\u02d9q=\u2212m2d2sinq2\u02d9q22C2(q) =12((\u2202m2\u2202q)+(\u2202m2\u2202q)T\u2212(\u2202M\u2202q2))=0\u21d2c2(q,\u02d9q) = 0\u21d2c(q,\u02d9q) =(\u2212m2d2sinq2\u02d9q220).Dynamic modelM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4\u21d0\u21d2{(m1+m2) \u00a8q1+m2d2cosq2\u00a8q2\u2212m2d2sinq2\u02d9q22+g0(m1+m2) =\u03c41m2d2cosq2\u00a8q1+(I2+m2d22)\u00a8q2+g0m2d2cosq2=\u03c42.(17)We write next the Cartesian constraint on the end-effector position p= (px,py): pointPshouldto belong to the line Lpassing through the two points AandB. Assuming that both xA\u0338=xBandyA\u0338=yBhold true, we can use the parametric expression of the lineL:x\u2212xBxA\u2212xB=y\u2212yByA\u2212yB\u21d2P\u2208L:k(p) =py\u2212yByA\u2212yB\u2212px\u2212xBxA\u2212xB= 0. (18)Substituting the direct kinematics p=f(q) for the point Pin (18) yieldsp=f(q) =(Lcosq2q1+Lsinq2)\u21d2h(q) =k(f(q)) =q1+Lsinq2\u2212yByA\u2212yB\u2212Lcosq2\u2212xBxA\u2212xB= 0,(19)with the Jacobian of the scalar constraint given byA(q) =\u2202h(q)\u2202q=(1yA\u2212yBLcosq2yA\u2212yB+Lsinq2xA\u2212xB)\u21d2A(q)\u02d9q=0. (20)In the assumed hypothesis on the relative location of the two points AandB, the matrixA(q) isalways well de\ufb01ned and has full rank.In order to obtain the reduced dynamic model of the constrained PR robot, the basic step is tode\ufb01ne a 1\u00d72 (row) vector D(q) that is linearly independent from A(q). A simple choice is thefollowing constant matrix with rank one:D=(0yA\u2212yB)\u21d2 det(A(q)D)= 1. (21)Thus,(A(q)D)\u22121=\uf8eb\uf8ec\uf8ec\uf8edyA\u2212yB\u2212(Lcosq2yA\u2212yB+Lsinq2xA\u2212xB)01yA\u2212yB\uf8f6\uf8f7\uf8f7\uf8f8\u2206=(E F (q)).9We de\ufb01ne then the pseudo-velocity v\u2208Ron the Cartesian line and the inverse mapping to \u02d9qasv=D\u02d9q= (yA\u2212yB) \u02d9q2, \u02d9q=F(q)v=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212(Lcosq2yA\u2212yB+Lsinq2xA\u2212xB)1yA\u2212yB\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8v. (22)Being\u02d9D=0 and \u02d9A(q) =(0(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)\u02d9q2),the reduced dynamic model of the constrained PR robot is given by the single differential equation(FT(q)M(q)F(q))\u02d9v=FT(q)(\u03c4\u2212c(q,\u02d9q)\u2212g(q))+FT(q)M(q)E\u02d9A(q)F(q)v, (23)with the scalarsFT(q)M(q)F(q) = (m1+m2)(Lcosq2yA\u2212yB+Lsinq2xA\u2212xB)2+I2+m2d2c2(yA\u2212yB)2\u22122m2d2cosq2yA\u2212yB(Lcosq2yA\u2212yB+Lsinq2xA\u2212xB)andFT(q)M(q)E\u02d9A(q)F(q) =\u2212(m1+m2)(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)2\u02d9q2m2d2cosq2yA\u2212yB(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)\u02d9q2.Similarly, the multiplier \u03bb\u2208Rthat produces the normal force when attempting to violate theconstraint is\u03bb=(ETM(q)F(q))\u02d9v\u2212(ETM(q)E\u02d9A(q)F(q))v+ET(c(q,\u02d9q) +g(q)\u2212\u03c4), (24)with the scalarsETM(q)F(q) = (yA\u2212yB)(m2d2cosq2yA\u2212yB\u2212(m1+m2)(Lcosq2yA\u2212yB+Lsinq2xA\u2212xB))andETM(q)E\u02d9A(q)F(q) = (m1+m2)(yA\u2212yB)(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)\u02d9q2.The desired rest-to-rest motion from AtoBon the lineLin timeTis planned in a parametricway by de\ufb01ning the path aspd(s) =pA+spB\u2212pA\u2206, s\u2208[0,\u2206], \u2206 =\u2225pB\u2212pA\u2225=\u221a(xA\u2212xB)2+ (yA\u2212yB)2,wherepA\u2208R2andpB\u2208R2are, respectively, the position vectors of point Aand pointB, andthe timing law with a cubic pro\ufb01le ass=sd(t) = \u2206(3(tT)2\u22122(tT)3), t\u2208[0,T].10Note that the parameter sis here the actual length of the path traced during motion. The desiredpseudo-velocity and pseudo-acceleration are thenvd(t) = \u02d9sd(t) = 6\u2206tT(1\u2212tT), \u02d9vd(t) =6\u2206T2(1\u22122tT), t\u2208[0,T].At timet= 0, the position pof the robot end effector should be matched with the position pAof the point A(on the linear constraint h(q) = 0). The initial con\ufb01guration q(0) is obtained bysolving the inverse kinematics problem for the PR robotf(q) =(Lcosq2q1+Lsinq2)=(xAyA)=pA.This yields3q0=q(0) =f\u22121(pA) =\uf8eb\uf8ec\uf8edyA\u2212sin(arccos(xAL))arccos(xAL)\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8edyA\u2212\u221a1\u2212(xAL)2arccos(xAL)\uf8f6\uf8f7\uf8f7\uf8f8.Moreover, since the robot starts at rest, it is \u02d9q0=\u02d9q(0) = 0(consistently with vd(0) = 0).To execute the desired constrained motion with \u02d9 v= \u02d9vd(t) and\u03bb=\u03bbd= 0 (no forces are generatednormal to the line L), we apply the inverse constrained dynamics control law\u03c4=M(q)F(q) \u02d9vd+c(q,\u02d9q) +g(q)\u2212M(q)E\u02d9A(q)\u02d9q, (25)withM(q)F(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212(m1+m2)(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)+m2d2cosq2yA\u2212yB\u2212m2d2cosq2(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)+I2+m2d22yA\u2212yB\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8andM(q)E\u02d9A(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 (m1+m2) (yA\u2212yB)(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)\u02d9q20m2d2cosq2(yA\u2212yB)(Lcosq2xA\u2212xB\u2212Lsinq2yA\u2212yB)\u02d9q2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.At timet= 0, we have\u03c40=\u03c4(0) =M(q0)F(q0) \u02d9vd(0) +g(q0) (26)With the given numerical data, we compute the following relevant quantities: the path length andthe initial pseudo-acceleration\u2206 = 1.0198 [m], \u02d9vd(0) = 1.5297 [m/s2];the inverse kinematics solution at the point Aq0=(1.28590.7954)[m,rad];3We chose arbitrarily only one of the two inverse solutions. The other solution has a sign \u2212in front of arccosand a sign + in front of the square root.11the inertia matrix, the gravity vector, and the Fterm evaluated at the initial con\ufb01guration q0M(q0) =(23 3.363.36 4.08),g(q0) =(225.6332.96),F(q0) =(4.271).Finally, plugging in (26) the above values, we obtain\u03c40=(381.0261.15)[N,Nm].", "robot": "PR", "tags": ["planar", "vertical"]},
 "155": {"file": "Robotics2_16.10.28.pdf", "date": "16-10-28", "num_ex": 0, "exam": "robo2", "question": "x y q1 ! = '/4 (constant) #\u1f591 q2 g0 \u43a9 \u43a9Figure 1: A planar RP robot with skewed prismatic joint.Derive the inertia matrix B(q) and the gravity vector g(q) in the dynamic model of the planarRP robot in Fig. 1, using the Lagrangian coordinates q= (q1,q2) de\ufb01ned therein and assuminguniform mass distribution for the two links. Determine all equilibrium con\ufb01gurations q0under noexternal or dissipative forces/torques nor actuation inputs.", "solution": "Fori= 1,2, letmibe the mass of link iandIiits inertia around an axis normal to the planeof motion, passing through the center of mass (which is at the midpoint of the link, because ofthe assumption on uniform mass distribution). Moreover, let d>0 be the (constant) distance ofthe center of mass of link 2 (which is of unspeci\ufb01ed length) from its tip, namely from the pointcharacterized by the coordinate q2. With this in mind, we follow a Lagrangian approach andcompute the kinetic and the potential energy of the robot system in order to obtain, respectively,B(q) and g(q).The kinetic energy of the \ufb01rst link isT1=12(I1+m1(\u211312)2)\u02d9q21.For the second link, the position of the center of mass ispc2=(\u21131cosq1+ (q2\u2212d) cos (q1+\u03c0/4)\u21131sinq1+ (q2\u2212d) sin (q1+\u03c0/4)).Thus, its velocity isvc2=\u02d9pc2=(\u2212(\u21131sinq1+ (q2\u2212d) sin (q1+\u03c0/4)) \u02d9q1+ cos (q1+\u03c0/4) \u02d9q2(\u21131cosq1+ (q2\u2212d) cos (q1+\u03c0/4)) \u02d9q1+ sin (q1+\u03c0/4) \u02d9q2).The (scalar) angular velocity of link 2 is simply \u02d9 q1. As a result, the kinetic energy of the secondlink isT2=12((I2+m2(\u211321+ (q2\u2212d)2+ 2\u21131(q2\u2212d) cos (\u03c0/4)))\u02d9q21+m2\u02d9q22+ 2m2\u21131sin (\u03c0/4) \u02d9q1\u02d9q2).Therefore,T=T1+T2=12\u02d9qT(b11(q2)b12b21b22)\u02d9q=12\u02d9qTB(q)\u02d9q,from which the elements bijof the 2\u00d72, symmetric, positive de\ufb01nite inertia matrix B(q) areobtained asb11(q2) =I1+m1(\u211312)2+I2+m2(\u211321+ (q2\u2212d)2+\u21131(q2\u2212d)\u221a2)b12=b21=m2\u21131\u221a22b22=m2,where sin (\u03c0/4) = cos (\u03c0/4) =\u221a2/2 has been used.2For the potential energy U=U1+U2of the two robot links due to gravity, we use the expressionsof they-component of their center of mass:U1(q1) =m1g0(\u211312)sinq1,U2(q1,q2) =m2g0(\u21131sinq1+ (q2\u2212d) sin (q1+\u03c0/4)).Therefore, the gravity vector isg(q) =(\u2202U(q)\u2202q)T=g0((m12+m2)\u21131cosq1+m2(q2\u2212d) cos (q1+\u03c0/4)m2sin (q1+\u03c0/4)).Solving for g(q0) =0provides all equilibrium con\ufb01gurations q0. For this RP robot, there are twounforced equilibria:q0=(\u2212\u03c04d\u2212\u21131\u221a22(1 +m12m2))Tandq0=(3\u03c04d\u2212\u21131\u221a22(1 +m12m2))T.", "robot": "RP", "tags": ["planar"]},
 "156": {"file": "Robotics2_16.10.28.pdf", "date": "16-10-28", "num_ex": 1, "exam": "robo2", "question": "m1u q1 m2 q2 m3 q3 k1 k2 d d dFigure 2: A mechanical system consisting of three masses connected by linear springs.In the three-body mechanical system shown in Fig. 2, the \ufb01rst body (with mass m1>0 andpositionq1) is actuated by a force uand is connected to a second body (with mass m2>0 andpositionq2) through a spring of constant stiffness k1>0. The second body is in turn connectedto a third one (having mass m3>0 and position q3) through another spring of constant stiffnessk2>0. Each mass is subject to a dissipative force when moving on the ground, in the form of aviscous friction with coefficient d>0 (equal for all three masses).\u2022Derive the dynamic model of this system by following a Lagrangian approach and using theset of generalized coordinates q= (q1,q2,q3).\u2022Determine all equilibrium states, if any, of the system when u= 0, as well as all steady-stateconditions when a constant force u= \u00afu>0 is being applied.\u2022Prove that a control law of the formu=kp(qd\u2212q1), k p>0 (1)will globally asymptotically stabilize the closed-loop system to a unique equilibrium state(which one?). Hint: Use either a energy-based Lyapunov approach or exploit the linearity ofthe system dynamics.[150 minutes; open books]1", "solution": "By following a Lagrangian approach, we compute \ufb01rst the kinetic and the potential (elastic) energyof the mechanical system in Fig. 2:T=12(m1\u02d9q21+m2\u02d9q22+m3\u02d9q23), U =12(k1(q1\u2212q2)2+k2(q2\u2212q3)2).Applying the Euler-Lagrange equations to L=T\u2212Uand keeping into account the dissipativeforces due to viscous friction, yields the three second-order differential equationsm1\u00a8q1+k1(q1\u2212q2) =u\u2212d\u02d9q1m2\u00a8q2+k1(q2\u2212q1) +k2(q2\u2212q3) =\u2212d\u02d9q2m3\u00a8q3+k2(q3\u2212q2) =\u2212d\u02d9q3.(2)Indeed, the same result would have been obtained by Newton\u2019s law (balance of forces) applied tothe three masses.For the unforced ( u= 0) equilibrium con\ufb01gurations, we set \u02d9q=\u00a8q=0in (2) and obtain an in\ufb01nityof equilibria q0, all with equal q1=q2=q3at a common arbitrary value. The two springs will beundeformed in this rest condition.For the forced case with u= \u00afu >0, it is rather tedious but straightforward exercise (using, e.g.,Laplace transforms) to verify that the system response to a constant force input will asymptoticallyreach a steady-state condition, where all masses will be moving at the same constant speed \u02d9 q1=\u02d9q2= \u02d9q3= \u00afu/3d. This speci\ufb01c value can be found by setting \u00a8q=0in (2) and summing up the threeequations (the elastic forces cancel each other). In this steady-state condition, the deformation ofthe two springs can be computed again from the model as\u03b412=q1\u2212q2=1k12\u00afu3, \u03b4 23=q2\u2212q3=1k2\u00afu3,3being in general \u03b412\u0338=\u03b423. Note also that the steady-state deformations are independent from theactual values of the masses (these will in\ufb02uence instead the transient behavior).We can prove that the control law (1) asymptotically stabilizes the unique closed-loop equilibriumstateq1=q2=q3=qd,\u02d9q=0, by using a simple Lyapunov/LaSalle argument. De\ufb01ne theLyapunov candidate as the total system energy E=T+U, plus the control energy in the form ofa virtual spring of stiffness kp>0, with rest condition in q1=qd:V=12(m1\u02d9q21+m2\u02d9q22+m3\u02d9q23)+12(k1(q1\u2212q2)2+k2(q2\u2212q3)2+kp(qd\u2212q1)2).IndeedV\u22650, whereas V= 0 if and only if the closed-loop system is at the desired equilibriumstate. Taking the time derivative of V, using (2), and simplifying terms leads to\u02d9V=\u2212d(\u02d9q21+ \u02d9q22+ \u02d9q23)\u22640.The non-positivity of \u02d9Vis thus guaranteed by the presence of viscous friction in the mass-groundcontact (otherwise, we could inject dissipation by just adding a damping term \u2212kd\u02d9q1,kd>0, inthe control law). To complete the proof, we invoke LaSalle\u2019s theorem. From \u02d9V= 0\u21d0\u21d2 \u02d9q=0,we determine the largest invariant set of states contained in \u02d9V= 0. When \u02d9q\u22610, from the thirdequation in (2), \u00a8 q3= 0 necessarily implies q3=q2. Substituting backward in the second equationunder the same operative conditions yields necessarily q2=q1. Finally, from the \ufb01rst equation0 =m1\u00a8q1=kp(qd\u2212q1)\u2212k1(q1\u2212q2)\u2212d\u02d9q1=kp(qd\u2212q1)\u21d2q1=qd,and thus the con\ufb01guration qehavingq1=q2=q3=qdwith velocity \u02d9q=0is the only invariantstate for the closed-loop system. The result is thus proven. Since the system is linear, asymptoticstability will be equivalent to exponential stability. For the same reason, one could have analyzedthe characteristic polynomial of the closed-loop linear system, using the Routh criterion to establishstability. However, this would require longer computations in order to prove the same result.", "robot": "unknown", "tags": []},
 "157": {"file": "Robotics2_20.01.07.pdf", "date": "20-01-07", "num_ex": 0, "exam": "robo2", "question": "Consider the robot in Fig. 1 with N= 3 joints, one prismatic and two revolute. Each link of the robot hasuniformly distributed mass, center of mass on its physical link axis, and a diagonal barycentric link inertiamatrix. We assume that friction at the joints can be neglected. The robot is commanded at the joint levelby a generalized vector of forces/torques \u03c4\u2208R3.a) Derive the dynamic model of the robot in the Lagrangian form M(q)\u00a8q+c(q.\u02d9q) +g(q) =\u03c4.b) Find a linear parametrization Y(q,\u02d9q,\u00a8q)a=\u03c4of the robot dynamics in terms of a vector a\u2208Rpofdynamic coefficients and of a 3 \u00d7pregressor matrix Y. Discuss the minimality of p.c) Determine which of the 10 N= 30 dynamic parameters of the links are irrelevant for the describing themotion of the robot.d) Given a desired smooth trajectory qd(t)\u2208C2in the joint space, design for this robot an adaptive controllaw that globally asymptotically stabilizes the tracking error e(t) =qd(t)\u2212q(t) to zero, without anya priori knowledge of the robot dynamic parameters.q1q2q3g0m1m2,I2m3,I3dc2dc3l2x0y0Figure 1: A PRR robot with coordinates q= (q1q2q3)Tand relevant kinematic/dynamic parameters.", "solution": "<EMPTY>", "robot": "PRR", "tags": []},
 "158": {"file": "Robotics2_20.01.07.pdf", "date": "20-01-07", "num_ex": 1, "exam": "robo2", "question": "A number of questions and statements are reported on the Questionnaire Sheet. Fill in your answersand/or comments on the same sheet, providing also a short motivation/explanation for each item. Addyour name on the sheet and return it.[210 minutes, open books]Robotics II - Questionnaire SheetJanuary 7, 2020Name:Answer to the questions or comment the statements, providing also a short motivation/explanation foreach of the following 4 items.1. Write down the calibration equation for a planar 2R robot in which the only inaccurate values are thelink lengths l1andl2. Describe brie\ufb02y how to set up a kinematic calibration procedure in this caee.2. At a given q\u2208RN, we have to choose the velocity command \u02d9q\u2208RNthat minimizes the objectivefunction H=12\u02d9qTA\u22121\u02d9q, withA>0, while satisfying the task J\u02d9q=\u02d9x\u2208RM, with M < N andrank{J}=M. Two commands have been computed as\u02d9q\u2032=A\u22121JT(JA\u22121JT)\u22121\u02d9xand \u02d9q\u2032\u2032=J#\u02d9x\u2212(I\u2212J#J)\u2207\u02d9qH, with\u2207\u02d9qH=A\u22121\u02d9q.Which command is better? Why?3. Consider an assembly task, in which a peg having an equilateral triangle as section is to be inserted ata slow but constant speed Vin a similar hole with reduced clearance. De\ufb01ne a suitable task frame andthe natural and arti\ufb01cial constraints for this task.4. For a 2-dof RP robot in the horizontal plane, write the explicit expression of an energy-based scalarresidual, able to detect collisions when all the robot joints are in motion. Determine also which type ofcontact forces in the plane Fc\u2208R2(i.e., where they are applied on the robot, and in which direction)cannot be detected by this method, even if the robot is not at rest.", "solution": "<EMPTY>", "robot": "unknown", "tags": ["planar", "horizontal", "constraints"]},
 "159": {"file": "Robotics2_14.06.10.pdf", "date": "14-06-10", "num_ex": 0, "exam": "robo2", "question": "Consider a planar 3R robot with unitary link lengths as in Fig. 1. Taking into account therobot redundancy, a velocity control scheme is active so as to track desired end-effector positiontrajectories while trying to locally maximize the minimum Cartesian distance of the robot bodyfrom the obstacles.\u2022In the shown con\ufb01guration q= (30\u25e6,\u221230\u25e6,30\u25e6), the end-effector is assigned a unitary velocityvin the positive x0direction. Specify the velocity control scheme and provide the associatednumerical value of the command vector \u02d9q\u2208R3.\u2022Compare with a minimum velocity norm solution that neglects the presence of the obstacle.x0 y0 0.5 P ! 1+53/6vFigure 1: A planar 3R robot moving in the presence of an obstacle", "solution": "<EMPTY>", "robot": "3R", "tags": ["planar"]},
 "160": {"file": "Robotics2_14.06.10.pdf", "date": "14-06-10", "num_ex": 1, "exam": "robo2", "question": "The two-mass \ufb02exible system in Fig. 2 moves under gravity and is subject to a control force F. Theposition coordinates q1andq2have their zero in a position where the elastic spring is undeformed.\u2022Derive the dynamic model assuming that all friction effects can be neglected.\u2022Determine all forced equilibrium con\ufb01gurations of the system.\u2022Design a feedforward plus linear feedback control scheme using only measurements of theposition q1and velocity \u02d9 q1of the \ufb01rst mass, which is able to regulate the position of thesecond mass to a constant desired position q2,d.\u2022Prove the global asymptotic (actually, exponential) stability of the desired closed-loop equi-librium. Hint: The closed-loop system dynamics is affine , and a simple analysis can be madeby linearizing the system around the desired equilibrium, which removes constant terms.m1!m2!!k!!F!q1!q2!g0!Figure 2: A system of two masses m1andm2, coupled by an elastic transmission of stiffness k[180 minutes; open books]", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "161": {"file": "Robotics2_23.02.13.pdf", "date": "23-02-13", "num_ex": 0, "exam": "robo2", "question": "The torque controlled 3R planar robot in Fig. 1 moves on a horizontal plane, performing a two-dimensional trajectory task with its end-effector. The links have equal length land equal uniformlydistributed mass m, with barycentric inertia Ic=ml2/12. While at rest in the con\ufb01guration\u00afq= (\u03c0/4,\u2212\u03c0/2,\u03c0/2) [rad], the end-effector should accelerate with \u00a8pd= (1,0) [m/s2] (as in \ufb01gure).\u2295yxq2q1\ud835\udf0f2\ud835\udf0f1\u2295\u2295\ud835\udf0f3q3\ud835\udc91\u0308\ud835\udc85Figure 1: A 3R planar robot with equal links.Determine, in a parametric way with respect to landm, the torques \u03c4i\u2208R3, fori=A,B,C ,that realize instantaneously the following objectives:\u2022\u03c4Aminimizes the squared norm of the joint accelerations HA=12\u2225\u00a8q\u22252;\u2022\u03c4Bminimizes the squared norm of the absolute joint accelerations HB=12\u2225\u00a8qa\u22252, where\u00a8qa,i=i\u2211j=1\u00a8qj, i = 1,2,3;\u2022\u03c4Cminimizes the squared norm of the inertia-weighted joint accelerations HC=12\u00a8qTM(q)\u00a8q.Comment on the obtained results in terms of the control efforts at the joint level.", "solution": "For the considered instantaneous situation, we need to compute only the 2 \u00d73 Jacobian matrixJ(q) and the 3\u00d73 inertia matrix M(q) of the robot. In fact, since the robot moves on a horizontalplane (g(q)\u22610) and is currently at rest ( \u02d9q=0), its dynamic model simpli\ufb01es toM(q)\u00a8q=\u03c4, (2)while the second-order differential kinematics for the positional task becomes\u00a8p=J(q)\u00a8q. (3)Moreover, the absolute joint coordinates qaare related to qby a constant matrix:qa=\uf8eb\uf8ed1 0 01 1 01 1 1\uf8f6\uf8f8q=Tq\u21d2 \u00a8qa=T\u00a8q. (4)For a desired end-effector acceleration \u00a8pdat the current state ( q,\u02d9q) = ( \u00afq,0), being \u00afqa nonsingularcon\ufb01guration for the Jacobian, the three schemes that are locally using the robot redundancy areobtained as particular solutions of the general LQ (Linear Quadratic) optimization problem by thefollowing torques:\u2022minimization of the squared norm of the joint accelerationsHA=12\u2225\u00a8q\u22252=12\u00a8qT\u00a8qgives\u03c4A=M(\u00afq)J\u2020(\u00afq)\u00a8pd, withJ\u2020(q) =JT(q)(J(q)JT(q))\u22121; (5)\u2022minimization of the squared norm of the absolute joint accelerationsHB=12\u2225\u00a8qa\u22252=12\u2225T\u00a8q\u22252=12\u00a8qTW\u00a8qgives\u03c4B=M(\u00afq)J\u2020W(\u00afq)\u00a8pd, withJ\u2020W(q) =W\u22121JT(q)(J(q)W\u22121JT(q))\u22121, (6)where, from (4), Wis the symmetric, positive de\ufb01nite weighting matrixW=TTT=\uf8eb\uf8ed3 2 12 2 11 1 1\uf8f6\uf8f8>0 ;\u2022minimization of the squared norm of the inertia-weighted joint accelerationsHC=12\u00a8qTM(q)\u00a8q3gives\u03c4C=M(\u00afq)J\u2020M(\u00afq)\u00a8pd=JT(\u00afq)(J(\u00afq)M\u22121(\u00afq)JT(\u00afq))\u22121\u00a8pd. (7)Note that, in view of (2), this case is equivalent to the minimization of the squared norm of theinverse inertia-weighted torques:HC=12\u00a8qTM(q)\u00a8q=12(M\u22121(q)\u03c4)TM(q)(M\u22121(q)\u03c4)=12\u03c4TM\u22121(q)\u03c4.We proceed then by computing the required matrices. Note that, because of the uniform natureof the links, the symbolic factors landml2can be isolated in the computations of kinematic and,respectively, dynamic terms.Jacobianp=l(c1+c12+c123s1+s12+s123)\u21d2J(q) =\u2202p\u2202q=l(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123).Therefore, at \u00afq= (\u03c0/4,\u2212\u03c0/2,\u03c0/2 ) we haveJ(\u00afq) =l(\u22120.7071 0\u22120.70712.1213 1.4142 0.7071).Jacobian pseudoinverseJ\u2020(\u00afq) =1l\uf8eb\uf8ed\u22120.2357 0.23570.9428 0.4714\u22121.1785\u22120.2357\uf8f6\uf8f8.Jacobian weighted pseudoinverseBeingW\u22121=\uf8eb\uf8ed1\u22121 0\u22121 2\u221210\u22121 2\uf8f6\uf8f8,we obtainJ\u2020W(\u00afq) =1l\uf8eb\uf8ed\u22120.3536 0.35361.0607 0.3536\u22121.0607\u22120.3536\uf8f6\uf8f8.Kinetic energyBy the uniform mass distribution of the link, which is also considered as a thin rod, we haveT1=12m(l2)2\u02d9q21+12(112ml2)\u02d9q21=16ml2\u02d9q21.For the second link, beingvc2=\u02d9pc2=ddt(l(c1s1)+l2(c12s12))=l(\u2212s1\u02d9q1\u221212s12( \u02d9q1+ \u02d9q2)c1\u02d9q1+12c12( \u02d9q1+ \u02d9q2)),4it is\u2225vc2\u22252=l2(\u02d9q21+14( \u02d9q1+ \u02d9q2)2+c2\u02d9q1( \u02d9q1+ \u02d9q2)),and thusT2=12m\u2225vc2\u22252+12(112ml2)( \u02d9q1+ \u02d9q2)2=16ml2(4 \u02d9q21+ \u02d9q22+ 2 \u02d9q1\u02d9q2+ 3c2\u02d9q1( \u02d9q1+ \u02d9q2)).Similarly, for the third link it isvc3=\u02d9pc3=ddt(l(c1+c12s1+s12)+l2(c123s123))=l(\u2212s1\u02d9q1\u2212s12( \u02d9q1+ \u02d9q2)\u221212s123( \u02d9q1+ \u02d9q2+ \u02d9q3)c1\u02d9q1+c12( \u02d9q1+ \u02d9q2) +12c123( \u02d9q1+ \u02d9q2+ \u02d9q3)),so that\u2225vc3\u22252=l2(\u02d9q21+ ( \u02d9q1+ \u02d9q2)2+12( \u02d9q1+ \u02d9q2+ \u02d9q3)2+ 2c2\u02d9q1( \u02d9q1+ \u02d9q2) +c23\u02d9q1( \u02d9q1+ \u02d9q2+ \u02d9q3) +c3( \u02d9q1+ \u02d9q2)( \u02d9q1+ \u02d9q2+ \u02d9q3)),and thusT3=12m\u2225vc3\u22252+12(112ml2)( \u02d9q1+ \u02d9q2+ \u02d9q3)2=16ml2(7 \u02d9q21+ 4 \u02d9q22+ \u02d9q23+ 8 \u02d9q1\u02d9q2+ 2 \u02d9q1\u02d9q2+ 2 \u02d9q2\u02d9q3+ 6c2\u02d9q1( \u02d9q1+ \u02d9q2) + 3c3(( \u02d9q1+ \u02d9q2)2+ \u02d9q3( \u02d9q1+ \u02d9q2))+ 3c23\u02d9q1( \u02d9q1+ \u02d9q2+ \u02d9q3)).Finally,T=T1+T2+T3=12\u02d9qTM(q)\u02d9q.Inertia matrixRather than rewriting the lengthy terms contained in the contributions Tiof the kinetic energy,we directly evaluate numerically inertia matrix at \u00afq. Factoring out the common symbolic factorml2, one hasM(\u00afq) =ml2\uf8eb\uf8ec\uf8ed5.0000 2.1667 0.83332.1667 1.1667 0.33330.8333 0.3333 0.8333\uf8f6\uf8f7\uf8f8,with inverseM\u22121(\u00afq) =1ml2\uf8eb\uf8ec\uf8ed0.6316\u22120.6316\u22120.9474\u22120.6316 1.3816 0.1974\u22120.9474 0.1974 5.1711\uf8f6\uf8f7\uf8f8.At this stage, we can evaluate the three solutions (5)\u2013(7) obtaining\u03c4A=ml\uf8eb\uf8ec\uf8ed\u22120.11790.6678\u22120.2750\uf8f6\uf8f7\uf8f8,\u03c4B=ml\uf8eb\uf8ec\uf8ed\u22120.35360.6482\u22120.2946\uf8f6\uf8f7\uf8f8,\u03c4C=ml\uf8eb\uf8ec\uf8ed0.49500.7189\u22120.2239\uf8f6\uf8f7\uf8f8. (8)5The associated accelerations, computed as \u00a8q=M\u22121(\u00afq)\u03c4, are\u00a8qA=l\uf8eb\uf8ec\uf8ed\u22120.23570.9428\u22121.1785\uf8f6\uf8f7\uf8f8, \u00a8qB=l\uf8eb\uf8ec\uf8ed\u22120.35361.0607\u22121.0607\uf8f6\uf8f7\uf8f8, \u00a8qC=l\uf8eb\uf8ec\uf8ed0.07070.6364\u22121.4849\uf8f6\uf8f7\uf8f8. (9)There are no major differences between the three results in (8) and (9), except for the fact thatthe torque and the acceleration of the \ufb01rst joint in the inertia-weighted case Chave an oppositesign with respect to the other two cases. Moreover, solution Chas lower acceleration at joint 2and (even less) at joint 1, due to the fact that the inertia of the robot has been taken into account.This result is consistent with the intuitive idea that in a serial manipulator it is more convenient, interms of torque/acceleration efforts, to move distal joints in the chain rather than proximal ones.For comparison, consider also a fourth case in which the solution \u03c4minimizes the squared normof the torques:minHD=12\u2225\u03c4\u22252\u21d2\u03c4D=(J(\u00afq)M\u22121(\u00afq))\u2020\u00a8pd=ml\uf8eb\uf8ec\uf8ed\u22120.03390.6748\u22120.2680\uf8f6\uf8f7\uf8f8\u21d2 \u00a8qD=l\uf8eb\uf8ec\uf8ed\u22120.19370.9008\u22121.2205\uf8f6\uf8f7\uf8f8.This solution has, by construction, the minimum norm of the torque and, compared to the othercontrol torques, also by far the lowest value of torque at the \ufb01rst joint.", "robot": "3R", "tags": ["planar", "horizontal"]},
 "162": {"file": "Robotics2_23.02.13.pdf", "date": "23-02-13", "num_ex": 1, "exam": "robo2", "question": "Consider the single link under gravity in Fig. 2, with all dynamic parameters speci\ufb01ed therein.The link should perform a rest-to-rest motion from \u03b8(0) = 0 to\u03b8(T) =\u03c0(a swing-up maneuver,counterclockwise), by following a cubic polynomial interpolating trajectory \u03b8d(t) under the torquebound|u|\u2264umax. Suppose that the maximum available torque is large enough to sustain gravityin any con\ufb01guration, typically with some extra torque left for dynamic motion.d\u2295xy\ud835\udf03g0|u| \u2264 umaxm,IcFigure 2: Swing-up maneuver of a single link under maximum torque bound.1Determine the expression of the minimum time T=Tminfor performing the task, discussing anyassumption that you may introduce. Furthermore, suppose that, with a time T= 1 s, the motionis unfeasible for a given set of data. What will be the minimum uniform time scaling factor kofthe original trajectory that allows to execute the task in a feasible way?", "solution": "The dynamic model of the actuated pendulum in Fig. 2 is(Ic+md2)\u00a8\u03b8+mg0dsin\u03b8=u. (10)In the following, let I=Ic+md2. The assigned cubic trajectory for performing the swing-upmaneuver in time Tcan be written (in normalized time) as\u03b8d(t) =\u03c0(\u22122\u03c43+ 3\u03c42), \u03c4 =tT\u2208[0,1],with acceleration\u00a8\u03b8d(t) =6\u03c0T2(1\u22122\u03c4).By inverse dynamics, the torque needed to execute this trajectory is thenud(t) =6\u03c0IT2(1\u22122\u03c4) +mg0dsin(\u03c0(\u22122\u03c43+ 3\u03c42)), \u03c4\u2208[0,1]. (11)The torque (11) is the sum of two terms: a linear contribution ua(t) due to acceleration, which ismaximum in absolute value at the start and end of the trajectory, with ua(0) =\u2212ua(T) = 6\u03c0I/T2,and zero at the midpoint t=T/2; and a sinusoidal contribution ug(t) due to gravity, which is zeroat the start and end of the trajectory, always positive otherwise, and maximum at the midpoint,withug(T/2) =mg0d. It is easy to show that the superposition of the two torques will havea maximum value which occurs certainly in the \ufb01rst half of the motion (where both terms arepositive), but not necessarily at t= 0 ort=T/2 (i.e.,\u03c4= 0.5). Moreover, it is also clear thatthe faster will be the assigned trajectory (i.e., the smaller the total motion time T), the more willthe acceleration term grow and dominate the gravitatonal term, which does not change in fact itspro\ufb01le being dependent only on the con\ufb01guration \u03b8.6In Fig. 4, using the numerical dataI= 1.5 [Nm s2], mg 0d= 14.715 [Nm], (12)we report for illustration two typical situations, the \ufb01rst for a slow trajectory having Ts= 1.5 s,the second for a fast trajectory with Tf= 0.8 s. The exchanged roles of the two contributions inassessing the maximum absolute value of the torque is clear.00.10.20.30.40.50.60.70.80.91 normalized time tau = t/T-40-30-20-10010203040ua, ug, ud [Nm] torque contributions for T = 1.5 s00.10.20.30.40.50.60.70.80.91 normalized time tau = t/T-40-30-20-10010203040ua, ug, ud [Nm] torque contributions for T = 0.8 sFigure 4: The two contributions ua(t) (in red) and ug(t) (in blue) to the total driving torque ud(t)(in black): slow trajectory with Ts= 1.5 s [left]; fast trajectory with Tf= 0.8 s [right].In practice, the available torque umaxwill not only be larger that mg0d(the maximum gravityload on the link), but also capable of providing a sufficient acceleration at the time instants t= 0andt=T(whereud(t) =ua(t)), so as to quickly start and stop motion. Therefore, given asufficiently large maximum torque umax, the minimum time Tminwill be speci\ufb01ed by the value ofthe acceleration component at t= 0. Thus,ud(0) =ua(0) =6\u03c0IT2=umax\u21d2Tmin=\u221a6\u03c0Iumax. (13)Using the same data as in (12) and setting umax= 20 [Nm] leads to the optimal solution of Fig. 5,with minimum time Tmin= 1.1890 s, as evaluated from (13).00.10.20.30.40.50.60.70.80.91 normalized time tau = t/T-30-20-100102030ua, ug, ud [Nm] torque contributions for T = 1.189 sFigure 5: The two contributions ua(t) (in red) and ug(t) (in blue) in the time-optimal drivingtorqueud(t) (in black).Finally, consider again the same pendulum with umax = 18 [Nm] and set the motion time to7T= 1 s. The corresponding torque pro\ufb01le will be unfeasible sinceud(0) =6I\u03c0T2= 28.27>18 =umax.Therefore, the minimum uniform time scaling factor to recover feasibility is computed ask=\u221a6\u03c0Iumax= 1.2533>1. (14)The scaled trajectory is slower, with a longer duration Ts=kT= 1.2533 s. Feasibility is auto-matically recovered, with the bound being saturated only at instants with the largest unfeasibletorque (in absolute value). Note that, when computing the scaling factor, gravity needs not tobe removed because the maximum violating torque already occurs at an instant with zero gravitycontribution. The effect of uniform time scaling on the unfeasible trajectory is illustrated in Fig. 6.00.10.20.30.40.50.60.70.80.91 normalized time tau = t/T-30-20-100102030ua, ug, ud [Nm] torque contributions for T = 1 s00.10.20.30.40.50.60.70.80.91 normalized time tau = t/T-30-20-100102030ua, ug, ud [Nm] torque contributions for T = 1.2533 sFigure 6: The contributing and total torques for an unfeasible trajectory with T= 1 s [left] andafter uniform time scaling by k= 1.2533 [right].", "robot": "unknown", "tags": []},
 "163": {"file": "Robotics2_23.02.13.pdf", "date": "23-02-13", "num_ex": 2, "exam": "robo2", "question": "Figure 3 shows a simpli\ufb01ed one-dimensional model of two robots permanently interacting in acompliant mode at the level of their end effectors1. Compliance at the contact is modeled by aspring with stiffness K > 0. The two robots have equivalent masses m1andm2and are subject tocontrol forces F1andF2. Their positions are given by q1andq2, with the zero reference for bothvariables corresponding to when the spring has no deformation (as shown in the \ufb01gure).q1Km1m2q2F2F1Figure 3: Two masses interacting through a spring.De\ufb01ne the two control lawsF1=KP1(q1d\u2212q1)\u2212KD1\u02d9q1, F 2=KP2(q2d\u2212q2)\u2212KD2\u02d9q2, (1)with all gains strictly positive, and where the target positions q1dandq2dfor the two masses aregeneric but different (i.e., q1d\u0338=q2d). These control laws have a decentralized structure, since theyboth use feedback information only local to the controlled mass, i.e., Fiis function only of ( qi,\u02d9qi),fori= 1,2.\u2022Find the unique equilibrium state ( q,\u02d9q) = ( \u00afq,0) for the closed-loop system under the control (1).\u2022Prove the global asymptotic stability of this equilibrium state by a Lyapunov/LaSalle argument.\u2022Is the equilibrium con\ufb01guration \u00afqsuch that \u00afq1=q1dand \u00afq2=q2d? If not, how would you modifythe controllers (1), possibly keeping the decentralized structure, for the same previous targetpositions so that \u00afq=qdbecomes the unique asymptotically stable equilibrium con\ufb01guration?[180 minutes; open books]1This ideal situation is not unrealistic. In fact, it can be obtained by applying a preliminary feedback linearizingand decoupling control law in the Cartesian space to two articulated robot manipulators.2", "solution": "The dynamic model of the system of two masses with a spring in between ism1\u00a8q1+K(q1\u2212q2) =F1m2\u00a8q2+K(q2\u2212q1) =F2.(15)With the control (1), the closed-loop system becomes(m1m2)(\u00a8q1\u00a8q2)+(KD1KD2)(\u02d9q1\u02d9q2)+(K+KP1\u2212K\u2212K K +KP2)(q1q2)=(KP1q1dKP2q2d).(16)At an equilibrium ( \u02d9q=\u00a8q=0), it is then\u00afKq=(K+KP1\u2212K\u2212K K +KP2)(q1q2)=(KP1q1dKP2q2d)=KPqd=\u00afqd, (17)whereKP= diag{KP1,KP2}Since the stiffness/control matrix \u00afKis nonsingular (det \u00afK=K(KP1+KP2) +KP1KP2>0), equation (17) can be solved for the unique equilibrium con\ufb01gu-ration\u00afq=(\u00afq1\u00afq2)=\u00afK\u22121\u00afqd=1K(KP1+KP2) +KP1KP2(K(KP1q1d+KP2q2d) +KP1KP2q1dK(KP1q1d+KP2q2d) +KP1KP2q2d).(18)8The equilibrium position \u00af qiof each mass is in general different from its target value qid, fori= 1,2.From eq. (18), it follows also that only when q1d=q2d=qd(a case excluded here), it is then\u00afq1= \u00afq2=qd.To show that the unique equilibrium state ( \u00afq,0) is globally asymptotically stable (in fact, expo-nentially stable since the system is linear) one can follow in principle two ways.The \ufb01rst is to leverage the linearity of the closed-loop system dynamics (16). It can be recognizedthat the three matrices M= diag{m1,m2},D= diag{KD1,KD2}and \u00afKare all positive de\ufb01nite:this is a sufficient condition for concluding on asymptotic stability of mechanical systems in thisform. Along the same lines, one can apply tools from linear systems theory to draw the sameconclusion: e.g., by computing the four eigenvalues of system (16), once put into a state-spaceformat, and verifying that their real parts are on the left-hand side of the complex plane.The second way is to follow, as requested, a Lyapunov/LaSalle analysis. Consider the followingfunction as natural Lyapunov candidate:V=12m1\u02d9q21+12m2\u02d9q22+12K(q1\u2212q2)2+12KP1(q1d\u2212q1)2+12KP2(q2d\u2212q2)2\u22650. (19)This function is composed by the total energy of the system (kinetic and elastic potential in the\ufb01rst three terms) and by the equivalent elastic potential energy introduced by the control laws (1).Indeed,Vis always non-negative and is zero only at the equilibrium q=\u00afq, with \u02d9q=0. In fact,setting to zero the gradient of (19) with respect to q, as a necessary condition for a minimum, onehas\u2207qV=(\u2202V\u2202q)T=\u00afKq\u2212\u00afqd=0,which is exactly (17) and thus uniquely solved by \u00afq. Moreover, since \u22022V/\u2202q2=\u00afK>0, this willbe a minimum of V. By taking the time derivative of Vand evaluating it along the trajectories ofthe closed-loop system (16), we obtain after few simpli\ufb01cations:\u02d9V=...=\u2212\u00afD\u02d9q\u22640\u21d2 \u02d9V= 0\u21d0\u21d2 \u02d9q=0.When \u02d9q=0, the closed-loop system (16) simpli\ufb01es to\u00afM\u00a8q+\u00afKq=\u00afqd\u21d2 \u00a8q=\u00afM\u22121(\u00afqd\u2212\u00afKq)\u21d2 \u00a8q=0\u21d0\u21d2q=\u00afq,thanks to (17). Therefore, by LaSalle theorem, the system trajectories will globally converge tothe unique equilibrium state ( \u00afq,0) (i.e., the single element in the largest invariant set contained inthe set of states corresponding to \u02d9V= 0), which is then asymptotically stable. Again, being theconsidered system linear, asymptotic stability is equivalent here to exponential stability.Finally, a modi\ufb01cation of the control laws (1) is needed in order to enforce \u00afq=qd, i.e., to eliminatethe constant \ufb01nal position errors at steady state. A straightforward solution would be to cancelthe effect of elasticity on both masses, namely de\ufb01ning the new control laws asF1=KP1(q1d\u2212q1)\u2212KD1\u02d9q1+K(q1\u2212q2), F 2=KP2(q2d\u2212q2)\u2212KD2\u02d9q2+K(q2\u2212q1).(20)This would fully decouple the behavior of the two controlled masses, being the closed-loop system(m1m2)(\u00a8q1\u00a8q2)+(KD1KD2)(\u02d9q1\u02d9q2)+(KP1KP2)(q1\u2212q1dq2\u2212q2d)=(00). (21)It is easy to verify that mass miwould independently reach its target position qidat the equilibrium,fori= 1,2.9However, the control modi\ufb01cation (20) destroys the decentralized structure of (1), being the inputforce to each mass also a function of the position of the other mass. If the original decentralizedstructure has to be kept, one can include integral terms in the two controllers, i.e.,Fi=KPi(qid\u2212\u02d9qi)\u2212KDi\u02d9qi+KIi\u222b(qid\u2212\u02d9qi)dt, i = 1,2,and then study the conditions for the control gains KPi,KDiandKIi(i= 1,2) that guaranteeasymptotic stability of the closed-loop system. This choice has the advantage of requiring noinformation at all about the parameters of the dynamic system (except for some bounds). Asimpler solution is to include feedforward terms in the control laws (1), i.e.,Fi=KPi(qid\u2212\u02d9qi)\u2212KDi\u02d9qi+Fi,ffw, i = 1,2, (22)withFffw=(F1,ffwF2,ffw)=\u00afKqd\u2212\u00afqd=(K+KP1\u2212K\u2212K K +KP2)(q1dq2d)\u2212(KP1q1dKP2q2d)=(K\u2212K\u2212K K)(q1dq2d)=(K(q1d\u2212q2d)K(q2d\u2212q1d)).(23)The new equilibrium conditions are obtained by modifying accordingly (17) as\u00afKq=\u00afqd+Fffw=\u00afqd+\u00afKqd\u2212\u00afqd=\u00afKqd, with \u00afK>0,which has the unique solution q=qdas desired. The Lyapunov/LaSalle analysis for the con-troller (22),(23) follows then in a similar way by usingV\u2032=V+ (ad\u2212q)TFffw, withad=\uf8eb\uf8ec\uf8ed3q1d+q2d4q1d+ 3q2d4\uf8f6\uf8f7\uf8f8,which can be shown to be a suitable Lyapunov candidate, i.e., V\u2032\u22650 andV\u2032= 0 if and onlyif (q,\u02d9q) = (qd,0), obtaining eventually global asymptotic (exponential) stability of the uniqueclosed-loop equilibrium state ( qd,0). The actual veri\ufb01cation is left as an exercise to the reader.", "robot": "unknown", "tags": []},
 "164": {"file": "Robotics2_22.06.10.pdf", "date": "22-06-10", "num_ex": 0, "exam": "robo2", "question": "The PR robot in Fig. 1 moves on a horizontal plane. Its inertia matrix has the formM(q) =(A B cosq2Bcosq2C)>0. (1)Using only the symbolic coefficients A,BandCin (1), provide the expression of the regressormatrixY(q,\u02d9q,\u02d9qr,\u00a8qr) and of the complete adaptive control law that guarantees global asymptotictracking of a smooth joint trajectory qd(t), without a priori information on the values of thedynamic coefficients. Neglect all dissipative effects.q1q2yx\u2295\u2295Figure 1: A planar PR robot with the de\ufb01nition of the joint variables q1andq2.", "solution": "We compute the Coriolis and centrifugal terms using the Christoffel symbols:ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i = 1,2,wheremi(q) is thei-th column of the inertia matrix M(q). This leads toC1(q) =(0 00\u2212Bsinq2)\u21d2c1(q,\u02d9q) =\u2212Bsinq2\u02d9q22,C2(q) =O \u21d2c2(q,\u02d9q)\u22610.Accordingly, the factorization of these terms with the skew-symmetric property is trivial (beingonly a centrifugal term present):c(q,\u02d9q) =S(q,\u02d9q)\u02d9q=(0\u2212Bsinq2\u02d9q20 0)(\u02d9q1\u02d9q2)=(\u2212Bsinq2\u02d9q220).Having de\ufb01ned \u02d9qr=\u02d9qd+\u039b(qd\u2212q) =\u02d9qd+K\u22121DKP(qd\u2212q), the adaptive control law is\u03c4=\u02c6M(q)\u00a8qr+\u02c6S(q,\u02d9q)\u02d9qr+KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q)=Y(q,\u02d9q,\u02d9qr,\u00a8qr)\u02c6a+KP(qd\u2212q) +KD(\u02d9qd\u2212\u02d9q), (diagonal)KP>0,KD>0),withY(q,\u02d9q,\u02d9qr,\u00a8qr) =(\u00a8qr1\u00a8qr2cosq2\u2212\u02d9q2\u02d9q2rsinq200 \u00a8qr1cosq2 \u00a8qr2), \u02c6a=\uf8eb\uf8ec\uf8ed\u02c6A\u02c6B\u02c6C\uf8f6\uf8f7\uf8f8,and adaptation law\u02d9\u02c6a=\u0393YT(q,\u02d9q,\u02d9qr,\u00a8qr) (\u02d9qr\u2212\u02d9q), \u0393>0.", "robot": "PR", "tags": ["planar", "horizontal"]},
 "165": {"file": "Robotics2_22.06.10.pdf", "date": "22-06-10", "num_ex": 1, "exam": "robo2", "question": "A macro-micro planar 4R robot is commanded by kinematic control at the joint velocity level.The \ufb01rst two links have equal length, L1=L2=L, and the last two links are also equal in lengthbut four times shorter, L3=L4=L/4 (micro-manipulator). A trajectory pd,1(t)\u2208R2is assignedto the robot end-effector, which is the highest priority task. A second trajectory pd,2(t)\u2208R2isassigned to the tip of the second link, which is the end of the supporting macro part of the robot.Determine the arm con\ufb01gurations qsat which algorithmic singularities occur for the extendedJacobian of the two simultaneous motion tasks. Specify the additional conditions needed in suchalgorithmic singularities under which a task priority approach would enable perfect execution ofthe primary task (with some least-squares error on the secondary task).", "solution": "The two tasks of dimension m1=m2= 2 are de\ufb01ned by the following kinematics:p1=f1(q) =L(c1+c12s1+s12)+L4(c123+c1234s123+s1234)=p2+L4(c123+c1234s123+s1234),p2=f2(q) =L(c1+c12s1+s12).The associated Jacobians Ji(q) =\u2202fi(q)/\u2202q, fori= 1,2, areJ1(q) =L\uf8eb\uf8ec\uf8ec\uf8ed\u2212(s1+s12+s123+s12344)\u2212(s12+s123+s12344)\u2212s123+s12344\u2212s12344c1+c12+c123+c12344c12+c123+c12344c123+c12344c12344\uf8f6\uf8f7\uf8f7\uf8f8J2(q) =L(\u2212(s1+s12)\u2212s120 0c1+c12c12 0 0).3Sincen=m1+m2= 4, the simultaneous execution of both task leads to the square extendedJacobianJE(q) =(J1(q)J2(q))=(J11(qM,qm)J12(qM,qm)J21(qM)O)withqM= (q1,q2) andqm= (q3,q4) being respectively the variables of the macro- and micro-manipulator.The determinant of JE(q) is easily computed asdetJE(q) = detJ12(qM,qm)\u00b7detJ21(qM) =L416sinq2sinq4.In particular, sin q2= 0 corresponds certainly to a rank loss of the secondary task Jacobian J2(namely, a singularity of the square J21matrix), whereas sin q4= 0 corresponds to a singularity ofthe square block J22. However, it could be that the 2 \u00d74 primary task Jacobian J2has still fullrank even if sin q4= 0. In this case, the primary task may still be generically realized by a taskpriority strategy.The analysis of the rank de\ufb01ciencies of the extended Jacobian JEand of its sub-parts can besimpli\ufb01ed by using the following two invertible transformations (acting on the columns and on therows of the matrix).\u2022Rede\ufb01ning the joint velocity as\u02d9q=T\u02d9q\u2032withT=1L\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1 0 0 0\u22121 1 0 00\u22121 4 00 0\u22124 4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8,leads toJE(q)\u02d9q=JE(q)T\u02d9q\u2032=J\u2032E(q)\u02d9q\u2032with the simpler formJ\u2032E(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212s1\u2212s12\u2212s123\u2212s1234c1c12c123c1234\u2212s1\u2212s12 0 0c1c12 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.\u2022Expressing the task velocities in the frame rotated with joint 1,(1\u02d9p11\u02d9p2)=(0RT1(q1)OO0RT1(q1))(0\u02d9p10\u02d9p2)=(0RT1(q1)OO0RT1(q1))J\u2032E(q)\u02d9q\u2032=1J\u2032E(q)\u02d9q\u2032,further simpli\ufb01es the extended Jacobian to1J\u2032E(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0\u2212s2\u2212s23\u2212s2341c2c23c2340\u2212s2 0 01c2 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=(1J\u20321(q)1J\u20322(q)).4With the above in mind, a true algorithmic singularity occurs when sin q2\u0338= 0, i.e., the second taskJacobianJ2is full rank, the \ufb01rst task Jacobian J1is also of full rank, but the extended JacobianJEis singular, which implies then necessarily sin q4= 0. To check if this situation is at all possible,consider the simpli\ufb01ed Jacobian1J\u20321evaluated in particular for q4= 0 (but with sin q2\u0338= 0). Wehave \u2014this is labeled below as case a:1J\u20321(q)\u23d0\u23d0q4=0=(0\u2212s2\u2212s23\u2212s231c2c23c23)\u21d2 has rank = 2 (just as J1).This means that adopting a task priority solution will allow the highest priority task to be exactlyexecuted (in this case, together with the second one being also rank J2= 2), whereas inversion ofthe square extended Jacobian JEwould be impossible.A further interesting situation is when the secondary task is singular (sin q2= 0), together withthe sub-Jacobian J22of the \ufb01rst task (sin q4= 0). For instance, when q2=q4= 0 one has1J\u20321(q)\u23d0\u23d0q2=q4=0=(0 0\u2212s3\u2212s31 1c3c3)\u21d2 has rank = 2 iff sin q3\u0338= 0.Also in this situation, labeled below as case b, the task priority solution would allow a correctexecution of the highest priority task, whereas the secondary task would report an error (minimizedin a least square sense).yx\ud835\udc5d\u0307#\ud835\udc5d\u0307$yx\ud835\udc5d\u0307$\ud835\udc5d\u0307#Figure 3: Cases a(left) andb(right) of singularities for the extended Jacobian JEof the 4Rmacro-micro robot.The above two situations are depicted in Fig. 3. The task priority solutions are computed as\u02d9qTP=J#1(q)\u02d9p1+ (J2(q)P1(q))#(\u02d9p2\u2212J2(q)J#1(q)\u02d9p1), (5)whereP1(q) =I\u2212J#1(q)J1(q). In both cases, we have set the link length parameter and thetask velocities toL= 1 [m], \u02d9p1=\u02d9p2=(11)[m/s].Whenqa= (0,\u03c0/2,\u03c0/2,0) (algorithmic singularity, case a), the joint velocity (5) provides thecorrect solution for both tasks:\u02d9qTP,a =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1\u221220.80.4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s]\u21d2JE(qa)\u02d9qTP,a =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1111\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[m/s].5Whenqb= (0,0,\u03c0/2,0) (case b), the Jacobian J2of the second task is not of full rank, and thusJEis singular), the joint velocity (5) still provides the correct solution for the high-priority task\u02d9qTP,b=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0.7586\u22120.5172\u22121.793\u22120.8966\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[rad/s]\u21d2JE(qb)\u02d9qT,b=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed1101\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8[m/s].while thex-component of the second task velocity \u02d9p2is clearly not realized.", "robot": "4R", "tags": ["planar"]},
 "166": {"file": "Robotics2_22.06.10.pdf", "date": "22-06-10", "num_ex": 2, "exam": "robo2", "question": "The dynamic model of a robot with nelastic joints interacting with the environment can beexpressed by two second-order differential equations, each of dimension n,M(q)\u00a8q+S(q,\u02d9q)\u02d9q+g(q) =\u03c4J+JT(q)F (2)B\u00a8\u03b8+\u03c4J=\u03c4, (3)1named respectively, the link dynamics and the motor dynamics of the elastic joint robot. In theseequations,\u03b8\u2208Rnare the motor variables (before joint elasticity), q\u2208Rnare the link variables(after joint elasticity), and \u03c4J=KJ(\u03b8\u2212q)\u2208Rnis the elastic joint torque measured by the jointtorque sensors, with a diagonal joint stiffness matrix KJ>0. Moreover, the robot is equipped withtwo encoders per joint, measuring both \u03b8andq. The dynamic terms on the left-hand side of the topequation (2) are the same as in a rigid robot; on the right-hand side, there is also the end-effectorrobot Jacobian J(q) = (\u2202f(q)/\u2202q) associated to the Cartesian task vector x=f(q)\u2208Rmandthe related generalized Cartesian forces F\u2208Rm. On the other hand, in the bottom equation (3),the diagonal matrix B>0 collects the re\ufb02ected motor inertias, while \u03c4\u2208Rnare the input torquesavailable for control. Suppose also that m=n.\u2022Using feedback from joint torque sensors and motor velocities, design \ufb01rst a control law for \u03c4such that the motor dynamics becomesB0\u00a8\u03b8+D0\u02d9\u03b8+\u03c4J=u, for a diagonal, arbitrary small B0>0 and a suitable D0>0.\u2022Thanks to this inertial reduction, the motor dynamics is made arbitrarily fast so that we canassume\u03c4J\u2243u(this fast dynamics can be seen as if it were always at steady-state). Completethen the control design on the robot link dynamics by imposing to the Cartesian task vector x,the following impedance modelMx(q)\u00a8x+ (Sx(q,\u02d9q) +Dm)\u02d9x+Km(x\u2212xd) =F (4)wherexdis constant,Km>0 andDm>0 are desired, diagonal stiffness and damping matrices,and, assuming to work out of kinematic singularities,Mx(q) =(J(q)M\u22121(q)JT(q))\u22121,Sx(q,\u02d9q) =J\u2212T(q)S(q,q)J\u22121(q)\u2212Mx(q)\u02d9J(q)J\u22121(q).Write the \ufb01nal control law for the input torque \u03c4\u2208Rnin explicit form only in terms of the originalstate variables q,\u02d9q,\u03b8, and \u02d9\u03b8. Moreover, if an external constant force F=\u00afFis being appliedfrom the environment to the robot, which will the equilibrium x=xEat steady state and whatwill be the value \u03c4Eof the control torque \u03c4at this equilibrium?", "solution": "The \ufb01rst step in the control design is achieved simply by choosing\u03c4=(I\u2212BB\u221210)\u03c4J+BB\u221210(u\u2212D0\u02d9\u03b8). (6)Assuming that \u03c4J=u, then the rest of the procedure follows a standard impedance control designfor a task that involves a constant reference xdand when the apparent inertia is chosen as thenatural Cartesian inertia of the robot, with consistent Coriolis/centrifugal terms included in themodel to be matched. Thus, no force feedback will be required. The Cartesian model of the linkdynamics (viz., that of a rigid robot) isMx(q)\u00a8x+Sx(q,\u02d9q)\u02d9x+gx(q) =F+J\u2212T(q)u. (7)Comparing (7) with the target model (4), the equivalence is obtained by choosingu=JT(q) (Km(xd\u2212x)\u2212Dm\u02d9x+gx(q)) =JT(q) (Km(xd\u2212x)\u2212Dm\u02d9x) +g(q), (8)beinggx(q) =J\u2212T(q)g(q). Putting together eqs. (6) and (8) gives \ufb01nally\u03c4=(I\u2212BB\u221210)KJ(\u03b8\u2212q) +BB\u221210(JT(q) (Km(xd\u2212f(q))\u2212DmJ(q)\u02d9q) +g(q)\u2212D0\u02d9\u03b8).If an external constant force F=\u00afFis applied at the robot end effector, the system will \ufb01nd thesteady-state equilibriumxE=xd+K\u22121m\u00afF.The value of the control signal uat this equilibrium isuE=JT(qE)\u00afF+g(qE),where the equilibrium con\ufb01guration qEis such thatf(qE) =xE. Moreover, since the elastic torqueat steady state will be \u03c4J,E=uE, it follows from (6) that the control torque at the equilibrium is\u03c4E=uE.", "robot": "unknown", "tags": []},
 "167": {"file": "Robotics2_22.06.10.pdf", "date": "22-06-10", "num_ex": 3, "exam": "robo2", "question": "\ud835\udf03yx\u2295g0\ud835\udf0f\ud835\udf030=\u2212\ud835\udf0b2\ud835\udf03\ud835\udc47=\ud835\udf0b2t+A\u2212AT/2T\ud835\udf03\u0308(\ud835\udc61)Figure 2: A one-link arm moving under gravity and the desired joint acceleration pro\ufb01le.Consider the actuated link under gravity in Fig. 2, with the input torque bounded as |\u03c4|\u2264\u03c4max.The link should perform a rest-to-rest motion from \u03b8(0) =\u2212\u03c0/2 to\u03b8(T) =\u03c0/2 with the bang-bangacceleration pro\ufb01le \u00a8\u03b8(t) shown in the same \ufb01gure. Determine analytically the minimum feasibletimeTto execute the desired motion with this type of trajectory.[210 minutes (3.5 hours); open books]2", "solution": "The dynamics of the actuated pendulum under gravity is given byI\u00a8\u03b8+mg0dsin\u03b8=\u03c4,wherem > 0 is the link mass, d > 0 is the distance of its center of mass from the joint, andI=Ic+md2>0 is the link inertia around the joint axis at the base. With the bang-bangacceleration pro\ufb01le \u00a8\u03b8(t) given in Fig. 2, when starting at rest in \u03b8(0) =\u03b80one has by integration\u02d9\u03b8(t) ={At, t\u2208[0,T/2]A(T\u2212t), t\u2208[T/2,T]\u03b8(t) ={\u03b80+12At2, t \u2208[0,T/2]\u03b80+14AT2\u221212A(T\u2212t)2, t\u2208[T/2,T]6yielding\u03b8(T) =\u03b80+14AT2. Thus, for a rest-to-rest angular motion \u2206 = \u03b8(T)\u2212\u03b80to be executedinTseconds, the bang-bang value Aof the acceleration will have to beA=4\u2206T2.From the inverse dynamics for the desired motion, one should note that the maximum of thegravity torque \u03c4g=mg0dsin\u03b8inabsolute value occurs at\u03b8=\u00b1\u03c0/2. However, the gravity torquehas always opposite sign of the inertial torque I\u00a8\u03b8=\u00b1IA(see the dotted blue line in the right ofFig. 4), subtracting from the total torque that the actuator needs to deliver for the desired motion.Stated differently, it helps in the acceleration phase ( \u03c4g(t) has negative sign when t\u2208[0,T/2)) aswell as in the deceleration phase ( \u03c4g(t) has positive sign when t\u2208(T/2,T]). Therefore, we easilysee thatmaxt\u2208[0,T]|\u03c4(t)|=|\u03c4(T/2)|=IA=I4\u2206T2\u2264\u03c4max,i.e., att=T/2, where\u03c4g(T/2) =\u03c4g(\u03b8= 0) = 0. From this, the minimum motion time for therequired \u2206 = \u03c0isTmin=\u221a4\u2206I\u03c4max=\u221a4\u03c0I\u03c4max.t+A\u2212AT/2T\ud835\udf03\u0308(\ud835\udc61)tIA\u2212IAT\ud835\udf0f(\ud835\udc61)T/2Figure 4: The joint acceleration pro\ufb01le and the associated joint torque pro\ufb01le.", "robot": "unknown", "tags": []},
 "168": {"file": "Robotics2_23.07.10.pdf", "date": "23-07-10", "num_ex": 0, "exam": "robo2", "question": "A robot with ndegrees of freedom and dynamics (with no gravity)M(q)\u00a8q+c(q,\u02d9q) =\u03c4is redundant with respect to a m-dimensional task ( m < n ) described at the second-order differ-ential level by\u00a8y=J(q)\u00a8q+\u02d9J(q)\u02d9q,where them\u00d7ntask Jacobian Jis assumed to be full row rank. In the redundant case, the jointtorque\u03c4\u2208Rncan always be decomposed as\u03c4=JT(q)F+(I\u2212JT(q)H(q))\u03c40,whereF\u2208Rmis the task-space generalized force performing work on \u02d9y, matrixHis any gener-alized inverse of JT(i.e., such that JTHJT=JT), and\u03c40\u2208Rn.With the robot in the state ( q,\u02d9q), prove the following two statements.a) In order for an arbitrary \u03c40\u0338=0not to produce any task acceleration ( \u00a8y=0), the only choiceforHisH(q) =(J(q)M\u22121(q)JT(q))\u22121J(q)M\u22121(q), (1)namely the weighted pseudoinverse of JT, with the inverse of the robot inertia as weight.b) Based on (1), the m-dimensional dynamic model of the robot in the task space is given byMy(q)\u00a8y+cy(q,\u02d9q) =F (2)with them\u00d7mtask-space inertia matrix Myand the task-space Coriolis and centrifugal termscygiven respectively byMy(q) =(J(q)M\u22121(q)JT(q))\u22121,cy(q,\u02d9q) =My(q)(J(q)M\u22121(q)c(q,\u02d9q)\u2212\u02d9J(q)\u02d9q).", "solution": "For compactness, drop the dependencies of matrices and vectors on the current qand \u02d9q. Theproofs go as follows.a) Substitute the acceleration \u00a8qfrom the dynamic model in the expression of task acceleration \u00a8y:\u00a8y=JM\u22121(\u03c4\u2212c) +\u02d9J\u02d9q.Plugging in this the given decomposition of the joint torques leads to\u00a8y=JM\u22121(JTF+ (I\u2212JTH)\u03c40)\u2212JM\u22121c+\u02d9J\u02d9q. (3)The possible contribution of \u03c40to\u00a8yis weighted by the matrix JM\u22121(I\u2212JTH). Choosing forHthe expression (1) providesJM\u22121(I\u2212JTH) =JM\u22121(I\u2212JT(JM\u22121JT)\u22121JM\u22121)=JM\u22121\u2212JM\u22121JT(JM\u22121JT)\u22121JM\u22121=JM\u22121\u2212JM\u22121=O.Thus, with this choice \u03c40will not contribute to \u00a8y.b) With the choice (1), from eq. (3) we have\u00a8y=JM\u22121JTF\u2212JM\u22121c+\u02d9J\u02d9q.Premultipying by the inverse of JM\u22121JT, we obtain(JM\u22121JT)\u22121\u00a8y=F\u2212(JM\u22121JT)\u22121(JM\u22121c\u2212\u02d9J\u02d9q)orMy\u00a8y+cy=F,which is the task-space dynamics with the given de\ufb01nitions of Myandcy=My(JM\u22121c\u2212\u02d9J\u02d9q).", "robot": "unknown", "tags": []},
 "169": {"file": "Robotics2_23.07.10.pdf", "date": "23-07-10", "num_ex": 1, "exam": "robo2", "question": "Consider the 3-dof planar robot in Fig. 1, with one prismatic and two revolute joints, moving in avertical plane. The coordinates qto be used are de\ufb01ned in the \ufb01gure. Each link of the robot hasuniformly distributed mass mi>0,i= 1,2,3, with center of mass on its geometric axis, and adiagonal barycentric inertia matrix. The prismatic joint has a limited range q2\u2208[\u2212L2,L2], whilethe revolute joints are unlimited. The robot is commanded by a joint force/torque \u03c4\u2208R3.a) Derive the robot inertia matrix M(q).b) Derive the gravity term g(q) and \ufb01nd all unforced equilibrium con\ufb01gurations (i.e., with \u03c4=0).c) Assume that the gravity acceleration g0and the kinematic quantities L2andL3are known,while all other dynamic parameters are unknown. Provide a linear parametrization of thegravity vector g(q) =Yg(q)ag, in terms of a vector ag\u2208Rpof unknown dynamic coefficientsand a 3\u00d7pregressor matrix Yg(q). Discuss the minimality of p.1d) Provide a symbolic expression (in terms of the robot dynamic parameters and joint limits) of aconstant upper bound \u03b1>0 for the norm of the gradient of the gravity vector, i.e., such that\u2225\u2202g(q)/\u2202q\u2225\u2264\u03b1for all feasible q.q1y0x0Pq2q3L3g0L2Figure 1: A planar RPR robot, with the de\ufb01nition of the coordinates to be used q= (q1q2q3)T.", "solution": "a) The kinetic energies of the three links areT1=12I1\u02d9q21,T2=12I2\u02d9q21+12m2(\u02d9q22+(q2\u2212L22)2\u02d9q21),T3=12I3\u02d9q23+12m3(\u02d9q22+q22\u02d9q21+(L32)2\u02d9q23+L3(q2cos(q3\u2212q1) \u02d9q1\u02d9q3\u2212sin(q3\u2212q1) \u02d9q2\u02d9q3)).FromT=T1+T2+T3=12\u02d9qTM(q)\u02d9q, we obtainM(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edI1+I2+m2(q2\u2212L22)2+m3q22 0 m3q2(L32)cos(q3\u2212q1)0 m2+m3\u2212m3(L32)sin(q3\u2212q1)m3q2(L32)cos(q3\u2212q1)\u2212m3(L32)sin(q3\u2212q1)I3+m3(L32)2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.3b) The potential energies of the three links due to gravity areU1= 0, U 2=m2g0(q2\u2212L22)sinq1, U 3=m3g0(q2sinq1+L32sinq3).FromU=U1+U2+U3, we obtaing(q) =(\u2202U\u2202q)T=g0\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed((m2+m3)q2\u2212m2L22)cosq1(m2+m3) sinq1m3L32cosq3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8.The unforced equilibrium con\ufb01gurations qeare four, namelyqe=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed{0,\u03c0}m2m2+m3L22\u00b1\u03c02\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,depending on the presence of a half-rotation or not for qe1and on the chosen sign for qe3. Notethat, being qe2< L 2/2, the CoM of link 2 will always be placed opposite to the third link withrespect to the \ufb01rst joint axis.c) The linear parametrization of the gravity term isg(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8edg0(q2\u2212L22)cosq1g0q2cosq1g0sinq1g0sinq10 g0L22cosq3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8(m2m3)=Yg(q)ag,withp= 2 dynamic parameters (minimal).d) The gradient of the gravity vector is\u2202g\u2202q=g0\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\u2212((m2+m3)q2\u2212m3L22)sinq1(m2+m3) cosq1 0(m2+m3) cosq1 0 00 0 \u2212m3L32sinq3\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,which is a symmetric matrix (thus, with real eigenvalues), but not positive semi-de\ufb01nite (thus,with eigenvalues that can also be negative). Multiplying by the transpose of this matrix, we obtain(\u2202g\u2202q)T(\u2202g\u2202q)=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed((m2+m3)q2\u2212m3L22)2s21+ (m2+m3)2c21\u2212((m2+m3)q2\u2212m3L22)(m2+m3)s1c1 0\u2212((m2+m3)q2\u2212m3L22)(m2+m3)s1c1 (m2+m3)2c21 00 0 m23(L32)2s23\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,4where the shorthand notation has been used for trigonometric functions. The three real (non-negative) eigenvalues of this matrix are the two roots of\u03bb2\u2212(((m2+m3)q2\u2212m3L22)2s21+ 2 (m2+m3)2c21)\u03bb+ (m2+m3)4c41= 0or\u03bb1,2=12(((m2+m3)q2\u2212m3L22)2s21+ 2 (m2+m3)2c21)\u00b112\u221a((m2+m3)q2\u2212m3L22)4s41+ 4((m2+m3)q2\u2212m3L22)2(m2+m3)2s21c21(4)and\u03bb3=m23(L32)2s23.In order to determine a constant upper bound \u03b1such that\ued79\ued79\ued79\ued79\u2202g\u2202q\ued79\ued79\ued79\ued79=\ued6a\ued6b\ued6b\u221a\u03bbmax{(\u2202g\u2202q)T(\u2202g\u2202q)}\u2264\u03b1for all values of q, we should proceed by overbinding (trigonometric) terms in \u03bb1, i.e., in thelargest positive eigenvalue in (4) when taking the + sign, and in \u03bb3, using also the prismatic jointlimitation|q2|\u2264L2. As a result, one has0<\u03bb1\u226412(((m2+m3)L2\u2212m3L22)2+ 2 (m2+m3)2)+12\u221a((m2+m3)L2\u2212m3L22)4+ 4((m2+m3)L2\u2212m3L22)2(m2+m3)2=\u03bb1,maxand0\u2264\u03bb3\u2264m23(L32)2.Thus\u03b1= max{\u221a\u03bb1,max,m3(L32)}.", "robot": "3R", "tags": ["planar", "vertical"]},
 "170": {"file": "Robotics2_23.07.10.pdf", "date": "23-07-10", "num_ex": 2, "exam": "robo2", "question": "Consider the robotic task of inserting a sphere in a cylindrical hole having the same size (zeroclearance), as shown in Fig. 2. Assuming rigid and frictionless contacts, de\ufb01ne a task frame, thenatural constraints imposed by the geometry on the generalized velocity/force quantities expressedin this task frame, and the arti\ufb01cial constraints that can be taken as reference values by a hybridforce-velocity control law for the execution of this sphere-in-hole task with minimum effort.Figure 2: Sphere-in-hole task.Provide a basis for the space of admissible twists V= (vT\u03c9T)T\u2208R6and a complementary basisfor the space of reaction wrenches F= (fTmT)T\u2208R6. Discuss how measurements that areinconsistent with the geometric model are being handled by an hybrid force-velocity control law,and give two examples of such inconsistent measurements, one related to motion and one relatedto interaction.[180 minutes; open books (for the complete exam)][90 minutes, open books (for students with accepted midterm grade)]2", "solution": "See the summary in Fig. 3. The assigned zero values to selected arti\ufb01cial constraints represent theexecution of the task with minimum effort, whereas vd>0 is the desired speed of insertion. Basisfor the required spaces are given byV=T\uf8eb\uf8ec\uf8ec\uf8edvz\u03c9x\u03c9y\u03c9z\uf8f6\uf8f7\uf8f7\uf8f8,withT=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 01 0 0 00 1 0 00 0 1 00 0 0 1\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f85txtytz\ud835\udc63!=0\ud835\udc63'=0\ud835\udc53#=0\ud835\udc5a!=0\ud835\udc5a'=0\ud835\udc5a#=0\ud835\udc53!=\ud835\udc53!,%=0\ud835\udc53'=\ud835\udc53',%=0\ud835\udc63#=\ud835\udc63%\ud835\udf14!=\ud835\udf14!,%=0\ud835\udf14'=\ud835\udf14',%=0\ud835\udf14#=\ud835\udf14#,%=0naturalconstraintsartificialconstraintsFigure 3: The task frame for the sphere-in-hole problem, with the natural and arti\ufb01cial constraints.andF=Y(fxfy),withY=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed1 00 10 00 00 00 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8,which are in the simple form of columns of 0/1 selection matrices. Indeed, TTY=O. Examplesof measurements that would be inconsistent with the model are a velocitytvx\u0338= 0 (e.g., due tocontact compliance) or a forcetfz\u0338= 0 (due to sliding friction at the contact).", "robot": "unknown", "tags": ["constraints"]},
 "171": {"file": "Robotics2_Midterm_Test_2017-18_18.04.26.pdf", "date": "18-04-26", "num_ex": 0, "exam": "robo2", "question": "Consider the 4-dof planar robot in Fig. 1. The robot has the \ufb01rst two joints prismatic and the lasttwo joints revolute, and moves in a vertical plane.\u2022Using the generalized coordinates q\u2208R4and the dynamic parameters de\ufb01ned in Fig. 1,determine the symbolic expression of the dynamic model of this robot using a Lagrangianformulation and considering also the presence of viscous friction at the joints.\u2022Assume that all kinematic parameters as well as the acceleration of gravity ( g0= 9.81) areknown. Provide a linear parameterization of the obtained dynamic model in the formY(q,\u02d9q,\u00a8q)a=u, (1)whereu\u2208R4is the generalized force provided by the motors at the joints, and the vector ofdynamic coefficients a\u2208Rphas the minimum possible dimension p.y q3 x g0 q4 q2 q1 \u43a9!\u43a9!\u43a9!\u43a9!m2,I2 m3,I3 m4,I4 m1,I1 d1 d2 d4 d3 l3Figure 1: A 4-dof planar 2P2R robot, with associated coordinates qand dynamic data.", "solution": "Kinetic energyFirst two links:T1=12m1\u02d9q21, T 2=12m1(\u02d9q21+ \u02d9q22).Third link:pc3=(pc3,xpc3,y)=(q1+d3cosq3q2+d3sinq3)\u21d2vc3=\u02d9pc3=(\u02d9q1\u2212d3sinq3\u02d9q3\u02d9q2+d3cosq3\u02d9q3), \u03c9 3= \u02d9q3\u21d2T3=12m3(\u02d9q21+ \u02d9q22+d23\u02d9q23+ 2d3\u02d9q3( \u02d9q2cosq3\u2212\u02d9q1sinq3))+12I3\u02d9q23.Fourth link:pc4=(pc4,xpc4,y)=(q1+l3cosq3+d4cos(q3+q4)q2+l3sinq3+d4sin(q3+q4))\u21d2vc4=\u02d9pc4=(\u02d9q1\u2212l3sinq3\u02d9q3\u2212d4sin(q3+q4)( \u02d9q3+ \u02d9q4)\u02d9q2+l3cosq3\u02d9q3+d4cos(q3+q4)( \u02d9q3+ \u02d9q4)), \u03c9 4= \u02d9q3+ \u02d9q4\u21d2T4=12m4(\u02d9q21+ \u02d9q22+l23\u02d9q23+d24( \u02d9q3+ \u02d9q4)2+ 2l3\u02d9q3( \u02d9q2cosq3\u2212\u02d9q1sinq3) + 2l3d4cosq4\u02d9q3( \u02d9q3+ \u02d9q4)+ 2d4( \u02d9q3+ \u02d9q4) ( \u02d9q2cos(q3+q4)\u2212\u02d9q1sin(q3+q4)))+12I4( \u02d9q3+ \u02d9q4)2.Robot inertia matrixFromT=4\u2211i=1Ti=12\u02d9qTB(q)\u02d9q=124\u2211i=14\u2211j=1bij(q) \u02d9qi\u02d9qj,we obtain the elements bij=bjiof the symmetric inertia matrix B(q) asb11=m1+m2+m3+m4b12= 0b13=\u2212(m3d3+m4l3) sinq3\u2212m4d4sin(q3+q4)b14=\u2212m4d4sin(q3+q4)b22=m2+m3+m4b23= (m3d3+m4l3) cosq3+m4d4cos(q3+q4)b24=m4d4cos(q3+q4)b33=I3+m3d23+I4+m4d24+m4l23+ 2m4d4l3cosq4b34=I4+m4d24+m4d4l3cosq4b44=I4+m4d24.Note that the inertia matrix is only a function of q3andq4.3Minimal parametrization of the inertia matrixWe can collect the dynamic parameters appearing in the robot inertia matrix into 6 dynamiccoefficients, which are de\ufb01ned as follows:a1=m1+m2+m3+m4a2=m2+m3+m4a3=I3+m3d23+I4+m4d24+m4l23a4=I4+m4d24a5=m4d4a6=m3d3+m4l3.(5)As a result, the inertia matrix B(q) takes the more compact, linearly parametrized formB(q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8eda1 0\u2212a6s3\u2212a5s34\u2212a5s340 a2a6c3+a5c34a5c34\u2212a6s3\u2212a5s34a6c3+a5c34a3+ 2a5l3c4a4+a5l3c4\u2212a5s34 a5c34a4+a5l3c4a4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8, (6)where the shorthand notation for trigonometric functions was used (e.g., s34= sin(q3+q4)).Indeed,l3could also be incorporated into the coefficient a6, but this would lead, as we shall see,to an additional dynamic coefficient in the de\ufb01nition of the gravity terms.Coriolis and centrifugal termsDe\ufb01ning bybitheith column of the inertia matrix B(q), we compute the components of theCoriolis and centrifugal vector c(q,\u02d9q) using the Christoffel symbols:ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202bi\u2202q+(\u2202bi\u2202q)T\u2212\u2202B\u2202qi), i = 1,..., 4.This is tedious, but straightforward. For the four components we obtain:C1(q) =12\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6c3\u2212a5c34\u2212a5c340 0\u2212a5c34\u2212a5c34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6c3\u2212a5c34\u2212a5c340 0\u2212a5c34\u2212a5c34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u2212O\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6c3\u2212a5c34\u2212a5c340 0\u2212a5c34\u2212a5c34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u21d2c1(q,\u02d9q) =\u2212a5c34( \u02d9q3+ \u02d9q4)2\u2212a6c3\u02d9q23C2(q) =12\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6s3\u2212a5s34\u2212a5s340 0\u2212a5s34\u2212a5s34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6s3\u2212a5s34\u2212a5s340 0\u2212a5s34\u2212a5s34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u2212O\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0\u2212a6s3\u2212a5s34\u2212a5s340 0\u2212a5s34\u2212a5s34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u21d2c2(q,\u02d9q) =\u2212a5s34( \u02d9q3+ \u02d9q4)2\u2212a6s3\u02d9q234C3(q) =12\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0\u2212a6c3\u2212a5c34\u2212a5c340 0\u2212a6s3\u2212a5s34\u2212a5s340 0 0 \u22122a5l3s40 0 0 \u2212a5l3s4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 0\u2212a6c3\u2212a5c34\u2212a6s3\u2212a5s34 0 0\u2212a5c34\u2212a5s34\u22122a5l3s4\u2212a5l3s4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u2212\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 \u2212a6c3\u2212a5c34\u2212a5c340 0 \u2212a6s3\u2212a5s34\u2212a5s34\u2212a6c3\u2212a5c34\u2212a6s3\u2212a5s34 0 0\u2212a5c34\u2212a5s34 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0 0\u2212a5l3s40 0\u2212a5l3s4\u2212a5l3s4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u21d2c3(q,\u02d9q) =\u2212a5l3s4\u02d9q4(2 \u02d9q3+ \u02d9q4)C4(q) =12\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0\u2212a5c34\u2212a5c340 0\u2212a5s34\u2212a5s340 0 0\u2212a5l3s40 0 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8+\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 0\u2212a5c34\u2212a5s34 0 0\u2212a5c34\u2212a5s34\u2212a5l3s40\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u2212\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0\u2212a5c34\u2212a5c340 0\u2212a5s34\u2212a5s34\u2212a5c34\u2212a5s34\u22122a5l3s4\u2212a5l3s4\u2212a5c34\u2212a5s34\u2212a5l3s4 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0 0 0 00 0 0 00 0a5l3s400 0 0 0\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8\u21d2c4(q,\u02d9q) =a5l3s4\u02d9q23.Summarizing, we have a very short \ufb01nal expression:c(q,\u02d9q) =\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212a5c34( \u02d9q3+ \u02d9q4)2\u2212a6c3\u02d9q23\u2212a5s34( \u02d9q3+ \u02d9q4)2\u2212a6s3\u02d9q23\u2212a5l3s4\u02d9q4(2 \u02d9q3+ \u02d9q4)a5l3s4\u02d9q23\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8. (7)Potential energy and gravity termsU1= 0, U 2=m2g0(q2\u2212d2), U 3=m3g0pc3,y=m3g0(q2+d3sinq3),U4=m4g0pc4,y=m4g0(q2+l3sinq3+d4sin(q3+q4)) [all de\ufb01ned up to a constant].5FromU=\u221141Ui, we haveg(q) =(\u2202U\u2202q)T=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0(m2+m3+m4)g0(m3d3+m4l3)g0c3+m4d4g0c34m4d4g0c34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed0a2g0a6g0c3+a5g0c34a5g0c34\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8, (8)where the three previously de\ufb01ned dynamic coefficents a2,a5, anda6have been used.Complete dynamic model with viscous frictionUsing the expressions eqs. (6), (7), and (8), and considering the presence of viscous friction actingat the individual joints, we haveB(q)\u00a8q+c(q,\u02d9q) +g(q) +\uf8eb\uf8ec\uf8ec\uf8ec\uf8edfv1\u02d9q1fv2\u02d9q2fv3\u02d9q3fv4\u02d9q4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8=u. (9)By de\ufb01ning the four more dynamic coefficientsa7=fv1, a 8=fv2, a 9=fv3, a 10=fv4,we conclude that the robot dynamic model depends linearly on a total of p= 10 dynamic co-efficients, which can be organized in the vector a\u2208R10. This is also the minimal number ofcoefficients in the present case.Linear parametrizationThe robot dynamic model (9) can be expressed in the linearly parametrized formY(q,\u02d9q.\u00a8q)a=uwhere the 4\u00d710 matrixYis given byY=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u00a8q10000\u00a8q2+g00000\u00a8q3000\u00a8q4\u00a8q3+ \u00a8q4Y5Y6\u02d9q10000\u02d9q20000\u02d9q30000\u02d9q4\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.(10)The expressions of the \ufb01fth and sixth columns of this matrix areY5=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212s34(\u00a8q3+ \u00a8q4)\u2212c34( \u02d9q3+ \u02d9q4)2c34(\u00a8q3+ \u00a8q4)\u2212s34( \u02d9q3+ \u02d9q4)2l3c4(2\u00a8q3+ \u00a8q4) +c34(\u00a8q2+g0)\u2212s34\u00a8q1\u2212l3s4\u02d9q4(2 \u02d9q3+ \u02d9q4)l3c4\u00a8q3+c34(\u00a8q2+g0)\u2212s34\u00a8q1+l3s4\u02d9q23\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8andY6=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed\u2212s3\u00a8q3\u2212c3\u02d9q23c3\u00a8q3\u2212s3\u02d9q23c3(\u00a8q2+g0)\u2212s3\u00a8q10\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.6", "robot": "2P2R", "tags": ["planar", "vertical"]},
 "172": {"file": "Robotics2_Midterm_Test_2017-18_18.04.26.pdf", "date": "18-04-26", "num_ex": 1, "exam": "robo2", "question": "A 2-dof robot has the inertia matrixB(q) =(a1+ 2a2cosq2a3+a2cosq2a3+a2cosq2a3). (2)\u2022Find two matrices S1(q,\u02d9q) andS2(q,\u02d9q) factorizing the Coriolis and centrifugal terms c(q.\u02d9q)(i.e.,Si(q,\u02d9q)\u02d9q=c(q,\u02d9q), fori= 1,2), such that \u02d9B\u22122S1is skew-symmetric, while \u02d9B\u22122S2is not.\u2022Assume that the robot is on a horizontal plane. The second joint should be moved along acubic trajectory by an angle \u2206 q2from rest to rest in a given time T >0, while the \ufb01rst link iskept still. Provide the symbolic expression of the torque \u03c4(0)\u2208R2that needs to be appliedat initial time t= 0 in order to start correctly the execution of this motion.\u2022Give the value of \u03c4(0) for the following numerical dataa1= 17, a 2= 5, a 3= 3, q 2(0) =\u2212\u03c02,\u2206q2=\u03c02, T = 2 s,and explain the physical meaning of the signs of its two components.1", "solution": "From the inertia matrix (2) of the robot, the matrices of Christoffel symbols are computed asC1(q) =(0\u2212a2sinq2\u2212a2sinq2\u2212a2sinq2),C2(q) =(a2sinq200 0), (11)leading to the Coriolis and centrifugal termsc(q,\u02d9q) =(\u02d9qTC1(q)\u02d9q\u02d9qTC2(q)\u02d9q)=(\u2212a2sinq2(2 \u02d9q1\u02d9q2+ \u02d9q22)a2sinq2\u02d9q21). (12)Moreover, the time derivative of the inertia matrix is\u02d9B=(\u22122a2sinq2\u02d9q2\u2212a2sinq2\u02d9q2\u2212a2sinq2\u02d9q2 0). (13)A factorization S(q,\u02d9q)\u02d9qof (12) that satis\ufb01es the skew-symmetry of \u02d9B\u22122Sis found using directlythe matrices (11) of Christoffel symbols. It is easy to check that the matrixS1(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q))=(\u2212a2sinq2\u02d9q2\u2212a2sinq2( \u02d9q1+ \u02d9q2)a2sinq2\u02d9q1 0)(14)provides\u02d9B\u22122S1=(0 a2sinq2(2 \u02d9q1+ \u02d9q2)\u2212a2sinq2(2 \u02d9q1+ \u02d9q2) 0),satisfying the desired skew-symmetric property. On the other hand, a feasible factorization thatuses the matrixS2(q,\u02d9q) =(\u22122a2sinq2\u02d9q2\u2212a2sinq2\u02d9q2a2sinq2\u02d9q1 0)(15)provides\u02d9B\u22122S2=(2a2sinq2\u02d9q2a2sinq2\u02d9q2\u2212a2sinq2(2 \u02d9q1+ \u02d9q2) 0),which is clearly not a skew-symmetric matrix.For the second part of the exercise, we need to solve a simple inverse dynamics problem. Sincethe robot moves on a horizontal plane, we have g(q)\u22610. Moreover, the desired motion starts att= 0 with zero joint velocity, so that c(q(0),\u02d9q(0)) = 0as well. Finally, the \ufb01rst link should notmove, so that \u00a8 q1\u22610. The dynamic equations at the initial instant become thenB(q(0))(0\u00a8q2(0))=\u03c4(0).Since the second joint should perform a rest-to-rest motion of \u2206 q2in timeTwith a cubic trajectory,we haveq2(t) =q2(0) + \u2206q2(3(tT)2\u22122(tT)3)\u21d2 \u00a8q2(0) =6\u2206q2T2.Therefore, the required initial torque at the two joints is\u03c4(0) =(a3+a2cosq2(0)a3)6\u2206q2T2. (16)7Replacing the given numerical data in (16), we obtain\u03c4(0) =(7.06867.0686)[Nm].Sincea3>0 (always), the torque at the second joint will have the same sign of the desireddisplacement/acceleration of that joint. In the present case, also the \ufb01rst torque is positive (andequal to the second one, being cos q2(0) = 0). This positive (counterclockwise) torque is needed tocontrast the clockwise motion that the \ufb01rst link would otherwise have, due to the inertial couplingwith the instantaneous acceleration of the second link.", "robot": "2R", "tags": ["horizontal"]},
 "173": {"file": "Robotics2_Midterm_Test_2017-18_18.04.26.pdf", "date": "18-04-26", "num_ex": 2, "exam": "robo2", "question": "Having de\ufb01ned a n-dimensional vector qof generalized coordinates, the dynamic model of a rigidrobot in a Lagrangian formulation is obtained writing the Euler-Lagrange equations for L=T\u2212U,whereTis the kinetic energy and Uis the potential energy of the robot. In the frictionless case,the model takes the usual second-order differential expressionB(q)\u00a8q+c(q,\u02d9q) +g(q) =u. (3)On the other hand, one can also rely on the use of the total energy of a robot, H=T+U, theso-called Hamiltonian of the system. Using the generalized momentum p=B(q)\u02d9q\u2208Rn, provethat the (\ufb01rst-order) dynamic equations of the robot in a state-space format can be written in theso-called Hamiltonian form(\u02d9q\u02d9p)=(O I n\u2212InO)(\u2207qH\u2207pH)+(OIn)u, (4)whereInis then\u00d7nidentity matrix and \u2207xH= (\u2202H/\u2202x)Tis an-dimensional (column) vector.", "solution": "In a Lagrangian formulation, we haveL(q,\u02d9q) =T(q,\u02d9q)\u2212U(q) =12\u02d9qTB(q)\u02d9q\u2212U(q)and thusddt(\u2202L\u2202\u02d9q)T\u2212(\u2202L\u2202q)T=B(q)\u00a8q+\u02d9B(q)\u02d9q\u221212col{\u02d9qT\u2202B\u2202qi\u02d9q}+(\u2202U\u2202q)T=B(q)\u00a8q+c(q,\u02d9q)+g(q) =u,(17)wherec(q,\u02d9q) =\u02d9B(q)\u02d9q\u221212col{\u02d9qT\u2202B\u2202qi\u02d9q}=12col{\u02d9qT[\u2202bi\u2202q+(\u2202bi\u2202q)T\u2212\u2202B\u2202qi]\u02d9q},g(q) =(\u2202U\u2202q)T,beingx= col{xi}an-dimensional column vector with xias theith component, for i= 1,...,n .Since \u02d9q=B\u22121(q)p, it is easy to see that the Hamiltonian can be rewritten as a function of thegeneralized coordinates qand the generalized momentum ponly:H(q,p) =T(q,p) +U(q) =12pTB\u22121(q)p+U(q).We compute then the partial derivatives\u2207pH=(\u2202H\u2202p)T=\u2207pT=B\u22121(q)p,\u2207qH=(\u2202H\u2202q)T=\u2207qT+\u2207qU=12col{pT\u2202B\u22121\u2202qip}+g(q).(18)Differentiating w.r.t. time p=B(q)\u02d9qand using (17), it is\u02d9p=B(q)\u00a8q+\u02d9B(q)\u02d9q=u+12col{\u02d9qT\u2202B\u2202qi\u02d9q}\u2212g(q) =u+12col{pTB\u22121\u2202B\u2202qiB\u22121p}\u2212g(q).(19)Moreover, from the identityB(q)B\u22121(q) =I\u21d2\u2202\u2202qi(B(q)B\u22121(q))=(\u2202\u2202qiB(q))B\u22121(q) +B(q)(\u2202\u2202qiB\u22121(q))=O,8we obtain the general property\u2202B\u22121\u2202qi=\u2212B\u22121\u2202B\u2202qiB\u22121. (20)Replacing (20) in (19) leads to\u02d9p=u\u221212col{pT\u2202B\u22121\u2202qip}\u2212g(q).As a result, using also eq. (18) one can write\u02d9q=B\u22121(q)p=\u2207pH\u02d9p=\u2212(12col{pT\u2202B\u22121\u2202qip}+g(q))+u=\u2212\u2207qH+u,which can be immediately rearranged in the form of the stated equations (4).", "robot": "unknown", "tags": []},
 "174": {"file": "Robotics2_Midterm_Test_2017-18_18.04.26.pdf", "date": "18-04-26", "num_ex": 3, "exam": "robo2", "question": "Consider the PPR planar robot in Fig. 2 and the coordinates q\u2208R3given therein. The length ofthe third link is l>0. Assume that the Cartesian task to be performed by this robot is de\ufb01ned interms of the position p\u2208R2of its end effector. Denote the associated task Jacobian as J(q).y q3 x p q2 q1 lFigure 2: A 3-dof planar PPR robot, with associated coordinates q.\u2022Find the joint velocity \u02d9qthat minimizes12\u2225\u02d9q\u22252while realizing a desired task velocity \u02d9p. Whenthe linear quantities in the problem are \ufb01rst expressed in [m] and [m/s] units and then in [cm]and [cm/s] units, the solution does not remain the same. Why? Illustrate this by computingthe numerical solution with the following data: l= 0.5 [m] = 50 [cm], q3=\u03c0/6 [rad],\u02d9p= (\u22121 1)T[m/s] = (\u2212100 100)T[cm/s].\u2022With a weighted pseudoinverse solution, may the above issue be resolved using a suitablediagonal weighting matrix W>0? Illustrate your conclusion by reconsidering the samenumerical example of the previous item. Provide also an interpretation of the role of weighting.\u2022Using again another weighted pseudoinverse, show than it is possible to realize a genericCartesian task velocity \u02d9pby moving almost only the \ufb01rst two joints of the PPR robot. Illustratethis on the same previous numerical example.[270 minutes (4.5 hours); open books, but no computer or smartphone]2", "solution": "The task Jacobian of the planar PPR robot is given byJ(q) =(1 0\u2212lsinq30 1lcosq3), (21)with\u02d9p=J(q)\u02d9q, \u02d9p\u2208R2, \u02d9q\u2208R3.Clearly, the Jacobian (21) is always of maximum rank \u03c1= 2. Therefore, the minimum norm jointvelocity that realizes a desired \u02d9pis provided by\u02d9q=J#(q)\u02d9p, (22)where the pseudoinverse matrix takes the explicit expressionJ#(q) =JT(q)(J(q)JT(q))\u22121=11 +l2\uf8eb\uf8ec\uf8ed1 +l2cos2q3l2sinq3cosq3l2sinq3cosq31 +l2sin2q3\u2212lsinq3lcosq3\uf8f6\uf8f7\uf8f8, (23)being det(JJT) = 1 +l2. When looking at the elements of the matrix in (23), it is easy to realizethat there is a problem of unit inconsistency. In particular, the expression of the determinant ofJJTconsists of the sum of a non-dimensional quantity and of one having dimension of length tothe square. As a matter of fact, the robot has joints of different nature. Therefore, the norm \u2225\u02d9q\u2225has mixed expressions and its minimization leads in general to different solutions, depending onthe units chosen for the linear and the angular quantities.For illustration, if we evaluate the solution (22) with the given numerical data using [m] as linearunit,l= 0.5 [m], q 3=\u03c0/6 [rad], \u02d9p=(\u221211)[m/s],we obtain\u02d9q=\uf8eb\uf8ec\uf8ed0.95 0.08660.0866 0.85\u22120.2 0.3464\uf8f6\uf8f7\uf8f8(\u221211)=\uf8eb\uf8ec\uf8ed\u22120.86340.76340.5464\uf8f6\uf8f7\uf8f8[m/s][m/s][rad/s]. (24)9Instead, when using [cm] as the linear unit,l= 50 [cm], q 3=\u03c0/6 [rad], \u02d9p=(\u2212100100)[cm/s],we obtain\u02d9q=\uf8eb\uf8ec\uf8ed0.7501 0.43280.4328 0.2503\u22120.01 0.0173\uf8f6\uf8f7\uf8f8(\u2212100100)=\uf8eb\uf8ec\uf8ed\u221231.72\u221218.252.731\uf8f6\uf8f7\uf8f8[cm/s][cm/s][rad/s]=\uf8eb\uf8ec\uf8ed\u22120.3172\u22120.18252.731\uf8f6\uf8f7\uf8f8[m/s][m/s][rad/s],(25)which is completely different (in all components) with respect to (24).Consider now the use of a weighted pseudoinverse to de\ufb01ne a solution as\u02d9q=J#W(q)\u02d9p, (26)where, being the task Jacobian always of full rank, we can use the explicit expressionJ#W(q) =W\u22121JT(q)(J(q)W\u22121JT(q))\u22121. (27)Since the issue here is the different nature of the \ufb01rst two joints (prismatic) with respect to the lastone (revolute), it makes sense to focus our attention to a diagonal weighting matrix of the formW=\uf8eb\uf8ec\uf8ed11w\uf8f6\uf8f7\uf8f8, withw>0. (28)When computing the inverse matrix in (27), one gets(J(q)W\u22121JT(q))\u22121=\uf8eb\uf8ec\uf8ec\uf8ed1 +l2wsin2q3l2wsinq3cosq3l2wsinq3cosq31 +l2wcos2q3\uf8f6\uf8f7\uf8f7\uf8f8and det(JW\u22121JT)= 1 +l2w.Therefore, the choice w=l2in (28) would eliminate the presence of terms with dimensional unitsin this key expression (in particular, the determinant would become equal to 2). In fact, with thischoice the \ufb01nal expression of such a properly weighted pseudoinverse isJ#W(q) =12\uf8eb\uf8ec\uf8ec\uf8ed1 + cos2q3sinq3cosq3sinq3cosq31 + sin2q3\u2212sinq3lcosq3l\uf8f6\uf8f7\uf8f7\uf8f8. (29)Evaluating the solution (26) with w=l2in the previous numerical example, and using [m] aslinear unit,l= 0.5 [m], q 3=\u03c0/6 [rad], \u02d9p=(\u221211)[m/s],we obtain\u02d9q=\uf8eb\uf8ec\uf8ed0.875 0.21650.2165 0.625\u22120.5 0.866\uf8f6\uf8f7\uf8f8(\u221211)=\uf8eb\uf8ec\uf8ed\u22120.65850.40851.366\uf8f6\uf8f7\uf8f8[m/s][m/s][rad/s]. (30)10When using [cm] as the linear unit,l= 50 [cm], q 3=\u03c0/6 [rad], \u02d9p=(\u2212100100)[cm/s],we obtain in this case\u02d9q=\uf8eb\uf8ec\uf8ed0.875 0.21650.2165 0.625\u22120.005 0.0087\uf8f6\uf8f7\uf8f8(\u2212100100)=\uf8eb\uf8ec\uf8ed\u221265.8484\u221240.84941.366\uf8f6\uf8f7\uf8f8[cm/s][cm/s][rad/s]=\uf8eb\uf8ec\uf8ed\u22120.65850.40851.366\uf8f6\uf8f7\uf8f8[m/s][m/s][rad/s],(31)which is exactly the solution (30) already obtained with the other linear units.The role of the suitable weighting w=l2on the velocity of the third joint can be given the followinginterpretation. The general solution (26) minimizes the objectiveH=12\u2225\u02d9q\u22252W=12\u02d9qTW\u02d9q=12(\u02d9q21+ \u02d9q22+w\u02d9q23)=12(\u02d9q21+ \u02d9q22+ (l\u02d9q3)2),subject to the task constraint J(q)\u02d9q=\u02d9p. Therefore, this (unique!) weight will equalize the cost fora Cartesian displacement of the robot end-effector of a given length, no matter if this is achievedby one of the two prismatic joints or by the third revolute joint. Stated differently, a linear pathachieved by translating along the \ufb01rst or second prismatic joint at 1 [m/s] for 1 second will cost inthe objective function Hthe same as an arc of a circle of radius lachieved by rotating the thirdjoint at 1/l[rad/s] for 1 second.On the other hand, selecting a very large weight w\u226b1 in (28) will penalize the motion of thethird (revolute) joint with respect to the prismatic ones. The PPR robot will then try to achievethe desired Cartesian velocity moving mainly the \ufb01rst two joints. For instance, using w= 1000 inthe previous numerical example (and using [m] for the linear units) provides\u02d9q=\uf8eb\uf8ec\uf8ed0.9999 0.00010.0001 0.9998\u22120.0002 0.0004\uf8f6\uf8f7\uf8f8(\u221211)=\uf8eb\uf8ec\uf8ed\u22120.99980.99970.0007\uf8f6\uf8f7\uf8f8[m/s][m/s][rad/s], (32)namely a velocity that involves in practice only the \ufb01rst two prismatic joints.", "robot": "PPR", "tags": ["planar"]},
 "175": {"file": "Robotics2_21.01.12.pdf", "date": "21-01-12", "num_ex": 0, "exam": "robo2", "question": "The 3R robot in Fig. 1 moves in a vertical plane. Its control architecture consists of an ideal low-level controller that is able to execute any (reasonable) reference joint velocity command \u02d9qr\u2208R3(including \u02d9qr=0), as received by a high-level control law. The assigned task requires that the endeffector is kept at a desired position Pdin the plane, while the robot minimizes the potential energyUg(q) due to gravity. Design a suitable high-level control law that realizes this task in a robustway (i.e., rejecting also positioning errors for the end effector). Provide the detailed symbolicexpression of all terms needed in this law. Compute then the numerical value of \u02d9qrat the startinginstantt= 0, assuming that the links have a uniform distribution of mass and using the data:l1= 0.5, l 2= 0.4, l 3= 0.3 [m], m 1= 5, m 2= 3, m 3= 2 [kg],q1(0) =\u03c0, q 2(0) = 0, q 3(0) =\u2212\u03c0/2 [rad]\u21d2Pd= (\u22120.9,0.3).x0y0g0Pdq1q2q3m1l2l3\u2a01\u2a01\u2a01l1m2m3Figure 1: A planar 3R robot with a constant desired position Pdde\ufb01ned for its end effector.", "solution": "In the absence of position error at the robot end effector level, a suitable high-level control lawsatisfying the requested self-motion task is obtained by projecting the negative gradient of thegravitational potential energy Ug(q) in the null space of the task Jacobian J(q), or\u02d9qr=\u2212\u03b1(I\u2212J#(q)J(q))\u2207qUg(q) =\u03b1(J#(q)J(q)\u2212I)g(q). (1)The scalar \u03b1>0 is a step size in the anti-gradient direction \u2212\u2207qUg=\u2212(\u2202Ug/\u2202q)Tandg(q) isthe gravity term in the robot dynamic model1. To make the control law robust w.r.t. transientCartesian position errors ep=pd\u2212p=pd\u2212f(q), wheref(q) is the (positional) task kinematicsof the robot, we modify (1) as\u02d9qr=J#(q)KPep+\u03b1(J#(q)J(q)\u2212I)g(q) =\u2212\u03b1g(q) +J#(q) (KPep+\u03b1J(q)g(q)),(2)whereKP>0 is a (typically, diagonal) control gain matrix. Out of singularities, this producesan exponentially converging error dynamics since \u02d9ep=\u2212\u02d9p=\u2212J(q)\u02d9qr=\u2212KPep. In order toevaluate (2), we need the following terms (using the usual compact trigonometric notation):f(q) =(l1c1+l2c12+l3c123l1s1+l2s12+l3s123),J(q) =(\u2202f(q)\u2202q)T=(\u2212(l1s1+l2s12+l3s123)\u2212(l2s12+l3s123)\u2212l3s123l1c1+l2c12+l3c123l2c12+l3c123l3c123),Ug(q) =g0(m1dc1s1+m2(l1s1+dc2s12) +m3(l1s1+l2s12+dc3s123)),g(q) =(\u2202Ug(q)\u2202q)T=g0\uf8eb\uf8ec\uf8ed(m1dc1+ (m2+m3)l1)c1+ (m2dc2+m3l2)c12+m3dc3c123(m2dc2+m3l2)c12+m3dc3c123m3dc3c123\uf8f6\uf8f7\uf8f8,wheredci>0 is the distance of the center of mass of link ifrom the joint axis i, fori= 1,2,3.With the given data, it is f(q(0)) =(0.9 0.3)T=pd, so thatep=0and we don\u2019t need to knowthe actual value of Kp. For the remaining terms in (2), we computeJ(q(0)) =(\u22120.3\u22120.3\u22120.3\u22120.9\u22120.4 0)\u21d2J#(q(0)) =\uf8eb\uf8ec\uf8ed0.5464\u22121.1475\u22121.2295 0.0820\u22122.6503 1.0656\uf8f6\uf8f7\uf8f8andg(q(0)) =g0\uf8eb\uf8ec\uf8ed\u22125.15\u22121.40\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed\u221250.522\u221213.7340\uf8f6\uf8f7\uf8f8[Nm],1Note that\u03b1converts here a joint torque into a joint velocity. Thus, it has dimensional units [rad \u00b7(Nm\u00b7s)\u22121].3whereg0= 9.81 [m/s\u22122]. Setting for instance \u03b1= 1, we \ufb01nally obtain\u02d9qr(0) =\uf8eb\uf8ec\uf8ed2.5731\u22125.78953.2164\uf8f6\uf8f7\uf8f8[rad/s].The \ufb01rst and third link start moving counterclockwise, while the second link will rotate clockwise.Robot motion will continue until the projection of the gravity term g(q) in the null space of theJacobianJ(q) will vanish (in general, not implying that g(q) =0).", "robot": "3R", "tags": ["planar", "vertical"]},
 "176": {"file": "Robotics2_21.01.12.pdf", "date": "21-01-12", "num_ex": 1, "exam": "robo2", "question": "Consider again the situation of Exercise #1. Assume now that the robot is torque-controlled,namely that the control architecture is able to impose any (reasonable) reference joint torquecommand\u03c4r\u2208R3. Design a suitable torque-level control law that realizes the same previous taskin a robust way (i.e., rejecting also position and/or velocity errors for the end effector). [ Note: Youdon\u2019t have to detail the expression of the terms in the control law, just de\ufb01ne the structure. ]", "solution": "When the robot is in a torque-controlled mode, its full dynamicsM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4has to be taken into account. To address the same task as in Exercise #1 with torque control, weapply \ufb01rst a feedback linearization law in the joint space, i.e.,\u03c4=M(q)a+c(q,\u02d9q) +g(q)\u21d2 \u00a8q=a. (3)A joint acceleration command performing a robot self-motion, as driven by the negative gradientof the potential energy due to gravity2, is then designed asa=\u2212J#(q)\u02d9J(q)\u02d9q\u2212(I\u2212J#(q)J(q))(\u03b1g(q) +Kv\u02d9q). (4)In (4), a damping velocity term \u2212Kv\u02d9q, withKv>0 and diagonal, has been added in the nullspace of the task Jacobian in order to stabilize the joint motion. This is customary (and almostmandatory) when resolving redundancy at the acceleration level.For rejecting position and/or velocity errors that may occur around the desired constant end-effector position, the command (4) is modi\ufb01ed asa=J#(q)(KP(pd\u2212f(q))\u2212KDJ(q)\u02d9q\u2212\u02d9J(q)\u02d9q)\u2212(I\u2212J#(q)J(q))(\u03b1g(q) +Kv\u02d9q),(5)including thus a PD action, with (typically diagonal) gain matrices KP>0 andKD>0, on theCartesian position error, and taking into account that \u02d9pd=0. Plugging (5) into (3) yields \ufb01nallythe desired torque control law\u03c4r=M(q)[J#(q)(KP(pd\u2212f(q))\u2212KDJ(q)\u02d9q\u2212\u02d9J(q)\u02d9q)\u2212(I\u2212J#(q)J(q))(\u03b1g(q) +Kv\u02d9q)]+c(q,\u02d9q) +g(q).(6)", "robot": "unknown", "tags": []},
 "177": {"file": "Robotics2_21.01.12.pdf", "date": "21-01-12", "num_ex": 2, "exam": "robo2", "question": "Derive the dynamic model of the 2R polar robot in Fig. 2, assuming that I2,xx\u0338=I2,yy=I2,zz.Consider also the presence of viscous friction at the two joints.\u2a01q2q1m2m1I2,yyI1,yyI1,xxI1,zzI2,xxI2,zz\u2a01g0Figure 2: A 2R polar robot. Mass and diagonal barycentric inertia of each link is indicated.1", "solution": "Kinetic energyT1=12I1,yy\u02d9q21T2=12m2\u2225vc2\u22252+12\u03c9T2I2\u03c92=12m2\u2225vc2\u22252+122\u03c9T22I22\u03c922In this case, \u03b1converts a joint torque into a joint acceleration. Thus, it has dimensional units [rad \u00b7Nm\u22121\u00b7s\u22122].Similarly, the units of Kvare [s\u22121].4pc2=\uf8eb\uf8ec\uf8eddc2cosq2cosq1dc2cosq2sinq1dc2sinq2\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8eddc2c1c2dc2s1c2dc2s2\uf8f6\uf8f7\uf8f8\u21d2vc2=\u02d9pc2=\uf8eb\uf8ec\uf8ed\u2212dc2(s1c2\u02d9q1+c1s2\u02d9q2)dc2(c1c2\u02d9q1\u2212s1s2\u02d9q2)dc2c2\u02d9q2\uf8f6\uf8f7\uf8f8\u21d2 \u2225vc2\u22252=d2c2(\u02d9q22+c22\u02d9q21)1\u03c91=\uf8eb\uf8ec\uf8ed0\u02d9q10\uf8f6\uf8f7\uf8f8\u21d21\u03c92=\uf8eb\uf8ec\uf8ed0\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f8\u21d22\u03c92=1RT2(q2)1\u03c92=\uf8eb\uf8ec\uf8edc2s20\u2212s2c200 0 1\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed0\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f8\u21d2T2=12m2d2c2(\u02d9q22+c22\u02d9q21)+12(s2\u02d9q1c2\u02d9q1\u02d9q2)\uf8eb\uf8ec\uf8edI2,xx 0 00I2,yy 00 0 I2,zz\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8eds2\u02d9q1c2\u02d9q1\u02d9q2\uf8f6\uf8f7\uf8f8=12m2d2c2(\u02d9q22+c22\u02d9q21)+12I2,zz\u02d9q22+12(I2,xxs22+I2,yyc22)\u02d9q21T(q,\u02d9q) =T1+T2=12\u02d9qTM(q)\u02d9qInertia matrixM(q) =(I1,yy+I2,xxs22+(I2,yy+m2d2c2)c22 00 I2,zz+m2d2c2)(7)=(I1,yy+I2,xx+(I2,yy+m2d2c2\u2212I2,xx)c22 00 I2,zz+m2d2c2)=(a1+a2c2200a3)=(m1(q2)m2)Potential energy and gravity vectorU1= 0U2=g0m2dc2s2U(q) =U1+U2\u21d2g(q) =(\u2202U(q)\u2202q)T=(0g0m2dc2c2)=(0a4c2)Coriolis and centrifugal vectorC1(q) =12((\u2202m1\u2202q)+(\u2202m1\u2202q)T\u2212(\u2202M\u2202q1))=(0\u2212a2s2c2\u2212a2s2c2 0)c1(q,\u02d9q) =\u02d9qTC1(q)\u02d9q=\u22122a2s2c2\u02d9q1\u02d9q2=\u2212a2sin(2q2) \u02d9q1\u02d9q2C2(q) =12((\u2202m2\u2202q)+(\u2202m2\u2202q)T\u2212(\u2202M\u2202q2))=(a2s2c20\u22120 0)c2(q,\u02d9q) =\u02d9qTC2(q)\u02d9q=a2s2c2\u02d9q21\u21d2c(q,\u02d9q) =(\u22122a2s2c2\u02d9q1\u02d9q2a2s2c2\u02d9q21)5Dynamic model (including viscous friction)M(q)\u00a8q+c(q.\u02d9q) +g(q) +F\u02d9q=\u03c4\u21d0\u21d2{(a1+a2c22)\u00a8q1\u22122a2s2c2\u02d9q1\u02d9q2+f1\u02d9q1=\u03c41a3\u00a8q2+a2s2c2\u02d9q21+a4c2+f2\u02d9q2=\u03c42(8)", "robot": "2R", "tags": []},
 "178": {"file": "Robotics2_21.01.12.pdf", "date": "21-01-12", "num_ex": 3, "exam": "robo2", "question": "Consider again the robot of Exercise #3. Answer the following questions on its dynamics.a) Suppose that the \ufb01rst robot joint is kept at a constant speed \u02d9 q1= \u2126>0 by a constant torque \u00af\u03c4ofminimum possible norm\u2225\u00af\u03c4\u2225applied at the joints. Find an associated constant steady-statepositionq2= \u00afq2and the expressions of \u00af \u03c41and \u00af\u03c42. Is the joint angle \u00af q2unique for a given \u2126 >0?And is the associated minimum norm torque \u00af\u03c4unique?b) Assuming that only the gravity acceleration g0and the kinematic parameters are known for thisrobot, what is the minimum numberpof uncertain dynamic coefficients athat fully describethe robot dynamics in the linearly parametrized way Y(q,\u02d9q,\u00a8q)a=\u03c4? Give the symbolicexpressions for the vector a\u2208Rpand the 2\u00d7pmatrixY.", "solution": "a)With reference to eqs. (8), set \u02d9 q1= \u2126>0, \u00a8q1= 0,q2= \u00afq2, \u02d9q2= \u00a8q2= 0 for the desired steadystate. We getf1\u2126 =\u03c41 (9)a2sin \u00afq2cos \u00afq2\u21262+a4cos \u00afq2=\u03c42 (10)From (9), the torque on joint 1 should necessarily compensate the loss of energy due to viscousfriction when the joint is rotating with a speed \u2126, so \u00af \u03c41=f1\u2126. Because of the minimum normrequirement for the steady-state torque \u00af\u03c4, we seek then a solution \u00af q2in (10) for\u03c42= \u00af\u03c42= 0. Thisis possible in two cases.\ud835\udc5e'#m2g0\ud835\udc5e\u0307%=\u03a9\u2a01dc2reactionforcecentrifugalforceFigure 4: Equilibrium of forces for a polar robot spinning its \ufb01rst joint at a constant \u02d9 q1= \u2126>0.\u2022For \u00afq2=\u00b1\u03c0/2 (second link vertical, up or down along the \ufb01rst joint axis). Indeed, cos \u00af q2= 0 and(10) will be an identity with zero applied torque. However, these equilibria are both unstable:small perturbations to this steady-state condition will let the second robot joint deviate fromany of these two con\ufb01gurations.\u2022Whena2sin \u00afq2\u21262+a4= 0. This corresponds to a special balancing between the vector sum ofthe gravity force (pointing vertically and downward) and centrifugal force (pointing horizontallyand radially from the \ufb01rst joint axis), both applied to the center of mass of link 2, and theinternal reaction force by the rigid robot structure (see Fig. 4). This balance is obtained for\u00afq2= arcsin\u2212a4a2\u21262=\u2212arcsing0m2dc2(I2,yy+m2d2c2\u2212I2,xx) \u21262\u2208(\u2212\u03c02,0). (11)The domain of de\ufb01nition for \u00af q2follows from dc2>0 and from the fact that I2,yy+m2d2c2>I2,xxalways holds, namely that the inertia of link 2 around an axis belonging to its base is less thanthe baricentral inertia around an axis stretching along the link length. Such inequality can beproven for any rigid body, no matter what mass it has and how the mass is distributed in thebody volume3. For low values of \u2126, the angle in (11) would be close to \u2212\u03c0/2; for large values of\u2126, we have instead \u00af q2\u21920\u2212. It can be shown that this equilibrium is dynamically stable.3Triangular inequalities hold among the elements of a diagonal barycentric inertia matrix of a rigid body (or forthe elements on its principal axes), such as Iyy+Izz>Ixx. In addition, the inertia Iaround any barycentric axisof a body of mass mis smaller than md2, wheredis the distance from the CoM to a parallel axis at the body end.These two physical properties together prove the inequality in the text.6In any case, we note that the (minimum norm) torque for this dynamic equilibrium will be thesame:\u00af\u03c4=(f1\u21260),\u2225\u00af\u03c4\u2225=f1|\u2126|.Indeed, when considering also a constant torque \u00af \u03c42\u0338= 0 applied at the second joint (and thus, atotal torque with \u2225\u00af\u03c4\u2225>f 1|\u2126|), we may \ufb01nd other steady-state solutions for \u00af q2.b)The minimum number of dynamic coefficients required is p= 6. From eqs. (8), one hasY=(\u00a8q1c22\u00a8q1\u22122s2c2\u02d9q1\u02d9q20 0 \u02d9q100s2c2\u02d9q21 \u00a8q2c20 \u02d9q2),a=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8eda1a2a3a4a5a6\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8edI1,yy+I2,xxI2,yy+m2d2c2\u2212I2,xxI2,zz+m2d2c2g0m2dc2f1f2\uf8f6\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\u21d2Y(q,\u02d9q.\u00a8q)a=\u03c4.A comment is in place on the alternative de\ufb01nition of coefficients in (7), before introducing thetrigonometric substitution s22= 1\u2212c22. WhenI2,yy=I2,zz, as in the present case, only threeindependent dynamic coefficients would appear anyway in the inertia matrix, although with thedifferent de\ufb01nitionsa\u20321=I1,yy, a\u20322=I2,xx, a\u20323=I2,yy+m2d2c2=I2,zz+m2d2c2=a3,whereasa\u2032i=aifor the remaining i= 4,5,6. Although the associated regressor matrix Y\u2032wouldlook slightly different, both parametrizations are minimal ( p= 6). On the other hand, this would nolonger be true for the parametrization suggested by (7) in case I2,yy\u0338=I2,zz: 4 dynamic coefficientswould then be used in M, leading to a total of 7 coefficients in the dynamic model.", "robot": "unknown", "tags": ["horizontal", "vertical"]},
 "179": {"file": "Robotics2_21.01.12.pdf", "date": "21-01-12", "num_ex": 4, "exam": "robo2", "question": "A PPR robot moving on a horizontal plane may collide with some unknown obstacle in the en-vironment at an a priori unknown point Pcalong its structure, as illustrated in Fig. 3. Supposethat a single collision occurs and that the interaction can be assumed as pointwise, modeled by anunknown and unmeasurable pure force Fc,i\u2208R2applied to the robot, respectively with i= 1, 2,or 3 according to which link is involved. De\ufb01ne the complete expression of the dynamic terms ina model-based residual vector r\u2208R3that can be used for collision detection and isolation. Forevery possible situation, analyze if the collision can be detected or not, if the colliding link can beisolated or not, if the colliding force Fc,ican be identi\ufb01ed (completely or in part) or not, and ifthe location of the collision point Pc,ialong theith link can be determined or not.Lywxwq1q2q3Fc,1Fc,2Fc,3Figure 3: A planar PPR robot undergoing a possible collision during motion.[240 minutes (4 hours); open books]2", "solution": "We shall derive \ufb01rst the terms in the dynamic model of the planar PPR robot in Fig. 3, followinga Lagrangian approach. In the absence of gravity, we haveM(q)\u00a8q+S(q,\u02d9q)\u02d9q=\u03c4+\u03c4c,\u03c4c=JTc(q)Fc,whereS\u02d9qis a factorization of the quadratic velocity terms such that \u02d9M\u22122Sis a skew-symmetricmatrix (or, equivalently, \u02d9M=S+ST),\u03c4cis the joint torque resulting from a collision with aforceFc, andJcis the Jacobian of the collision point along the structure.The kinetic energy of the \ufb01rst two links, moved by two prismatic joints with orthogonal axes, isT1+T2=12m1\u02d9q21+12m2(\u02d9q21+ \u02d9q22).Frompc3=(q1+dc3c3q2+dc3s3)\u21d2vc3=\u02d9pc3=(\u02d9q1\u2212dc3s3\u02d9q3\u02d9q2+dc3c3\u02d9q3), \u03c9 3= \u02d9q3,the kinetic energy of the third (rotational) link is computed asT3=12m3\u2225vc3\u22252+12I3\u03c923=12m3(\u02d9q21+ \u02d9q22+d2c3\u02d9q23+ 2dc3(\u2212s3\u02d9q1+c3\u02d9q2) \u02d9q3)+12I3\u02d9q23.7From the kinetic energy of the system,T=T1+T2+T3=12\u02d9qTM(q)\u02d9q,the inertia matrix is extracted asM(q) =\uf8eb\uf8ec\uf8edm1+m2+m3 0\u2212m3dc3s30m2+m3m3dc3c3\u2212m3dc3s3m3dc3c3I3+m3d2c3\uf8f6\uf8f7\uf8f8.The (purely) centrifugal terms c(q,\u02d9q) =S(q,\u02d9q)\u02d9qare derived using the Christoffel symbols, i.e.,for each componentci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i = 1,2,3beingmitheith column of the inertia matrix M. We obtainC1(q) =\uf8eb\uf8ec\uf8ed0 0 00 0 00 0\u2212m3dc3c3\uf8f6\uf8f7\uf8f8\u21d2c1(q,\u02d9q) =\u2212m3dc3c3\u02d9q23C2(q) =\uf8eb\uf8ec\uf8ed0 0 00 0 00 0\u2212m3dc3s3\uf8f6\uf8f7\uf8f8\u21d2c2(q,\u02d9q) =\u2212m3dc3s3\u02d9q23C3(q) =0 \u21d2c3(q,\u02d9q) = 0,and thusc(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u2212m3dc3c3\u02d9q23\u2212m3dc3s3\u02d9q230\uf8f6\uf8f7\uf8f8.Using again the Christoffel symbols, a suitable factorization matrix for cis computed asS(q,\u02d9q) =\uf8eb\uf8ec\uf8ed\u02d9qTC1(q)\u02d9qTC2(q)\u02d9qTC3(q)\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0 0\u2212m3dc3c3\u02d9q30 0\u2212m3dc3s3\u02d9q30 0 0\uf8f6\uf8f7\uf8f8,The model-based residual for collision detection and isolation can then be evaluated in all its terms,namelyr(t) =KI(M(q)\u02d9q\u2212\u222bt0(\u03c4+ST(q,\u02d9q)\u02d9q+r)ds),KI>0, (12)where we have assumed that \u02d9q(0) = 0(the robot starts at rest). In particular, we have for thesecond term in the integralST(q,\u02d9q)\u02d9q=\uf8eb\uf8ec\uf8ed00\u2212m3dc3(s3\u02d9q2+c3\u02d9q1) \u02d9q3\uf8f6\uf8f7\uf8f8.8The residualrin (12) is affected, through the joint torque \u03c4ci, by a collision force Fci=(FxFy)Tacting at the collision point Pcion the robot link ias\u02d9r=KI(\u03c4ci\u2212r) =KI(JTci(q)Fci\u2212r), i = 1,2,3,except for some singular cases. Essentially, there are directions along which the point Pcicannotbe given a linear instantaneous velocity in the motion plane by means of a joint velocity \u02d9q\u2208R3.Next, we shall distinguish between collisions on the \ufb01rst, second, or third link and analyze thevarious possible situations in terms of collision detection and isolation, as well as collision forceidenti\ufb01cation and localization. Assuming that sufficiently large gains can be chosen in the diagonalmatrixKI, we will haver\u2248\u03c4ci,and the residual r(in particular, its components ri) can be used as a proxy for \u03c4ciwhen reasoningabout the nature of collisions. In the following, all quantities will be expressed in the world frameRFwof Fig. 3.\u2022Collision on link 1 . The position of the collision point along the \ufb01rst link4and the associatedJacobian and joint torque arepc1=(q1\u2212\u03c110),with\u03c11\u2208[0,2l1,max]\u21d2Jc1=(1 0 00 0 0)\u21d2\u03c4c1=JTc1Fc1=\uf8eb\uf8ec\uf8edFx00\uf8f6\uf8f7\uf8f8.Clearly, a collision is not detected at all whenF0c1=(0Fy)\u21d2JTc1F0c1=0.Only the intensity FxofFc1can be identi\ufb01ed. The closer is the alignment of Fc1to the axisof joint 1, the poorer will be the detection. Moreover, we will never have an information on thelocalization of the collision point Pc1.\u2022Collision on link 2 . The position of the contact point along the second link and the associatedJacobian and joint torque arepc2=(q1q2\u2212\u03c12),with\u03c12\u2208[0,2l2,max]\u21d2Jc2=(1 0 00 1 0)\u21d2\u03c4c2=JTc2Fc2=\uf8eb\uf8ec\uf8edFxFy0\uf8f6\uf8f7\uf8f8.Thus, the collision will always be detected and the collision force Fc2fully identi\ufb01ed. However,once again, no information on the localization of the collision point Pc2is provided by theresidual. This is also critical for the isolation of the actual link in collision. In fact, when Fy= 0inFc2, we obtain\u03c4c2=\u03c4c1and there will be no way to understand whether the collisionoccurred on link 1 (with the force intensity being possibly identi\ufb01ed only in part) or on link 2(with direction and intensity of the collision force being fully identi\ufb01ed).\u2022Collision on link 3 . The position of the contact point along the third link and the associatedJacobian and joint torque arepc3=(q1+\u03c13c3q2+\u03c13s3),with\u03c13\u2208[0,L]\u21d2Jc3(q) =(1 0\u2212\u03c13s30 1\u03c13c3)4For simplicity, assume that the prismatic joints have limited excursions, i.e., qi\u2208[\u2212li,max,li,max ], fori= 1,2.9\u21d2\u03c4c3=JTc3(q)Fc3=\uf8eb\uf8ec\uf8edFxFy\u03c13(c3Fy\u2212s3Fx)\uf8f6\uf8f7\uf8f8.The \ufb01rst two components of \u03c4c3(in practice, of its proxy r) show again that the collision is alwaysdetected, and that the collision force Fc3is fully identi\ufb01ed as well. In this case, localization of theactual collision point Pc3(i.e., the value \u03c13) is also possible, provided that the third component\u03c4c3,3\u0338= 0. In fact, we can estimate then \u03c13as\u03c13=\u03c4c3,3c3Fy\u2212s3Fx=\u03c4c3,3c3\u03c4c3,2\u2212s3\u03c4c3,1\u2248r3c3r2\u2212s3r1= \u02c6\u03c13.Such localization will fail whenFc3=\u2225Fc3\u2225(c3s3)\u21d2\u03c4c3,3= 0,namelyFc3is aligned with the third link. Moreover, in this situation we obtain \u03c4c3=\u03c4c2andalso the isolation of the actual link in collision will fail. In fact, we cannot distinguish betweena collision occurred on link 2 or 3. The same happens when a force Fc3hits the third link at itsbase (being then \u03c13).", "robot": "PPR", "tags": ["planar", "horizontal"]},
 "180": {"file": "Robotics2_18.06.11.pdf", "date": "18-06-11", "num_ex": 0, "exam": "robo2", "question": "The dynamic model of the planar RP robot in Fig. 1 moving in a vertical plane can be written inthe usual form asM(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4. (1)\u2022De\ufb01ne two different matrices S1(q,\u02d9q) andS2(q,\u02d9q) that factorize the Coriolis and centrifugalterms (i.e., yielding Si(q,\u02d9q)\u02d9q=c(q,\u02d9q), fori= 1,2), such that \u02d9M\u22122S1is skew-symmetric,while \u02d9M\u22122S2is not.\u2022Give the explicit symbolic expressions of the terms appearing in the de\ufb01nition of the momentum-based residual vector r\u2208R2that allows detection and isolation of collisions.\u2022Are there situations in which collision forces FK\u2208R2in the plane of motion lead to poor orno detection, or to incorrect isolation of the involved link? Discuss the issue.g0 q1 q2 m1, I1 dc1 dc2l1 \u43a9!\u43a9!m2, I2x yFigure 1: A planar RP robot, with the de\ufb01nition of joint variables and parameters.", "solution": "For later use, we derive the terms in the dynamic model (1) following a Lagrangian approach. Thekinetic energy of the \ufb01rst link isT1=12(I1+m1d2c1) \u02d9q21.The position and velocity of the center of mass of the second link are, respectively,pc2=(l1cosq1\u2212(q2\u2212dc2) sinq1l1sinq1+ (q2\u2212dc2) cosq1),vc2=\u02d9pc2=(\u2212sinq1(l1\u02d9q1+ \u02d9q2)\u2212(q2\u2212dc2) cosq1\u02d9q1cosq1(l1\u02d9q1+ \u02d9q2)\u2212(q2\u2212dc2) sinq1\u02d9q1).Therefore, the kinetic energy of the second link isT2=12I2\u02d9q21+12m2\u2225vc2\u22252=12(I2+m2(q2\u2212dc2)2) \u02d9q21+12m2(l1\u02d9q1+ \u02d9q2)2.The kinetic energy of the system isT=T1+T2=12\u02d9qTM(q)\u02d9q,with inertia matrixM(q) =(I1+m1d2c1+I2+m2l21+m2(q2\u2212dc2)2m2l1m2l1 m2).The generallzed momentum of the robot is thenp=M(q)\u02d9q=((I1+m1d2c1+I2+m2(q2\u2212dc2)2)\u02d9q1+m2l1(l1\u02d9q1+ \u02d9q2)m2(l1\u02d9q1+ \u02d9q2)). (3)The Coriolis and centrifugal terms c(q,\u02d9q) are derived using the Christoffel symbols, i.e., for eachcomponentci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q,Ci(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i = 1,2,beingmitheith column of the inertia matrix M. We obtainC1(q) =(0m2(q2\u2212dc2)m2(q2\u2212dc2) 0)\u21d2c1(q,\u02d9q) = 2m2(q2\u2212dc2) \u02d9q1\u02d9q2C2(q) =(\u2212m2(q2\u2212dc2) 00 0)\u21d2c2(q,\u02d9q) =\u2212m2(q2\u2212dc2) \u02d9q21,and thusc(q,\u02d9q) =(2m2(q2\u2212dc2) \u02d9q1\u02d9q2\u2212m2(q2\u2212dc2) \u02d9q21).3The potential energy of the robot isU=U1+U2=m1g0pc1,y+m2g0pc2,y=m1g0dc1sinq1+m2g0(l1sinq1+ (q2\u2212dc2) cosq1),withg0= 9.81 [m/s2]. The associated gravity vector isg(q) =(\u2202U(q)\u2202q)T=(g0((m1dc1+m2l1) cosq1\u2212m2(q2\u2212dc2) sinq1)m2g0cosq1), (4)As for the factorizations of the Coriolis and centrifugal terms, using again the de\ufb01nition of Christof-fel symbols, we computeS1(q,\u02d9q) =(\u02d9qTC1(q)\u02d9qTC2(q))=(m2(q2\u2212dc2) \u02d9q2m2(q2\u2212dc2) \u02d9q1\u2212m2(q2\u2212dc2) \u02d9q1 0), (5)which guarantees the skew-symmetry of the matrix\u02d9M\u22122S1=(2m2(q2\u2212dc2) \u02d9q200 0)\u2212(2m2(q2\u2212dc2) \u02d9q22m2(q2\u2212dc2) \u02d9q1\u22122m2(q2\u2212dc2) \u02d9q1 0)=(0\u22122m2(q2\u2212dc2) \u02d9q12m2(q2\u2212dc2) \u02d9q1 0).On the other hand, the alternative choiceS2(q,\u02d9q) =(0 2 m2(q2\u2212dc2) \u02d9q1\u2212m2(q2\u2212dc2) \u02d9q1 0),which produces another feasible factorization S2(q,\u02d9q)\u02d9q=c(q,\u02d9q), leads to the matrix\u02d9M\u22122S2=(2m2(q2\u2212dc2) \u02d9q2\u22124m2(q2\u2212dc2) \u02d9q12m2(q2\u2212dc2) \u02d9q1 0)that is clearly notskew symmetric. This implies, e.g., that matrix S2cannot be used in thede\ufb01nition of the residual vector rfor collision detection and isolation.The de\ufb01nition of the residual isr(t) =KI(p(t)\u2212\u222bt0(\u03c4+ST(q,\u02d9q)\u02d9q\u2212g(q) +r)ds\u2212p(0)),KI>0, (6)wherep=M\u02d9qis given by (3), p(0) = 0iff\u02d9q(0) = 0(the robot starts at rest), gis given by (4),and matrixSshould factorize the Coriolis and centrifugal terms so that \u02d9M\u22122Sis skew symmetric.Choosing in particular S=S1in (5), we have in this caseST(q,\u02d9q)\u02d9q=(m2(q2\u2212dc2) \u02d9q2\u2212m2(q2\u2212dc2) \u02d9q1m2(q2\u2212dc2) \u02d9q1 0)(\u02d9q1\u02d9q2)=(0m2(q2\u2212dc2) \u02d9q21).The residual rin (6) will be affected by a non-zero contact force FK\u2208R2lying in the plane(x,y) and acting on one of the robot links through the joint torque \u03c4K=JTK(q)FK, except forsome singular cases. Essentially, these are directions along which the contact point cannot be givenby means of \u02d9qa linear velocity in the plane of motion. In the following, we distinguish betweencollisions on the \ufb01rst or on the second link (see Fig. 3).4\u2022Collision on link 1 . The position of the contact point along the \ufb01rst link and the associatedcontact Jacobian arepK1=\u03c11(cosq1sinq1),with\u03c11\u2208[0,l1]\u21d2JK1=(\u2212sinq10cosq10),and thus collision is not detected whenFK1=\u03b1(cosq1sinq1),for arbitrary \u03b1=\u2225FK1\u2225 \u21d2JTK1FK1=0,namely, when the contact force is aligned with the \ufb01rst link (Fig. 3a). The closer is the alignmentofFK1with the axis of link 1, the poorer will be the detection.\u2022Collision on link 2 . The position of the contact point along the second link is1pK2=(l1cosq1\u2212(q2\u2212\u03c12) sinq1l1sinq1+ (q2\u2212\u03c12) cosq1)= Rot 2\u00d72(q1)(l1q2\u2212\u03c12),with\u03c12\u2208[0,l2,max]and the associated contact Jacobian is\u21d2JK2=(\u2212(l1sinq1+ (q2\u2212\u03c12) cosq1)\u2212sinq1l1cosq1\u2212(q2\u2212\u03c12) sinq1 cosq1), detJK2=\u03c12\u2212q2.Thus, collision is not detected when \u03c12=q2andFK2=\u03b1(cosq1sinq1),for arbitrary \u03b1=\u00b1\u2225FK2\u2225 \u21d2JTK2|q2=\u03c12FK2=0,namely, when the contact occurs at the second joint location and the force is orthogonal to thesecond link (Fig. 3b). On the other hand, we obtain still detection but wrong isolation whenthe contact force is orthogonal to the second link, as before, and the contact point is not alongthe \ufb01rst link axis ( \u03c12\u0338=q2). In this case (see Fig. 3c), we would haver\u2243\u03c4K2=JTK2FK2=\u03b1\u00b7JTK2(cosq1sinq1)=(\u03b1(q2\u2212\u03c12)0)=(\u22170),indicating incorrectly that a collision occurred on link 1, rather than on link 2. Finally, ifF\u2032K2=\u03b2(l1cosq1\u2212(q2\u2212\u03c12) sinq1l1sinq1+ (q2\u2212\u03c12) cosq1),for arbitrary \u03b2\u0338= 0,namely, when the line of action of the contact force passes through the axis of joint 1, we obtain(see Fig. 3d)r\u2243\u03c4\u2032K2=JTK2F\u2032K2=(0\u03b2(q2\u2212\u03c12))=(0\u2217),indicating correctly that the collision is on link 2 (the largest index with a non-zero componentinr), although the \ufb01rst component of the residual is vanishing ( r1= 0).1We assume that the prismatic joint has a maximum excursion of q2\u2208[0, l2,max].5q1 q2 !2l1x y q1 q2 !2l1x y q1 q2 = !2 !2l1x y q1 q2 !1l1x y FK1 (a) (b) (c) (d)FK2 FK2 F !K2     ! 'K2=00# $ % & ' (     ! ' # K2=0*$ % & ' ( )     ! 'K2=*0# $ % & ' (! 'K1=00# $ % & ' (Figure 3: Possible collision situations leading to no detection or wrong isolation: (a) no detectionof a contact force on link 1; (b) no detection of a contact force on link 2; (c) wrong isolation of acontact force on link 2; (d) isolation of a contact force on link 2, despite the residual at joint 1 isnot being affected.", "robot": "RP", "tags": ["planar", "vertical"]},
 "181": {"file": "Robotics2_18.06.11.pdf", "date": "18-06-11", "num_ex": 1, "exam": "robo2", "question": "Consider an actuated pendulum with a link of (known) length lthat moves without friction in thevertical plane. The pendulum is driven by a DC motor at the base and carries a heavy and unknownpayload. Assume that the motor inertia and the mass and inertia of the link are negligible withrespect to the payload, which should be seen as a concentrated mass mat the tip of the pendulum.The drive gain kiof the current-to-torque relation \u03c4=kiimof the motor is unknown , and onlythe motor current imcan be commanded.Design an adaptive control law for imthat achieves global asymptotic tracking of a smooth desiredtrajectory\u03b8d(t) for the joint angle \u03b8of the pendulum. Provide a (sketch of) proof of your result.1", "solution": "De\ufb01ne as coordinate of the pendulum link its angle \u03b8from the downward vertical (positive ifcounterclockwise). Under the simplifying assumptions made, the Lagrangian dynamics of theactuated pendulum is computed from the kinetic and potential energyT=12ml2\u02d9\u03b82, U =\u2212mg0lcos\u03b8,asml2\u00a8\u03b8+mg0lsin\u03b8=\u03c4=kiim, (7)where the drive gain of the DC motor has been included. The unknowns in (7) are the payload(concentrated) mass mand the drive gain ki. Dividing by ki>0, this equation can be rewrittenin the standard linearly parametrized form (and without unknown parameters affecting the input)mkil2\u00a8\u03b8+mkig0lsin\u03b8=(l2\u00a8\u03b8+g0lsin\u03b8)mki=Y(\u03b8,\u00a8\u03b8)a=im, (8)beinga=m/k i>0 the only dynamic coefficient that matters ( p= 1). We note that aplaysthe role of a scaled mechanical inertia. Being the motor current imthe input to the system, it iseasy to derive from eq. (8) an adaptive control law for trajectory tracking that mimics the classical6one derived when the input is directly the motor torque \u03c4. Given a twice-differentiable desiredtrajectory\u03b8d(t) for the joint variable, de\ufb01ne such adaptive law asim=Y(\u03b8,\u00a8\u03b8r) \u02c6a+kpe+kd\u02d9e, k p>0,kd>0, e =\u03b8d\u2212\u03b8, \u02d9\u03b8r=\u02d9\u03b8d+\u03bbe=\u02d9\u03b8d+kpkde,\u02d9\u02c6a=\u03b3Y(\u03b8,\u00a8\u03b8r) (\u02d9\u03b8r\u2212\u02d9\u03b8), \u03b3 > 0, \u02d9\u03b8r\u2212\u02d9\u03b8= \u02d9e+\u03bbe,(9)withY(\u03b8,\u00a8\u03b8r) =l2\u00a8\u03b8r+g0lsin\u03b8, \u02c6a=\u02c6(mki)\u2208R.The global asymptotic tracking of the smooth trajectory \u03b8d(t) can be proven by following the samearguments as in the classical case, i.e., via a Lyapunov candidate and the use of Barbalat lemmaand LaSalle theorem. However, one should carefully de\ufb01ne the candidate by considering the scaledmechanical inertia of the system. Therefore, noting the absence of dissipative terms, de\ufb01ne thecandidate functionV=12ml2ki(\u02d9\u03b8r\u2212\u02d9\u03b8)2+12Re2+12\u03b3\u02dca2\u22650,withR= 2kp>0 and \u02dca=a\u2212\u02c6a. We have that V= 0 iffe= \u02d9e= \u02dca= 0. For the closed-loopsystem (8\u20139), we can writeY(\u03b8,\u00a8\u03b8)a=(l2\u00a8\u03b8+g0lsin\u03b8)mki=(l2\u00a8\u03b8r+g0lsin\u03b8)\u02c6(mki)+kpe+kd\u02d9e=Y(\u03b8,\u00a8\u03b8r) \u02c6a+kpe+kd\u02d9e.Subtracting both sides of this equality from Y(\u03b8,\u00a8\u03b8r)a, one obtainsY(\u03b8,\u00a8\u03b8r)a\u2212Y(\u03b8,\u00a8\u03b8)a=ml2ki(\u00a8\u03b8r\u2212\u00a8\u03b8) =(l2\u00a8\u03b8r+g0lsin\u03b8)\u02dca\u2212kpe\u2212kd\u02d9e=Y(\u03b8,\u00a8\u03b8r) \u02dca\u2212kpe\u2212kd\u02d9e.(10)Using (10), the time derivative of Vcomputed along the trajectories of the closed-loop system (8\u20139)is evaluated as\u02d9V=ml2ki(\u00a8\u03b8r\u2212\u00a8\u03b8) (\u02d9\u03b8r\u2212\u02d9\u03b8) + 2kpe\u02d9e\u22121\u03b3\u02dca\u02d9\u02c6a=(Y(\u03b8,\u00a8\u03b8r) \u02dca\u2212kpe\u2212kd\u02d9e)(\u02d9\u03b8r\u2212\u02d9\u03b8) + 2kpe\u02d9e\u22121\u03b3\u03b3Y(\u03b8,\u00a8\u03b8r) \u02dca(\u02d9\u03b8r\u2212\u02d9\u03b8)=\u2212(kpe+kd\u02d9e) ( \u02d9e+kpkde) + 2kpe\u02d9e=\u2212kd\u02d9e2\u2212k2pkde2\u22640.The rest of the proof is completed just like in the classical case.", "robot": "unknown", "tags": ["vertical"]},
 "182": {"file": "Robotics2_18.06.11.pdf", "date": "18-06-11", "num_ex": 2, "exam": "robo2", "question": "With reference to Fig. 2, a mass m> 0 moves under the action of a control force F, in the presenceof viscous friction with coefficient d>0, and interacts with a stiff environment. We would like toregulate the contact force Fcto a constant desired value Fd>0. The contact force is measured bya load cell of stiffness ks>0, i.e.,Fc=ksxwherex= 0 corresponds to the initial contact positionwith the environment. Consider a class of control laws of the formF=\u03b1kf(Fd\u2212Fc) +\u03b2Fd, (2)wherekf>0, and with:1. (\u03b1,\u03b2) = (0,1) [pure feedforward];2. (\u03b1,\u03b2) = (1,0) [pure proportional feedback];3. (\u03b1,\u03b2) = (1,1) [combined feedback/feedforward].\u2022For each of the three above control cases, check the system equilibrium and verify its stabilityproperties, giving a proof of your statements (e.g., via Lyapunov/LaSalle, or using Laplaceanalysis in view of the linearity of the system) and brie\ufb02y discussing the bene\ufb01ts and limitationsof each law.\u2022How robust are these results with respect to uncertainty in the knowledge of the physicalparameters m.d, andks?\u2022Explain what happens under the action of the above control laws when there is no environmentpresent (Fc\u22610). Would the system reach some form of steady state?m Fx ks dFigure 2: A mass in contact through a load cell with a stiff environment.[240 minutes; open books, but no computer or smartphone]2", "solution": "The dynamic model of the system in Fig. 2 ism\u00a8x=F\u2212Fc\u2212d\u02d9x,with all non-conservative forces performing work on xon the right-hand side. Since Fc=ksx(asthe single compliant element in the contact), this equation can be rewritten asm\u00a8x+d\u02d9x+ksx=F, (11)7with all physical coefficients being positive. Applying the class of force control laws (2) yieldsm\u00a8x+d\u02d9x+ksx=\u03b1kf(Fd\u2212Fc) +\u03b2Fd=\u03b1kf(Fd\u2212ksx) +\u03b2Fd. (12)At the equilibrium, \u02d9 x= \u00a8x= 0, we haveksx=\u03b1kf(Fd\u2212ksx) +\u03b2Fd,which is solved for a position x=xeand an associated contact force Fc=Fe=ksxeasxe=\u03b2+\u03b1kfks(1 +\u03b1kf)Fd, F e=\u03b2+\u03b1kf1 +\u03b1kfFd\u21d2ef=Fd\u2212Fe=1\u2212\u03b21 +\u03b1kfFd. (13)Therefore, the correct desired contact force Fdis obtained at the equilibrium if and only if \u03b2= 1(presence of the constant feedforward), no matter if \u03b1= 0 (no feedback) or \u03b1= 1 (combinedsituation). In such case, it is in factxe=1ksFd, F e=Fd\u21d2ef= 0. (14)On the other hand, for \u03b2= 0 and\u03b1= 1 (pure proportional feedback), we have at the equilibriumxe=kfks(1 +kf)Fd, F e=kf1 +kfFd\u21d2ef=11 +kfFd, (15)which shows that only for kf\u2192\u221e (or, for large proportional gains) we can drive the force errorto zero (or, below a given tolerance).Indeed, we need to show that the above equilibria are asymptotically stable. In view of the linearityof the system, whenever this property holds, the equilibrium will also be a global, exponentiallystable one.Consider \ufb01rst the case of a pure feedforward command F=Fd(\u03b1= 0,\u03b2= 1). The systemdynamics ism\u00a8x+d\u02d9x+ksx=FdIn order to study the asymptotic stability of the equilibrium (14), we choose as Lyapunov candidateV1=12m\u02d9x2+12ks(x\u2212xe)2\u22650 (16)Its time derivative is evaluated on the controlled system as\u02d9V1=m\u02d9x\u00a8x+ks(x\u2212xe) \u02d9x= \u02d9x(\u2212d\u02d9x\u2212ksxe+Fd) =\u2212d\u02d9x2\u22640.We have \u02d9V1= 0 if and only if \u02d9 x= 0. The system behaves then as m\u00a8x=Fd\u2212ksx, showing thatthere will be an acceleration iff the contact force Fc=ksxis different from the desired one. ByLaSalle theorem, we conclude the asymptotic stability of the equilibrium state x=xe, \u02d9x= 0.Stated differently, by pushing constantly on the mass with the desired force Fd>0, a steadystate is reached with the desired contact force (thanks to the asymptotic stability of the originalopen-loop system). However, the transient behavior will be speci\ufb01ed only by the actual physicalmassm, sensor stiffness ks, and viscous (damping) coefficient d. Moreover, the pure feedforwardscheme is highly sensitive to unmodeled disturbance forces acting on the system.Consider now the case of a pure proportional feedback of the force error, namely F=kf(Fd\u2212Fc)(\u03b1= 1,\u03b2= 0). The closed-loop system is thenm\u00a8x+d\u02d9x+ksx=kf(Fd\u2212Fc) =kf(Fd\u2212ksx)\u21d2m\u00a8x+d\u02d9x+ks(1 +kf)x=kfFd8In order to study the asymptotic stability of the (incorrect) equilibrium (15), we choose as LyapunovcandidateV2=12m\u02d9x2+12ks(1 +kf)(x\u2212xe)2\u22650. (17)Its time derivative, evaluated along the trajectories of the closed-loop system, is\u02d9V2=m\u02d9x\u00a8x+ks(1+kf)(x\u2212xe) \u02d9x= \u02d9x(\u2212d\u02d9x\u2212ks(1 +kf)x+kfFd+ks(1 +kf)(x\u2212xe)) =\u2212d\u02d9x2\u22640,where we replaced the expression of xein (15) in order to simplify terms. The conclusion aboutasymptotic stability follows from a LaSalle analysis similar to the previous case. Indeed, thesteady-state force error ef\u0338= 0 can be decreased by increasing kf, modifying accordingly thetransient behavior. However, when increasing kfthe system response will become faster but soonunderdamped. As a matter of fact, a useful additional damping action of the form \u2212dc\u02d9x, withdc>0, is actually missing in the considered control law.On the other hand, when combining the feedforward and feedback actions in the control law(\u03b1=\u03b2= 1), the steady-state error will vanish without the need of increasing the feedback gainkf. As a result, this can be tuned so as to obtain the best transient behavior and possibly reducethe effects of extra disturbing forces. The analysis of the asymptotic stability of xein (14) can beconducted as before, using the same Lyapunov candidate V2in (17).For those more acquainted with Laplace transformation methods in linear control systems, it isworth mentioning that the above stability analyses could have been conducted more easily (andquickly) by looking at the location of poles (with Routh criterion, or even with simpler methods)of suitable transfer functions in the Laplace domain s, both for the open-loop systemFc(s)F(s)=ksms2+ds+ks,and for the closed-loop system, e.g., under combined feedback/feedforwardFc(s)Fd(s)=ks(1 +kf)ms2+ds+ks(1 +kf).We note also that all the obtained stability results are completely independent from the parametersm,d, andks(as long as they remain physically meaningful, i.e., positive). These quantities wereinvoked in the analysis, but are never used for force control design, which inherits therefore someintrinsic robustness. Nonetheless, the values of these parameters will affect the quality of thetransient behavior in response to reference values Fd.At last, when Fc= 0 (no interaction with the environment), all controllers will behave in a similarway. We would have in that casem\u00a8x+d\u02d9x=F=\uf8f1\uf8f4\uf8f2\uf8f4\uf8f3Fd [pure feedforward]kfFd [pure proportional feedback](1 +kf)Fd[combined feedback/feedforward](18)and the mass would always reach a constant steady-state velocity (with \u00a8 x= 0) equal to\u02d9xss=Fdwith the constant Fas speci\ufb01ed in (18).", "robot": "unknown", "tags": []},
 "183": {"file": "Robotics2_22.09.09.pdf", "date": "22-09-09", "num_ex": 0, "exam": "robo2", "question": "Consider a planar 3R robot with equal links of length L>0 that is commanded with joint velocities\u02d9q\u2208R3. Each joint has the same available motion rangeqi\u2208[qi,min,qi,max ] = [\u2212\u2206,+\u2206], with \u2206 =3\u03c04[rad], fori= 1,2,3.The joint range function is de\ufb01ned in general asH(q) =12NN\u2211i=1(qi\u2212\u00afqiqi,max\u2212qi,min)2, with \u00afqi=qi,min +qi,max2,whereNis the number of robot joints. The end-effector position p=f(q)\u2208R2of this robotis constrained to be at p=0. De\ufb01ne a kinematic control law for \u02d9qthat will always satisfy thistask constraint and the joint range limits, when starting from an initial feasible con\ufb01guration q(0)and while attempting to minimize the function H(q). Show that the robot converges to a uniquecon\ufb01guration \u00afqsuch that\u2207H(\u00afq)\u0338= 0 but \u02d9q=0. Provide the values of \u00afq,H(\u00afq) and\u2207H(\u00afq).", "solution": "The end-effector position p\u2208R2of the considered planar 3R robot isp=(pxpy)=L(c1+c12+c123s1+s12+s123)=f(q),with the usual shorthand notation for trigonometric functions, e.g., c123= cos(q1+q2+q3). Theassociated 2\u00d73 Jacobian matrix in \u02d9p=J(q)\u02d9qis given byJ(q)=L(\u2212(s1+s12+s123)\u2212(s12+s123)\u2212s123c1+c12+c123c12+c123c123)=(\u2212py\u2212py+Ls1\u2212py+L(s1+s12)pxpx\u2212Lc1px\u2212L(c1+c12)),where the last equivalent expression will be convenient for what follows. Further, from the givenjoint limits, it is \u00af qi= 0, fori= 1,2,3, and the speci\ufb01c joint range function of this robot isH(q) =163\u2211i=1(qi2\u2206)2=124 \u22062(q21+q22+q23), \u2206 =3\u03c04[rad],with gradient\u2207qH(q) =112 \u22062\uf8eb\uf8edq1q2q3\uf8f6\uf8f8.To minimize this function without moving the end-effector ( \u02d9p=0), the joint velocity should bechosen as\u02d9q=\u2212\u03b1(I\u2212J#(q)J(q))\u2207qH(q) =\u2212\u03b1P(q)\u2207qH(q), (1)where J#is the pseudoinverse of matrix J,Pis the projection matrix in its null space, and\u03b1>0 is a suitable scalar step. When starting from an initial feasible con\ufb01guration q(0) such thatp(0) = f(q(0)) = 0, the command (1) will keep satisfying the task constraint on the position ofthe robot end-effector. However, one should also check that the con\ufb01guration qremains alwayswithin the hard limits of the joint ranges.The problem is largely simpli\ufb01ed by the requirement that the end-effector should be kept in par-ticular at the origin. This implies that the three links of the robot will always form an equilateraltriangle (with sides L), whose orientation is parametrized by the \ufb01rst joint angle q1. Thus, onlyone of the two classes of con\ufb01gurations are feasible:qright = (q1,2\u03c0/3,2\u03c0/3) or qleft= (q1,\u22122\u03c0/3,\u22122\u03c0/3).Consider then the right-arm class (the following treatment is analogous for the left-arm case).Withpx=py= 0 andq2(=q3) = 2\u03c0/3, the Jacobian becomes after trigonometric simpli\ufb01cationsJ(q1) =(0Lsinq1Lsin (q1+\u03c0/3)0\u2212Lcosq1\u2212Lcos (q1+\u03c0/3)).3Any con\ufb01guration in the qright class is clearly regular: in fact, det( J(q1)JT(q1)) = 0.75L4\u0338= 0.Then, the pseudoinverse J#(q1) can be computed asJ#(q1) =JT(q1)(J(q1)JT(q1))\u22121=2\u221a33L\uf8eb\uf8ec\uf8ed0 0cos (q1+\u03c0/3) sin (q1+\u03c0/3)cosq1 sinq1\uf8f6\uf8f7\uf8f8,and the projection matrix Pbecomes the constant matrixP=I\u2212J#(q)J(q) =\uf8eb\uf8ec\uf8ed1 0 00 0 00 0 0\uf8f6\uf8f7\uf8f8.This result should not come unexpected: no non-zero velocity of joints 2 or 3 will be admissible ifthe end-effector should keep the position p=0. Conversely, any velocity of joint 1 does move theend-effector and in fact is left unchanged when multiplied by the projector P.Therefore, starting from q(0) = (q1(0),2\u03c0/3,2\u03c0/3), withq1(0)\u2208[\u2212\u2206,+\u2206], eq. (1) becomes\u02d9q=\u2212\u03b1P(q)\u2207qH(q) =\u2212\u03b112 \u22062\uf8eb\uf8edq100\uf8f6\uf8f8.Accordingly, if q1(0)>0 then \u02d9q1<0 and, vice versa, if q1(0)<0 then \u02d9q1= 0. This guaranteesthat the robot motion will execute correctly the Cartesian task, while remaining always within thejoint limits. The motion will stop when q1reaches zero. Thus, the \ufb01nal reached con\ufb01guration isin any case\u00afq=\uf8eb\uf8ec\uf8ed02\u03c0/32\u03c0/3\uf8f6\uf8f7\uf8f8,withH(\u00afq) =124 \u22062((2\u03c03)2+(2\u03c03)2)= 0.0658,and\u2207H(\u00afq) =112 \u22062\uf8eb\uf8ec\uf8ed02\u03c0/32\u03c0/3\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed00.03140.0314\uf8f6\uf8f7\uf8f8\u0338= 0.", "robot": "3R", "tags": ["planar"]},
 "184": {"file": "Robotics2_22.09.09.pdf", "date": "22-09-09", "num_ex": 1, "exam": "robo2", "question": "The large RP robot in Fig. 1, with coordinates q= (q1,q2) and dynamic parameters m2,dc2,I1andI2de\ufb01ned therein, moves on a horizontal plane. The robot is controlled by the generalized forceu= (\u03c4,F) [Nm, N] at the joints, while dissipative effects can be neglected. The robot end-effectorpointPshould execute a linear rest-to-rest trajectory from Pi= (2,3) [m] toPf= (\u22122,0) [m] inT= 2 [s], with bang-coast-bang symmetric acceleration pro\ufb01le and cruising speed V= 3 [m/s].The robot is initially at rest in q(0) = (0,2) [rad,m].xI1y\u2295q1q2m2,I2dc2tFPFigure 1: A RP planar robot with the relevant parameters and variables.De\ufb01ne a control law for usuch that the following performance is obtained:\u2022the Cartesian trajectory error e=pd\u2212pgoes to zero exponentially;\u2022the trajectory error components etanden, respectively along the tangent and the normaldirections to the path, have a decoupled dynamics, governed by the differential equations\u00a8et+ 4 \u02d9et+ 4et= 0, \u00a8en+ 8 \u02d9en+ 16en= 0.1Provide the explicit expression of all needed terms in the resulting control law, and in particular theanalytic expression of generalized force u(t) at the initial time t= 0. Compute then its numericalvalueu(0) = (\u03c4(0),F(0)) when the dynamic parameters arem2= 10 [kg], d c2= 2.5 [m], I 1=I2= 20 [kg\u00b7m2].Compute also the numerical value of the actual position p(t) of the end-effector at the half-timet=T/2 = 1 [s] of the robot motion.", "solution": "The problem is solved by a feedback linearization control law that imposes a prescribed linear anddecoupled dynamics to the trajectory errors in the task space. The task space for this planar robotis a two-dimensional Cartesian space for the end-effector, which is rotated so as to align its axeswith the tangent and normal directions to the desired linear path.We de\ufb01ne \ufb01rst the desired task trajectory for the robot end-effector. The path is a segment fromPi= (2,3) toPf= (\u22122,0), having length L=\u2225Pf\u2212Pi\u2225= 5 [m] and being expressed in terms ofits arc length \u03c3asp(\u03c3) =Pi+Pf\u2212PiL\u03c3=(23)\u2212(0.80.6)\u03c3, \u03c3\u2208[0,L] = [0,5].4One can associate to the path (see Fig. 3) a rotated right-handed planar frame \u03a3 R= (t,n), havingaxisttangent to the path and axis nnormal to it. The orientation of this frame is given by the2\u00d72 matrixR(\u03b1) =(t n)=(cos\u03b1\u2212sin\u03b1sin\u03b1 cos\u03b1),with\u03b1= atan2{\u221235,\u221245}=\u22122.4981 [rad] =\u2212143.13\u25e6,and thusR(\u03b1) =(\u22120.8 0.6\u22120.6\u22120.8). (2)The task frame \u03a3 Rwill be used to conveniently express the dynamically decoupled error compo-nentset(t) anden(t) along the trajectory.xyPiPf\ud835\udefcLtnp(0)e(0)en(0)et(0)Figure 3: The desired linear path, with the de\ufb01nition of the task frame \u03a3 R= (t,n) whose constantorientation is given by matrix R(\u03b1). The initial position of the robot end-effector p(0) is also shown,with the Cartesian initial error e(0)\u2208R2and the (rotated) initial position error components et(0)anden(0).The timing law \u03c3=\u03c3d(t) on the reference path is a rest-to-rest motion with a symmetric bang-coast-bang acceleration pro\ufb01le. For such a pro\ufb01le, the maximum acceleration Aalong the path iscomputed from the total motion time T, the path length L, and the cruise speed VasT=LA+V2AV\u21d2A=V2TV\u2212L=92\u00b73\u22125= 9 [m/s2],whereas the acceleration and deceleration phases last each Ts=V/A = 0.333 [s]. The assumedexistence of a cruising velocity at V= 3 [m/s] is con\ufb01rmed by the obtained value Ts<T/ 2 = 1.Thus, the initial acceleration of the timing law is \u00a8 \u03c3d(0) =A= 9 [m/s2]. Accordingly, the initialdesired end-effector velocity and acceleration in the base frame are\u02d9pd(0) = 0, \u00a8pd(0) =Pf\u2212PiL\u00a8\u03c3d(0) =\u2212(7.25.4)[m/s2],while the same quantities expressed in the rotated task frame are indeedR\u02d9pd(0) = 0,R\u00a8pd(0) =RT(\u03b1)\u00a8pd(0) =(90)[m/s2].5Next, de\ufb01ne the initial position and velocity error of the robot end-effector with respect to thedesired trajectory. The direct kinematics of the RP robot isp=f(q) =(q2cosq1q2sinq1). (3)The robot is initially at rest in q(0) = (0,2). Thus,p(0) =f(q(0)) =(20)[m], \u02d9q(0) = 0\u21d2 \u02d9p(0) = 0,and soe(0) =pd(0)\u2212p(0) =(ex(0)ey(0))=(03), \u02d9e(0) = \u02d9pd(0)\u2212\u02d9p(0) = 0.In the rotated frame \u03a3 R, we haveRe(0) =RT(\u03b1)e(0) =(et(0)en(0))=(\u22121.8\u22122.4),R\u02d9e(0) =RT(\u03b1)\u02d9e(0) = 0.Consider now the robot dynamics. Since the RP robot moves on the horizontal plane, its dynamicmodel has g(q)\u22610:M(q)\u00a8q+c(q,\u02d9q) =u.Applying the feedback linearizing controlu=M(q)aq+c(q,\u02d9q), with aq=J\u22121(q)(R(\u03b1)a\u2212\u02d9J(q)\u02d9q), (4)leads to the Cartesian acceleration of the end-effector in the task frame\u00a8p=R(\u03b1)a\u21d2R\u00a8p=RT(\u03b1)\u00a8p=a.Choosing thena=R\u00a8pd+RKD(R\u02d9pd\u2212R\u02d9p)+RKP(Rpd\u2212Rp)(5)withRKP=(kP,t 00kP,n)andRKD=(kD,t 00kD,n),yields for the dynamics of the task trajectory errorRe=Rpd\u2212RpR\u00a8e+RKDR\u02d9e+RKPRe=0,or, componentwise,\u00a8et+kD,t\u02d9et+kP,tet= 0, \u00a8en+kD,n\u02d9en+kP,nen= 0. (6)Accordingly, by choosing the scalar control gainskP,t= 4, k D,t= 4, k P,n= 16, k D,n= 8, (7)we obtain the prescribed dynamic behavior for the transient errors along the tangent and normaldirections to the desired trajectory.6Putting together (4) and (5), the \ufb01nal control law is thusu=M(q)(J\u22121(q)R(\u03b1)(R\u00a8pd+RKDR\u02d9e+RKPRe)\u2212J\u22121(q)\u02d9J(q)\u02d9q)+c(q,\u02d9q). (8)Beside (2) and (3), the other kinematic terms needed in the control law (8) are the Jacobian matrixand its inverseJ(q) =\u2202f(q)\u2202q=(\u2212q2sinq1cosq1q2cosq1sinq1)\u21d2J\u22121(q) =\u22121q2(sinq1\u2212cosq1\u2212q2cosq1\u2212q2sinq1),and the time derivative of the Jacobian\u02d9J(q) =(\u2212\u02d9q1q2cosq1\u2212\u02d9q2sinq1\u2212\u02d9q1sinq1\u2212\u02d9q1q2sinq1+ \u02d9q2cosq1\u02d9q1cosq1).From these, it follows also\u02d9J(q)\u02d9q=(\u2212\u02d9q21q2cosq1\u22122 \u02d9q1\u02d9q2sinq1\u2212\u02d9q21q2sinq1+ 2 \u02d9q1\u02d9q2cosq1)\u21d2 \u2212 J\u22121(q)\u02d9J(q)\u02d9q=1q2(\u22122 \u02d9q1\u02d9q2\u02d9q21q22).Moreover, the dynamic terms used in (8) are the inertia matrix M(q) and the Coriolis and cen-trifugal terms c(q,\u02d9q). These are obtained as usual from the following steps.Kinetic energyT=T1+T2withT1=12I1\u02d9q21, T 2=12I2\u02d9q21+12m2\u2225vc2\u22252,wherevc2=\u02d9pc2=ddt((q2\u2212dc2)(c1s1))= \u02d9q2(c1s1)+ (q2\u2212dc2) \u02d9q1(\u2212s1c1)=R(q1)(\u02d9q2(q2\u2212dc2) \u02d9q1),and soT=12(I1+I2) \u02d9q21+12m2(\u02d9q22+ (q2\u2212dc2)2\u02d9q21).Inertia matrixT=12\u02d9qTM(q)\u02d9q\u21d2 M(q) =(m1(q)m2(q))=(I1+I2+m2(q2\u2212dc2)200 m2).Coriolis and centrifugal termsc(q,\u02d9q) =(\u02d9qTC1(q)\u02d9q\u02d9qTC2(q)\u02d9q),withCi(q) =12(\u2202mi(q)\u2202q+(\u2202mi(q)\u2202q)T\u2212\u2202M(q)\u2202qi), i= 1,2.SinceC1(q) =(0m2(q2\u2212dc2)m2(q2\u2212dc2) 0),C2(q) =\u2212(m2(q2\u2212dc2) 00 0),7we havec(q,\u02d9q) =(2m2(q2\u2212dc2) \u02d9q1\u02d9q2\u2212m2(q2\u2212dc2) \u02d9q21).Moreover, the analytic expression of the generalized force u(t) at the initial time t= 0 is obtainedby particularizing (8) at the initial robot state ( q,\u02d9q) = (q(0),0) and with the initial task positionerrorRe(0) and task velocity errorR\u02d9e(0) = 0. We haveu(0) =M(q(0))J\u22121(q(0))R(\u03b1)(R\u00a8pd(0) +RKPRe(0)). (9)With the given dynamic data, the numerical value of the initial control (9) isu(0) =(\u03c4(0)F(0))=(629.8\u2212244.8)[Nm, N].Finally, the numerical value of the position p(t) of the end-effector at the half-time t=T/2 = 1 ofthe motion is obtained as p(T/2) =pd(T/2)\u2212e(T/2), from the knowledge of the desired trajectorypd(t) and using the position error e(t) resulting from the feedback linearization control law (8)\u2014thus, analytically and without the need of a numerical simulation of the robot dynamics!For the desired trajectory position, one haspd(1) =Pi+Pf\u2212Pi2=(01.5)[m],namely, the midpoint on the linear path. On the other hand, the closed-form solutions of the lineardifferential equations in (6) for the initial values et(0) = 1.8,en(0) = 2.4, \u02d9et(0) = \u02d9en(0) = 0, andfor the speci\ufb01c numerical gains in (7) are1et(t) =\u22121.8 (1 + 2t) exp(\u22122t), e n(t) =\u22122.4 (1 + 4t) exp(\u22124t). (10)Thuse(1) =R(\u03b1)Re(1) =R(\u03b1)(\u22125.4 exp(\u22122)\u221212 exp(\u22124))=(\u22120.8 0.6\u22120.6\u22120.8)(\u22120.7308\u22120.2198)=(0.45280.6143),and thereforep(1) =pd(1)\u2212e(1) =(\u22120.45280.8857)[m].Figure 4 shows the evolution in time of the relevant variables concerning the robot end-effector:on the left, the tracking errors et(t) anden(t) along the tangential and normal directions to thepath; at the center, the components ex(t) andey(t) of the tracking error in the base frame; on theright, the coordinates px(t) andpy(t) of the actual position of the end-effector. One can see thatthe chosen PD gains of the linear part of the control design are not sufficient large to fully recoverthe tracking error before the end of the trajectory. Indeed, these residual errors will approachexponentially zero after T= 5 [s], when the desired reference motion has ended and the trajectorytracking problem has become a regulation problem.1The two differential equations (6) are written in the Laplace domain as(s2+ 4s+ 4)et(s) = (s+ 2)2et(s) = 0,(s2+ 4s+ 16)en(s) = (s+ 4)2en(s) = 0,i.e., they have two real and coincident roots, respectively in \u22122 and\u22124. Accordingly, the time solutions for arbitraryinitial conditions areet(t) =et(0) exp( \u22122t) + ( \u02d9et(0) + 2 et(0))texp(\u22122t), e n(t) =en(0) exp( \u22124t) + ( \u02d9en(0) + 4 en(0))texp(\u22124t).The results in (10) follow for the considered case with \u02d9 et(0) = \u02d9 en(0) = 0.800.20.40.60.811.21.41.61.82t [s]-2.5-2-1.5-1-0.50et and en [m] tangential (green) and normal (black) components of the trajectory error00.20.40.60.811.21.41.61.82t [s]-0.500.511.522.53ex and ey [m] x (red) and y (blue) Cartesian components of the trajectory error00.20.40.60.811.21.41.61.82t [s]-2.5-2-1.5-1-0.500.511.52px and py [m] actual x (red) and y (blue) components of the end-effector positionFigure 4: Time evolution of the tracking errors et(t) anden(t) in the task frame [left] and of thetracking errors ex(t) andey(t) in the base frame [center]; coordinates px(t) andpy(t) of the actualend-effector position [right].Extra comments to the solution of Exercise 2The evolutions of the Cartesian errors and positions, respectively in the center and right plotsof Fig. 4, deserve a special comment. While the initial errors et(0) anden(0) are both non-zero,the position component px(0) is matched with its desired value pd,x(0) and the initial Cartesianposition error limited to the y-direction. However, the reaction to trajectory errors is designed tobe decoupled in the tandn(task) directions, not in the xandy(Cartesian) directions. Therefore,the presence of an initial error along ywill induce later on also an error along x, because the controlaction is designed to reduce separately the two error components in the task directions (see Fig. 4[left]). After both these task errors have been sufficiently reduced, also the two Cartesian errors willeventually be reduced in a monotonic way. Note also that the y-position of the end-effector (theblue plot in Fig. 4 [right]) increases \ufb01rst in order to approach the planned path, but then reducesbecause the desired trajectory has reduced as well its y-component (see the path in Fig. 3).00.20.40.60.811.21.41.61.82t [s]-2.5-2-1.5-1-0.50et and en [m] tangential (green) and normal (black) components of the trajectory error00.20.40.60.811.21.41.61.82t [s]-0.500.511.522.53ex and ey [m] x (red) and y (blue) Cartesian components of the trajectory error00.20.40.60.811.21.41.61.82t [s]-2-1.5-1-0.500.511.522.5px and py [m] actual x (red) and y (blue) components of the end-effector positionFigure 5: Improved evolution of the tracking errors in task frame [left] and in base frame [center]and actual position of the end-effector [right] when the double pole of the linear controller in thetangential direction is moved from \u22122 to\u22125.A better, and perhaps clearer, behavior could be observed if the control gains in the tangentialdirection were properly increased. Choosing for instancekP,t= 25, k D,t= 10would lead in the Laplace domain to a double pole in s=\u22125 (rather than in s=\u22122) along thetangential direction, with the associated error decreasing at a faster exponential rate aset(t) =\u22121.8 (1 + 5t) exp(\u22125t),9which is to be compared with et(t) in (10). The control gains in the normal direction have remainedunchanged. The obtained results are shown in Fig. 5, where the green pro\ufb01le in the left plot isthe newet(t). The faster reaction to this tangential error has a counter-effect on ex(t), which nowbecomes negative for some time during the transient, although with a much smaller magnitudethan before. In this case, all errors have vanished by the end of the desired motion ( T= 5 [s]).", "robot": "RP", "tags": ["planar", "horizontal"]},
 "185": {"file": "Robotics2_22.09.09.pdf", "date": "22-09-09", "num_ex": 2, "exam": "robo2", "question": "Consider the simple mechanical system with one degree of freedom in Fig. 2(a). The actuated massB > 0 moves on a frictionless horizontal plane and is driven by an input force F. Its position is \u03b8.The mass is connected through a pulley and a rigid cable to a second mass Mthat is suspendedvertically under gravity.g0F\ud835\udf03BM(a)g0F\ud835\udf03BM(b)\ud835\udc5eKFigure 2: A mass Bdriven by an input force Fand connected to a second mass M: the cable isrigid in (a) and \ufb02exible with stiffness Kin (b).\u2022Derive the dynamic model of this system.\u2022Prove that the PID control lawF=KP(\u03b8d\u2212\u03b8)\u2212KD\u02d9\u03b8+KI\u222b(\u03b8d\u2212\u03b8(\u03c4))d\u03c4,with suitable choices of the gains KP,KDandKI, will asymptotically stabilize the desiredequilibrium state ( \u03b8,\u02d9\u03b8) = (\u03b8d,0) of the closed-loop system. Will also exponential stabilizationbe achieved in this case?\u2022Consider the PD control law with iterative feedforwardF=KP(\u03b8d\u2212\u03b8)\u2212KD\u02d9\u03b8+vi\u22121,where the feedforward is updated at successive steady states ( \u03b8,\u02d9\u03b8) = (\u03b8i,0),i= 1,2,..., asvi=vi\u22121+KP(\u03b8d\u2212\u03b8i), (withv0= 0).Prove that, with suitable gains KPandKD, this iterative learning control will globally,asymptotically stabilize the desired state ( \u03b8,\u02d9\u03b8) = (\u03b8d,0) of the closed-loop system. In partic-ular, show that the convergence of the sequence {\u03b8i}exactly to\u03b8doccurs in a \ufb01nite numberof iterations.\u2022Assuming now, as in Fig. 2(b), that the cable is elastic with \ufb01nite stiffness K > 0, derive thenew dynamic model using the additional coordinate qfor the position of the mass M.[210 minutes; open books]2", "solution": "The dynamic model of the two-mass system with a rigid cable of Fig. 2(a) is given by(B+M)\u00a8\u03b8\u2212Mg 0=F.This can be obtained by simple balance of inertial, gravity and external forces or from a Lagrangianapproach, with L=T\u2212Ugand whereT=12B\u02d9\u03b82+12M\u02d9\u03b82andUg=\u2212Mg 0\u03b8+U0. Note also that,being the gravity term g=\u2202Ug/\u2202\u03b8=\u2212Mg 0constant, its gradient \u2202g/\u2202\u03b8 = 0 is upper boundedjust by\u03b1= 0; thus, to have a unique closed-loop equilibrium, we expect no positive lower boundlarger than zero for the proportional gain KPin order to contrast gravity.As for the control design, both proposed control laws do not use the knowledge of the masses BandM. Thus, we shall assume in the following that their value is unknown, while only an upperbound is available on each, i.e., and 0 <B\u2264Bmaxand 0<M\u2264Mmax.Consider \ufb01rst the PID control lawF=KP(\u03b8d\u2212\u03b8)\u2212KD\u02d9\u03b8+KI\u222b(\u03b8d\u2212\u03b8)d\u03c4, (11)with\u03b8dbeing constant. This leads to the following closed-loop equation for the error e=\u03b8d\u2212\u03b8(B+M) \u00a8e+KD\u02d9e+KPe+KI\u222bt0ed\u03c4+Mg 0= 0.In order to have the desired closed-loop equilibrium for t\u2192\u221e , the erroreshould vanish and thusthe integral term should balance at steady state the gravity term:F\u221e=KI\u222b\u221e0e(\u03c4)d\u03c4=\u2212Mg 0.To verify the asymptotic stability of the desired closed-loop equilibrium, we use the fact that thesystem dynamics is linear and transform the closed-loop equation in the Laplace domain. Thegravity term d=Mg 0is considered here as a constant external disturbance. We have((B+M)s2+KDs+KP+KIs)\u03b8(s) =(KP+KIs)\u03b8d(s) +d(s),or, multiplying by sand re-organizing terms,\u03b8(s) =KPs+KI(B+M)s3+KDs2+KPs+KI\u03b8d(s) +s(B+M)s3+KDs2+KPs+KId(s).The input-output and disturbance-output transfer functions, respectively W(s) =\u03b8(s)/\u03b8d(s) andWd(s) =\u03b8(s)/d(s), have a common polynomial at the denominator. The asymptotic stability ofthe closed-loop system depends on the localization of the three closed-loop poles, namely the threeroots of the characteristic equation(B+M)s3+KDs2+KPs+KI= 0.10Using the Routh criterion, we build the Routh table3210\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0\u23d0B+M K PKD KIKP\u2212(B+M)KIKDKIFrom this, we \ufb01nd that all three roots will be asymptotically stable (i.e., will have negative realparts) if and only if there is no change of sign in the \ufb01rst column of the table, namelyKI>0, K D>0, K P>(B+M)KIKD>0.Under this condition, the steady-state value of \u03b8for the input-output relation will be\u03b8ss= limt\u2192\u221e\u03b8(t) = lims\u21920W(s)\u03b8d=\u03b8d,i.e., the desired one, while for the disturbance-output relation due to gravity it will be\u03b8ss= limt\u2192\u221e\u03b8(t) = lims\u21920Wd(s)d= 0.i.e., the effect of gravity is completely rejected. By superposition of the two effects, it is \u03b8ss=\u03b8d.Summarizing, the PID control law (11) will achieve the desired objective, provided that positivegains are used for the integral and derivative action, and a positive and sufficiently large gain isused for the proportional action. In particular, choosingKP>(Bmax+Mmax)KIKD>0.will guarantee a robust performance in spite of uncertainties on the two masses. Finally, sincethe system has a linear dynamics, the obtained asymptotic stabilization will be both global andexponential.Consider next the PD control law with feedforwardF=KP(\u03b8d\u2212\u03b8)\u2212KD\u02d9\u03b8+vi\u22121, (12)at a generic iteration of the method. The following closed-loop equation holds for the error e=\u03b8d\u2212\u03b8(B+M) \u00a8e+KD\u02d9e+KPe+vi\u22121+Mg 0= 0. (13)In order for the error eto vanish at steady state, the feedforward should balance the gravity term:vi\u22121=\u2212Mg 0.If this is not the case, the steady-state error ei=\u03b8d\u2212\u03b8i\u0338= 0 at the end of iteration iwill satisfythe equilibrium equationKPei+vi\u22121=\u2212Mg 0\u21d2\u03b8i=\u03b8d+1KP(vi\u22121+Mg 0)\u0338=\u03b8d.Analyzing eq. (13) as before, this (wrong) equilibrium will be asymptotically reached if and only ifKP>0 andKD>0. The uniqueness of such equilibrium is again guaranteed without any further11condition on the proportional gain, thanks to the linearity of the system. When the feedforwardis updated at successive steady states ( \u03b8,\u02d9\u03b8) = (\u03b8i,0),i= 1,2,..., asvi=vi\u22121+KP(\u03b8d\u2212\u03b8i),the desired closed-loop equilibrium state ( qd,0) will be reached by iteration. Remarkably, wheninitializing the feedforward term with v0= 0 (i.e., a pure PD is applied at the \ufb01rst iteration),convergence occurs in just two iterations. In fact, at the end of the \ufb01rst iteration, we will haveKPe1=KP(\u03b8d\u2212\u03b81) =\u2212Mg 0and the update isv1=v0+KP(\u03b8d\u2212\u03b81) = 0\u2212Mg 0=\u2212Mg 0.Then, at the end of the second iteration, we will haveKPe2+v1=KP(\u03b8d\u2212\u03b82)\u2212Mg 0=\u2212Mg 0\u21d2\u03b82=\u03b8d.Summarizing, the PD + iterative feedforward control (12) will achieve the desired objective, pro-vided that positive gains are used for the proportional and derivative action; the convergence isachieved in two iterations without any further condition on the proportional gain.Finally, if the cable is \ufb02exible (in the domain of linear elasticity) with a \ufb01nite stiffness K > 0 as inFig. 2(b), the dynamic model consists of two differential equations for the generalized coordinates\u03b8andq. We haveB\u00a8\u03b8+K(\u03b8\u2212q) =FM\u00a8q+K(q\u2212\u03b8)\u2212Mg 0= 0.In a Lagrangian framework, these equations are obtained with the vector of generalized coordinatesQ= (\u03b8,q), havingL=T\u2212(Ug+Ue), and where T=12B\u02d9\u03b82+12M\u02d9q2,Ug=\u2212Mg 0q+U0, and theadded elastic potential is Ue=12K(\u03b8\u2212q)2.", "robot": "unknown", "tags": ["horizontal", "vertical"]},
 "186": {"file": "Robotics2_19.09.11.pdf", "date": "19-09-11", "num_ex": 0, "exam": "robo2", "question": "Consider the 3R robot in Fig. 1, moving on a horizontal plane. The robot has identical links (each oflengthL, uniformly distributed mass m, and inertia IL=mL2/12 around the barycentral vertical axis)and is commanded at the joint level by torques \u03c4(t)\u2208R3. Neglect in the following any dissipative/frictioneffects. With the system at t= 0 in a generic initial state ( q(0),\u02d9q(0)) = (q0,\u02d9q0) with \u02d9q0\u0338=0, we want tocontrol the robot so that its kinetic energy T=T(q,\u02d9q) in the closed-loop dynamics satis\ufb01es the followingdesired target equation:dTdt=\u2212\u03b3T, with\u03b3 >0.Determine the expression of the control law \u03c4=\u03c4(q,\u02d9q) that realizes this behavior. For L= 0.2 [m],m= 3 [kg],q0= (0,\u03c0/2,\u03c0/2) [rad], \u02d9q0= (0,\u2212\u03c0,\u2212\u03c0) [rad/s] and \u03b3= 1, compute the numerical value ofsuch a control torque at t= 0, i.e.,\u03c4(0).y0x0LLLq1q3q2mmmFigure 1: A 3R robot moving on a horizontal plane, and its coordinates q= (q1,q2,q3).", "solution": "The dynamic model of a frictionless robot in the absence of gravity is given byM(q)\u00a8q+S(q,\u02d9q)\u02d9q=\u03c4, (1)where any factorization matrix Scan be used for the (quadratic) Coriolis and centrifugal terms. From theexpression of the kinetic energy T=12\u02d9qTM(q)\u02d9q, we obtain\u02d9T=dTdt=\u02d9qTM(q)\u00a8q+12\u02d9qT\u02d9M(q)\u02d9q=\u02d9qT(\u03c4\u2212S(q,\u02d9q)\u02d9q) +12\u02d9qT\u02d9M(q)\u02d9q=\u02d9qT\u03c4, (2)where we have used (1) and the principle of energy conservation (implying \u02d9qT(\u02d9M(q)\u22122S(q,\u02d9q))\u02d9q\u22610,\u2200(q,\u02d9q)). In order to impose the desired behavior to the Kinetic energy, it follows immediately that\u02d9T=\u02d9qT\u03c4=\u2212\u03b3T=\u2212\u03b32\u02d9qTM(q)\u02d9q =\u21d2\u03c4=\u2212\u03b32M(q)\u02d9q. (3)The control law should apply a torque that is the (scaled) negative value of the current generalized mo-mentump=M(q)\u02d9qof the robot.To realize (3), one needs to derive only the inertia matrix M(q) for the 3R planar robot at hand. Thekinetic energy is given byT=3\u2211I=1Ti, T i=12m\u2225vci\u22252+12IL\u03c92z,i, i = 1,2,3.We compute \ufb01rstT1=12m(L2\u02d9q1)2+12IL\u02d9q21(\u00b7\u00b7\u00b7=12mL23\u02d9q21).Then, frompc2=(Lcosq1+ (L/2) cos(q1+q2)Lsinq1+ (L/2) sin(q1+q2))\u21d2vc2=(\u2212Lsinq1\u02d9q1\u2212(L/2) sin(q1+q2)( \u02d9q1+ \u02d9q2)Lcosq1\u02d9q1+ (L/2) cos(q1+q2)( \u02d9q1+ \u02d9q2))andpc3=(L(cosq1+ cos(q1+q2)) + (L/2) cos(q1+q2+q3)L(sinq1+ sin(q1+q2)) + (L/2) sin(q1+q2+q3))\u21d2vc3=(\u2212L(sinq1\u02d9q1+ sin(q1+q2)( \u02d9q1+ \u02d9q2))\u2212(L/2) sin(q1+q2+q3)( \u02d9q1+ \u02d9q2+ \u02d9q3)L(cosq1\u02d9q1+ cos(q1+q2)( \u02d9q1+ \u02d9q2)) + (L/2) cos(q1+q2+q3)( \u02d9q1+ \u02d9q2+ \u02d9q3)),we obtainT2=12m(L2\u02d9q21+L24( \u02d9q1+ \u02d9q2)2+L2cosq2\u02d9q1( \u02d9q1+ \u02d9q2))+12IL( \u02d9q1+ \u02d9q2)2andT3=12m(L2\u02d9q21+L2( \u02d9q1+ \u02d9q2)2+ 2L2cosq2\u02d9q1( \u02d9q1+ \u02d9q2) +L24( \u02d9q1+ \u02d9q2+ \u02d9q3)2+L2(cos(q2+q3) \u02d9q1+ cosq3( \u02d9q1+ \u02d9q2)) ( \u02d9q1+ \u02d9q2+ \u02d9q3))+12IL( \u02d9q1+ \u02d9q2+ \u02d9q3)2.Therefore, using the compact notation for trigonometric functions and substituting for IL=mL2/12, theinertia matrix isM(q) =mL2\uf8eb\uf8ec\uf8ec\uf8ed4 + 3c2+c3+c2353+32c2+c3+12c2313+12(c3+c23)53+c313+12c3symm13\uf8f6\uf8f7\uf8f7\uf8f8. (4)Finally, evaluating the control law at q0= (0,\u03c0/2,\u03c0/2) [rad] and \u02d9q0= (0,\u2212\u03c0,\u2212\u03c0) [rad/s] and with thedataL= 0.2 [m],m= 3 [kg] (thus IL= 0.01 [kg\u00b7m2]) and\u03b3= 1, gives\u03c4(0) =\u221212M(q0)\u02d9q0=\u221212\u00b7325\uf8eb\uf8ec\uf8ed376\u221216765313\u2212161313\uf8f6\uf8f7\uf8f8\uf8eb\uf8ec\uf8ed0\u2212\u03c0\u2212\u03c0\uf8f6\uf8f7\uf8f8=\u03c02\uf8eb\uf8ec\uf8ed0.120.240.08\uf8f6\uf8f7\uf8f8=\uf8eb\uf8ec\uf8ed0.18850.37700.1257\uf8f6\uf8f7\uf8f8[Nm].(5)2", "robot": "3R", "tags": ["planar", "horizontal", "vertical"]},
 "187": {"file": "Robotics2_19.09.11.pdf", "date": "19-09-11", "num_ex": 1, "exam": "robo2", "question": "The RP planar robot shown in Fig. 2 should execute a rest-to-rest motion task in minimum time undertorque/force bounds |\u03c4i|\u2264\u03c4max,i>0,i= 1,2, with its end-effector moving along a circular path of radiusR >d by an angle \u03b1fromAtoB. Determine the analytic expression of the minimum time T\u2217in termsof the task data and of the robot dynamic parameters. Draw the pro\ufb01le of the two components of thetime-optimal command \u03c4\u2217(t), fort\u2208[0,T\u2217].q1q2y0x0RAB\ud835\udefc\ud835\udf0f#\ud835\udf0f$dFigure 2: A RP robot moving its end-effector along a circular path on a horizontal plane.", "solution": "We start by deriving the dynamic model of the RP planar robot in Fig. 2. For the kinetic energyT=T1+T2=12\u02d9qTM(q)\u02d9q,sincepc2= (q2\u2212d)(cosq1sinq1)Tandvc2=\u02d9pc2, we haveT1=12Ic1\u02d9q21, T 2=12Ic2\u02d9q21+12m2\u2225vc2\u22252=12(Ic2+m2(q2\u2212d)2)\u02d9q21+12m2\u02d9q22,with an obvious interpretation of the dynamic parameters. The robot inertia matrix is thenM(q) =(Ic1+Ic2+m2(q2\u2212d)200 m2). (6)From this, we compute the Coriolis/centrifugal terms using the matrices of Christoffel symbolsCi(q) =12[(\u2202mi(q)\u2202q)+(\u2202mi(q)\u2202q)T\u2212(\u2202M(q)\u2202qi)], i = 1,2.We obtainC1(q) =(0m2(q2\u2212d)m2(q2\u2212d) 0),C2(q) =(\u2212m2(q2\u2212d) 00 0),and thusc(q,\u02d9q) =(\u02d9qTC1(q)\u02d9q\u02d9qTC2(q)\u02d9q)=(2m2(q2\u2212d) \u02d9q1\u02d9q2\u2212m2(q2\u2212d) \u02d9q21). (7)From (6) and (7), we write the (unconstrained) dynamic equations in their scalar form as(Ic1+Ic2+m2(q2\u2212d)2))\u00a8q1+ 2m2(q2\u2212d) \u02d9q1\u02d9q2=\u03c41, (8)m2\u00a8q2\u2212m2(q2\u2212d) \u02d9q21=\u03c42. (9)In order to execute the task, the second joint variable should remain constant at all times, namely q2=R,\u02d9q2= \u00a8q2= 0. Therefore, from (8) with q2=Rand \u02d9q2= 0, the robot dynamics along the path can bedescribed byI0\u00a8q1=\u03c41, withI0=Ic1+Ic2+m2(R\u2212d)2>0, (10)whereas, from (9) used as inverse dynamics with q2=Rand \u00a8q2= 0, the second motor should apply theforce\u03c42(t) =\u2212m2(R\u2212d) \u02d9q21(t) (11)in order to have the end-effector remaining perfectly on the path. Equations (10\u201311) are the core of thesolution. Based on the linear dynamics (10), to perform the desired rest-to-rest motion task in minimumtime, the \ufb01rst motor should apply a bang-bang torque pro\ufb01le \u03c41(t) (with maximum positive and negativetorque\u00b1\u03c4max, 1, each applied for half of the motion interval). The total motion time should be sufficientto complete the rotation \u2206 q1=\u03b1>0. Again from (10), this corresponds to using a maximum (absolute)acceleration bound in the de\ufb01nition of the time-optimal motion of joint 1, i.e,|\u00a8q1|\u2264Amax, 1=\u03c4max, 1I0. (12)While doing so, however, the velocity \u02d9 q1(t) of the \ufb01rst joint will increase linearly and, according to (11),the force that the second motor needs to apply in order to keep the robot end-effector on the path willincrease quadratically. As a result, the second actuator may exceed its dynamic capabilities. Therefore,the bound|\u03c42|\u2264\u03c4max, 2will impose also a bound Vmax, 1on the (absolute) velocity that the \ufb01rst joint canreach. We have1|\u03c42|=m2(R\u2212d) \u02d9q21\u2264\u03c4max, 2 =\u21d2 | \u02d9q1|\u2264Vmax, 1=\u221a\u03c4max, 2m2(R\u2212d). (13)Under the combined velocity/torque (viz. velocity/acceleration) bounds for the motion of joint 1, the min-imum time solution will have in general a bang-coast-bang pro\ufb01le for the \ufb01rst torque (and its accelerationas well). The motion time T\u2217is computed then from known formulas.1Note that R\u2212d >0 by assumption, so the argument of the square root is positive.3If\u03b1>V2max, 1/Amax, 1, a coast phase will exist. ThenTs=Vmax, 1Amax, 1=\u21d2 (T\u2217\u2212Ts)Vmax, 1=\u03b1 =\u21d2T\u2217=\u03b1Vmax, 1+Vmax, 1Amax, 1, (14)where one should replace the de\ufb01nitions of bounds in (12) and (13). The (qualitative) plots of the resultingtorque/force vector \u03c4\u2217(t) are reported in Fig. 4. The second joint force \u03c4\u22172(t) follows from (11), with aquadratic time pro\ufb01le where the velocity of the \ufb01rst joint is linear in time and a constant value where \u02d9 q1is constant. The other special cases (with pure bang-bang commands) are treated similarly.\ud835\udf49\ud835\udfcft\ud835\udf49\ud835\udc8e\ud835\udc82\ud835\udc99,\ud835\udfcf\u2212\ud835\udf49\ud835\udc8e\ud835\udc82\ud835\udc99,\ud835\udfcfTsT*T  -Ts*\ud835\udc92\u0307\ud835\udfcft\ud835\udc7d\ud835\udc8e\ud835\udc82\ud835\udc99,\ud835\udfcfTsT*T  -Ts*t\u2212\ud835\udf49\ud835\udc8e\ud835\udc82\ud835\udc99,\ud835\udfd0TsT*T  -Ts*\ud835\udf49\ud835\udfd0Figure 4: Optimal pro\ufb01les of the torque \u03c4\u22171, of the related velocity \u02d9 q\u22171, and of the force \u03c4\u22172for the requestedrest-to-rest minimum time motion of the RP robot in Fig. 2.", "robot": "RP", "tags": ["planar", "horizontal"]},
 "188": {"file": "Robotics2_19.09.11.pdf", "date": "19-09-11", "num_ex": 2, "exam": "robo2", "question": "With reference to Fig. 3, a mass m1is moving at constant speed v0>0 and collides at some time t=tcwith a mass m2which is initially at rest. Assume a purely ideal situation: there is no dissipation due tofriction and the collision is perfectly elastic. Therefore, the total kinetic energy Tand the total (scalar)momentum Pof the two masses will both remain constant over time. Determine the expressions of thevelocitiesv1(t+c) andv2(t+c) of the two masses after the collision. Describe what happens when m1>m 2,m1=m2, orm1<m 2, and in the limit cases when m2\u21920 orm2\u2192\u221e .xv0m1m2Figure 3: A mass m1in motion collides with a second mass m2initially at rest.[open books, 180 minutes]1", "solution": "This is a simple application of conservation principles of the total kinetic energy Tand total momentum P(along the direction x) for the system with the two masses m1andm2. In formulas,T(t) =12m1v21(t) +12m2v22(t) = constant , P (t) =m1v1(t) +m2v2(t) = constant ,\u2200t.We apply these identities around the collision time t=tc, just before ( t=t\u2212c) and just after ( t=t+c). Letv1=v1(t+c), v 1(t\u2212c) =v0>0, v 2=v2(t+c), v 2(t\u2212c) = 0,wherev1andv2are the unknowns of our problem. Thus,12m1v21+12m2v22=12m1v20 (15)andm1v1+m2v2=m1v0. (16)Equations (15) and (16) are rewritten respectively asm1(v21\u2212v20) +m2v22=m1(v1\u2212v0)(v1+v0) +m2v22= 0 (17)andm1(v1\u2212v0) =\u2212m2v2. (18)Substituting (18) in (17) and simplifying yieldsv2=v1+v0. (19)Plugging (19) back into (16) leads tom1v1+m2(v1+v0) =m1v0 =\u21d2v1=m1\u2212m2m1+m2v0. (20)Finally, substituting v1in (19) givesv2=2m1m1+m2v0. (21)4From (20\u201321), we conclude that:\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3m2\u21920 =\u21d2v1=v0>0, v 2= 2v0>0,m2<m 1 =\u21d2v0>v 1>0, v 2>v 0>0,m2=m1 =\u21d2v1= 0, v 2=v0>0,m2>m 1 =\u21d2 \u2212v0<v 1<0, 0<v 2<v 0,m2\u2192\u221e =\u21d2v1=\u2212v0<0, v 2= 0.", "robot": "unknown", "tags": []},
 "189": {"file": "Robotics2_16.07.11.pdf", "date": "16-07-11", "num_ex": 0, "exam": "robo2", "question": "x0 y0 q1 q2 \u43a9 \u43a9Figure 1: A 2R planar robot moving on a horizontal plane.Derive the inertia matrix B(q) of a planar 2R robot using the absolute coordinatesq= (q1,q2)de\ufb01ned in Fig. 1. Will Coriolis and/or centrifugal terms be present in the quadratic velocity termc(q,\u02d9q) of the dynamic model? Why? In the absence of dissipative effects, what is the relationbetween the input torques uacting in this case on the right-hand side of the Euler-Lagrangeequations and the torques u\u03b8= (u\u03b81,u\u03b82) produced by two motors, one for each joint, directlyconnected to the respective joint axes?", "solution": "To obtain the robot dynamic model terms, we follow a Lagrangian approach. Since the robotmotion occurs at constant potential energy (on a horizontal plane), we need only to compute thekinetic energy T=T1+T2. For linki,i= 1,2, letmibe its mass, dithe distance of its center ofmass from the axis of joint i, andIithe baricentral inertia of the link around an axis normal tothe plane of motion. For the \ufb01rst link, it isT1=12(I1+m1d21) \u02d9q21.For the second link, the position of the center of mass when using the absolute coordinates ispc2=(\u21131cosq1+d2cosq2\u21131sinq1+d2sinq2),where\u21131is the length of link 1. Thus, its velocity isvc2=\u02d9pc2=(\u2212\u21131sinq1\u02d9q1\u2212d2sinq2\u02d9q2\u21131cosq1\u02d9q1+d2cosq2\u02d9q2),and its squared norm becomes\u2225vc2\u22252=vTc2vc2=\u211321\u02d9q21+d22\u02d9q22+ 2\u21131d2cos(q2\u2212q1) \u02d9q1\u02d9q2.The (scalar) angular velocity of link 2 is simply \u02d9 q2. As a result,T2=12(m2\u211321\u02d9q21+(I2+m2d22)\u02d9q22+ 2m2\u21131d2cos(q2\u2212q1) \u02d9q1\u02d9q2).Therefore,T=12\u02d9qT(I1+m1d21+m2\u211321m2\u21131d2cos(q2\u2212q1)m2\u21131d2cos(q2\u2212q1)I2+m2d22)\u02d9q=12\u02d9qTB(q)\u02d9q.De\ufb01ning for compactness the following dynamic coefficientsa1=I1+m1d21+m2\u211321, a 2=I2+m2d22, a 3=m2\u21131d2,we can rewrite the inertia matrix asB(q) =(a1a3cos(q2\u2212q1)a3cos(q2\u2212q1)a2).For the (quadratic) velocity terms in the dynamic model, we havec(q,\u02d9q) =(c1(q,\u02d9q)c2(q,\u02d9q)), ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q, i= 1,2,3whereCi(q) =12{\u2202bi(q)\u2202q+(\u2202bi(q)\u2202q)T\u2212\u2202B(q)\u2202qi}, i = 1,2.ComputingC1(q) =12{(0 0a3sin(q2\u2212q1)\u2212a3sin(q2\u2212q1))+(0a3sin(q2\u2212q1)0\u2212a3sin(q2\u2212q1))\u2212(0a3sin(q2\u2212q1)a3sin(q2\u2212q1) 0)}=(0 00\u2212a3sin(q2\u2212q1)),C2(q) =\u00b7\u00b7\u00b7=(a3sin(q2\u2212q1) 00 0),we \ufb01nally obtainc(q,\u02d9q) =(\u2212a3sin(q2\u2212q1) \u02d9q22a3sin(q2\u2212q1) \u02d9q21).There are no Coriolis, but only centrifugal terms in the dynamic equations. This is due to thechoice of absolute coordinates, so that a motion of q1only, withq2kept constant, will not changethe orientation of link 2.Moreover, the transformation from relative joint coordinates \u03b8(those of a classical DH convention)toabsolute joint coordinates qisq=(q1q2)=(\u03b81\u03b81+\u03b82)\u21d2 \u02d9q=(1 01 1)\u02d9\u03b8=T\u02d9\u03b8.Therefore, due to the principle of virtual works, the mapping between the generalized forces uperforming work on \u02d9qand the generalized forces u\u03b8performing work on \u02d9\u03b8is given byu\u03b8=(u\u03b81u\u03b82)=TTu=(u1+u2u2)\u21d4u=(u1u2)=T\u2212Tu\u03b8=(u\u03b81\u2212u\u03b82u\u03b82).The robot dynamic model written in the qcoordinates and driven by the motor torques u\u03b8isB(q)\u00a8q+c(q,\u02d9q) =u=T\u2212Tu\u03b8.", "robot": "2R", "tags": ["planar", "horizontal"]},
 "190": {"file": "Robotics2_16.07.11.pdf", "date": "16-07-11", "num_ex": 1, "exam": "robo2", "question": "Figure 2: A peg with a square section entering a hole with little or no clearance.For the task of inserting a peg with a square section into a square hole, as depicted in Fig. 2,de\ufb01ne i)a suitable task frame ,ii)thenatural constraints imposed by the geometry of the rigidand frictionless environment on the generalized (i.e., linear and angular) motion/force quantitiesexpressed in this task frame, and iii)thevirtual constraints that can be taken as reference valuesby a hybrid force-velocity control law for the smooth execution of the task.1", "solution": "With reference to the task frame shown in Fig. 4, the natural (geometric) contraints and the virtualconstraints in the peg-hole frictionless interaction are respectivelynatural:\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3tvx= 0tvy= 0t\u03c9x= 0t\u03c9y= 0t\u03c9z= 0tFz= 0virtual:\uf8f1\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f2\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f4\uf8f3tFx=FxdtFy=FydtMx=MxdtMy=MydtMz=Mzdtvz=vzd>0.4tx ty tz Figure 4: The task frame used in the de\ufb01nition of natural and virtual constraints for hybridforce/motion analysis and control.Except for the last virtual constraint, which speci\ufb01es the desired positive speed of insertion of thepeg in the hole, all the desired interaction forces and moments can be set to zero, if a smoothbehavior is to be realized with minimum mechanical stress on the peg. On the other hand, ifa \ufb01rm contact needs to be maintained with one side of the hole (e.g., in the presence of someuncertain clearance), then the choice of a positive value for Fxdand/orFydwould be useful (thisis the situation considered, e.g., in Exercise 3).", "robot": "unknown", "tags": ["constraints"]},
 "191": {"file": "Robotics2_16.07.11.pdf", "date": "16-07-11", "num_ex": 2, "exam": "robo2", "question": "For the peg-in-hole task considered in Exercise 2, consider the problem of regulating the contactforce in one direction against a side of the hole. The hole has now a compliant behavior, as modeledby a spring of stiffness ke>0. With reference to Fig. 3, which displays a horizontal section of thepeg in contact with one side of the hole, let m> 0 be the mass of the peg and d>0 the positionof the undeformed contact along thetxdirection.tx u m d ke 0Figure 3: Interaction with a compliant environment at one side of the peg-in-hole of Fig 2.Design two controllers for the scalar command usuch that the contact force Fcis regulated to adesired value Fd>0, with an asymptotically stable transient behavior. In particular:\u2022suppose \ufb01rst that no force sensing is available and design a compliance control law;\u2022introduce an ideal force sensor (e.g., on the peg surface) and design a force control law;\u2022discuss robustness of the two designs w.r.t. uncertainties in the knowledge of ke,dandm.[210 minutes; open books]2", "solution": "Letxbe the position alongtxof the peg side that undergoes contact with the hole side. We assumethat the peg is already in contact ( x\u2265d). The dynamic model of the peg-environment interactionis thenm\u00a8x+ke(x\u2212d) =u,whereas the contact force applied by the peg to the hole side isFc=ke(x\u2212d), forx\u2265dInstead, when x<d (no contact) then Fc= 0.If we want to have Fc=Fdat the closed-loop equilibrium, we need to drive the mass mto apositionxdcomputed as follows:Fc=ke(x\u2212d)|x=xd=Fd\u21d2xd=d+1keFd. (1)However, a simple compliance control law of the PD typeu=kp(xd\u2212x)\u2212kd\u02d9x, withkp>0 andkd>0, (2)will have a closed-loop equilibrium x=xEthat does not provide the desired contact force Fdatsteady state. In fact, the unique equilibrium xE(>d) will be the solution ofke(x\u2212d)|x=xE=kp(xd\u2212x)|x=xE\u21d2xE=ked+kpxdke+kp=d+kpke(ke+kp)Fd\u0338=xd,5where (1) has been used. Accordingly, the steady-state contact force isFE=ke(xE\u2212d) =kpke+kpFd,which is never equal to the desired one, even for arbitrary large but \ufb01nite values of kp.A better control design is achieved by adding to the law (2) a term that nominally cancels theinteraction force, i.e.,u=kp(xd\u2212x)\u2212kd\u02d9x+ke(x\u2212d), withkp>0 andkd>0. (3)When in contact, the associated closed-loop equation ism\u00a8x+kd\u02d9x+kpx=kpxd,which is an asymptotically stable system driven by the constant signal kpxd, converging at steadystate to the desired position x=xd, thus with Fc=Fd.Unfortunately, an uncertain value of the environment stiffness (which appears twice in the controllaw, namely in the de\ufb01nition of xdin (1) and in the term compensating the interaction force in (3))would lead to a residual force error at steady state. In practice, we can implement onlyu=kp(\u02c6xd\u2212x)\u2212kd\u02d9x+\u02c6ke(x\u2212d), withkp>0 andkd>0. (4)where \u02c6keis an estimate of keand \u02c6xd=d+(Fd/\u02c6ke). For the time being, assume that dis accuratelyknown, so that the last term in (4) is present only when x\u2265d(otherwise is zero). When in contact,the closed-loop equation becomesm\u00a8x+kd\u02d9x+(kp+ke\u2212\u02c6ke)x=kp\u02c6xd+(ke\u2212\u02c6ke)d=(kp+ke\u2212\u02c6ke)d+kp\u02c6keFd. (5)Provided that the proportional gain kpin the control law (4) is sufficiently large, i.e.,kp\u2265\u03b1>\u23d0\u23d0\u23d0ke\u2212\u02c6ke\u23d0\u23d0\u23d0\u22650, (6)it is easy to see that system (5) will remain asymptotically stable. Its position and contact forceconverge respectively toxE=d+kp\u02c6ke(kp+ke\u2212\u02c6ke)Fd andFE=(ke\u02c6ke)(kpkp+ke\u2212\u02c6ke)Fd\u0338=Fd.The last formula shows that by increasing kp\u2192\u221e (i.e., to very large values), one can certainlyneglect the effect of the estimation error ke\u2212\u02c6ke, but still notthe error due to the scaling factorke/\u02c6ke\u0338= 1.The analysis of the case when the position dof the environment is not accurately known is morecomplex. Again, the estimate \u02c6denters twice in place of dwithin the control law (4), explicitly inthe last term and implicitly through the de\ufb01nition of xd. Not having an accurate estimate of dmay lead to a wrong activation/deactivation of the term \u02c6ke(x\u2212\u02c6d), possibly in an inconsistent waywith respect to the true contact/no contact situation. A chattering behavior may thus result inthe proximity of the contact point. While a more detailed analysis of such a situation is possible,this is out of our scope here.6On the other hand, the above control laws are fully independent from the knowledge of the massvaluem, which only affects the behavior of the system during transient phases.Let us turn the attention to the case when a force sensor is available, whose measure Fmideallyprovides the contact force, orFm=Fc={ke(x\u2212d), x\u2265d,0, x<d.Then, we can implement a force control law of the formu=Fd+kf(Fd\u2212Fm)\u2212kd\u02d9x, withkf>0 andkd>0. (7)with a constant feedforward, a term proportional to the force error, and a velocity damping term(as before). When in contact, the resulting closed-loop equation ism\u00a8x+kd\u02d9x+ (1 +kf)ke(x\u2212d) = (1 +kf)Fd. (8)Equation (8) represents again an asymptotically stable system, whose position and contact forceconverge to their desired values, i.e.,xE=xd=d+1keFd andFE=Fd.Note that the same control law (7) can be applied also during a phase of no contact (when Fm= 0).In that case, the closed-loop equation takes the formm\u00a8x+kd\u02d9x= (1 +kf)Fd,and the (approaching) velocity of the peg will converge to the constant value\u02d9xE=1 +kfkdFd>0,and proceed in this way until contact is established.An alternative to the addition of the constant force feedforward Fdin (7) is the use of a PI controllaw on the force error ef=Fd\u2212Fm(withFm=Fc), still complemented by a velocity dampingterm, i.e.,u(t) =kf(Fd\u2212Fm(t))+ki\u222bt0(Fd\u2212Fm(\u03c4))d\u03c4\u2212kd\u02d9x(t),withkd>0,ki>0,and (at least) kf>0.(9)It can be shown that the control scheme obtained by using (9) is equivalent to closing in a unitaryfeedback loop the transfer functionG(s) =Fm(s)ef(s)=ke(kfs+ki)s(ms2+kds+ke), (10)yielding the closed-loop system W(s) =Fm(s)/Fd(s) =G(s)/(1 +G(s)). The denominator ofW(s) isdenW(s) =ms3+kds2+ (1 +kf)kes+kikeand, by the Routh criterion, its roots are all in the open left-hand side of the complex plane if andonly ifkd>0, ki>0, kf>mkikd\u22121.7Under these conditions, the closed-loop system is asymptotically stable and the force error efwillconverge to zero.As a matter of fact, both force control laws (7) and (9) achieve always their target, without theneed to know any of the parameters ke,m, ord. The cost of including a force sensor is paid backby the achieved robustness of the control laws that can be designed with the force measurements.", "robot": "unknown", "tags": ["horizontal"]},
 "192": {"file": "Robotics2_17.09.21.pdf", "date": "17-09-21", "num_ex": 0, "exam": "robo2", "question": "Consider the RP planar robot in Fig. 1, with the coordinates q= (q1,q2), the kinematic parameterL2, and the dynamic parameters dc2,m2,I1andI2de\ufb01ned therein.x0 I1 y0 p L2\u43a9!q1 q2 m2,I2dc2!'FFigure 1: A RP planar robot with the relevant variables and parameters.\u2022Provide the symbolic expression of the inertia matrix M(q), of the Coriolis and centrifugalvectorc(q,\u02d9q), and of the gravity vector g(q) when the plane ( x0,y0) is inclined with respectto the horizontal plane by an angle \u03b1\u2208[0,\u03c0/2] around the x0axis.\u2022Determine the symbolic expression of \u00a8q0\u2208R2, the joint acceleration when the robot startsfrom rest and the two actuators apply a torque \u03c4and a force Fas command inputs.\u2022Next, assume thati)\u03b1= 0 and the robot is at rest;ii)the second link is a uniform thin rod with mass m2and inertia I2= (m2L22)/12;iii)the torque and the force provided by the motors are bounded: |\u03c4|\u2264Tmax,|F|\u2264Fmax;iv)the prismatic joint has a limited symmetric range, with q2\u2208[\u2212L2,L2].In these conditions:a. Provide the expression of the squared norm \u2225\u00a8p0\u22252, where \u00a8p0\u2208R2is the end-effectoracceleration when the robot starts from rest. Verify that this quantity is a function ofqand sketch graphically this dependence.b. Analyze at least qualitatively how the con\ufb01gurations q\u2217minandq\u2217maxthat provide, re-spectively, the minimum and maximum of \u2225\u00a8p0\u22252change, when the inertia I1of the \ufb01rstlink is either much larger or much smaller than I2(by 1-2 orders of magnitude).1", "solution": "Following a Lagrangian approach, we compute \ufb01rst the kinetic energy T=T1+T2. We haveT1=12I1\u02d9q21, T 2=12m2\ued79\ued79\ued79\ued79ddt(q2cosq1q2sinq1)\ued79\ued79\ued79\ued792+12I2\u02d9q21=12(I2+m2q22)\u02d9q21+12m2\u02d9q22,and thus the diagonal inertia matrixM(q) =(I1+I2+m2q2200m2). (3)Using the Christoffel symbols, the Coriolis and centrifugal terms are easily computed from (3) asc(q,\u02d9q) =(2m2q2\u02d9q1\u02d9q2\u2212m2q2\u02d9q21).For the potential energy due to gravity, Ug=U1+U2, we have (up to a constant)U1= 0, U 2=m2(g0sin\u03b1)q2sinq1,and thusg(q) =(\u2202Ug(q)\u2202q)T=m2g0sin\u03b1(q2cosq1sinq1). (4)When the robot is at rest ( \u02d9q=0), the joint acceleration takes the expression\u00a8q0=\u00a8q|\u02d9q=0=M\u22121(q)((\u03c4F)\u2212g(q))=\uf8eb\uf8ec\uf8ec\uf8ed\u03c4\u2212m2g0sin\u03b1q2cosq1I1+I2+m2q22F\u2212m2g0sin\u03b1sinq1m2\uf8f6\uf8f7\uf8f7\uf8f8=(\u00a8q1\u00a8q2). (5)The end-effector position and its velocity arep= (q2+dc2)(cosq1sinq1), \u02d9p= \u02d9q2(cosq1sinq1)+ (q2+dc2) \u02d9q1(\u2212sinq1cosq1).Thus, the end-effector acceleration at zero joint velocity is\u00a8p0=\u00a8p|\u02d9q=0= \u00a8q2(cosq1sinq1)+ (q2+dc2) \u00a8q1(\u2212sinq1cosq1)=(cosq1\u2212sinq1sinq1cosq1)(\u00a8q2(q2+dc2) \u00a8q1)=R(q1)(\u00a8q2(q2+dc2) \u00a8q1),(6)whereR(\u00b7) is a 2\u00d72 (planar) rotation matrix. From (6), we have\u2225\u00a8p0\u22252=\u00a8pT0\u00a8p0=\ued79\ued79\ued79\ued79\u00a8q2(q2+dc2) \u00a8q1\ued79\ued79\ued79\ued792= (q2+dc2)2\u00a8q21+ \u00a8q22. (7)3Using (5) for \u03b1= 0 in (7), we obtain\u2225\u00a8p0\u22252=1m22F2+(q2+dc2)2(I1+I2+m2q22)2\u03c42, (8)which shows an actual dependence only on the prismatic joint variable q2. The two addends in (8)are separately driven by the two motors: the \ufb01rst one is a radial contribution due to F, which isscaled just by m22and is independent from the robot con\ufb01guration; the second one is the tangentialcontribution (normal to the second link) due to \u03c4, which depends in a nonlinear fashion on q2, aswell as onm2,dc2,I1, andI2(and their relative values).It is easy to see that the minimum of \u2225\u00a8p0\u22252is obtained at q\u22172,min =\u2212dc2(with arbitrary q\u22171),namely when the end-effector position is at the origin (on the axis of joint 1). Note also that thisvalue is independent from the dynamic parameters m2,I1, andI2.From the expression (8), it follows that the maximum value Hof the squared norm of the accel-eration is given byH=F2maxm22+ maxq2\u2208[\u2212L2,L2](q2+dc2)2(I1+I2+m2q22)2\u03c42max,where the maximum bounds on the inputs have been used. Under the given assumption on themass distribution of link 2, in order to \ufb01nd the absolute maximum of the tangential contributionin\u2225\u00a8p0\u22252one should study the behavior of the positive functionh(q2) =(q2+dc2I1+I2+m2q22)2=\uf8eb\uf8edq2+L22I1+m2(L2212+q22)\uf8f6\uf8f82forq2in the closed interval [ \u2212L2,L2]. The stationary points of hsatisfy the necessary conditiondh(q2)dq2= 0\u21d0\u21d2 2\uf8eb\uf8edq2+L22I1+m2(L2212+q22)\uf8f6\uf8f8I1+m2(L2212+q22)\u22122m2q2(q2+L22)(I1+m2(L2212+q22))2= 0\u21d0\u21d2(q2+L22)(m2q22+m2L2q2\u2212(I1+m2L2212))(I1+m2(L2212+q22))3= 0.The zeros of the derivative occur where one of the two polynomial factors (one linear, the otherquadratic) at the numerator vanishes. This occurs at1q2=q\u22172,min=\u2212L22\u21d2 a minimum of h(q2)and atq2=q\u22172,max =\u2212L22+\u221a(L22)2+I1m2+L2212\u21d2 a maximum \u2014only if \u2208[\u2212L2,L2].For very large values of the ratio I1/I2\u221dI1/m2, this second expression will be larger than L2,and thus outside the closed interval of de\ufb01nition for q2. Therefore, the maximum will occur at the1The second root of the quadratic factor is always strictly lower than \u2212L2, thus outside the interval [ \u2212L2, L2].4upper limit, i.e., q\u22172,max =L2. On the other hand, for very small values of I1/m2, neglecting thisterm and using a Taylor expansion yields q\u22172,max\u2248L2/12.As a numerical example, Fig. 3 shows the plots of h(q2) for various ratios of I1/I2, when thesecond link is a uniform thin rod of mass m2= 1 [kg] and length L2= 0.5 [m]. For instance, whenI1/I2= 50 (red pro\ufb01le on the left), the maximum is at q\u22172,max =L2= 0.5. On the other hand,whenI1/I2= 0.01 (red pro\ufb01le on the right), the maximum is at q\u22172,max\u2248L2/12 = 0.04 [m].\u22120.5 \u22120.4 \u22120.3 \u22120.2 \u22120.1 0 0.1 0.2 0.3 0.4 0.500.511.522.53q2acceleration factorM2 = 1,  L2 = 0.5,  LC2 = 0.25,  I2 = 0.020833,  I1 = I2*[50 (red), 20 (green), 10 (blue)]\u22120.5 \u22120.4 \u22120.3 \u22120.2 \u22120.1 0 0.1 0.2 0.3 0.4 0.5020406080100120140160180q2acceleration factorM2 = 1,  L2 = 0.5,  LC2 = 0.25,  I2 = 0.020833,  I1 = I2*[1 (blue), 0.1 (green), 0.01 (red)]Figure 3: Behavior of the h(q2) function, for various ratios I1/I2: high ratios 50 ,20,10 (left) andlow ratios = 1 ,0.1,0.01 (right).The physical explanation of these behaviors is as follows. When the inertia of the \ufb01rst link isvery large, this constant inertia will dominate the effort needed by the \ufb01rst motor to acceleratethe robot structure and so the maximum tangential component of the end-effector accelerationwill be obtained when the second link is fully stretched. On the other hand, when the \ufb01rst linkinertia can be assumed as negligible in the picture, the maximum tangential acceleration of theend-effector will result from the trade-off between two contrasting effects: the ampli\ufb01cation of thejoint acceleration due to a longer radial extension of the second link and its reduction due to theassociated larger inertia seen by the \ufb01rst motor torque. Thus, qualitatively speaking, the peak willbe somewhere in between q2= 0 andq2=L2.Note \ufb01nally that when the location of the center of mass of the second link (with non-uniformlydistributed mass) approaches the tip of the link ( dc2= 0), the above qualitative behavior remainsthe same, but the plots in Fig. 3 will become symmetric w.r.t. q2= 0, with the single minimum atq\u22172,min= 0 and two maxima in \u00b1|q\u22172,max|\u2208[\u2212L2,L2].", "robot": "RP", "tags": ["planar", "horizontal"]},
 "193": {"file": "Robotics2_17.09.21.pdf", "date": "17-09-21", "num_ex": 1, "exam": "robo2", "question": "A lightweight 6R robot with a spherical wrist operates in a working environment where a humanis occasionally present. During normal operation, the robot task is to track accurately a desiredsmooth trajectory pd(t) for the end-effector position p=fp(q)\u2208R3and an associated desiredtrajectory\u03c6d(t) for a minimal representation of the end-effector orientation \u03c6=f\u03c6(q)\u2208R3.Assume that:\u2022The complete dynamic model of the robot in free motion is perfectly known, and is described(with the usual notations) by the following equationsM(q)\u00a8q+C(q,\u02d9q)\u02d9q+g(q) =\u03c4\u2212\u03c4f(\u02d9q), (1)where the friction term \u03c4fdenotes a dissipative action at the joints.\u2022The direct kinematic functions fpandf\u03c6are known, as well as the 6 \u00d76 analytic Jacobianassociated to the end-effector taskJ(q) =\uf8eb\uf8ed\u2202fp(q)\u2202q\u2202f\u03c6(q)\u2202q\uf8f6\uf8f8=(Jp(q)J\u03c6(q)), (2)where the two matrices JpandJ\u03c6have dimension 3 \u00d76, and matrix Jis nonsingular in theregion of interest.\u2022The robot is equipped only with encoders at the joints, and the environment is notmonitoredby any external sensor.state A condition A \u02f0 B state B state C condition B \u02f0 A condition B \u02f0 C condition A \u02f0 C control law C control law A control law BFigure 2: A state diagram of robot control operation in collision-aware tasks.With reference to the state diagram in Fig. 2, the following collision-aware behavior for safe Human-Robot Interaction (HRI) should be realized through a suitable set of robot control laws and con-ditions for the transitions:\u2022During normal operation (state Ain the diagram), if a mild contact occurs and is detected,the robot keeps the three-dimensional position task but relaxes the orientation task, tryingto accommodate in this way a re\ufb02ex reaction to the contact (state B).\u2022Instead, when a severe collision occurs during normal operation, the robot abandons the taskcompletely by bouncing away from the collision area (state C) ad then stops.\u2022While in state B, the robot may either switch back to normal operation when the contactis no longer present, or abandon also the orientation task and switch to state Cin case theinteraction forces will increase further.Specify the control laws and the transition conditions to be used in the state diagram of Fig. 2.[150 minutes; open books]2", "solution": "The problem can be solved by using the residual vector ras a collision monitoring signal, togetherwith a number of ordered positive thresholds on its norm \u2225r\u2225to be used in the switching conditions,and suitable control laws for each state.Based on the known model (1), the residual r\u2208R6can be de\ufb01ned asr(t) =K(M(q)\u02d9q\u2212\u222bt0(\u03c4+CT(q,\u02d9q)\u02d9q\u2212g(q)\u2212\u03c4f(\u02d9q) +r)ds),withK>0 (diagonal),(9)where\u03c4is the actual control torque applied in any of the robot states A,B, orC. Using (1),5equation (9) implies the dynamic behavior\u02d9r=K(\u03c4c\u2212r), (10)where\u03c4c\u2208R6is the joint torque resulting from a collision force/moment occurring anywhere alongthe robot structure. Indeed, if at some time tthe torque\u03c4creturns to zero, then each componentofrwill decay exponentially to zero as well. Moreover, for a sufficiently large K, from (10) wecan use the approximation \u03c4C\u2243rand use the residual vector ras a proxy of the unknown jointtorque\u03c4cdue to collision.With reference to Fig. 2, in the following suitable control laws will be de\ufb01ned for each state.\u2022Control in state A. De\ufb01ne the desired task trajectory as xd(t) =(pTd(t)\u03c6Td(t))T\u2208R6. Inorder to accurately follow this smooth trajectory, we use the Cartesian feedback linearizationcontroller\u03c4=M(q)J\u22121(q)(\u00a8xd+KD(\u02d9xd\u2212J(q)\u02d9q) +KP(xd\u2212f(q))\u2212\u02d9J(q)\u02d9q)+C(q,\u02d9q)\u02d9q+g(q) +\u03c4f(\u02d9q),(11)with 6\u00d76 (typically diagonal) gain matrices KP>0 andKD>0. Within this law, thepresence of a PD action on the task error allows to recover exponentially transient errors.This is necessary, e.g., when the complete task is partially abandoned and then resumed (incase we are coming back to state Afrom stateB).\u2022Control in state B. In this case, the orientation part of the desired task will be relaxed,while the position task pd(t)\u2208R3for the robot end-effector should be kept. Therefore,the robot becomes kinematically redundant since the task has dimension m= 3 while therobot hasn= 6 control commands available; the degree of redundancy is thus n\u2212m= 3.We continue to achieve Cartesian position tracking, e.g., by using a dynamically consistentredundancy resolution scheme. This control scheme uses the 3 \u00d76 JacobianJpin a partiallyfeedback linearizing law that is weighted by the inverse of the task inertia matrix \u039b(q) andadds a suitable torque \u03c40\u2208R6projected in the dynamic null space of the task. We havethus\u03c4=JTp(q)\u039b(q)(\u00a8pd+KD,p(\u02d9pd\u2212Jp(q)\u02d9q) +KP,p(pd\u2212fp(q))\u2212\u02d9Jp(q)\u02d9q+Jp(q)M\u22121(q) (C(q,\u02d9q)\u02d9q+g(q) +\u03c4f(\u02d9q))),+(I\u2212JT(q)\u039b(q)J(q)M\u22121(q))\u03c40,(12)with 3\u00d73 (typically diagonal) gain matrices KP,p>0 andKD,p>0, and the 3\u00d73 inertiamatrix reduced to the task\u039b(q) =(Jp(q)M\u22121(q)JTp(q))\u22121.In (12), the torque \u03c40=Krris used, with Kr>0, so as to obtain a reaction to the collisiontorque\u03c4c\u2243rwhich is consistent with the remaining Cartesian position task.\u2022Control in state C. In this case, the complete original task is abandoned. The robot reactsto the collision in a stronger or weaker way depending on the intensity (and direction in the6joint space) of r, which is a proxy of the severity of the collision. Moreover, to avoid bias inthe reaction due to the gravity, this term should be cancelled. As a result\u03c4=g(q) +Krr (13)withKr>0. Once the contact is lost, rwill go to zero. As a result, thanks of the presenceof friction, the robot will come to a stop in a zero-gravity condition. Joint velocity dampingcan be added so as to anticipate the instant when the robot is \ufb01nally at rest, but this willlimit quick reaction to collisions.Transitions between the states in Fig. 2 will be driven by the actual value of \u2225r\u2225\u22650. To this end,de\ufb01ne a sequence of positive thresholds for this variable:0<rlow<rmild<rsevere.The valuerlowis the minimum threshold that should be crossed by \u2225r\u2225in order to detect reliablycontact/collision events (i.e., obtaining few false positives, or eliminating them). The detectioninstanttdetect\u22650 is the \ufb01rst instant at which \u2225r(tdetect )\u2225\u2265rlow. For the choice of this lowestthreshold, one takes into account the presence of noise in position sensing and in the generationof an estimate of the velocity \u02d9qby numerical differentiation of the position measures q, as wellas the remaining model uncertainties. For the two other thresholds, the rationale is that mildcollisions will generate small values of the norm of the residual and, conversely, severe collisionswill be associated to large values of r. The value rmildis chosen only slightly above rlow, so thatthe control system may detect a contact but not yet consider it as a collision, letting thus the robotcontinue the original motion task. With this in mind, the following switching conditions correctlyrealize the desired behavior:\u2022condition A\u21d2B:rmild\u2264\u2225r\u2225<rsevere ;\u2022condition A\u21d2C:\u2225r\u2225\u2265rsevere ;\u2022condition B\u21d2C:\u2225r\u2225\u2265rsevere ;\u2022condition B\u21d2A:\u2225r\u2225<rlow.Note that the last condition may be replaced also by \u2225r\u2225< rmild. However, using the moreconservative value rlowintroduces some hysteresis, so that the robot will avoid switching severaltimes between the states AandBwhen the norm of the residual is oscillating around rmild.", "robot": "6R", "tags": []},
 "194": {"file": "Robotics2_10.06.15.pdf", "date": "10-06-15", "num_ex": 0, "exam": "robo2", "question": "For the planar RP robot under gravity shown in Fig. 1, consider a class of one-dimensional tasksde\ufb01ned only in terms of the y-component of the end-effector Cartesian positiony=py(q1,q2).q1 q2 y0 m1,I1 m2,I2 g0 x0 P d2Figure 1: RP robot in the vertical plane, with de\ufb01nition of coordinates ( d2>0 is a constant)Noting that the robot is redundant for this class of tasks, determine the explicit expression of theactuation input \u03c4= (\u03c41,\u03c42) that, at a generic robot state ( q,\u02d9q), realizes a desired \u00a8 yd=Aand hasthe minimum norm property.[90 minutes; open books]1", "solution": "The dynamic model of the RP robotB(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4 (1)should be obtained \ufb01rst.With reference to Fig. 1, the robot kinetic energy Tis given byT1=12I1\u02d9q21T2=12m2\u2225vc2\u22252+12I2\u02d9q21=12(I2+m2q22) \u02d9q21+12m2\u02d9q22T=T1+T2=12\u02d9qTB(q)\u02d9q\u21d2B(q) =(I1+I2+m2q2200m2)=(b11(q2) 00b22).Using the Christoffel\u2019s symbols for the components of the velocity vector c(q,\u02d9q)ci(q,\u02d9q) =\u02d9qTCi(q)\u02d9q C i(q) =12((\u2202bi(q)\u2202q)+(\u2202bi(q)\u2202q)T\u2212(\u2202B(q)\u2202qi))i= 1,2,the Coriolis and centrifugal terms are determined as follows:C1(q) =(0m2q2m2q2 0)\u21d2c1(q2,\u02d9q1,\u02d9q2) = 2m2q2\u02d9q1\u02d9q2C2(q) =(\u22122m2q200 0)\u21d2c2(q1,\u02d9q1) =\u2212m2q2\u02d9q21.The robot potential energy Uis given byU1=U10U2=m2g0q2sinq1+U20U=U1+U2=m2g0q2sinq1+U10+U20\u21d2g(q) =(\u2202U(q)\u2202q)T=(m2g0q2cosq1m2g0sinq1)=(g1(q1,q2)g2(q1)),withg0= 9.81>0.The direct kinematics associated to the end-effector position of the RP robot isp=(pxpy)=((d2+q2) cosq1(d2+q2) sinq1),whered2>0 is the constant length shown in Fig. 1. Being the task de\ufb01ned only in terms of thepycomponent, it is\u02d9py=((d2+q2) cosq1sinq1)\u02d9q=J(q)\u02d9qand then\u00a8py=J(q)\u00a8q+\u02d9J(q)\u02d9q=J(q)\u00a8q+(cosq1\u02d9q2\u2212(d2+q2) sinq1\u02d9q1cosq1\u02d9q1)\u02d9q. (2)2Note that the task Jacobian Jis singular if and only if sin q1= 0 andq2=\u2212d2.Replacing in (2) the accelerations \u00a8qfrom (1) yields\u00a8py=J(q)B\u22121(q) (\u03c4\u2212c(q,\u02d9q)\u2212g(q)) + \u02d9J(q)\u02d9qSetting then \u00a8 py=Aand reorganizing terms, we obtainM(q)\u03c4=A\u2212\u02d9J(q)\u02d9q+J(q)B\u22121(q) (c(q,\u02d9q) +g(q)) =:d(q,\u02d9q),having de\ufb01ned alsoM(q) =J(q)B\u22121(q) =((d2+q2) cosq1b11(q2)sinq1b22).At a generic robot state ( q,\u02d9q), the question at hand is then formulated as a linear-quadraticoptimization problem in the standard formmin12\u2225\u03c4\u22252=12(\u03c421+\u03c422)s.t.M\u03c4 =d.The optimal solution is simply\u03c4\u2217=M#d, (3)where all quantities have been already de\ufb01ned. In explicit terms, in case of full (row) rank Mwehave1M#=B\u22121JT(JB\u22122JT)\u22121.In particular, out of the singularities of the 1 \u00d72 matrixM, which coincide with those of the taskJacobianJ, the pseudoinverse of Mhas the explicit expressionM#(q) =1((d2+q2) cosq1b11(q2))2+(sinq1b22)2\uf8eb\uf8ec\uf8ec\uf8ec\uf8ed(d2+q2) cosq1b11(q2)sinq1b22\uf8f6\uf8f7\uf8f7\uf8f7\uf8f8.The optimal solution (3) implies that both joints/actuators are typically involved in this one-dimensional task. Although in general the task could have been realized also by actuating only asingle joint (the revolute or the prismatic one), the combination results in the minimum actuationeffort.It should be remarked that the norm of \u03c4has a dimensionality problem. In fact, the \ufb01rstactuation input is a torque (on the revolute joint) and the second is a force (on the prismaticjoint), so that physical units are mixed in computing the norm. A way to handle this problem isto introduce a proper scaling in the objective function, i.e., considering a positive de\ufb01nite diagonalmatrixW= diag{1,w}>0 and minimizing12\u03c4TW\u03c4 =12(\u03c421+w\u03c422),1Note also that in general M#= (JB\u22121)#\u0338=BJ#. The equality holds if B=b\u00b7I, for a scalar b.3where the scalar w > 0 takes into account how costly a unit of torque is in comparison to a unitof force. The associated solution is then obtained by replacing the pseudoinverse of Min (3) byits weighted pseudoinverseM#W=W\u22121MT(MW\u22121MT)\u22121.Finally, it is worth mentioning that the above local solution with minimum norm of the actua-tion inputs is prone to an internal build up of joint velocities, especially for long task trajectories.A countermeasure to this phenomenon is to choose a solution of the form\u03c4=M#d+(I\u2212M#M)\u03c40, (4)with\u03c40=\u2212KD\u02d9qand whereKDis a diagonal, positive de\ufb01nite matrix. The additional torque\u03c40damps the joint velocity \u02d9q, without affecting the execution of the task. It is also easy to seethat (4) is the solution to the following modi\ufb01ed linear-quadratic optimization problemmin12(\u03c4\u2212\u03c40)T(\u03c4\u2212\u03c40) s.t.M\u03c4 =d.", "robot": "RP", "tags": ["planar", "vertical"]},
 "195": {"file": "Robotics2_17.01.11.pdf", "date": "17-01-11", "num_ex": 0, "exam": "robo2", "question": "x0 y0 q1 q2 g0 x1 z1 y2 \u43a9 x2 \u43a9Figure 1: A 2R polar robot with associated link frames.The 2R polar robot shown in Fig. 1 moves in the presence of gravity and has links of cylindricform and uniformly distributed mass. Its dynamic model isB(q)\u00a8q+c(q,\u02d9q) +g(q) =\u03c4,whereB(q) =(a1+a2sin2q200 a3),c(q,\u02d9q) =(2a2sinq2cosq2\u02d9q1\u02d9q2\u2212a2sinq2cosq2\u02d9q21),g(q) =(0a4cosq2).witha1=I1y+I2y+m2d22,a2=I2x\u2212I2y\u2212m2d22,a3=I2z+m2d22, and a4=m2g0d2.\u2022Give a physical interpretation of the inertia matrix elements that con\ufb01rms their correctness.\u2022Write down all expressions of feedback control laws for \u03c4that you are aware of, whichguarantee regulation to a desired (generic) constant con\ufb01guration qd. Specify for each lawthe design conditions for success and the type of convergence/stability achieved.", "solution": "<EMPTY>", "robot": "2R", "tags": []},
 "196": {"file": "Robotics2_17.01.11.pdf", "date": "17-01-11", "num_ex": 1, "exam": "robo2", "question": "In inverse dynamics problems for serial manipulators, the most efficient implementations are basedon a numerical Newton-Euler (NE) algorithm that contains a forward recursive (FR) part, whichcomputes from the base to the tip all relevant differential kinematic terms associated to the links,and a backward recursive (BR) part, which computes from the tip to the base the exchangedforces/torques between links. Suppose now that we compute the (linear/angular) accelerationvector \u00a8p\u2208R6of the end-effector by\u00a8p=NEFR (q,\u02d9q,\u00a8q) =J(q)\u00a8q+\u02d9J(q)\u02d9q,where NEFR denotes compactly the FR part only of the NE algorithm.\u2022How can the NEFR algorithm be used to evaluate numerically and separately the JacobianmatrixJand the product term \u02d9J\u02d9q? How many times is the algorithm called in total?\u2022With the same algorithm, can we evaluate also the matrix \u02d9Jalone? If so, how?1", "solution": "<EMPTY>", "robot": "unknown", "tags": []},
 "197": {"file": "Robotics2_17.01.11.pdf", "date": "17-01-11", "num_ex": 2, "exam": "robo2", "question": "Consider a planar 3R robot with unitary link lengths. Taking into account robot redundancy, akinematic control scheme is active at the velocity level so as to track a desired end-effector positiontrajectory, while trying to locally maximize the minimum Cartesian distance of the robot bodyfrom obstacles.x0 y0 0.5 P ! 1+53/6vFigure 2: A planar 3R robot moving its end effector in the presence of an obstacle.\u2022In the shown con\ufb01guration q= (30\u25e6,\u221230\u25e6,30\u25e6) and with a single obstacle placed as in Fig. 2,the robot end effector is assigned a unitary velocity vin the positive x0direction. Specify oneparticular kinematic control scheme achieving at best both tasks, and provide the associatednumerical value of the command vector \u02d9q\u2208R3.\u2022Compare with a minimum velocity norm solution that neglects the presence of the obstacle.[180 minutes; open books but no computer or smartphone]2", "solution": "<EMPTY>", "robot": "3R", "tags": ["planar"]}}